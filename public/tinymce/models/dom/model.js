!function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.ModelManager");let r=(e,t,r)=>{var o;return!!r(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},o=e=>{let t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&r(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t},l=e=>t=>o(t)===e,n=e=>t=>typeof t===e,s=e=>t=>e===t,a=l("string"),i=l("object"),m=l("array"),c=s(null),d=n("boolean"),u=s(void 0),f=e=>null==e,g=e=>!f(e),h=n("function"),p=n("number"),b=()=>{},w=(e,t)=>(...r)=>e(t.apply(null,r)),v=(e,t)=>r=>e(t(r)),y=e=>()=>e,C=e=>e,T=(e,t)=>e===t;function x(e,...t){return(...r)=>{let o=t.concat(r);return e.apply(null,o)}}let S=e=>t=>!e(t),R=e=>()=>{throw Error(e)},D=e=>e(),O=y(!1),k=y(!0);class E{constructor(e,t){this.tag=e,this.value=t}static some(e){return new E(!0,e)}static none(){return E.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?E.some(e(this.value)):E.none()}bind(e){return this.tag?e(this.value):E.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:E.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw Error(null!=e?e:"Called getOrDie on None")}static from(e){return g(e)?E.some(e):E.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}E.singletonNone=new E(!1);let A=Array.prototype.slice,B=Array.prototype.indexOf,N=Array.prototype.push,z=(e,t)=>B.call(e,t),_=(e,t)=>z(e,t)>-1,j=(e,t)=>{for(let r=0,o=e.length;r<o;r++)if(t(e[r],r))return!0;return!1},W=(e,t)=>{let r=[];for(let o=0;o<e;o++)r.push(t(o));return r},L=(e,t)=>{let r=e.length,o=Array(r);for(let l=0;l<r;l++){let r=e[l];o[l]=t(r,l)}return o},M=(e,t)=>{for(let r=0,o=e.length;r<o;r++)t(e[r],r)},I=(e,t)=>{for(let r=e.length-1;r>=0;r--)t(e[r],r)},P=(e,t)=>{let r=[],o=[];for(let l=0,n=e.length;l<n;l++){let n=e[l];(t(n,l)?r:o).push(n)}return{pass:r,fail:o}},F=(e,t)=>{let r=[];for(let o=0,l=e.length;o<l;o++){let l=e[o];t(l,o)&&r.push(l)}return r},H=(e,t,r)=>(I(e,(e,o)=>{r=t(r,e,o)}),r),$=(e,t,r)=>(M(e,(e,o)=>{r=t(r,e,o)}),r),V=(e,t,r)=>{for(let o=0,l=e.length;o<l;o++){let l=e[o];if(t(l,o))return E.some(l);if(r(l,o))break}return E.none()},q=(e,t)=>V(e,t,O),U=(e,t)=>{for(let r=0,o=e.length;r<o;r++)if(t(e[r],r))return E.some(r);return E.none()},G=e=>{let t=[];for(let r=0,o=e.length;r<o;++r){if(!m(e[r]))throw Error("Arr.flatten item "+r+" was not an array, input: "+e);N.apply(t,e[r])}return t},K=(e,t)=>G(L(e,t)),Y=(e,t)=>{for(let r=0,o=e.length;r<o;++r)if(!0!==t(e[r],r))return!1;return!0},J=e=>{let t=A.call(e,0);return t.reverse(),t},Q=(e,t)=>{let r={};for(let o=0,l=e.length;o<l;o++){let l=e[o];r[String(l)]=t(l,o)}return r},X=(e,t)=>{let r=A.call(e,0);return r.sort(t),r},Z=(e,t)=>t>=0&&t<e.length?E.some(e[t]):E.none(),ee=e=>Z(e,0),et=e=>Z(e,e.length-1),er=(e,t)=>{for(let r=0;r<e.length;r++){let o=t(e[r],r);if(o.isSome())return o}return E.none()},eo=Object.keys,el=Object.hasOwnProperty,en=(e,t)=>{let r=eo(e);for(let o=0,l=r.length;o<l;o++){let l=r[o];t(e[l],l)}},es=(e,t)=>ea(e,(e,r)=>({k:r,v:t(e,r)})),ea=(e,t)=>{let r={};return en(e,(e,o)=>{let l=t(e,o);r[l.k]=l.v}),r},ei=e=>(t,r)=>{e[r]=t},em=(e,t,r,o)=>{en(e,(e,l)=>{(t(e,l)?r:o)(e,l)})},ec=(e,t)=>{let r={};return em(e,t,ei(r),b),r},ed=(e,t)=>{let r=[];return en(e,(e,o)=>{r.push(t(e,o))}),r},eu=e=>ed(e,C),ef=(e,t)=>eg(e,t)?E.from(e[t]):E.none(),eg=(e,t)=>el.call(e,t),eh=(e,t)=>eg(e,t)&&void 0!==e[t]&&null!==e[t],ep=e=>{for(let t in e)if(el.call(e,t))return!1;return!0},eb="undefined"!=typeof window?window:Function("return this;")(),ew=(e,t)=>{let r=null!=t?t:eb;for(let t=0;t<e.length&&null!=r;++t)r=r[e[t]];return r},ev=(e,t)=>ew(e.split("."),t),ey=(e,t)=>ev(e,t),eC=(e,t)=>{let r=ey(e,t);if(null==r)throw Error(e+" not available on this browser");return r},eT=Object.getPrototypeOf,ex=e=>eC("HTMLElement",e),eS=e=>{let t=ev("ownerDocument.defaultView",e);return i(e)&&(ex(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(eT(e).constructor.name))},eR=e=>e.dom.nodeName.toLowerCase(),eD=e=>e.dom.nodeType,eO=e=>t=>eD(t)===e,ek=e=>8===eD(e)||"#comment"===eR(e),eE=e=>eA(e)&&eS(e.dom),eA=eO(1),eB=eO(3),eN=eO(9),ez=eO(11),e_=e=>t=>eA(t)&&eR(t)===e,ej=(e,t,r)=>{if(a(r)||d(r)||p(r))e.setAttribute(t,r+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),Error("Attribute value was not simple")},eW=(e,t,r)=>{ej(e.dom,t,r)},eL=(e,t)=>{let r=e.dom;en(t,(e,t)=>{ej(r,t,e)})},eM=(e,t)=>{en(t,(t,r)=>{t.fold(()=>{eF(e,r)},t=>{ej(e.dom,r,t)})})},eI=(e,t)=>{let r=e.dom.getAttribute(t);return null===r?void 0:r},eP=(e,t)=>E.from(eI(e,t)),eF=(e,t)=>{e.dom.removeAttribute(t)},eH=e=>$(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),e$=e=>{if(null==e)throw Error("Node cannot be null or undefined");return{dom:e}},eV={fromHtml:(e,t)=>{let r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){let t="HTML does not have a single root node";throw console.error(t,e),Error(t)}return e$(r.childNodes[0])},fromTag:(e,t)=>e$((t||document).createElement(e)),fromText:(e,t)=>e$((t||document).createTextNode(e)),fromDom:e$,fromPoint:(e,t,r)=>E.from(e.dom.elementFromPoint(t,r)).map(e$)},eq=(e,t)=>{let r=e.dom;if(1!==r.nodeType)return!1;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw Error("Browser lacks native selectors")},eU=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,eG=(e,t)=>{let r=void 0===t?document:t.dom;return eU(r)?[]:L(r.querySelectorAll(e),eV.fromDom)},eK=(e,t)=>{let r=void 0===t?document:t.dom;return eU(r)?E.none():E.from(r.querySelector(e)).map(eV.fromDom)},eY=(e,t)=>e.dom===t.dom,eJ=(e,t)=>{let r=e.dom,o=t.dom;return r!==o&&r.contains(o)},eQ=e=>eV.fromDom(e.dom.ownerDocument),eX=e=>eN(e)?e:eQ(e),eZ=e=>eV.fromDom(eX(e).dom.documentElement),e0=e=>eV.fromDom(eX(e).dom.defaultView),e1=e=>E.from(e.dom.parentNode).map(eV.fromDom),e9=e=>E.from(e.dom.parentElement).map(eV.fromDom),e3=(e,t)=>{let r=h(t)?t:O,o=e.dom,l=[];for(;null!==o.parentNode&&void 0!==o.parentNode;){let e=o.parentNode,t=eV.fromDom(e);if(l.push(t),!0===r(t))break;o=e}return l},e2=e=>E.from(e.dom.previousSibling).map(eV.fromDom),e5=e=>E.from(e.dom.nextSibling).map(eV.fromDom),e7=e=>L(e.dom.childNodes,eV.fromDom),e4=(e,t)=>{let r=e.dom.childNodes;return E.from(r[t]).map(eV.fromDom)},e6=e=>e4(e,0),e8=(e,t)=>{e1(e).each(r=>{r.dom.insertBefore(t.dom,e.dom)})},te=(e,t)=>{e5(e).fold(()=>{e1(e).each(e=>{tr(e,t)})},e=>{e8(e,t)})},tt=(e,t)=>{e6(e).fold(()=>{tr(e,t)},r=>{e.dom.insertBefore(t.dom,r.dom)})},tr=(e,t)=>{e.dom.appendChild(t.dom)},to=(e,t,r)=>{e4(e,r).fold(()=>{tr(e,t)},e=>{e8(e,t)})},tl=(e,t)=>{e8(e,t),tr(t,e)},tn=(e,t)=>{M(t,(r,o)=>{te(0===o?e:t[o-1],r)})},ts=(e,t)=>{M(t,t=>{tr(e,t)})},ta=e=>{e.dom.textContent="",M(e7(e),e=>{ti(e)})},ti=e=>{let t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},tm=e=>{let t=e7(e);t.length>0&&tn(e,t),ti(e)},tc=(e,t)=>eV.fromDom(e.dom.cloneNode(t)),td=e=>tc(e,!1),tu=e=>tc(e,!0),tf=(e,t)=>{let r=eV.fromTag(t);return eL(r,eH(e)),r},tg=(e,t)=>{let r=tf(e,t);return ts(r,e7(tu(e))),r},th=(e,t)=>{let r=tf(e,t);return te(e,r),ts(r,e7(e)),ti(e),r},tp=["tfoot","thead","tbody","colgroup"],tb=e=>_(tp,e),tw=(e,t)=>({rows:e,columns:t}),tv=(e,t)=>({row:e,column:t}),ty=(e,t,r)=>({element:e,rowspan:t,colspan:r}),tC=(e,t,r,o)=>({element:e,rowspan:t,colspan:r,isNew:o}),tT=(e,t,r,o,l,n)=>({element:e,rowspan:t,colspan:r,row:o,column:l,isLocked:n}),tx=(e,t,r)=>({element:e,cells:t,section:r}),tS=(e,t,r,o)=>({element:e,cells:t,section:r,isNew:o}),tR=(e,t,r)=>({element:e,isNew:t,isLocked:r}),tD=(e,t,r,o)=>({element:e,cells:t,section:r,isNew:o}),tO=(e,t,r,o)=>({startRow:e,startCol:t,finishRow:r,finishCol:o}),tk=(e,t,r)=>({element:e,colspan:t,column:r}),tE=(e,t)=>({element:e,columns:t}),tA=e=>ez(e)&&g(e.dom.host),tB=h(Element.prototype.attachShadow)&&h(Node.prototype.getRootNode),tN=y(tB),tz=tB?e=>eV.fromDom(e.dom.getRootNode()):eX,t_=e=>{let t=tz(e);return tA(t)?E.some(t):E.none()},tj=e=>eV.fromDom(e.dom.host),tW=e=>{if(tN()&&g(e.target)){let t=eV.fromDom(e.target);if(eA(t)&&tL(t)&&e.composed&&e.composedPath){let t=e.composedPath();if(t)return ee(t)}}return E.from(e.target)},tL=e=>g(e.dom.shadowRoot),tM=e=>{let t=eB(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;let r=t.ownerDocument;return t_(eV.fromDom(t)).fold(()=>r.body.contains(t),v(tM,tj))},tI=()=>tP(eV.fromDom(document)),tP=e=>{let t=e.dom.body;if(null==t)throw Error("Body is not available yet");return eV.fromDom(t)},tF=(e,t,r)=>F(e3(e,r),t),tH=(e,t)=>F(e7(e),t),t$=(e,t)=>{let r=[];return M(e7(e),e=>{t(e)&&(r=r.concat([e])),r=r.concat(t$(e,t))}),r},tV=(e,t,r)=>tF(e,e=>eq(e,t),r),tq=(e,t)=>tH(e,e=>eq(e,t)),tU=(e,t)=>eG(t,e);var tG=(e,t,r,o,l)=>e(r,o)?E.some(r):h(l)&&l(r)?E.none():t(r,o,l);let tK=(e,t,r)=>{let o=e.dom,l=h(r)?r:O;for(;o.parentNode;){o=o.parentNode;let e=eV.fromDom(o);if(t(e))return E.some(e);if(l(e))break}return E.none()},tY=(e,t,r)=>tG((e,t)=>t(e),tK,e,t,r),tJ=(e,t)=>q(e.dom.childNodes,e=>t(eV.fromDom(e))).map(eV.fromDom),tQ=(e,t)=>{let r=e=>{for(let o=0;o<e.childNodes.length;o++){let l=eV.fromDom(e.childNodes[o]);if(t(l))return E.some(l);let n=r(e.childNodes[o]);if(n.isSome())return n}return E.none()};return r(e.dom)},tX=(e,t,r)=>tK(e,e=>eq(e,t),r),tZ=(e,t)=>tJ(e,e=>eq(e,t)),t0=(e,t)=>eK(t,e),t1=(e,t,r)=>tG((e,t)=>eq(e,t),tX,e,t,r),t9=(e,t,r=T)=>e.exists(e=>r(e,t)),t3=e=>{let t=[],r=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(r);return t},t2=(e,t)=>null!=e?t(e):E.none(),t5=(e,t)=>e?E.some(t):E.none(),t7=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,t4=(e,t,r=0,o)=>{let l=e.indexOf(t,r);return -1!==l&&(!!u(o)||l+t.length<=o)},t6=(e,t)=>t7(e,t,0),t8=(e,t)=>t7(e,t,e.length-t.length),re=(e=/^\s+|\s+$/g,t=>t.replace(e,"")),rt=e=>e.length>0,rr=e=>{let t=parseFloat(e);return isNaN(t)?E.none():E.some(t)},ro=e=>void 0!==e.style&&h(e.style.getPropertyValue),rl=(e,t,r)=>{if(!a(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),Error("CSS value must be a string: "+r);ro(e)&&e.style.setProperty(t,r)},rn=(e,t)=>{ro(e)&&e.style.removeProperty(t)},rs=(e,t,r)=>{rl(e.dom,t,r)},ra=(e,t)=>{let r=e.dom;en(t,(e,t)=>{rl(r,t,e)})},ri=(e,t)=>{let r=e.dom,o=window.getComputedStyle(r).getPropertyValue(t);return""!==o||tM(e)?o:rm(r,t)},rm=(e,t)=>ro(e)?e.style.getPropertyValue(t):"",rc=(e,t)=>{let r=rm(e.dom,t);return E.from(r).filter(e=>e.length>0)},rd=(e,t)=>{rn(e.dom,t),t9(eP(e,"style").map(re),"")&&eF(e,"style")},ru=(e,t)=>{let r=e.dom,o=t.dom;ro(r)&&ro(o)&&(o.style.cssText=r.style.cssText)},rf=(e,t,r=0)=>eP(e,t).map(e=>parseInt(e,10)).getOr(r),rg=(e,t)=>rf(e,t,1),rh=e=>e_("col")(e)?rf(e,"span",1)>1:rg(e,"colspan")>1,rp=e=>rg(e,"rowspan")>1,rb=(e,t)=>parseInt(ri(e,t),10),rw=y(10),rv=y(10),ry=(e,t)=>rC(e,t,k),rC=(e,t,r)=>K(e7(e),e=>eq(e,t)?r(e)?[e]:[]:rC(e,t,r)),rT=(e,t,r=O)=>r(t)?E.none():_(e,eR(t))?E.some(t):tX(t,e.join(","),e=>eq(e,"table")||r(e)),rx=(e,t)=>rT(["td","th"],e,t),rS=e=>ry(e,"th,td"),rR=e=>eq(e,"colgroup")?tq(e,"col"):K(rk(e),e=>tq(e,"col")),rD=(e,t)=>t1(e,"table",t),rO=e=>ry(e,"tr"),rk=e=>rD(e).fold(y([]),e=>tq(e,"colgroup")),rE=(e,t)=>L(e,e=>{if("colgroup"===eR(e)){let t=L(rR(e),e=>{let t=rf(e,"span",1);return ty(e,1,t)});return tx(e,t,"colgroup")}{let r=L(rS(e),e=>{let t=rf(e,"rowspan",1),r=rf(e,"colspan",1);return ty(e,t,r)});return tx(e,r,t(e))}}),rA=e=>e1(e).map(e=>{let t=eR(e);return tb(t)?t:"tbody"}).getOr("tbody"),rB=e=>{let t=rO(e);return rE([...rk(e),...t],rA)},rN=(e,t)=>rE(e,()=>t),rz=e=>{let t,r=!1;return(...o)=>(r||(r=!0,t=e.apply(null,o)),t)},r_=(e,t,r,o)=>{let l=e.isiOS()&&!0===/ipad/i.test(r),n=e.isiOS()&&!l,s=e.isiOS()||e.isAndroid(),a=s||o("(pointer:coarse)"),i=l||!n&&s&&o("(min-device-width:768px)"),m=n||s&&!i,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r);return{isiPad:y(l),isiPhone:y(n),isTablet:y(i),isPhone:y(m),isTouch:y(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:y(c),isDesktop:y(!m&&!i&&!c)}},rj=(e,t)=>{for(let r=0;r<e.length;r++){let o=e[r];if(o.test(t))return o}},rW=(e,t)=>{let r=rj(e,t);if(!r)return{major:0,minor:0};let o=e=>Number(t.replace(r,"$"+e));return rM(o(1),o(2))},rL=()=>rM(0,0),rM=(e,t)=>({major:e,minor:t}),rI={nu:rM,detect:(e,t)=>{let r=String(t).toLowerCase();return 0===e.length?rL():rW(e,r)},unknown:rL},rP=(e,t)=>er(t.brands,t=>{let r=t.brand.toLowerCase();return q(e,e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:rI.nu(parseInt(t.version,10),0)}))}),rF=(e,t)=>{let r=String(t).toLowerCase();return q(e,e=>e.search(r))},rH=(e,t)=>rF(e,t).map(e=>{let r=rI.detect(e.versionRegexes,t);return{current:e.name,version:r}}),r$=(e,t)=>rF(e,t).map(e=>{let r=rI.detect(e.versionRegexes,t);return{current:e.name,version:r}}),rV=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rq=e=>t=>t4(t,e),rU=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>t4(e,"edge/")&&t4(e,"chrome")&&t4(e,"safari")&&t4(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,rV],search:e=>t4(e,"chrome")&&!t4(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>t4(e,"msie")||t4(e,"trident")},{name:"Opera",versionRegexes:[rV,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rq("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rq("firefox")},{name:"Safari",versionRegexes:[rV,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(t4(e,"safari")||t4(e,"mobile/"))&&t4(e,"applewebkit")}],rG=[{name:"Windows",search:rq("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>t4(e,"iphone")||t4(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rq("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:rq("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rq("linux"),versionRegexes:[]},{name:"Solaris",search:rq("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rq("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:rq("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],rK={browsers:y(rU),oses:y(rG)},rY="Edge",rJ="Chromium",rQ="Opera",rX="Firefox",rZ="Safari",r0=e=>{let t=e.current,r=e.version,o=e=>()=>t===e;return{current:t,version:r,isEdge:o(rY),isChromium:o(rJ),isIE:o("IE"),isOpera:o(rQ),isFirefox:o(rX),isSafari:o(rZ)}},r1={unknown:()=>r0({current:void 0,version:rI.unknown()}),nu:r0,edge:y(rY),chromium:y(rJ),ie:y("IE"),opera:y(rQ),firefox:y(rX),safari:y(rZ)},r9="Windows",r3="Android",r2="Linux",r5="macOS",r7="Solaris",r4="FreeBSD",r6="ChromeOS",r8=e=>{let t=e.current,r=e.version,o=e=>()=>t===e;return{current:t,version:r,isWindows:o(r9),isiOS:o("iOS"),isAndroid:o(r3),isMacOS:o(r5),isLinux:o(r2),isSolaris:o(r7),isFreeBSD:o(r4),isChromeOS:o(r6)}},oe={unknown:()=>r8({current:void 0,version:rI.unknown()}),nu:r8,windows:y(r9),ios:y("iOS"),android:y(r3),linux:y(r2),macos:y(r5),solaris:y(r7),freebsd:y(r4),chromeos:y(r6)},ot={detect:(e,t,r)=>{let o=rK.browsers(),l=rK.oses(),n=t.bind(e=>rP(o,e)).orThunk(()=>rH(o,e)).fold(r1.unknown,r1.nu),s=r$(l,e).fold(oe.unknown,oe.nu),a=r_(s,n,e,r);return{browser:n,os:s,deviceType:a}}},or=e=>window.matchMedia(e).matches,oo=rz(()=>ot.detect(navigator.userAgent,E.from(navigator.userAgentData),or)),ol=()=>oo(),on=(e,t)=>{let r=r=>{let o=t(r);return o<=0||null===o?parseFloat(ri(r,e))||0:o},o=(e,t)=>$(t,(t,r)=>{let o=ri(e,r),l=void 0===o?0:parseInt(o,10);return isNaN(l)?t:t+l},0);return{set:(t,r)=>{if(!p(r)&&!r.match(/^[0-9]+$/))throw Error(e+".set accepts only positive integer values. Value was "+r);let o=t.dom;ro(o)&&(o.style[e]=r+"px")},get:r,getOuter:r,aggregate:o,max:(e,t,r)=>{let l=o(e,r);return t>l?t-l:0}}},os=(e,t)=>rr(e).getOr(t),oa=(e,t,r)=>os(ri(e,t),r),oi=(e,t,r,o)=>{let l=oa(e,`padding-${r}`,0);return t-l-oa(e,`padding-${o}`,0)-oa(e,`border-${r}-width`,0)-oa(e,`border-${o}-width`,0)},om=(e,t)=>{let r=e.dom,o=r.getBoundingClientRect().width||r.offsetWidth;return"border-box"===t?o:oi(e,o,"left","right")},oc=on("width",e=>e.dom.offsetWidth),od=e=>oc.get(e),ou=e=>oc.getOuter(e),of=e=>om(e,"content-box"),og=e=>oa(e,"width",e.dom.offsetWidth),oh=(e,t,r)=>{let o=e.cells,l=o.slice(0,t),n=o.slice(t);return ow(e,l.concat(r).concat(n))},op=(e,t,r)=>oh(e,t,[r]),ob=(e,t,r)=>{e.cells[t]=r},ow=(e,t)=>tD(e.element,t,e.section,e.isNew),ov=(e,t)=>{let r=L(e.cells,t);return tD(e.element,r,e.section,e.isNew)},oy=(e,t)=>e.cells[t],oC=(e,t)=>oy(e,t).element,oT=e=>e.cells.length,ox=e=>{let t=P(e,e=>"colgroup"===e.section);return{rows:t.fail,cols:t.pass}},oS=(e,t,r)=>{let o=L(e.cells,r);return tD(t(e.element),o,e.section,!0)},oR="data-snooker-locked-cols",oD=e=>eP(e,oR).bind(e=>E.from(e.match(/\d+/g))).map(e=>Q(e,k)),oO=e=>X(ed($(ox(e).rows,(e,t)=>(M(t.cells,(t,r)=>{t.isLocked&&(e[r]=!0)}),e),{}),(e,t)=>parseInt(t,10))),ok=(e,t)=>e+","+t,oE=(e,t)=>F(K(e.all,e=>e.cells),t),oA=e=>{let t={},r=0;return M(e.cells,e=>{let o=e.colspan;W(o,l=>{let n=r+l;t[n]=tk(e.element,o,n)}),r+=o}),t},oB=e=>{let t={},r=[],o=ee(e).map(e=>e.element).bind(rD).bind(oD).getOr({}),l=0,n=0,s=0,{pass:a,fail:i}=P(e,e=>"colgroup"===e.section);M(i,e=>{let a=[];M(e.cells,e=>{let r=0;for(;void 0!==t[ok(s,r)];)r++;let l=eh(o,r.toString()),i=tT(e.element,e.rowspan,e.colspan,s,r,l);for(let o=0;o<e.colspan;o++)for(let l=0;l<e.rowspan;l++){let e=r+o;t[ok(s+l,e)]=i,n=Math.max(n,e+1)}a.push(i)}),l++,r.push(tx(e.element,a,e.section)),s++});let{columns:m,colgroups:c}=et(a).map(e=>{let t=oA(e);return{colgroups:[tE(e.element,eu(t))],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:tw(l,n),access:t,all:r,columns:m,colgroups:c}},oN={fromTable:e=>oB(rB(e)),generate:oB,getAt:(e,t,r)=>E.from(e.access[ok(t,r)]),findItem:(e,t,r)=>{let o=oE(e,e=>r(t,e.element));return o.length>0?E.some(o[0]):E.none()},filterItems:oE,justCells:e=>K(e.all,e=>e.cells),justColumns:e=>eu(e.columns),hasColumns:e=>eo(e.columns).length>0,getColumnAt:(e,t)=>E.from(e.columns[t])},oz=(e,t=k)=>{let r=e.grid,o=W(r.columns,C),l=W(r.rows,C);return L(o,r=>o_(()=>K(l,t=>oN.getAt(e,t,r).filter(e=>e.column===r).toArray()),e=>1===e.colspan&&t(e.element),()=>oN.getAt(e,0,r)))},o_=(e,t,r)=>{let o=e();return q(o,t).orThunk(()=>E.from(o[0]).orThunk(r)).map(e=>e.element)},oj=e=>{let t=e.grid,r=W(t.rows,C),o=W(t.columns,C);return L(r,t=>o_(()=>K(o,r=>oN.getAt(e,t,r).filter(e=>e.row===t).fold(y([]),e=>[e])),e=>1===e.rowspan,()=>oN.getAt(e,t,0)))},oW=(e,t)=>{if(t<0||t>=e.length-1)return E.none();let r=e[t].fold(()=>er(J(e.slice(0,t)),(e,t)=>e.map(e=>({value:e,delta:t+1}))),e=>E.some({value:e,delta:0})),o=e[t+1].fold(()=>er(e.slice(t+1),(e,t)=>e.map(e=>({value:e,delta:t+1}))),e=>E.some({value:e,delta:1}));return r.bind(e=>o.map(t=>{let r=t.delta+e.delta;return Math.abs(t.value-e.value)/r}))},oL=(e,t)=>r=>"rtl"===oM(r)?t:e,oM=e=>"rtl"===ri(e,"direction")?"rtl":"ltr",oI=on("height",e=>{let t=e.dom;return tM(e)?t.getBoundingClientRect().height:t.offsetHeight}),oP=e=>oI.get(e),oF=e=>oI.getOuter(e),oH=e=>oa(e,"height",e.dom.offsetHeight),o$=(e,t)=>({left:e,top:t,translate:(r,o)=>o$(e+r,t+o)}),oV=e=>{let t=e.getBoundingClientRect();return o$(t.left,t.top)},oq=(e,t)=>void 0!==e?e:void 0!==t?t:0,oU=e=>{let t=e.dom.ownerDocument,r=t.body,o=t.defaultView,l=t.documentElement;if(r===e.dom)return o$(r.offsetLeft,r.offsetTop);let n=oq(null==o?void 0:o.pageYOffset,l.scrollTop),s=oq(null==o?void 0:o.pageXOffset,l.scrollLeft),a=oq(l.clientTop,r.clientTop),i=oq(l.clientLeft,r.clientLeft);return oG(e).translate(s-i,n-a)},oG=e=>{let t=e.dom,r=t.ownerDocument.body;return r===t?o$(r.offsetLeft,r.offsetTop):tM(e)?oV(t):o$(0,0)},oK=(e,t)=>({row:e,y:t}),oY=(e,t)=>({col:e,x:t}),oJ=e=>oU(e).left+ou(e),oQ=e=>oU(e).left,oX=(e,t)=>oY(e,oQ(t)),oZ=(e,t)=>oY(e,oJ(t)),o0=e=>oU(e).top,o1=(e,t)=>oK(e,o0(t)),o9=(e,t)=>oK(e,o0(t)+oF(t)),o3=(e,t,r)=>{if(0===r.length)return[];let o=L(r.slice(1),(t,r)=>t.map(t=>e(r,t))),l=r[r.length-1].map(e=>t(r.length-1,e));return o.concat([l])},o2={delta:C,positions:e=>o3(o1,o9,e),edge:o0},o5=oL({delta:C,edge:oQ,positions:e=>o3(oX,oZ,e)},{delta:e=>-e,edge:oJ,positions:e=>o3(oZ,oX,e)}),o7={delta:(e,t)=>o5(t).delta(e,t),positions:(e,t)=>o5(t).positions(e,t),edge:e=>o5(e).edge(e)},o4={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},o6=(()=>{let e="[0-9]+",t="[eE][+-]?"+e,r=e=>`(?:${e})?`,o=["Infinity",e+"\\."+r(e)+r(t),"\\."+e+r(t),e+r(t)].join("|"),l=`[+-]?(?:${o})`;return RegExp(`^(${l})(.*)$`)})(),o8=(e,t)=>j(t,t=>j(o4[t],t=>e===t)),le=(e,t)=>E.from(o6.exec(e)).bind(e=>{let r=Number(e[1]),o=e[2];return o8(o,t)?E.some({value:r,unit:o}):E.none()}),lt=/(\d+(\.\d+)?)%/,lr=/(\d+(\.\d+)?)px|em/,lo=e_("col"),ll=(e,t,r)=>{let o=e9(e).getOrThunk(()=>tP(eQ(e)));return t(e)/r(o)*100},ln=(e,t)=>{rs(e,"width",t+"px")},ls=(e,t)=>{rs(e,"width",t+"%")},la=(e,t)=>{rs(e,"height",t+"px")},li=e=>oH(e)+"px",lm=(e,t,r,o)=>{let l=rD(e).map(e=>Math.floor(t/100*r(e))).getOr(t);return o(e,l),l},lc=(e,t,r,o)=>{let l=parseFloat(e);return t8(e,"%")&&"table"!==eR(t)?lm(t,l,r,o):l},ld=e=>{let t=li(e);return t?lc(t,e,oP,la):oP(e)},lu=(e,t,r)=>r(e)/rg(e,t),lf=(e,t)=>rc(e,t).orThunk(()=>eP(e,t).map(e=>e+"px")),lg=e=>lf(e,"width"),lh=e=>lf(e,"height"),lp=e=>ll(e,od,of),lb=e=>lo(e)?od(e):og(e),lw=e=>lu(e,"rowspan",ld),lv=e=>lg(e).bind(e=>le(e,["fixed","relative","empty"])),ly=(e,t,r)=>{rs(e,"width",t+r)},lC=e=>od(e)+"px",lT=e=>ll(e,od,of)+"%",lx=y(lt),lS=e_("col"),lR=e=>lg(e).getOrThunk(()=>lb(e)+"px"),lD=e=>lh(e).getOrThunk(()=>lw(e)+"px"),lO=e=>L(oN.justColumns(e),e=>E.from(e.element)),lk=e=>{let t=ol().browser,r=t.isChromium()||t.isFirefox();return!lS(e)||r},lE=(e,t,r,o,l,n)=>e.filter(o).fold(()=>n(oW(r,t)),e=>l(e)),lA=(e,t,r,o)=>{let l=oz(e),n=oN.hasColumns(e)?lO(e):l,s=[E.some(o7.edge(t))].concat(L(o7.positions(l,t),e=>e.map(e=>e.x))),a=S(rh);return L(n,(e,t)=>lE(e,t,s,a,e=>lk(e)?r(e):lE(t2(l[t],C),t,s,a,e=>o(E.some(od(e))),o),o))},lB=e=>e.map(e=>e+"px").getOr(""),lN=(e,t)=>lA(e,t,lR,lB),lz=(e,t,r)=>lA(e,t,lp,e=>e.fold(()=>r.minCellWidth(),e=>e/r.pixelWidth()*100)),l_=(e,t,r)=>lA(e,t,lb,e=>e.getOrThunk(r.minCellWidth)),lj=(e,t,r,o,l)=>{let n=oj(e),s=[E.some(r.edge(t))].concat(L(r.positions(n,t),e=>e.map(e=>e.y)));return L(n,(e,t)=>lE(e,t,s,S(rp),o,l))},lW=(e,t,r)=>lj(e,t,r,lw,e=>e.getOrThunk(rv)),lL=(e,t,r)=>lj(e,t,r,lD,lB),lM=(e,t)=>()=>tM(e)?t(e):parseFloat(rc(e,"width").getOr("0")),lI=e=>{let t=lM(e,od),r=y(0);return{width:t,pixelWidth:t,getWidths:(t,r)=>l_(t,e,r),getCellDelta:r,singleColumnWidth:y([0]),minCellWidth:r,setElementWidth:b,adjustTableWidth:b,isRelative:!0,label:"none"}},lP=e=>{let t=lM(e,e=>parseFloat(lT(e))),r=lM(e,od);return{width:t,pixelWidth:r,getWidths:(t,r)=>lz(t,e,r),getCellDelta:e=>e/r()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>rw()/r()*100,setElementWidth:ls,adjustTableWidth:r=>{let o=t();ls(e,o+r/100*o)},isRelative:!0,label:"percent"}},lF=e=>{let t=lM(e,od);return{width:t,pixelWidth:t,getWidths:(t,r)=>l_(t,e,r),getCellDelta:C,singleColumnWidth:(e,t)=>[Math.max(rw(),e+t)-e],minCellWidth:rw,setElementWidth:ln,adjustTableWidth:r=>{ln(e,t()+r)},isRelative:!1,label:"pixel"}},lH=(e,t)=>null!==lx().exec(t)?lP(e):lF(e),l$={getTableSize:e=>lg(e).fold(()=>lI(e),t=>lH(e,t)),pixelSize:lF,percentageSize:lP,noneSize:lI},lV=(e,t,r,o,l,n)=>({minRow:e,minCol:t,maxRow:r,maxCol:o,allCells:l,selectedCells:n}),lq=(e,t)=>{let r=e.grid.columns,o=e.grid.rows,l=r,n=0,s=0,a=[],i=[];return en(e.access,e=>{if(a.push(e),t(e)){i.push(e);let t=e.row,r=t+e.rowspan-1,a=e.column,m=a+e.colspan-1;t<o?o=t:r>n&&(n=r),a<l?l=a:m>s&&(s=m)}}),lV(o,l,n,s,a,i)},lU=(e,t,r)=>{let o=e[r].element,l=eV.fromTag("td");tr(l,eV.fromTag("br")),(t?tr:tt)(o,l)},lG=(e,t,r,o)=>{let l=F(e,e=>"colgroup"!==e.section),n=t.grid.columns,s=t.grid.rows;for(let e=0;e<s;e++){let s=!1;for(let a=0;a<n;a++)e<r.minRow||e>r.maxRow||a<r.minCol||a>r.maxCol||(oN.getAt(t,e,a).filter(o).isNone()?lU(l,s,e):s=!0)}},lK=(e,t,r,o)=>{en(r.columns,e=>{(e.column<t.minCol||e.column>t.maxCol)&&ti(e.element)}),M(F(ry(e,"tr"),e=>0===e.dom.childElementCount),ti),(t.minCol===t.maxCol||t.minRow===t.maxRow)&&M(ry(e,"th,td"),e=>{eF(e,"rowspan"),eF(e,"colspan")}),eF(e,oR),eF(e,"data-snooker-col-series"),l$.getTableSize(e).adjustTableWidth(o)},lY=(e,t,r,o)=>{if(0===o.minCol&&t.grid.columns===o.maxCol+1)return 0;let l=l_(t,e,r),n=$(l,(e,t)=>e+t,0),s=$(l.slice(o.minCol,o.maxCol+1),(e,t)=>e+t,0)/n*r.pixelWidth()-r.pixelWidth();return r.getCellDelta(s)},lJ=(e,t)=>{let r=e=>eq(e.element,t),o=tu(e),l=rB(o),n=l$.getTableSize(e),s=oN.generate(l),a=lq(s,r),i="th:not("+t+"),td:not("+t+")";M(rC(o,"th,td",e=>eq(e,i)),ti),lG(l,s,a,r);let m=oN.fromTable(e),c=lY(e,m,n,a);return lK(o,a,s,c),o},lQ=((e,t)=>{let r=t=>e(t)?E.from(t.dom.nodeValue):E.none();return{get:o=>{if(!e(o))throw Error("Can only get "+t+" value of a "+t+" node");return r(o).getOr("")},getOption:r,set:(r,o)=>{if(!e(r))throw Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=o}}})(eB,"text"),lX=e=>lQ.get(e),lZ=e=>lQ.getOption(e),l0=(e,t)=>lQ.set(e,t),l1=e=>"img"===eR(e)?1:lZ(e).fold(()=>e7(e).length,e=>e.length),l9=e=>lZ(e).filter(e=>0!==e.trim().length||e.indexOf("\xa0")>-1).isSome(),l3=e=>eE(e)&&"false"===eI(e,"contenteditable"),l2=["img","br"],l5=e=>l9(e)||_(l2,eR(e))||l3(e),l7=e=>tQ(e,l5),l4=e=>l6(e,l5),l6=(e,t)=>{let r=e=>{let o=e7(e);for(let e=o.length-1;e>=0;e--){let l=o[e];if(t(l))return E.some(l);let n=r(l);if(n.isSome())return n}return E.none()};return r(e)},l8={scope:["row","col"]},ne=e=>()=>{let t=eV.fromTag("td",e.dom);return tr(t,eV.fromTag("br",e.dom)),t},nt=e=>()=>eV.fromTag("col",e.dom),nr=e=>()=>eV.fromTag("colgroup",e.dom),no=e=>()=>eV.fromTag("tr",e.dom),nl=(e,t,r)=>{let o=tg(e,t);return en(r,(e,t)=>{null===e?eF(o,t):eW(o,t,e)}),o},nn=e=>e,ns=(e,t,r)=>l7(e).map(o=>H(tV(o,r.join(","),t=>eY(t,e)),(e,t)=>{let r=td(t);return tr(e,r),r},t)).getOr(t),na=(e,t)=>{en(l8,(r,o)=>eP(e,o).filter(e=>_(r,e)).each(e=>eW(t,o,e)))},ni=(e,t,r)=>{let o=(e,t)=>{ru(e.element,t),rd(t,"height"),1!==e.colspan&&rd(t,"width")};return{col:r=>{let l=eV.fromTag(eR(r.element),t.dom);return o(r,l),e(r.element,l),l},colgroup:nr(t),row:no(t),cell:l=>{let n=eV.fromTag(eR(l.element),t.dom),s=r.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]);return tr(s.length>0?ns(l.element,n,s):n,eV.fromTag("br")),o(l,n),na(l.element,n),e(l.element,n),n},replace:nl,colGap:nt(t),gap:ne(t)}},nm=e=>({col:nt(e),colgroup:nr(e),row:no(e),cell:ne(e),replace:nn,colGap:nt(e),gap:ne(e)}),nc=(e,t)=>{let r=(t||document).createElement("div");return r.innerHTML=e,e7(eV.fromDom(r))},nd=e=>L(e,eV.fromDom),nu=e=>t=>t.options.get(e),nf="100%",ng=e=>{var t;let r=e.dom,o=null!==(t=r.getParent(e.selection.getStart(),r.isBlock))&&void 0!==t?t:e.getBody();return of(eV.fromDom(o))+"px"},nh=(e,t)=>nO(e)||!nE(e)?t:nD(e)?{...t,width:ng(e)}:{...t,width:nf},np=(e,t)=>nO(e)||nE(e)?t:nD(e)?{...t,width:ng(e)}:{...t,width:nf},nb=e=>{let t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{let t=_(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),t("table_column_resizing",{processor:e=>{let t=_(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0}),t("table_style_by_css",{processor:"boolean",default:!0}),t("table_merge_content_on_paste",{processor:"boolean",default:!0})},nw=e=>E.from(e.options.get("table_clone_elements")),nv=e=>_(e.options.get("object_resizing").split(","),"table"),ny=nu("table_header_type"),nC=nu("table_column_resizing"),nT=e=>"preservetable"===nC(e),nx=e=>"resizetable"===nC(e),nS=nu("table_sizing_mode"),nR=e=>"relative"===nS(e),nD=e=>"fixed"===nS(e),nO=e=>"responsive"===nS(e),nk=nu("table_resize_bars"),nE=nu("table_style_by_css"),nA=nu("table_merge_content_on_paste"),nB=e=>{let t=e.options,r=t.get("table_default_attributes");return t.isSet("table_default_attributes")?r:np(e,r)},nN=e=>{let t=e.options,r=t.get("table_default_styles");return t.isSet("table_default_styles")?r:nh(e,r)},nz=nu("table_use_colgroups"),n_=e=>t1(e,"[contenteditable]"),nj=(e,t=!1)=>tM(e)?e.dom.isContentEditable:n_(e).fold(y(t),e=>"true"===nW(e)),nW=e=>e.dom.contentEditable,nL=e=>eV.fromDom(e.getBody()),nM=e=>t=>eY(t,nL(e)),nI=e=>{eF(e,"data-mce-style");let t=e=>eF(e,"data-mce-style");M(rS(e),t),M(rR(e),t),M(rO(e),t)},nP=e=>eV.fromDom(e.selection.getStart()),nF=e=>e.getBoundingClientRect().width,nH=e=>e.getBoundingClientRect().height,n$=(e,t)=>{let r=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return E.from(r).filter(rt)},nV=e=>/^(\d+(\.\d+)?)%$/.test(e),nq=e=>/^(\d+(\.\d+)?)px$/.test(e),nU=e=>tY(e,e_("table")).exists(nj),nG=(e,t)=>{let r=t.column,o=t.column+t.colspan-1,l=t.row,n=t.row+t.rowspan-1;return r<=e.finishCol&&o>=e.startCol&&l<=e.finishRow&&n>=e.startRow},nK=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,nY=(e,t)=>{let r=!0,o=x(nK,t);for(let l=t.startRow;l<=t.finishRow;l++)for(let n=t.startCol;n<=t.finishCol;n++)r=r&&oN.getAt(e,l,n).exists(o);return r?E.some(t):E.none()},nJ=(e,t)=>tO(Math.min(e.row,t.row),Math.min(e.column,t.column),Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),Math.max(e.column+e.colspan-1,t.column+t.colspan-1)),nQ=(e,t,r)=>{let o=oN.findItem(e,t,eY),l=oN.findItem(e,r,eY);return o.bind(e=>l.map(t=>nJ(e,t)))},nX=(e,t,r)=>nQ(e,t,r).bind(t=>nY(e,t)),nZ=(e,t,r,o)=>oN.findItem(e,t,eY).bind(t=>{let l=r>0?t.row+t.rowspan-1:t.row,n=o>0?t.column+t.colspan-1:t.column;return oN.getAt(e,l+r,n+o).map(e=>e.element)}),n0=(e,t,r)=>nQ(e,t,r).map(t=>L(oN.filterItems(e,x(nG,t)),e=>e.element)),n1=(e,t)=>oN.findItem(e,t,(e,t)=>eJ(t,e)).map(e=>e.element),n9=(e,t,r)=>rD(e).bind(o=>nZ(n7(o),e,t,r)),n3=(e,t,r)=>n0(n7(e),t,r),n2=(e,t,r,o,l)=>{let n=n7(e),s=eY(e,r)?E.some(t):n1(n,t),a=eY(e,l)?E.some(o):n1(n,o);return s.bind(e=>a.bind(t=>n0(n,e,t)))},n5=(e,t,r)=>nX(n7(e),t,r),n7=oN.fromTable;var n4=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],n6=()=>({up:y({selector:tX,closest:t1,predicate:tK,all:e3}),down:y({selector:tU,predicate:t$}),styles:y({get:ri,getRaw:rc,set:rs,remove:rd}),attrs:y({get:eI,set:eW,remove:eF,copyTo:(e,t)=>{eL(t,eH(e))}}),insert:y({before:e8,after:te,afterAll:tn,append:tr,appendAll:ts,prepend:tt,wrap:tl}),remove:y({unwrap:tm,remove:ti}),create:y({nu:eV.fromTag,clone:e=>eV.fromDom(e.dom.cloneNode(!1)),text:eV.fromText}),query:y({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:e2,nextSibling:e5}),property:y({children:e7,name:eR,parent:e1,document:e=>eX(e).dom,isText:eB,isComment:ek,isElement:eA,isSpecial:e=>_(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],eR(e)),getLanguage:e=>eA(e)?eP(e,"lang"):E.none(),getText:lX,setText:l0,isBoundary:e=>!!eA(e)&&("body"===eR(e)||_(n4,eR(e))),isEmptyTag:e=>!!eA(e)&&_(["br","img","hr","input"],eR(e)),isNonEditable:e=>eA(e)&&"false"===eI(e,"contenteditable")}),eq:eY,is:eq});let n8=(e,t,r,o)=>o(e,t,r[0],r.slice(1)),se=(e,t,r,o)=>H(o,(r,o)=>{let l=t(e,o);return st(e,r,l)},t(e,r)),st=(e,t,r)=>t.bind(t=>r.filter(x(e.eq,t))),sr=(e,t)=>x(e.eq,t),so=(e,t,r)=>r.length>0?n8(e,t,r,se):E.none(),sl=(e,t,r,o=O)=>{let l=[t].concat(e.up().all(t)),n=[r].concat(e.up().all(r)),s=e=>U(e,o).fold(()=>e,t=>e.slice(0,t+1)),a=s(l),i=s(n),m=q(a,t=>j(i,sr(e,t)));return{firstpath:a,secondpath:i,shared:m}},sn=n6(),ss=(e,t)=>so(sn,(t,r)=>e(r),t),sa=(e,t,r)=>sl(sn,e,t,r),si=e=>tX(e,"table"),sm=(e,t,r)=>{let o=e=>t=>void 0!==r&&r(t)||eY(t,e);return eY(e,t)?E.some({boxes:E.some([e]),start:e,finish:t}):si(e).bind(l=>si(t).bind(n=>{if(eY(l,n))return E.some({boxes:n3(l,e,t),start:e,finish:t});if(eJ(l,n)){let r=tV(t,"td,th",o(l)),s=r.length>0?r[r.length-1]:t;return E.some({boxes:n2(l,e,l,t,n),start:e,finish:s})}if(!eJ(n,l))return sa(e,t).shared.bind(s=>t1(s,"table",r).bind(r=>{let s=tV(t,"td,th",o(r)),a=s.length>0?s[s.length-1]:t,i=tV(e,"td,th",o(r)),m=i.length>0?i[i.length-1]:e;return E.some({boxes:n2(r,e,l,t,n),start:m,finish:a})}));{let r=tV(e,"td,th",o(n)),s=r.length>0?r[r.length-1]:e;return E.some({boxes:n2(n,e,l,t,n),start:e,finish:s})}}))},sc=(e,t)=>{let r=tU(e,t);return r.length>0?E.some(r):E.none()},sd=(e,t)=>q(e,e=>eq(e,t)),su=(e,t,r)=>t0(e,t).bind(t=>t0(e,r).bind(e=>ss(si,[t,e]).map(r=>({first:t,last:e,table:r})))),sf=(e,t)=>tX(e,"table").bind(r=>t0(r,t).bind(t=>sm(t,e).bind(e=>e.boxes.map(t=>({boxes:t,start:e.start,finish:e.finish}))))),sg=(e,t,r,o,l)=>sd(e,l).bind(e=>n9(e,t,r).bind(e=>sf(e,o))),sh=(e,t)=>sc(e,t),sp=(e,t,r)=>su(e,t,r).bind(t=>{let r=t=>eY(e,t),o="thead,tfoot,tbody,table",l=tX(t.first,o,r),n=tX(t.last,o,r);return l.bind(e=>n.bind(r=>eY(e,r)?n5(t.table,t.first,t.last):E.none()))}),sb=e=>{let t=(e,t)=>eP(e,t).exists(e=>parseInt(e,10)>1);return e.length>0&&Y(e,e=>t(e,"rowspan")||t(e,"colspan"))?E.some(e):E.none()},sw=(e,t,r)=>t.length<=1?E.none():sp(e,r.firstSelectedSelector,r.lastSelectedSelector).map(e=>({bounds:e,cells:t})),sv="data-mce-selected",sy="data-mce-first-selected",sC="data-mce-last-selected",sT="["+sv+"]",sx={selected:sv,selectedSelector:"td["+sv+"],th["+sv+"]",firstSelected:sy,firstSelectedSelector:"td["+sy+"],th["+sy+"]",lastSelected:sC,lastSelectedSelector:"td["+sC+"],th["+sC+"]"},sS=(e,t,r)=>({element:r,mergable:sw(t,e,sx),unmergable:sb(e),selection:C(e)}),sR=(e,t,r)=>({element:e,clipboard:t,generators:r}),sD=(e,t,r,o)=>({selection:C(e),clipboard:r,generators:o}),sO=e=>rD(e).bind(e=>sh(e,sx.firstSelectedSelector)).fold(y(e),e=>e[0]),sk=e=>(t,r)=>{let o=eR(t);return t1("col"===o||"colgroup"===o?sO(t):t,e,r)},sE=sk("th,td,caption"),sA=sk("th,td"),sB=e=>nd(e.model.table.getSelectedCells()),sN=e=>F(sB(e),e=>eq(e,sx.selectedSelector)),sz=e=>rD(e[0]).map(e=>{let t=lJ(e,sT);return nI(t),[t]}),s_=(e,t)=>L(t,t=>e.selection.serializer.serialize(t.dom,{})).join(""),sj=e=>L(e,e=>e.dom.innerText).join(""),sW=(e,t)=>{e.on("BeforeGetContent",t=>{if(!0===t.selection){let r=sN(e);r.length>=1&&(t.preventDefault(),sz(r).each(r=>{t.content="text"===t.format?sj(r):s_(e,r)}))}}),e.on("BeforeSetContent",r=>{!0===r.selection&&!0===r.paste&&ee(sB(e)).each(o=>{rD(o).each(l=>{let n=F(nc(r.content),e=>"meta"!==eR(e)),s=e_("table");if(nA(e)&&1===n.length&&s(n[0])){r.preventDefault();let s=nm(eV.fromDom(e.getDoc())),a=sR(o,n[0],s);t.pasteCells(l,a).each(()=>{e.focus()})}})})})},sL=(e,t)=>({element:e,offset:t}),sM=(e,t,r)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?r(t).bind(t=>sM(e,t,r).orThunk(()=>E.some(t))):E.none(),sI=(e,t)=>e.property().isText(t)?e.property().getText(t).length:e.property().children(t).length,sP=(e,t)=>{let r=sM(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(r))return sL(r,sI(e,r));let o=e.property().children(r);return o.length>0?sP(e,o[o.length-1]):sL(r,sI(e,r))},sF=n6(),sH=e=>sP(sF,e),s$=(e,t)=>{rh(e)||lv(e).each(r=>{let o=r.value/2;ly(e,o,r.unit),ly(t,o,r.unit)})},sV=e=>L(e,y(0)),sq=(e,t,r,o,l)=>l(e.slice(0,t)).concat(o).concat(l(e.slice(r))),sU=e=>(t,r,o,l)=>{if(!e(o))return o;{let e=Math.abs(Math.max(l,t[r]-Math.abs(o))-t[r]);return o>=0?e:-e}},sG=sU(e=>e<0),sK=sU(k),sY=()=>{let e=(e,t,r,o,l)=>{let n=sG(e,t,o,l);return sq(e,t,r+1,[n,0],sV)},t=(e,t,r,o)=>{let l=(100+r)/100,n=Math.max(o,(e[t]+r)/l);return L(e,(e,r)=>(r===t?n:e/l)-e)},r=(r,o,l,n,s,a)=>a?t(r,o,n,s):e(r,o,l,n,s);return{resizeTable:(e,t)=>e(t),clampTableDelta:sG,calcLeftEdgeDeltas:r,calcMiddleDeltas:(e,t,o,l,n,s,a)=>r(e,o,l,n,s,a),calcRightEdgeDeltas:(e,r,o,l,n,s)=>{if(s)return t(e,o,l,n);{let t=sG(e,o,l,n);return sV(e.slice(0,o)).concat([t])}},calcRedestributedWidths:(e,t,r,o)=>{if(!o)return{delta:r,newSizes:e};{let o=(t+r)/t,l=L(e,e=>e/o);return{delta:100*o-100,newSizes:l}}}}},sJ=()=>{let e=(e,t,r,o,l)=>{let n=sK(e,o>=0?r:t,o,l);return sq(e,t,r+1,[n,-n],sV)};return{resizeTable:(e,t,r)=>{r&&e(t)},clampTableDelta:(e,t,r,o,l)=>l?r>=0?r:Math.max(-$(e,(e,t)=>e+t-o,0),r):sG(e,t,r,o),calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,r,o,l,n,s)=>e(t,o,l,n,s),calcRightEdgeDeltas:(e,t,r,o,l,n)=>{if(n)return sV(e);{let t=o/e.length;return L(e,y(t))}},calcRedestributedWidths:(e,t,r,o)=>({delta:0,newSizes:e})}},sQ=e=>oN.fromTable(e).grid,sX=e_("th"),sZ=e=>Y(e,e=>sX(e.element)),s0=(e,t)=>e&&t?"sectionCells":e?"section":"cells",s1=e=>{let t="thead"===e.section,r=t9(s9(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||r?{type:"header",subType:s0(t,r)}:{type:"body"}},s9=e=>{let t=F(e,e=>sX(e.element));return 0===t.length?E.some("td"):t.length===e.length?E.some("th"):E.none()},s3=e=>{let t=L(e,e=>s1(e).type),r=_(t,"header"),o=_(t,"footer");if(!r&&!o)return E.some("body");{let e=_(t,"body");return!r||e||o?r||e||!o?E.none():E.some("footer"):E.some("header")}},s2=e=>er(e.all,e=>{let t=s1(e);return"header"===t.type?E.from(t.subType):E.none()}),s5=(e,t,r)=>tR(r(e.element,t),!0,e.isLocked),s7=(e,t)=>e.section!==t?tD(e.element,e.cells,t,e.isNew):e,s4=()=>({transformRow:s7,transformCell:(e,t,r)=>{let o=r(e.element,t);return tR("td"!==eR(o)?th(o,"td"):o,e.isNew,e.isLocked)}}),s6=()=>({transformRow:s7,transformCell:s5}),s8=()=>({transformRow:(e,t)=>s7(e,"thead"===t?"tbody":t),transformCell:s5}),ae={getTableSectionType:(e,t)=>{switch(s2(oN.fromTable(e)).getOr(t)){case"section":return s4();case"sectionCells":return s6();case"cells":return s8()}},section:s4,sectionCells:s6,cells:s8,fallback:()=>({transformRow:C,transformCell:s5})},at=(e,t,r,o)=>{r===o?eF(e,t):eW(e,t,r)},ar=(e,t,r)=>{et(tq(e,t)).fold(()=>tt(e,r),e=>te(e,r))},ao=(e,t)=>{let r=tZ(e,t).getOrThunk(()=>{let r=eV.fromTag(t,eQ(e).dom);return"thead"===t?ar(e,"caption,colgroup",r):"colgroup"===t?ar(e,"caption",r):tr(e,r),r});return ta(r),r},al=(e,t)=>{let r=[],o=[],l=e=>L(e,e=>{e.isNew&&r.push(e.element);let t=e.element;return ta(t),M(e.cells,e=>{e.isNew&&o.push(e.element),at(e.element,"colspan",e.colspan,1),at(e.element,"rowspan",e.rowspan,1),tr(t,e.element)}),t}),n=e=>K(e,e=>L(e.cells,e=>(at(e.element,"span",e.colspan,1),e.element))),s=(t,r)=>{ts(ao(e,r),("colgroup"===r?n:l)(t))},a=t=>{tZ(e,t).each(ti)},i=(e,t)=>{e.length>0?s(e,t):a(t)},m=[],c=[],d=[],u=[];return M(t,e=>{switch(e.section){case"thead":m.push(e);break;case"tbody":c.push(e);break;case"tfoot":d.push(e);break;case"colgroup":u.push(e)}}),i(u,"colgroup"),i(m,"thead"),i(c,"tbody"),i(d,"tfoot"),{newRows:r,newCells:o}},an=e=>L(e,e=>{let t=td(e.element);return M(e.cells,e=>{let r=tu(e.element);at(r,"colspan",e.colspan,1),at(r,"rowspan",e.rowspan,1),tr(t,r)}),t}),as=(e,t)=>L(e,e=>oy(e,t)),aa=(e,t)=>e[t],ai=(e,t)=>{if(0===e.length)return 0;let r=e[0];return U(e,e=>!t(r.element,e.element)).getOr(e.length)},am=(e,t,r,o)=>{let l=aa(e,t),n="colgroup"===l.section;return{colspan:ai(l.cells.slice(r),o),rowspan:n?1:ai(as(e.slice(t),r),o)}},ac=(e,t)=>{let r=L(e,e=>L(e.cells,O)),o=(e,t,o,l)=>{for(let n=e;n<e+o;n++)for(let e=t;e<t+l;e++)r[n][e]=!0};return L(e,(l,n)=>{let s=K(l.cells,(l,s)=>{if(!1!==r[n][s])return[];{let r=am(e,n,s,t);return o(n,s,r.rowspan,r.colspan),[tC(l.element,r.rowspan,r.colspan,l.isNew)]}});return tS(l.element,s,l.section,l.isNew)})},ad=(e,t,r)=>{let o=[];M(e.colgroups,l=>{let n=[];for(let o=0;o<e.grid.columns;o++){let l=oN.getColumnAt(e,o).map(e=>tR(e.element,r,!1)).getOrThunk(()=>tR(t.colGap(),!0,!1));n.push(l)}o.push(tD(l.element,n,"colgroup",r))});for(let l=0;l<e.grid.rows;l++){let n=[];for(let o=0;o<e.grid.columns;o++){let s=oN.getAt(e,l,o).map(e=>tR(e.element,r,e.isLocked)).getOrThunk(()=>tR(t.gap(),!0,!1));n.push(s)}let s=e.all[l],a=tD(s.element,n,s.section,r);o.push(a)}return o},au=(e,t)=>ad(e,t,!1),af=e=>ac(e,eY),ag=(e,t)=>er(e.all,e=>q(e.cells,e=>eY(t,e.element))),ah=(e,t,r)=>{let o=t3(L(t.selection,t=>rx(t).bind(t=>ag(e,t)).filter(r)));return t5(o.length>0,o)},ap=(e,t,r,o,l)=>(n,s,a,i)=>{let m=oN.fromTable(n),c=E.from(null==i?void 0:i.section).getOrThunk(ae.fallback);return t(m,s).map(t=>{let r=e(au(m,a),t,eY,l(a),c),o=oO(r.grid);return{info:t,grid:af(r.grid),cursor:r.cursor,lockedColumns:o}}).bind(e=>{let t=al(n,e.grid),l=E.from(null==i?void 0:i.sizing).getOrThunk(()=>l$.getTableSize(n)),s=E.from(null==i?void 0:i.resize).getOrThunk(sJ);return r(n,e.grid,e.info,{sizing:l,resize:s,section:c}),o(n),eF(n,oR),e.lockedColumns.length>0&&eW(n,oR,e.lockedColumns.join(",")),E.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})},ab=(e,t)=>ah(e,t,k).map(e=>({cells:e,generators:t.generators,clipboard:t.clipboard})),aw=(e,t)=>t.mergable,av=(e,t)=>t.unmergable,ay=(e,t)=>ah(e,t,k),aC=(e,t)=>ah(e,t,e=>!e.isLocked),aT=(e,t)=>ag(e,t).exists(e=>!e.isLocked),ax=(e,t)=>Y(t,t=>aT(e,t)),aS=(e,t,r,o)=>{let l=ox(e).rows;if(0===l.length)return e;for(let e=t.startRow;e<=t.finishRow;e++)for(let r=t.startCol;r<=t.finishCol;r++){let t=l[e],n=oy(t,r).isLocked;ob(t,r,tR(o(),!1,n))}return e},aR=(e,t,r,o)=>{let l=ox(e).rows,n=!0;for(let e=0;e<l.length;e++)for(let s=0;s<oT(l[0]);s++){let a=l[e],i=oy(a,s),m=r(i.element,t);m&&!n?ob(a,s,tR(o(),!0,i.isLocked)):m&&(n=!1)}return e},aD=(e,t)=>$(e,(e,r)=>j(e,e=>t(e.element,r.element))?e:e.concat([r]),[]),aO=(e,t,r,o)=>(t>0&&t<e[0].cells.length&&M(e,e=>{let l=e.cells[t-1],n=0,s=o();for(;e.cells.length>t+n&&r(l.element,e.cells[t+n].element);)ob(e,t+n,tR(s,!0,e.cells[t+n].isLocked)),n++}),e),ak=(e,t,r,o)=>{let l=ox(e).rows;return t>0&&t<l.length&&M(aD(l[t-1].cells,r),e=>{let n=E.none();for(let s=t;s<l.length;s++)for(let t=0;t<oT(l[0]);t++){let a=l[s],i=oy(a,t);r(i.element,e.element)&&(n.isNone()&&(n=E.some(o())),n.each(e=>{ob(a,t,tR(e,!0,i.isLocked))}))}}),e},aE=e=>{let t=t=>t(e),r=y(e),o=()=>l,l={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:k,isError:O,map:t=>aB.value(t(e)),mapError:o,bind:t,exists:t,forall:t,getOr:r,or:o,getOrThunk:r,orThunk:o,getOrDie:r,each:t=>{t(e)},toOptional:()=>E.some(e)};return l},aA=e=>{let t=()=>r,r={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:O,isError:k,map:t,mapError:t=>aB.error(t(e)),bind:t,exists:O,forall:k,getOr:C,or:C,getOrThunk:D,orThunk:D,getOrDie:R(String(e)),each:b,toOptional:E.none};return r},aB={value:aE,error:aA,fromOption:(e,t)=>e.fold(()=>aA(t),aE)},aN=(e,t,r)=>{if(e.row>=t.length||e.column>oT(t[0]))return aB.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);let o=t.slice(e.row),l=o[0].cells.slice(e.column),n=oT(r[0]),s=r.length;return aB.value({rowDelta:o.length-s,colDelta:l.length-n})},az=(e,t)=>({rowDelta:0,colDelta:oT(e[0])-oT(t[0])}),a_=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),aj=(e,t,r,o)=>{let l="colgroup"===t.section?r.col:r.cell;return W(e,e=>tR(l(),!0,o(e)))},aW=(e,t,r,o)=>{let l=e[e.length-1];return e.concat(W(t,()=>{let e="colgroup"===l.section?r.colgroup:r.row,t=oS(l,e,C),n=aj(t.cells.length,t,r,e=>eg(o,e.toString()));return ow(t,n)}))},aL=(e,t,r,o)=>L(e,e=>{let l=aj(t,e,r,O);return oh(e,o,l)}),aM=(e,t,r)=>L(e,e=>$(r,(r,o)=>op(r,o,aj(1,e,t,k)[0]),e)),aI=(e,t,r)=>{let o=t.colDelta<0?aL:C,l=t.rowDelta<0?aW:C,n=oO(e),s=oT(e[0]),a=j(n,e=>e===s-1),i=o(e,Math.abs(t.colDelta),r,a?s-1:s),m=oO(i);return l(i,Math.abs(t.rowDelta),r,Q(m,k))},aP=(e,t,r,o)=>{let l=x(o,oy(e[t],r).element),n=e[t];return e.length>1&&oT(n)>1&&(r>0&&l(oC(n,r-1))||r<n.cells.length-1&&l(oC(n,r+1))||t>0&&l(oC(e[t-1],r))||t<e.length-1&&l(oC(e[t+1],r)))},aF=(e,t,r,o,l,n)=>{let s=e.row,a=e.column,i=r.length,m=oT(r[0]),c=s+i,d=a+m+n.length,u=Q(n,k);for(let e=s;e<c;e++){let n=0;for(let i=a;i<d;i++){if(u[i]){n++;continue}aP(t,e,i,l)&&aR(t,oC(t[e],i),l,o.cell);let m=i-a-n,c=oy(r[e-s],m),d=c.element,f=o.replace(d);ob(t[e],i,tR(f,!0,c.isLocked))}}return t},aH=(e,t,r)=>{let o=oT(t[0]);return{row:ox(t).cols.length+e.row,column:q(W(o-e.column,t=>t+e.column),e=>Y(r,t=>t!==e)).getOr(o-1)}},a$=(e,t,r)=>F(r,r=>r>=e.column&&r<=oT(t[0])+e.column),aV=(e,t,r,o,l)=>{let n=oO(t),s=aH(e,t,n),a=ox(r).rows,i=a$(s,a,n);return aN(s,t,a).map(e=>{let r=aI(t,{...e,colDelta:e.colDelta-i.length},o),n=a$(s,a,oO(r));return aF(s,r,a,o,l,n)})},aq=(e,t,r,o,l)=>{aO(t,e,l,o.cell);let n=a_(r,t),s=aI(r,n,o),a=a_(t,s);return L(aI(t,a,o),(t,r)=>oh(t,e,s[r].cells))},aU=(e,t,r,o,l)=>{ak(t,e,l,o.cell);let n=oO(t),s=az(t,r),a=aI(t,{...s,colDelta:s.colDelta-n.length},o),{cols:i,rows:m}=ox(a),c=oO(a),d=az(r,t),u={...d,colDelta:d.colDelta+c.length},f=aI(aM(r,o,c),u,o);return[...i,...m.slice(0,e),...f,...m.slice(e,m.length)]},aG=(e,t,r,o)=>oS(e,e=>o(e,r),t),aK=(e,t,r,o,l)=>{let{rows:n,cols:s}=ox(e),a=n.slice(0,t),i=n.slice(t);return[...s,...a,aG(n[r],(e,r)=>t>0&&t<n.length&&o(oC(n[t-1],r),oC(n[t],r))?oy(n[t],r):tR(l(e.element,o),!0,e.isLocked),o,l),...i]},aY=(e,t,r,o,l,n,s)=>"colgroup"!==r&&o?oy(e,t):tR(s(oy(e,l).element,n),!0,!1),aJ=(e,t,r,o,l)=>L(e,e=>{let n=t>0&&t<oT(e)&&o(oC(e,t-1),oC(e,t)),s=aY(e,t,e.section,n,r,o,l);return op(e,t,s)}),aQ=(e,t)=>K(e,e=>{let r=H(t,(e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e,e.cells);return r.length>0?[tD(e.element,r,e.section,e.isNew)]:[]}),aX=(e,t,r)=>{let{rows:o,cols:l}=ox(e);return[...l,...o.slice(0,t),...o.slice(r+1)]},aZ=(e,t,r,o)=>void 0!==oC(e[t],r)&&t>0&&o(oC(e[t-1],r),oC(e[t],r)),a0=(e,t,r)=>t>0&&r(oC(e,t-1),oC(e,t)),a1=(e,t,r,o)=>aZ(e,t,r,o)||a0(e[t],r,o),a9=(e,t)=>Y(t,C)&&sZ(e.cells)?k:(e,r,o)=>!("th"===eR(e.element)&&t[o]),a3=(e,t)=>Y(t,C)&&sZ(e)?k:(e,r,o)=>!("th"===eR(e.element)&&t[r]),a2=(e,t,r,o)=>{let l=e=>"row"===e?rp(t):rh(t),n=e=>l(e)?`${e}group`:e;return e?sX(t)?n(r):null:o&&sX(t)?n("row"===r?"col":"row"):null},a5=(e,t)=>(r,o,l)=>E.some(a2(e,r.element,"col",t[l])),a7=(e,t)=>(r,o)=>E.some(a2(e,r.element,"row",t[o])),a4=(e,t,r)=>tR(r(e.element,t),!0,e.isLocked),a6=(e,t,r,o,l,n,s)=>{let a=e=>j(t,t=>r(e.element,t.element));return L(e,(e,t)=>ov(e,(e,i)=>{if(!a(e))return e;{let a=s(e,t,i)?l(e,r,o):e;return n(a,t,i).each(e=>{eM(a.element,{scope:E.from(e)})}),a}}))},a8=(e,t,r)=>K(e,(o,l)=>a1(e,l,t,r)?[]:[oy(o,t)]),ie=(e,t,r)=>K(e[t].cells,(o,l)=>a1(e,t,l,r)?[]:[o]),it=(e,t,r,o,l)=>{let n=ox(e).rows,s=K(t,e=>a8(n,e,o)),a=L(n,e=>sZ(e.cells)),i=a3(s,a);return a6(e,s,o,l,a4,a7(r,a),i)},ir=(e,t,r,o,l,n,s)=>{let{cols:a,rows:i}=ox(e),m=i[t[0]],c=K(t,e=>ie(i,e,l)),d=L(m.cells,(e,t)=>sZ(a8(i,t,l))),u=[...i];M(t,e=>{u[e]=s.transformRow(i[e],r)});let f=[...a,...u],g=a9(m,d),h=a5(o,d);return a6(f,c,l,n,s.transformCell,h,g)},io=(e,t,r,o)=>{let l=ox(e).rows;return a6(e,L(t,e=>oy(l[e.row],e.column)),r,o,a4,E.none,k)},il={generate:e=>{if(!m(e))throw Error("cases must be an array");if(0===e.length)throw Error("there must be at least one case");let t=[],r={};return M(e,(o,l)=>{let n=eo(o);if(1!==n.length)throw Error("one and only one name per case");let s=n[0],a=o[s];if(void 0!==r[s])throw Error("duplicate key detected:"+s);if("cata"===s)throw Error("cannot have a case named cata (sorry)");if(!m(a))throw Error("case arguments must be an array");t.push(s),r[s]=(...r)=>{let o=r.length;if(o!==a.length)throw Error("Wrong number of arguments to case "+s+". Expected "+a.length+" ("+a+"), got "+o);return{fold:(...t)=>{if(t.length!==e.length)throw Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[l].apply(null,r)},match:e=>{let o=eo(e);if(t.length!==o.length)throw Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+o.join(","));if(!Y(t,e=>_(o,e)))throw Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+t.join(", "));return e[s].apply(null,r)},log:e=>{console.log(e,{constructors:t,constructor:s,params:r})}}}}),r}},is={...il.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},ia=(e,t)=>0===e.length?is.none():1===e.length?is.only(0):0===t?is.left(0,1):t===e.length-1?is.right(t-1,t):t>0&&t<e.length-1?is.middle(t-1,t,t+1):is.none(),ii=(e,t,r,o,l)=>{let n=e.slice(0),s=ia(e,t),a=y(L(n,y(0)));return s.fold(a,e=>o.singleColumnWidth(n[e],r),(e,t)=>l.calcLeftEdgeDeltas(n,e,t,r,o.minCellWidth(),o.isRelative),(e,t,s)=>l.calcMiddleDeltas(n,e,t,s,r,o.minCellWidth(),o.isRelative),(e,t)=>l.calcRightEdgeDeltas(n,e,t,r,o.minCellWidth(),o.isRelative))},im=(e,t,r)=>{let o=0;for(let l=e;l<t;l++)o+=void 0!==r[l]?r[l]:0;return o},ic=(e,t)=>L(oN.justCells(e),e=>{let r=im(e.column,e.column+e.colspan,t);return{element:e.element,width:r,colspan:e.colspan}}),id=(e,t)=>L(oN.justColumns(e),(e,r)=>({element:e.element,width:t[r],colspan:e.colspan})),iu=(e,t)=>L(oN.justCells(e),e=>{let r=im(e.row,e.row+e.rowspan,t);return{element:e.element,height:r,rowspan:e.rowspan}}),ig=(e,t)=>L(e.all,(e,r)=>({element:e.element,height:t[r]})),ih=e=>H(e,(e,t)=>e+t,0),ip=(e,t)=>oN.hasColumns(e)?id(e,t):ic(e,t),ib=(e,t,r)=>{M(ip(e,t),e=>{r.setElementWidth(e.element,e.width)})},iw=(e,t,r,o,l)=>{let n=oN.fromTable(e),s=l.getCellDelta(t),a=l.getWidths(n,l),i=r===n.grid.columns-1,m=o.clampTableDelta(a,r,s,l.minCellWidth(),i);ib(n,L(ii(a,r,m,l,o),(e,t)=>e+a[t]),l),o.resizeTable(l.adjustTableWidth,m,i)},iv=(e,t,r,o)=>{let l=oN.fromTable(e),n=L(lW(l,e,o),(e,o)=>r===o?Math.max(t+e,rv()):e),s=iu(l,n);M(ig(l,n),e=>{la(e.element,e.height)}),M(s,e=>{la(e.element,e.height)}),la(e,ih(n))},iy=(e,t,r,o,l)=>{let n=oN.generate(t),s=o.getWidths(n,o),a=o.pixelWidth(),{newSizes:i,delta:m}=l.calcRedestributedWidths(s,a,r.pixelDelta,o.isRelative);ib(n,i,o),o.adjustTableWidth(m)},iC=(e,t,r,o)=>{let l=oN.generate(t),n=o.getWidths(l,o);ib(l,n,o)},iT=e=>$(e,(e,t)=>j(e,e=>e.column===t.column)?e:e.concat([t]),[]).sort((e,t)=>e.column-t.column),ix=e_("col"),iS=e_("colgroup"),iR=e=>"tr"===eR(e)||iS(e),iD=e=>{let t=rf(e,"colspan",1),r=rf(e,"rowspan",1);return{element:e,colspan:t,rowspan:r}},iO=e=>eP(e,"scope").map(e=>e.substr(0,3)),ik={modification:(e,t=iD)=>{let r=t=>ix(t.element)?e.col(t):e.cell(t),o=t=>iS(t.element)?e.colgroup(t):e.row(t),l=e=>{if(iR(e))return o({element:e});{let o=r(t(e));return n=E.some({item:e,replacement:o}),o}},n=E.none();return{getOrInit:(e,t)=>n.fold(()=>l(e),r=>t(e,r.item)?r.replacement:l(e))}},transform:e=>t=>{let r=[],o=(e,t)=>q(r,r=>t(r.item,e)),l=o=>{let l=t.replace(o,e,"td"===e?{scope:null}:{});return r.push({item:o,sub:l}),l};return{replaceOrInit:(e,t)=>iR(e)||ix(e)?e:o(e,t).fold(()=>l(e),r=>t(e,r.item)?r.sub:l(e))}},merging:e=>({unmerge:t=>{let r=iO(t);return r.each(e=>eW(t,"scope",e)),()=>{let o=e.cell({element:t,colspan:1,rowspan:1});return rd(o,"width"),rd(t,"width"),r.each(e=>eW(o,"scope",e)),o}},merge:e=>(rd(e[0],"width"),(()=>{let t=t3(L(e,iO));if(0===t.length)return E.none();{let e=t[0],r=["row","col"];return j(t,t=>t!==e&&_(r,t))?E.none():E.from(e)}})().fold(()=>eF(e[0],"scope"),t=>eW(e[0],"scope",t+"group")),y(e[0]))})},iE=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],iA=(e,t)=>_(["ol","ul"],e.property().name(t)),iB=(e,t)=>_(iE,e.property().name(t)),iN=(e,t)=>_(["br","img","hr","input"],e.property().name(t)),iz=n6(),i_=e=>iB(iz,e),ij=e=>iA(iz,e),iW=e=>iN(iz,e),iL=e=>{let t=e_("br"),r=e=>Y(e,e=>t(e)||eB(e)&&0===lX(e).trim().length),o=e=>"li"===eR(e)||tK(e,ij).isSome(),l=e=>e5(e).map(e=>!!i_(e)||!!iW(e)&&"img"!==eR(e)).getOr(!1),n=e=>l4(e).bind(r=>{let n=l(r);return e1(r).map(l=>!0===n||o(l)||t(r)||i_(l)&&!eY(e,l)?[]:[eV.fromTag("br")])}).getOr([]),s=(()=>{let t=K(e,e=>{let t=e7(e);return r(t)?[]:t.concat(n(e))});return 0===t.length?[eV.fromTag("br")]:t})();ta(e[0]),ts(e[0],s)},iM=e=>nj(e,!0),iI=e=>{0===rS(e).length&&ti(e)},iP=(e,t)=>({grid:e,cursor:t}),iF=e=>er(e,e=>er(e.cells,e=>{let t=e.element;return t5(iM(t),t)})),iH=(e,t,r)=>{var o,l;let n=ox(e).rows;return E.from(null===(l=null===(o=n[t])||void 0===o?void 0:o.cells[r])||void 0===l?void 0:l.element).filter(iM).orThunk(()=>iF(n))},i$=(e,t,r)=>{let o=iH(e,t,r);return iP(e,o)},iV=e=>$(e,(e,t)=>j(e,e=>e.row===t.row)?e:e.concat([t]),[]).sort((e,t)=>e.row-t.row),iq=(e,t)=>(r,o,l,n,s)=>i$(ir(r,L(iV(o),e=>e.row),e,t,l,n.replaceOrInit,s),o[0].row,o[0].column),iU=iq("thead",!0),iG=iq("tbody",!1),iK=iq("tfoot",!1),iY=(e,t,r)=>{let o=rN(e,r.section);return ad(oN.generate(o),t,!0)},iJ=(e,t,r,o)=>iC(e,t,r,o.sizing),iQ=(e,t,r,o)=>iy(e,t,r,o.sizing,o.resize),iX=(e,t)=>j(t,e=>0===e.column&&e.isLocked),iZ=(e,t)=>j(t,t=>t.column+t.colspan>=e.grid.columns&&t.isLocked),i0=(e,t)=>{let r=oz(e);return $(iT(t),(e,t)=>e+r[t.column].map(ou).getOr(0),0)},i1=e=>(t,r)=>ay(t,r).filter(r=>!(e?iX:iZ)(t,r)).map(e=>({details:e,pixelDelta:i0(t,e)})),i9=e=>(t,r)=>ab(t,r).filter(r=>!(e?iX:iZ)(t,r.cells)),i3=ik.transform("th"),i2=ik.transform("td"),i5=ap((e,t,r,o)=>{let l=t[0].row;return i$(H(iV(t),(e,t)=>({grid:aK(e.grid,l,t.row+e.delta,r,o.getOrInit),delta:e.delta+1}),{grid:e,delta:0}).grid,l,t[0].column)},ay,b,b,ik.modification),i7=ap((e,t,r,o)=>{let l=iV(t),n=l[l.length-1],s=n.row+n.rowspan;return i$(H(l,(e,t)=>aK(e,s,t.row,r,o.getOrInit),e),s,t[0].column)},ay,b,b,ik.modification),i4=ap((e,t,r,o)=>{let l=t.details,n=iT(l),s=n[0].column;return i$(H(n,(e,t)=>({grid:aJ(e.grid,s,t.column+e.delta,r,o.getOrInit),delta:e.delta+1}),{grid:e,delta:0}).grid,l[0].row,s)},i1(!0),iQ,b,ik.modification),i6=ap((e,t,r,o)=>{let l=t.details,n=l[l.length-1],s=n.column+n.colspan;return i$(H(iT(l),(e,t)=>aJ(e,s,t.column,r,o.getOrInit),e),l[0].row,s)},i1(!1),iQ,b,ik.modification),i8=ap((e,t,r,o)=>{let l=iT(t.details),n=aQ(e,L(l,e=>e.column)),s=n.length>0?n[0].cells.length-1:0;return i$(n,l[0].row,Math.min(l[0].column,s))},(e,t)=>aC(e,t).map(t=>({details:t,pixelDelta:-i0(e,t)})),iQ,iI,ik.modification),me=ap((e,t,r,o)=>{let l=iV(t),n=aX(e,l[0].row,l[l.length-1].row),s=n.length>0?n.length-1:0;return i$(n,Math.min(t[0].row,s),t[0].column)},ay,b,iI,ik.modification),mt=ap((e,t,r,o)=>i$(it(e,L(iT(t),e=>e.column),!0,r,o.replaceOrInit),t[0].row,t[0].column),aC,b,b,i3),mr=ap((e,t,r,o)=>i$(it(e,L(iT(t),e=>e.column),!1,r,o.replaceOrInit),t[0].row,t[0].column),aC,b,b,i2),mo=ap(iU,aC,b,b,i3),ml=ap(iG,aC,b,b,i2),mn=ap(iK,aC,b,b,i2),ms=ap((e,t,r,o)=>i$(io(e,t,r,o.replaceOrInit),t[0].row,t[0].column),aC,b,b,i3),ma=ap((e,t,r,o)=>i$(io(e,t,r,o.replaceOrInit),t[0].row,t[0].column),aC,b,b,i2),mi=ap((e,t,r,o)=>{let l=t.cells;return iL(l),iP(aS(e,t.bounds,r,o.merge(l)),E.from(l[0]))},(e,t)=>aw(e,t).filter(t=>ax(e,t.cells)),iJ,b,ik.merging),mm=ap((e,t,r,o)=>iP(H(t,(e,t)=>aR(e,t,r,o.unmerge(t)),e),E.from(t[0])),(e,t)=>av(e,t).filter(t=>ax(e,t)),iJ,b,ik.merging),mc=ap((e,t,r,o)=>{var l,n;let s=(l=t.clipboard,n=t.generators,ad(oN.fromTable(l),n,!0));return aV(tv(t.row,t.column),e,s,t.generators,r).fold(()=>iP(e,E.some(t.element)),e=>i$(e,t.row,t.column))},(e,t)=>rx(t.element).bind(r=>ag(e,r).map(e=>({...e,generators:t.generators,clipboard:t.clipboard}))),iJ,b,ik.modification),md=ap((e,t,r,o)=>{let l=ox(e).rows,n=t.cells[0].column,s=l[t.cells[0].row];return i$(aq(n,e,iY(t.clipboard,t.generators,s),t.generators,r),t.cells[0].row,t.cells[0].column)},i9(!0),b,b,ik.modification),mu=ap((e,t,r,o)=>{let l=ox(e).rows,n=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,s=l[t.cells[0].row];return i$(aq(n,e,iY(t.clipboard,t.generators,s),t.generators,r),t.cells[0].row,t.cells[0].column)},i9(!1),b,b,ik.modification),mf=ap((e,t,r,o)=>{let l=ox(e).rows,n=t.cells[0].row,s=l[n];return i$(aU(n,e,iY(t.clipboard,t.generators,s),t.generators,r),t.cells[0].row,t.cells[0].column)},ab,b,b,ik.modification),mg=ap((e,t,r,o)=>{let l=ox(e).rows,n=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,s=l[t.cells[0].row];return i$(aU(n,e,iY(t.clipboard,t.generators,s),t.generators,r),t.cells[0].row,t.cells[0].column)},ab,b,b,ik.modification),mh=(e,t)=>{let r=oN.fromTable(e);return ay(r,t).bind(e=>{let t=e[e.length-1],o=e[0].column,l=t.column+t.colspan;return s9(G(L(r.all,e=>F(e.cells,e=>e.column>=o&&e.column<l))))}).getOr("")},mp=(e,t)=>ay(oN.fromTable(e),t).bind(s9).getOr(""),mb=(e,t)=>{let r=oN.fromTable(e);return ay(r,t).bind(e=>{let t=e[e.length-1],o=e[0].row,l=t.row+t.rowspan;return s3(r.all.slice(o,l))}).getOr("")},mw=(e,t)=>e.dispatch("NewRow",{node:t}),mv=(e,t)=>e.dispatch("NewCell",{node:t}),my=(e,t,r)=>{e.dispatch("TableModified",{...r,table:t})},mC=(e,t,r,o,l)=>{e.dispatch("TableSelectionChange",{cells:t,start:r,finish:o,otherCells:l})},mT=e=>{e.dispatch("TableSelectionClear")},mx=(e,t,r,o,l)=>{e.dispatch("ObjectResizeStart",{target:t,width:r,height:o,origin:l})},mS=(e,t,r,o,l)=>{e.dispatch("ObjectResized",{target:t,width:r,height:o,origin:l})},mR={structure:!1,style:!0},mD={structure:!0,style:!1},mO={structure:!0,style:!0},mk=(e,t)=>nR(e)?l$.percentageSize(t):nD(e)?l$.pixelSize(t):l$.getTableSize(t),mE=(e,t,r)=>{let o=e=>"table"===eR(nL(e)),l=nw(e),n=nx(e)?b:s$,s=t=>{switch(ny(e)){case"section":return ae.section();case"sectionCells":return ae.sectionCells();case"cells":return ae.cells();default:return ae.getTableSectionType(t,"section")}},a=(t,o)=>o.cursor.fold(()=>ee(rS(t)).filter(tM).map(o=>{r.clearSelectedCells(t.dom);let l=e.dom.createRng();return l.selectNode(o.dom),e.selection.setRng(l),eW(o,"data-mce-selected","1"),l}),o=>{let l=sH(o),n=e.dom.createRng();return n.setStart(l.element.dom,l.offset),n.setEnd(l.element.dom,l.offset),e.selection.setRng(n),r.clearSelectedCells(t.dom),E.some(n)}),i=(r,o,n,i)=>(m,c,d=!1)=>{nI(m);let u=ni(n,eV.fromDom(e.getDoc()),l),f={sizing:mk(e,m),resize:nx(e)?sY():sJ(),section:s(m)};return o(m)?r(m,c,u,f).bind(r=>{t.refresh(m.dom),M(r.newRows,t=>{mw(e,t.dom)}),M(r.newCells,t=>{mv(e,t.dom)});let o=a(m,r);return tM(m)&&(nI(m),d||my(e,m.dom,i)),o.map(e=>({rng:e,effect:i}))}):E.none()},m=i(me,t=>!o(e)||sQ(t).rows>1,b,mD),c=i(i8,t=>!o(e)||sQ(t).columns>1,b,mD),d=i(i5,k,b,mD),u=i(i7,k,b,mD),f=i(i4,k,n,mD),g=i(i6,k,n,mD),h=i(mi,k,b,mD),p=i(mm,k,b,mD),w=i(md,k,b,mD),v=i(mu,k,b,mD),y=i(mf,k,b,mD),C=i(mg,k,b,mD),T=i(mc,k,b,mO),x=i(ms,k,b,mD),S=i(ma,k,b,mD),R=i(mt,k,b,mD),D=i(mr,k,b,mD),O=i(mo,k,b,mD);return{deleteRow:m,deleteColumn:c,insertRowsBefore:d,insertRowsAfter:u,insertColumnsBefore:f,insertColumnsAfter:g,mergeCells:h,unmergeCells:p,pasteColsBefore:w,pasteColsAfter:v,pasteRowsBefore:y,pasteRowsAfter:C,pasteCells:T,makeCellsHeader:x,unmakeCellsHeader:S,makeColumnsHeader:R,unmakeColumnsHeader:D,makeRowsHeader:O,makeRowsBody:i(ml,k,b,mD),makeRowsFooter:i(mn,k,b,mD),getTableRowType:mb,getTableCellType:mp,getTableColType:mh}},mA=(e,t,r)=>{let o=rf(e,t,1);1===r||o<=1?eF(e,t):eW(e,t,Math.min(r,o))},mB=(e,t)=>r=>{let o=r.column+r.colspan-1,l=r.column;return o>=e&&l<t},mN=(e,t,r)=>{if(!oN.hasColumns(e))return[];{let o=L(F(oN.justColumns(e),mB(t,r)),e=>{let o=tu(e.element);return mA(o,"span",r-t),o}),l=eV.fromTag("colgroup");return ts(l,o),[l]}},mz=(e,t,r)=>L(e.all,e=>{let o=L(F(e.cells,mB(t,r)),e=>{let o=tu(e.element);return mA(o,"colspan",r-t),o}),l=eV.fromTag("tr");return ts(l,o),l}),m_=(e,t)=>{let r=oN.fromTable(e);return aC(r,t).map(e=>{let t=e[e.length-1],o=e[0].column,l=t.column+t.colspan;return[...mN(r,o,l),...mz(r,o,l)]})},mj=(e,t,r)=>{let o=oN.fromTable(e);return ay(o,t).bind(e=>{let t=af(K(ox(ad(o,r,!1)).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),e=>{let t=F(e.cells,e=>!e.isLocked);return t.length>0?[{...e,cells:t}]:[]}));return t5(t.length>0,t)}).map(e=>an(e))},mW=il.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),mL=(e,t,r)=>{let o=r.substring(0,r.length-e.length),l=parseFloat(o);return o===l.toString()?t(l):mW.invalid(r)},mM={...mW,from:e=>t8(e,"%")?mL("%",mW.percent,e):t8(e,"px")?mL("px",mW.pixels,e):mW.invalid(e)},mI=(e,t)=>L(e,e=>mM.from(e).fold(()=>e,e=>e/t*100+"%",e=>e+"%")),mP=(e,t,r)=>{let o=r/t;return L(e,e=>mM.from(e).fold(()=>e,e=>e*o+"px",e=>e/100*r+"px"))},mF=(e,t)=>{let r=e.fold(()=>y(""),e=>y(e/t+"px"),()=>y(100/t+"%"));return W(t,r)},mH=(e,t,r)=>e.fold(()=>t,e=>mP(t,r,e),e=>mI(t,r)),m$=(e,t,r)=>{let o=mM.from(r);return mG(Y(e,e=>"0px"===e)?mF(o,e.length):mH(o,e,t))},mV=(e,t)=>0===e.length?t:H(e,(e,t)=>mM.from(t).fold(y(0),C,C)+e,0),mq=(e,t)=>{let r=Math.floor(e);return{value:r+t,remainder:e-r}},mU=(e,t)=>mM.from(e).fold(y(e),e=>e+t+"px",e=>e+t+"%"),mG=e=>{if(0===e.length)return e;let t=H(e,(e,t)=>{let r=mM.from(t).fold(()=>({value:t,remainder:0}),e=>mq(e,"px"),e=>({value:e+"%",remainder:0}));return{output:[r.value].concat(e.output),remainder:e.remainder+r.remainder}},{output:[],remainder:0}),r=t.output;return r.slice(0,r.length-1).concat([mU(r[r.length-1],Math.round(t.remainder))])},mK=mM.from,mY=(e,t,r)=>{M(t,t=>{let o=mV(e.slice(t.column,t.colspan+t.column),rw());rs(t.element,"width",o+r)})},mJ=(e,t,r)=>{M(t,(t,o)=>{let l=mV([e[o]],rw());rs(t.element,"width",l+r)})},mQ=(e,t,r,o)=>{M(r,t=>{let r=mV(e.slice(t.row,t.rowspan+t.row),rv());rs(t.element,"height",r+o)}),M(t,(t,r)=>{rs(t.element,"height",e[r])})},mX=e=>mK(e).fold(y("px"),y("px"),y("%")),mZ=(e,t,r)=>{let o=oN.fromTable(e),l=o.all,n=oN.justCells(o),s=oN.justColumns(o);t.each(t=>{let r=mX(t),l=od(e),a=m$(lN(o,e),l,t);oN.hasColumns(o)?mJ(a,s,r):mY(a,n,r),rs(e,"width",t)}),r.each(t=>{let r=mX(t),s=oP(e);mQ(m$(lL(o,e,o2),s,t),l,n,r),rs(e,"height",t)})},m0=e=>lg(e).exists(e=>lt.test(e)),m1=e=>lg(e).exists(e=>lr.test(e)),m9=e=>lg(e).isNone(),m3=e=>{eF(e,"width")},m2=e=>{let t=lT(e);mZ(e,E.some(t),E.none()),m3(e)},m5=e=>{let t=lC(e);mZ(e,E.some(t),E.none()),m3(e)},m7=e=>{rd(e,"width");let t=rR(e);M(t.length>0?t:rS(e),e=>{rd(e,"width"),m3(e)}),m3(e)},m4={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},m6=()=>eV.fromTag("th"),m8=()=>eV.fromTag("td"),ce=()=>eV.fromTag("col"),ct=(e,t,r,o)=>{let l=eV.fromTag("tr");for(let n=0;n<e;n++){let e=o<t||n<r?m6():m8();n<r&&eW(e,"scope","row"),o<t&&eW(e,"scope","col"),tr(e,eV.fromTag("br")),tr(l,e)}return l},cr=e=>{let t=eV.fromTag("colgroup");return W(e,()=>tr(t,ce())),t},co=(e,t,r,o)=>W(e,e=>ct(t,r,o,e)),cl=(e,t,r,o,l,n=m4)=>{let s=eV.fromTag("table"),a="cells"!==l;ra(s,n.styles),eL(s,n.attributes),n.colGroups&&tr(s,cr(t));let i=Math.min(e,r);if(a&&r>0){let e=eV.fromTag("thead");tr(s,e),ts(e,co(r,t,"sectionCells"===l?i:0,o))}let m=eV.fromTag("tbody");tr(s,m);let c=a?0:r;return ts(m,co(a?e-i:e,t,c,o)),s},cn=e=>e.dom.innerHTML,cs=e=>{let t=eV.fromTag("div");return tr(t,eV.fromDom(e.dom.cloneNode(!0))),cn(t)},ca=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},ci=(e,t)=>{t0(t,"td,th").each(x(ca,e))},cm=(e,t)=>{M(tU(t,"tr"),t=>{mw(e,t.dom),M(tU(t,"th,td"),t=>{mv(e,t.dom)})})},cc=e=>a(e)&&-1!==e.indexOf("%"),cd=(e,t,r,o,l)=>{let n=nN(e),s={styles:n,attributes:nB(e),colGroups:nz(e)};return e.undoManager.ignore(()=>{let n=cl(r,t,l,o,ny(e),s);eW(n,"data-mce-id","__mce");let a=cs(n);e.insertContent(a),e.addVisual()}),t0(nL(e),'table[data-mce-id="__mce"]').map(t=>(nD(e)?m5(t):nO(e)?m7(t):(nR(e)||cc(n.width))&&m2(t),nI(t),eF(t,"data-mce-id"),cm(e,t),ci(e,t),t.dom)).getOrNull()},cu=(e,t,r,o={})=>{let l=e=>p(e)&&e>0;if(!(l(t)&&l(r)))return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null;{let l=o.headerRows||0;return cd(e,r,t,o.headerColumns||0,l)}};var cf=tinymce.util.Tools.resolve("tinymce.FakeClipboard");let cg="x-tinymce/dom-table-",ch=cg+"rows",cp=cg+"columns",cb=e=>{let t=cf.FakeClipboardItem(e);cf.write([t])},cw=e=>{var t;return er(null!==(t=cf.read())&&void 0!==t?t:[],t=>E.from(t.getType(e)))},cv=e=>{cw(e).isSome()&&cf.clear()},cy=e=>{e.fold(cT,e=>cb({[ch]:e}))},cC=()=>cw(ch),cT=()=>cv(ch),cx=e=>{e.fold(cR,e=>cb({[cp]:e}))},cS=()=>cw(cp),cR=()=>cv(cp),cD=e=>sE(nP(e),nM(e)).filter(nU),cO=e=>sA(nP(e),nM(e)).filter(nU),ck=(e,t)=>{let r=nM(e),o=t=>cD(e).each(o=>{nO(e)||nD(e)||nR(e)||rD(o,r).each(r=>{"relative"!==t||m0(r)?"fixed"!==t||m1(r)?"responsive"!==t||m9(r)||m7(r):m5(r):m2(r),nI(r),my(e,r.dom,mD)})}),l=e=>rD(e,r),n=t=>cO(e).bind(e=>l(e).map(r=>t(r,e))),s=t=>{e.focus()},m=(t,r=!1)=>n((o,l)=>{let n=sS(sB(e),o,l);t(o,n,r).each(s)}),c=()=>n((t,r)=>{let o=sS(sB(e),t,r);return mj(t,o,ni(b,eV.fromDom(e.getDoc()),E.none()))}),d=()=>n((t,r)=>{let o=sS(sB(e),t,r);return m_(t,o)}),u=(t,r)=>r().each(r=>{let o=L(r,e=>tu(e));n((r,l)=>{let n=nm(eV.fromDom(e.getDoc()));t(r,sD(sB(e),l,o,n)).each(s)})}),f=e=>(t,r)=>ef(r,"type").each(t=>{m(e(t),r.no_events)});en({mceTableSplitCells:()=>m(t.unmergeCells),mceTableMergeCells:()=>m(t.mergeCells),mceTableInsertRowBefore:()=>m(t.insertRowsBefore),mceTableInsertRowAfter:()=>m(t.insertRowsAfter),mceTableInsertColBefore:()=>m(t.insertColumnsBefore),mceTableInsertColAfter:()=>m(t.insertColumnsAfter),mceTableDeleteCol:()=>m(t.deleteColumn),mceTableDeleteRow:()=>m(t.deleteRow),mceTableCutCol:()=>d().each(e=>{cx(e),m(t.deleteColumn)}),mceTableCutRow:()=>c().each(e=>{cy(e),m(t.deleteRow)}),mceTableCopyCol:()=>d().each(e=>cx(e)),mceTableCopyRow:()=>c().each(e=>cy(e)),mceTablePasteColBefore:()=>u(t.pasteColsBefore,cS),mceTablePasteColAfter:()=>u(t.pasteColsAfter,cS),mceTablePasteRowBefore:()=>u(t.pasteRowsBefore,cC),mceTablePasteRowAfter:()=>u(t.pasteRowsAfter,cC),mceTableDelete:()=>cD(e).each(t=>{rD(t,r).filter(S(r)).each(t=>{let r=eV.fromText("");if(te(t,r),ti(t),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{let t=e.dom.createRng();t.setStart(r.dom,0),t.setEnd(r.dom,0),e.selection.setRng(t),e.nodeChanged()}})}),mceTableCellToggleClass:(t,r)=>{n(t=>{let o=sB(e),l=Y(o,t=>e.formatter.match("tablecellclass",{value:r},t.dom))?e.formatter.remove:e.formatter.apply;M(o,e=>l("tablecellclass",{value:r},e.dom)),my(e,t.dom,mR)})},mceTableToggleClass:(t,r)=>{n(t=>{e.formatter.toggle("tableclass",{value:r},t.dom),my(e,t.dom,mR)})},mceTableToggleCaption:()=>{cD(e).each(t=>{rD(t,r).each(r=>{tZ(r,"caption").fold(()=>{let t=eV.fromTag("caption");tr(t,eV.fromText("Caption")),to(r,t,0),e.selection.setCursorLocation(t.dom,0)},o=>{e_("caption")(t)&&eK("td",r).each(t=>e.selection.setCursorLocation(t.dom,0)),ti(o)}),my(e,r.dom,mD)})})},mceTableSizingMode:(e,t)=>o(t),mceTableCellType:f(e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader),mceTableColType:f(e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader),mceTableRowType:f(e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}})},(t,r)=>e.addCommand(r,t)),e.addCommand("mceInsertTable",(t,r)=>{cu(e,r.rows,r.columns,r.options)}),e.addCommand("mceTableApplyCellStyle",(t,r)=>{let o=e=>"tablecell"+e.toLowerCase().replace("-","");if(!i(r))return;let n=F(sB(e),nU);if(0===n.length)return;let s=ec(r,(t,r)=>e.formatter.has(o(r))&&a(t));ep(s)||(en(s,(t,r)=>{let l=o(r);M(n,r=>{""===t?e.formatter.remove(l,{value:null},r.dom,!0):e.formatter.apply(l,{value:t},r.dom)})}),l(n[0]).each(t=>my(e,t.dom,mR)))})},cE=(e,t)=>{let r=nM(e),o=t=>sA(nP(e)).bind(o=>rD(o,r).map(r=>{let l=sS(sB(e),r,o);return t(r,l)})).getOr("");en({mceTableRowType:()=>o(t.getTableRowType),mceTableCellType:()=>o(t.getTableCellType),mceTableColType:()=>o(t.getTableColType)},(t,r)=>e.addQueryValueHandler(r,t))},cA=il.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),cB={before:cA.before,on:cA.on,after:cA.after,cata:(e,t,r,o)=>e.fold(t,r,o),getStart:e=>e.fold(C,C,C)},cN={create:(e,t)=>({selection:e,kill:t})},cz=(e,t)=>{let r=e.document.createRange();return r.selectNode(t.dom),r},c_=(e,t)=>{let r=e.document.createRange();return cj(r,t),r},cj=(e,t)=>e.selectNodeContents(t.dom),cW=(e,t)=>{t.fold(t=>{e.setStartBefore(t.dom)},(t,r)=>{e.setStart(t.dom,r)},t=>{e.setStartAfter(t.dom)})},cL=(e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,r)=>{e.setEnd(t.dom,r)},t=>{e.setEndAfter(t.dom)})},cM=(e,t,r)=>{let o=e.document.createRange();return cW(o,t),cL(o,r),o},cI=(e,t,r,o,l)=>{let n=e.document.createRange();return n.setStart(t.dom,r),n.setEnd(o.dom,l),n},cP=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),cF=e=>{let t=e.getClientRects(),r=t.length>0?t[0]:e.getBoundingClientRect();return r.width>0||r.height>0?E.some(r).map(cP):E.none()},cH=il.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),c$=(e,t,r)=>t(eV.fromDom(r.startContainer),r.startOffset,eV.fromDom(r.endContainer),r.endOffset),cV=(e,t)=>t.match({domRange:e=>({ltr:y(e),rtl:E.none}),relative:(t,r)=>({ltr:rz(()=>cM(e,t,r)),rtl:rz(()=>E.some(cM(e,r,t)))}),exact:(t,r,o,l)=>({ltr:rz(()=>cI(e,t,r,o,l)),rtl:rz(()=>E.some(cI(e,o,l,t,r)))})}),cq=(e,t)=>{let r=t.ltr();return r.collapsed?t.rtl().filter(e=>!1===e.collapsed).map(e=>cH.rtl(eV.fromDom(e.endContainer),e.endOffset,eV.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>c$(e,cH.ltr,r)):c$(e,cH.ltr,r)},cU=(e,t)=>{let r=cV(e,t);return cq(e,r)},cG=(e,t)=>cU(e,t).match({ltr:(t,r,o,l)=>{let n=e.document.createRange();return n.setStart(t.dom,r),n.setEnd(o.dom,l),n},rtl:(t,r,o,l)=>{let n=e.document.createRange();return n.setStart(o.dom,l),n.setEnd(t.dom,r),n}});cH.ltr,cH.rtl;let cK={create:(e,t,r,o)=>({start:e,soffset:t,finish:r,foffset:o})},cY={create:(e,t,r,o)=>({start:cB.on(e,t),finish:cB.on(r,o)})},cJ=(e,t)=>{let r=cG(e,t);return cK.create(eV.fromDom(r.startContainer),r.startOffset,eV.fromDom(r.endContainer),r.endOffset)},cQ=cY.create,cX=(e,t,r,o,l,n,s)=>eY(r,l)&&o===n?E.none():t1(r,"td,th",t).bind(r=>t1(l,"td,th",t).bind(o=>cZ(e,t,r,o,s))),cZ=(e,t,r,o,l)=>eY(r,o)?E.none():sm(r,o,t).bind(t=>{let o=t.boxes.getOr([]);return o.length>1?(l(e,o,t.start,t.finish),E.some(cN.create(E.some(cQ(r,0,r,l1(r))),!0))):E.none()}),c0=(e,t,r,o,l)=>sg(o,e,t,l.firstSelectedSelector,l.lastSelectedSelector).map(e=>(l.clearBeforeUpdate(r),l.selectRange(r,e.boxes,e.start,e.finish),e.boxes)),c1=(e,t)=>({item:e,mode:t}),c9=(e,t,r,o=c3)=>e.property().parent(t).map(e=>c1(e,o)),c3=(e,t,r,o=c2)=>r.sibling(e,t).map(e=>c1(e,o)),c2=(e,t,r,o=c2)=>{let l=e.property().children(t);return r.first(l).map(e=>c1(e,o))},c5=[{current:c9,next:c3,fallback:E.none()},{current:c3,next:c2,fallback:E.some(c9)},{current:c2,next:c2,fallback:E.some(c3)}],c7=(e,t,r,o,l=c5)=>q(l,e=>e.current===r).bind(r=>r.current(e,t,o,r.next).orThunk(()=>r.fallback.bind(r=>c7(e,t,r,o)))),c4=(e,t,r,o,l,n)=>c7(e,t,o,l).bind(t=>n(t.item)?E.none():r(t.item)?E.some(t.item):c4(e,t.item,r,t.mode,l,n)),c6=e=>t=>0===e.property().children(t).length,c8=(e,t,r)=>dt(e,t,c6(e),r),de=(e,t,r)=>dr(e,t,c6(e),r),dt=(e,t,r,o)=>c4(e,t,r,c3,{sibling:(e,t)=>e.query().prevSibling(t),first:e=>e.length>0?E.some(e[e.length-1]):E.none()},o),dr=(e,t,r,o)=>c4(e,t,r,c3,{sibling:(e,t)=>e.query().nextSibling(t),first:e=>e.length>0?E.some(e[0]):E.none()},o),dl=n6(),dn=(e,t)=>c8(dl,e,t),ds=(e,t)=>de(dl,e,t),da=(e,t,r)=>dt(dl,e,t,r),di=(e,t,r)=>dr(dl,e,t,r),dm=(e,t,r)=>tK(e,t,r).isSome(),dc=il.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),dd=(e,t,r)=>{let o=e.getRect(t),l=e.getRect(r);return l.right>o.left&&l.left<o.right},du=e=>t1(e,"tr"),df={...dc,verify:(e,t,r,o,l,n,s)=>t1(o,"td,th",s).bind(r=>t1(t,"td,th",s).map(t=>eY(r,t)?eY(o,r)&&l1(r)===l?n(t):dc.none("in same cell"):ss(du,[r,t]).fold(()=>dd(e,t,r)?dc.success():n(t),e=>n(t)))).getOr(dc.none("default")),cata:(e,t,r,o,l)=>e.fold(t,r,o,l)},dg=(e,t,r,o)=>({parent:e,children:t,element:r,index:o}),dh=e=>e1(e).bind(t=>{let r=e7(t);return dp(r,e).map(o=>dg(t,r,e,o))}),dp=(e,t)=>U(e,x(eY,t)),db=e_("br"),dw=(e,t,r)=>t(e,r).bind(e=>eB(e)&&0===lX(e).trim().length?dw(e,t,r):E.some(e)),dv=(e,t,r)=>r.traverse(t).orThunk(()=>dw(t,r.gather,e)).map(r.relative),dy=(e,t)=>e4(e,t).filter(db).orThunk(()=>e4(e,t-1).filter(db)),dC=(e,t,r,o)=>dy(t,r).bind(t=>o.traverse(t).fold(()=>dw(t,o.gather,e).map(o.relative),e=>dh(e).map(e=>cB.on(e.parent,e.index)))),dT=(e,t,r,o)=>(db(t)?dv(e,t,o):dC(e,t,r,o)).map(e=>({start:e,finish:e})),dx=e=>df.cata(e,e=>E.none(),()=>E.none(),e=>E.some(sL(e,0)),e=>E.some(sL(e,l1(e)))),dS=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),dR=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),dD=(e,t,r)=>({left:e.left+t,top:e.top+r,right:e.right+t,bottom:e.bottom+r}),dO=(e,t,r)=>r>=0&&r<l1(t)?e.getRangedRect(t,r,t,r+1):r>0?e.getRangedRect(t,r-1,t,r):E.none(),dk=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),dE=(e,t)=>E.some(e.getRect(t)),dA=(e,t,r)=>eA(t)?dE(e,t).map(dk):eB(t)?dO(e,t,r).map(dk):E.none(),dB=(e,t)=>eA(t)?dE(e,t).map(dk):eB(t)?e.getRangedRect(t,0,t,l1(t)).map(dk):E.none(),dN=il.generate([{none:[]},{retry:["caret"]}]),dz=(e,t)=>e.left<t.left||1>Math.abs(t.right-e.left)||e.left>t.right,d_=(e,t,r)=>tY(t,i_).fold(O,t=>dB(e,t).exists(e=>dz(r,e))),dj=(e,t,r)=>e.elementFromPoint(t,r).filter(e=>"table"===eR(e)).isSome(),dW=(e,t,r,o,l)=>dL(e,t,r,t.move(o,5),l),dL=(e,t,r,o,l)=>0===l?E.some(o):dj(e,o.left,t.point(o))?dW(e,t,r,o,l-1):e.situsFromPoint(o.left,t.point(o)).bind(n=>n.start.fold(E.none,n=>dB(e,n).bind(s=>t.adjuster(e,n,s,r,o).fold(E.none,o=>dL(e,t,r,o,l-1))).orThunk(()=>E.some(o)),E.none)),dM=(e,t,r)=>e.point(t)>r.getInnerHeight()?E.some(e.point(t)-r.getInnerHeight()):0>e.point(t)?E.some(-e.point(t)):E.none(),dI=(e,t,r)=>{let o=e.move(r,5),l=dL(t,e,r,o,100).getOr(o);return dM(e,l,t).fold(()=>t.situsFromPoint(l.left,e.point(l)),r=>(t.scrollBy(0,r),t.situsFromPoint(l.left,e.point(l)-r)))},dP={tryUp:x(dI,{point:e=>e.top,adjuster:(e,t,r,o,l)=>{let n=dR(l,5);return 1>Math.abs(r.top-o.top)||r.bottom<l.top?dN.retry(n):r.bottom===l.top?dN.retry(dR(l,1)):d_(e,t,l)?dN.retry(dD(n,5,0)):dN.none()},move:dR,gather:dn}),tryDown:x(dI,{point:e=>e.bottom,adjuster:(e,t,r,o,l)=>{let n=dS(l,5);return 1>Math.abs(r.bottom-o.bottom)||r.top>l.bottom?dN.retry(n):r.top===l.bottom?dN.retry(dS(l,1)):d_(e,t,l)?dN.retry(dD(n,5,0)):dN.none()},move:dS,gather:ds}),getJumpSize:y(5)},dF=(e,t,r)=>e.getSelection().bind(o=>dT(t,o.finish,o.foffset,r).fold(()=>E.some(sL(o.finish,o.foffset)),l=>{let n=e.fromSitus(l);return dx(df.verify(e,o.finish,o.foffset,n.finish,n.foffset,r.failure,t))})),dH=(e,t,r,o,l,n)=>0===n?E.none():dq(e,t,r,o,l).bind(s=>{let a=e.fromSitus(s),i=df.verify(e,r,o,a.finish,a.foffset,l.failure,t);return df.cata(i,()=>E.none(),()=>E.some(s),s=>eY(r,s)&&0===o?d$(e,r,o,dR,l):dH(e,t,s,0,l,n-1),s=>eY(r,s)&&o===l1(s)?d$(e,r,o,dS,l):dH(e,t,s,l1(s),l,n-1))}),d$=(e,t,r,o,l)=>dA(e,t,r).bind(t=>dV(e,l,o(t,dP.getJumpSize()))),dV=(e,t,r)=>{let o=ol().browser;return o.isChromium()||o.isSafari()||o.isFirefox()?t.retry(e,r):E.none()},dq=(e,t,r,o,l)=>dA(e,r,o).bind(t=>dV(e,l,t)),dU=(e,t,r)=>dF(e,t,r).bind(o=>dH(e,t,o.element,o.offset,r,20).map(e.fromSitus)),dG=(e,t)=>dm(e,e=>e1(e).exists(e=>eY(e,t))),dK=(e,t,r,o,l)=>t1(o,"td,th",t).bind(o=>t1(o,"table",t).bind(n=>dG(l,n)?dU(e,t,r).bind(e=>t1(e.finish,"td,th",t).map(t=>({start:o,finish:t,range:e}))):E.none())),dY=(e,t,r,o,l,n)=>n(o,t).orThunk(()=>dK(e,t,r,o,l).map(e=>{let t=e.range;return cN.create(E.some(cQ(t.start,t.soffset,t.finish,t.foffset)),!0)})),dJ=(e,t)=>t1(e,"tr",t).bind(e=>t1(e,"table",t).bind(r=>eY(e,tU(r,"tr")[0])?da(r,e=>l4(e).isSome(),t).map(e=>{let t=l1(e);return cN.create(E.some(cQ(e,t,e,t)),!0)}):E.none())),dQ=(e,t)=>t1(e,"tr",t).bind(e=>t1(e,"table",t).bind(r=>{let o=tU(r,"tr");return eY(e,o[o.length-1])?di(r,e=>l7(e).isSome(),t).map(e=>cN.create(E.some(cQ(e,0,e,0)),!0)):E.none()})),dX=(e,t,r,o,l,n,s)=>dK(e,r,o,l,n).bind(e=>cZ(t,r,e.start,e.finish,s)),dZ=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},d0=e=>{let t=dZ(E.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(E.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(E.some(e))}}},d1=()=>{let e=d0(b);return{...e,on:t=>e.get().each(t)}},d9=(e,t)=>t1(e,"td,th",t),d3=e=>e9(e).exists(nj),d2=(e,t,r,o)=>{let l=d1(),n=l.clear,s=n=>{l.on(l=>{o.clearBeforeUpdate(t),d9(n.target,r).each(s=>{sm(l,s,r).each(r=>{let l=r.boxes.getOr([]);if(1===l.length){let r=l[0],s="false"===nW(r),a=t9(n_(n.target),r,eY);s&&a&&(o.selectRange(t,l,r,r),e.selectContents(r))}else l.length>1&&(o.selectRange(t,l,r.start,r.finish),e.selectContents(s))})})})};return{clearstate:n,mousedown:e=>{o.clear(t),d9(e.target,r).filter(d3).each(l.set)},mouseover:e=>{s(e)},mouseup:e=>{s(e),n()}}},d5={traverse:e5,gather:ds,relative:cB.before,retry:dP.tryDown,failure:df.failedDown},d7={traverse:e2,gather:dn,relative:cB.before,retry:dP.tryUp,failure:df.failedUp},d4=e=>t=>t===e,d6=d4(38),d8=d4(40),ue=e=>e>=37&&e<=40,ut={isBackward:d4(37),isForward:d4(39)},ur={isBackward:d4(39),isForward:d4(37)},uo=e=>{let t=void 0!==e?e.dom:document;return o$(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},ul=(e,t,r)=>{let o=(void 0!==r?r.dom:document).defaultView;o&&o.scrollBy(e,t)},un=il.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),us=e=>e.match({domRange:e=>eV.fromDom(e.startContainer),relative:(e,t)=>cB.getStart(e),exact:(e,t,r,o)=>e}),ua=un.domRange,ui={domRange:ua,relative:un.relative,exact:un.exact,exactFromRange:e=>un.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>e0(us(e)),range:cK.create},um=document.caretPositionFromPoint?(e,t,r)=>{var o,l;return E.from(null===(l=(o=e.dom).caretPositionFromPoint)||void 0===l?void 0:l.call(o,t,r)).bind(t=>{if(null===t.offsetNode)return E.none();let r=e.dom.createRange();return r.setStart(t.offsetNode,t.offset),r.collapse(),E.some(r)})}:document.caretRangeFromPoint?(e,t,r)=>{var o,l;return E.from(null===(l=(o=e.dom).caretRangeFromPoint)||void 0===l?void 0:l.call(o,t,r))}:E.none,uc=(e,t,r)=>um(eV.fromDom(e.document),t,r).map(e=>cK.create(eV.fromDom(e.startContainer),e.startOffset,eV.fromDom(e.endContainer),e.endOffset)),ud=(e,t)=>{let r=eR(e);return"input"===r?cB.after(e):_(["br","img"],r)?0===t?cB.before(e):cB.after(e):cB.on(e,t)},uu=(e,t)=>{let r=e.fold(cB.before,ud,cB.after),o=t.fold(cB.before,ud,cB.after);return ui.relative(r,o)},uf=(e,t,r,o)=>{let l=ud(e,t),n=ud(r,o);return ui.relative(l,n)},ug=(e,t,r,o)=>{let l=eQ(e).dom.createRange();return l.setStart(e.dom,t),l.setEnd(r.dom,o),l},uh=(e,t,r,o)=>{let l=ug(e,t,r,o),n=eY(e,r)&&t===o;return l.collapsed&&!n},up=e=>E.from(e.getSelection()),ub=(e,t)=>{up(e).each(e=>{e.removeAllRanges(),e.addRange(t)})},uw=(e,t,r,o,l)=>{let n=cI(e,t,r,o,l);ub(e,n)},uv=(e,t,r,o,l,n)=>{t.collapse(r.dom,o),t.extend(l.dom,n)},uy=(e,t)=>cU(e,t).match({ltr:(t,r,o,l)=>{uw(e,t,r,o,l)},rtl:(t,r,o,l)=>{up(e).each(n=>{if(n.setBaseAndExtent)n.setBaseAndExtent(t.dom,r,o.dom,l);else if(n.extend)try{uv(e,n,t,r,o,l)}catch(n){uw(e,o,l,t,r)}else uw(e,o,l,t,r)})}}),uC=(e,t,r,o,l)=>{uy(e,uf(t,r,o,l))},uT=(e,t,r)=>{uy(e,uu(t,r))},ux=e=>{if(!(e.rangeCount>0))return E.none();{let t=e.getRangeAt(0),r=e.getRangeAt(e.rangeCount-1);return E.some(cK.create(eV.fromDom(t.startContainer),t.startOffset,eV.fromDom(r.endContainer),r.endOffset))}},uS=e=>{if(null===e.anchorNode||null===e.focusNode)return ux(e);{let t=eV.fromDom(e.anchorNode),r=eV.fromDom(e.focusNode);return uh(t,e.anchorOffset,r,e.focusOffset)?E.some(cK.create(t,e.anchorOffset,r,e.focusOffset)):ux(e)}},uR=(e,t,r=!0)=>{let o=(r?c_:cz)(e,t);ub(e,o)},uD=e=>up(e).filter(e=>e.rangeCount>0).bind(uS),uO=e=>uD(e).map(e=>ui.exact(e.start,e.soffset,e.finish,e.foffset)),uk=(e,t)=>cF(cG(e,t)),uE=(e,t,r)=>uc(e,t,r),uA=e=>{up(e).each(e=>e.removeAllRanges())},uB=e=>({elementFromPoint:(t,r)=>eV.fromPoint(eV.fromDom(e.document),t,r),getRect:e=>e.dom.getBoundingClientRect(),getRangedRect:(t,r,o,l)=>uk(e,ui.exact(t,r,o,l)),getSelection:()=>uO(e).map(t=>cJ(e,t)),fromSitus:t=>cJ(e,ui.relative(t.start,t.finish)),situsFromPoint:(t,r)=>uE(e,t,r).map(e=>cY.create(e.start,e.soffset,e.finish,e.foffset)),clearSelection:()=>{uA(e)},collapseSelection:(t=!1)=>{uO(e).each(r=>r.fold(e=>e.collapse(t),(r,o)=>{let l=t?r:o;uT(e,l,l)},(r,o,l,n)=>{let s=t?r:l,a=t?o:n;uC(e,s,a,s,a)}))},setSelection:t=>{uC(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,r)=>{uT(e,t,r)},selectNode:t=>{uR(e,t,!1)},selectContents:t=>{uR(e,t)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>uo(eV.fromDom(e.document)).top,scrollBy:(t,r)=>{ul(t,r,eV.fromDom(e.document))}}),uN=(e,t)=>({rows:e,cols:t}),uz=(e,t,r,o)=>{let l=d2(uB(e),t,r,o);return{clearstate:l.clearstate,mousedown:l.mousedown,mouseover:l.mouseover,mouseup:l.mouseup}},u_=e=>tY(e,eE).exists(nj),uj=(e,t)=>u_(e)||u_(t),uW=(e,t,r,o)=>{let l=uB(e),n=()=>(o.clear(t),E.none());return{keydown:(e,s,a,i,m,c)=>{let d=e.raw,u=d.which,f=!0===d.shiftKey;return sc(t,o.selectedSelector).fold(()=>(ue(u)&&!f&&o.clearBeforeUpdate(t),ue(u)&&f&&!uj(s,i))?E.none:d8(u)&&f?x(dX,l,t,r,d5,i,s,o.selectRange):d6(u)&&f?x(dX,l,t,r,d7,i,s,o.selectRange):d8(u)?x(dY,l,r,d5,i,s,dQ):d6(u)?x(dY,l,r,d7,i,s,dJ):E.none,e=>{let r=r=>()=>er(r,r=>c0(r.rows,r.cols,t,e,o)).fold(()=>su(t,o.firstSelectedSelector,o.lastSelectedSelector).map(e=>{let r=d8(u)||c.isForward(u)?cB.after:cB.before;return l.setRelativeSelection(cB.on(e.first,0),r(e.table)),o.clear(t),cN.create(E.none(),!0)}),e=>E.some(cN.create(E.none(),!0)));return ue(u)&&f&&!uj(s,i)?E.none:d8(u)&&f?r([uN(1,0)]):d6(u)&&f?r([uN(-1,0)]):c.isBackward(u)&&f?r([uN(0,-1),uN(-1,0)]):c.isForward(u)&&f?r([uN(0,1),uN(1,0)]):ue(u)&&!f?n:E.none})()},keyup:(e,l,n,s,a)=>sc(t,o.selectedSelector).fold(()=>{let i=e.raw,m=i.which;return!0!==i.shiftKey?E.none():ue(m)&&uj(l,s)?cX(t,r,l,n,s,a,o.selectRange):E.none()},E.none)}},uL=(e,t,r,o)=>{let l=uB(e);return(e,n)=>{o.clearBeforeUpdate(t),sm(e,n,r).each(e=>{let r=e.boxes.getOr([]);o.selectRange(t,r,e.start,e.finish),l.selectContents(n),l.collapseSelection()})}},uM=(e,t)=>{let r=eI(e,t);return void 0===r||""===r?[]:r.split(" ")},uI=(e,t,r)=>{let o=uM(e,t).concat([r]);return eW(e,t,o.join(" ")),!0},uP=(e,t,r)=>{let o=F(uM(e,t),e=>e!==r);return o.length>0?eW(e,t,o.join(" ")):eF(e,t),!1},uF=e=>void 0!==e.dom.classList,uH=e=>uM(e,"class"),u$=(e,t)=>uI(e,"class",t),uV=(e,t)=>uP(e,"class",t),uq=(e,t)=>{uF(e)?e.dom.classList.add(t):u$(e,t)},uU=e=>{0===(uF(e)?e.dom.classList:uH(e)).length&&eF(e,"class")},uG=(e,t)=>{uF(e)?e.dom.classList.remove(t):uV(e,t),uU(e)},uK=(e,t)=>uF(e)&&e.dom.classList.contains(t),uY=(e,t)=>{M(t,t=>{uG(e,t)})},uJ=e=>t=>{uq(t,e)},uQ=e=>t=>{uY(t,e)},uX={byClass:e=>{let t=uJ(e.selected),r=uQ([e.selected,e.lastSelected,e.firstSelected]),o=t=>{M(tU(t,e.selectedSelector),r)};return{clearBeforeUpdate:o,clear:o,selectRange:(r,l,n,s)=>{o(r),M(l,t),uq(n,e.firstSelected),uq(s,e.lastSelected)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},byAttr:(e,t,r)=>{let o=t=>{eF(t,e.selected),eF(t,e.firstSelected),eF(t,e.lastSelected)},l=t=>{eW(t,e.selected,"1")},n=e=>{s(e),r()},s=t=>{M(tU(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`),o)};return{clearBeforeUpdate:s,clear:n,selectRange:(r,o,s,a)=>{n(r),M(o,l),eW(s,e.firstSelected,"1"),eW(a,e.lastSelected,"1"),t(o,s,a)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}}},uZ=(e,t,r,o)=>{switch(e.tag){case"none":return t();case"single":return o(e.element);case"multiple":return r(e.elements)}},u0=()=>({tag:"none"}),u1=e=>({tag:"multiple",elements:e}),u9=e=>({tag:"single",element:e}),u3=(e,t,r)=>({get:()=>sh(e(),r).fold(()=>t().fold(u0,u9),u1)}),u2=(e,t)=>K(af(e.slice(0,t[t.length-1].row+1)),e=>L(e.cells.slice(0,t[t.length-1].column+1),e=>e.element)),u5=(e,t)=>K(af(e.slice(t[0].row+t[0].rowspan-1,e.length)),e=>L(e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length),e=>e.element)),u7=(e,t,r)=>{let o=oN.fromTable(e);return ay(o,t).map(e=>{let{rows:t}=ox(ad(o,r,!1));return{upOrLeftCells:u2(t,e),downOrRightCells:u5(t,e)}})},u4=(e,t,r,o,l,n,s)=>({target:e,x:t,y:r,stop:o,prevent:l,kill:n,raw:s}),u6=e=>{let t=eV.fromDom(tW(e).getOr(e.target)),r=()=>e.stopPropagation(),o=()=>e.preventDefault(),l=w(o,r);return u4(t,e.clientX,e.clientY,r,o,l,e)},u8=(e,t)=>r=>{e(r)&&t(u6(r))},fe=(e,t,r,o,l)=>{let n=u8(r,o);return e.dom.addEventListener(t,n,l),{unbind:x(fr,e,t,n,l)}},ft=(e,t,r,o)=>fe(e,t,r,o,!1),fr=(e,t,r,o)=>{e.dom.removeEventListener(t,r,o)},fo=(e,t,r)=>ft(e,t,k,r),fl=e=>!uK(eV.fromDom(e.target),"ephox-snooker-resizer-bar"),fn=(e,t)=>{let r=u3(()=>eV.fromDom(e.getBody()),()=>sA(nP(e),nM(e)),sx.selectedSelector),o=uX.byAttr(sx,(t,r,o)=>{rD(r).each(l=>{let n=nw(e),s=ni(b,eV.fromDom(e.getDoc()),n),a=u7(l,{selection:sB(e)},s);mC(e,t,r,o,a)})},()=>mT(e));return e.on("init",r=>{let l=e.getWin(),n=nL(e),s=nM(e),a=uz(l,n,s,o),i=uW(l,n,s,o),m=uL(l,n,s,o),c=e=>!0===e.raw.shiftKey;e.on("TableSelectorChange",e=>m(e.start,e.finish));let d=(t,r)=>{c(t)&&(r.kill&&t.kill(),r.selection.each(t=>{let r=cG(l,ui.relative(t.start,t.finish));e.selection.setRng(r)}))},u=e=>0===e.button,f=e=>void 0===e.buttons||(1&e.buttons)!=0,g=(()=>{let e=dZ(eV.fromDom(n)),t=dZ(0);return{touchEnd:r=>{let o=eV.fromDom(r.target);if(e_("td")(o)||e_("th")(o)){let l=e.get(),n=t.get();eY(l,o)&&r.timeStamp-n<300&&(r.preventDefault(),m(o,o))}e.set(o),t.set(r.timeStamp)}}})();e.on("dragstart",e=>{a.clearstate()}),e.on("mousedown",e=>{u(e)&&fl(e)&&a.mousedown(u6(e))}),e.on("mouseover",e=>{f(e)&&fl(e)&&a.mouseover(u6(e))}),e.on("mouseup",e=>{u(e)&&fl(e)&&a.mouseup(u6(e))}),e.on("touchend",g.touchEnd),e.on("keyup",t=>{let r=u6(t);if(r.raw.shiftKey&&ue(r.raw.which)){let t=e.selection.getRng(),o=eV.fromDom(t.startContainer),l=eV.fromDom(t.endContainer);i.keyup(r,o,t.startOffset,l,t.endOffset).each(e=>{d(r,e)})}}),e.on("keydown",r=>{let o=u6(r);t.hide();let l=e.selection.getRng(),n=eV.fromDom(l.startContainer),s=eV.fromDom(l.endContainer),a=oL(ut,ur)(eV.fromDom(e.selection.getStart()));i.keydown(o,n,l.startOffset,s,l.endOffset,a).each(e=>{d(o,e)}),t.show()}),e.on("NodeChange",()=>{let t=e.selection;ss(rD,[eV.fromDom(t.getStart()),eV.fromDom(t.getEnd())]).fold(()=>o.clear(n),b)})}),e.on("PreInit",()=>{e.serializer.addTempAttr(sx.firstSelected),e.serializer.addTempAttr(sx.lastSelected)}),{getSelectedCells:()=>uZ(r.get(),y([]),e=>L(e,e=>e.dom),e=>[e.dom]),clearSelectedCells:e=>o.clear(eV.fromDom(e))}},fs=e=>{let t=[];return{bind:e=>{if(void 0===e)throw Error("Event bind error: undefined handler");t.push(e)},unbind:e=>{t=F(t,t=>t!==e)},trigger:(...r)=>{let o={};M(e,(e,t)=>{o[e]=r[t]}),M(t,e=>{e(o)})}}},fa=e=>({registry:es(e,e=>({bind:e.bind,unbind:e.unbind})),trigger:es(e,e=>e.trigger)}),fi=(e,t)=>{let r=null,o=()=>{c(r)||(clearTimeout(r),r=null)};return{cancel:o,throttle:(...l)=>{o(),r=setTimeout(()=>{r=null,e.apply(null,l)},t)}}},fm=e=>e.slice(0).sort(),fc=(e,t)=>{throw Error("All required keys ("+fm(e).join(", ")+") were not specified. Specified keys were: "+fm(t).join(", ")+".")},fd=e=>{throw Error("Unsupported keys for object: "+fm(e).join(", "))},fu=(e,t)=>{if(!m(t))throw Error("The "+e+" fields must be an array. Was: "+t+".");M(t,t=>{if(!a(t))throw Error("The value "+t+" in the "+e+" fields was not a string.")})},ff=(e,t)=>{throw Error("All values need to be of type: "+t+". Keys ("+fm(e).join(", ")+") were not.")},fg=e=>{let t=fm(e);q(t,(e,r)=>r<t.length-1&&e===t[r+1]).each(e=>{throw Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})},fh=(e,t)=>fp(e,t,{validate:h,label:"function"}),fp=(e,t,r)=>{if(0===t.length)throw Error("You must specify at least one required field.");return fu("required",t),fg(t),o=>{let l=eo(o);Y(t,e=>_(l,e))||fc(t,l),e(t,l);let n=F(t,e=>!r.validate(o[e],e));return n.length>0&&ff(n,r.label),o}},fb=(e,t)=>{let r=F(t,t=>!_(e,t));r.length>0&&fd(r)},fw=e=>fh(fb,e),fv=fw(["compare","extract","mutate","sink"]),fy=fw(["element","start","stop","destroy"]),fC=fw(["forceDrop","drop","move","delayDrop"]),fT=()=>{let e=E.none(),t=(t,r)=>{let o=e.map(e=>t.compare(e,r));return e=E.some(r),o},r=fa({move:fs(["info"])});return{onEvent:(e,o)=>{o.extract(e).each(e=>{t(o,e).each(e=>{r.trigger.move(e)})})},reset:()=>{e=E.none()},events:r.registry}},fx=()=>({onEvent:b,reset:b,events:fa({move:fs(["info"])}).registry}),fS=()=>{let e=fx(),t=fT(),r=e;return{on:()=>{r.reset(),r=t},off:()=>{r.reset(),r=e},isOn:()=>r===t,onEvent:(e,t)=>{r.onEvent(e,t)},events:t.events}},fR=(e,t,r)=>{let o=!1,l=fa({start:fs([]),stop:fs([])}),n=fS(),s=()=>{m.stop(),n.isOn()&&(n.off(),l.trigger.stop())},a=fi(s,200);n.events.move.bind(r=>{t.mutate(e,r.info)});let i=e=>(...t)=>{o&&e.apply(null,t)},m=t.sink(fC({forceDrop:s,drop:i(s),move:i(e=>{a.cancel(),n.onEvent(e,t)}),delayDrop:i(a.throttle)}),r);return{element:m.element,go:e=>{m.start(e),n.on(),l.trigger.start()},on:()=>{o=!0},off:()=>{o=!1},isActive:()=>o,destroy:()=>{m.destroy()},events:l.registry}},fD=e=>{let t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},fO=fD("ephox-dragster").resolve,fk=e=>{let t={layerClass:fO("blocker"),...e},r=eV.fromTag("div");return eW(r,"role","presentation"),ra(r,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),uq(r,fO("blocker")),uq(r,t.layerClass),{element:y(r),destroy:()=>{ti(r)}}};var fE=fv({compare:(e,t)=>o$(t.left-e.left,t.top-e.top),extract:e=>E.some(o$(e.x,e.y)),sink:(e,t)=>{let r=fk(t),o=fo(r.element(),"mousedown",e.forceDrop),l=fo(r.element(),"mouseup",e.drop),n=fo(r.element(),"mousemove",e.move),s=fo(r.element(),"mouseout",e.delayDrop);return fy({element:r.element,start:e=>{tr(e,r.element())},stop:()=>{ti(r.element())},destroy:()=>{r.destroy(),l.unbind(),n.unbind(),s.unbind(),o.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}});let fA=(e,t={})=>{var r;return fR(e,null!==(r=t.mode)&&void 0!==r?r:fE,t)},fB=fD("ephox-snooker").resolve,fN=()=>{let e=fa({drag:fs(["xDelta","yDelta"])});return{mutate:(t,r)=>{e.trigger.drag(t,r)},events:e.registry}},fz=()=>{let e=fa({drag:fs(["xDelta","yDelta","target"])}),t=E.none(),r=fN();return r.events.drag.bind(r=>{t.each(t=>{e.trigger.drag(r.xDelta,r.yDelta,t)})}),{assign:e=>{t=E.some(e)},get:()=>t,mutate:r.mutate,events:e.registry}},f_=(e,t,r,o,l)=>{let n=eV.fromTag("div");return ra(n,{position:"absolute",left:t-o/2+"px",top:r+"px",height:l+"px",width:o+"px"}),eL(n,{"data-column":e,role:"presentation"}),n},fj=(e,t,r,o,l)=>{let n=eV.fromTag("div");return ra(n,{position:"absolute",left:t+"px",top:r-l/2+"px",height:l+"px",width:o+"px"}),eL(n,{"data-row":e,role:"presentation"}),n},fW=fB("resizer-bar"),fL=fB("resizer-rows"),fM=fB("resizer-cols"),fI=(e,t)=>K(e.all,(e,r)=>t(e.element)?[r]:[]),fP=(e,t)=>{let r=[];return W(e.grid.columns,o=>{oN.getColumnAt(e,o).map(e=>e.element).forall(t)&&r.push(o)}),F(r,r=>Y(oN.filterItems(e,e=>e.column===r),e=>t(e.element)))},fF=e=>{M(tU(e.parent(),"."+fW),ti)},fH=(e,t,r)=>{let o=e.origin();M(t,t=>{t.each(t=>{let l=r(o,t);uq(l,fW),tr(e.parent(),l)})})},f$=(e,t,r,o)=>{fH(e,t,(e,t)=>{let l=f_(t.col,t.x-e.left,r.top-e.top,7,o);return uq(l,fM),l})},fV=(e,t,r,o)=>{fH(e,t,(e,t)=>{let l=fj(t.row,r.left-e.left,t.y-e.top,o,7);return uq(l,fL),l})},fq=(e,t,r,o,l)=>{let n=oU(r),s=t.isResizable,a=o.length>0?o2.positions(o,r):[],i=a.length>0?fI(e,s):[];fV(t,F(a,(e,t)=>j(i,e=>t===e)),n,ou(r));let m=l.length>0?o7.positions(l,r):[],c=m.length>0?fP(e,s):[];f$(t,F(m,(e,t)=>j(c,e=>t===e)),n,oF(r))},fU=(e,t)=>{if(fF(e),e.isResizable(t)){let r=oN.fromTable(t),o=oj(r),l=oz(r);fq(r,e,t,o,l)}},fG=(e,t)=>{M(tU(e.parent(),"."+fW),t)},fK=e=>{fG(e,e=>{rs(e,"display","none")})},fY=e=>{fG(e,e=>{rs(e,"display","block")})},fJ=e=>uK(e,fL),fQ=e=>uK(e,fM),fX=fB("resizer-bar-dragging"),fZ=e=>{let t=fz(),r=fA(t,{}),o=E.none(),l=(e,t)=>E.from(eI(e,t));t.events.drag.bind(e=>{l(e.target,"data-row").each(t=>{let r=rb(e.target,"top");rs(e.target,"top",r+e.yDelta+"px")}),l(e.target,"data-column").each(t=>{let r=rb(e.target,"left");rs(e.target,"left",r+e.xDelta+"px")})});let n=(e,t)=>rb(e,t)-rf(e,"data-initial-"+t,0);r.events.stop.bind(()=>{t.get().each(t=>{o.each(r=>{l(t,"data-row").each(e=>{let o=n(t,"top");eF(t,"data-initial-top"),d.trigger.adjustHeight(r,o,parseInt(e,10))}),l(t,"data-column").each(e=>{let o=n(t,"left");eF(t,"data-initial-left"),d.trigger.adjustWidth(r,o,parseInt(e,10))}),fU(e,r)})})});let s=(o,l)=>{d.trigger.startAdjust(),t.assign(o),eW(o,"data-initial-"+l,rb(o,l)),uq(o,fX),rs(o,"opacity","0.2"),r.go(e.parent())},a=fo(e.parent(),"mousedown",e=>{fJ(e.target)&&s(e.target,"top"),fQ(e.target)&&s(e.target,"left")}),i=t=>eY(t,e.view()),m=e=>t1(e,"table",i).filter(nj),c=fo(e.view(),"mouseover",t=>{m(t.target).fold(()=>{tM(t.target)&&fF(e)},t=>{r.isActive()&&(o=E.some(t),fU(e,t))})}),d=fa({adjustHeight:fs(["table","delta","row"]),adjustWidth:fs(["table","delta","column"]),startAdjust:fs([])});return{destroy:()=>{a.unbind(),c.unbind(),r.destroy(),fF(e)},refresh:t=>{fU(e,t)},on:r.on,off:r.off,hideBars:x(fK,e),showBars:x(fY,e),events:d.registry}},f0={create:(e,t,r)=>{let o=fZ(e),l=fa({beforeResize:fs(["table","type"]),afterResize:fs(["table","type"]),startDrag:fs([])});return o.events.adjustHeight.bind(e=>{let t=e.table;l.trigger.beforeResize(t,"row");let r=o2.delta(e.delta,t);iv(t,r,e.row,o2),l.trigger.afterResize(t,"row")}),o.events.startAdjust.bind(e=>{l.trigger.startDrag()}),o.events.adjustWidth.bind(e=>{let o=e.table;l.trigger.beforeResize(o,"col");let n=o7.delta(e.delta,o),s=r(o);iw(o,n,e.column,t,s),l.trigger.afterResize(o,"col")}),{on:o.on,off:o.off,refreshBars:o.refresh,hideBars:o.hideBars,showBars:o.showBars,destroy:o.destroy,events:l.registry}}},f1={only:(e,t)=>({parent:y(eN(e)?eZ(e):e),view:y(e),origin:y(o$(0,0)),isResizable:t}),detached:(e,t,r)=>({parent:y(t),view:y(e),origin:()=>oU(t),isResizable:r}),body:(e,t,r)=>({parent:y(t),view:y(e),origin:y(o$(0,0)),isResizable:r})},f9=()=>{let e=eV.fromTag("div");return ra(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),tr(tI(),e),e},f3=(e,t)=>e.inline?f1.body(eV.fromDom(e.getBody()),f9(),t):f1.only(eV.fromDom(e.getDoc()),t),f2=(e,t)=>{e.inline&&ti(t.parent())},f5=e=>g(e)&&"TABLE"===e.nodeName,f7="bar-",f4=e=>"false"!==eI(e,"data-mce-resize"),f6=e=>{let t=oN.fromTable(e);oN.hasColumns(t)||M(rS(e),e=>{let t=ri(e,"width");rs(e,"width",t),eF(e,"width")})},f8=e=>{let t,r;let o=d1(),l=d1(),n=d1(),s=t=>mk(e,t),a=()=>nT(e)?sJ():sY(),i=e=>sQ(e).columns,m=(o,l,n)=>{let m=t8(l,"e");if(""===r&&m2(o),n!==t&&""!==r){rs(o,"width",r);let l=a(),c=s(o),d=nT(e)||m?i(o)-1:0;iw(o,n-t,d,l,c)}else nV(r)&&rs(o,"width",n*parseFloat(r.replace("%",""))/t+"%");nq(r)&&f6(o)},c=()=>{l.on(e=>{e.destroy()}),n.on(t=>{f2(e,t)})};return e.on("init",()=>{let t=f3(e,f4);if(n.set(t),nv(e)&&nk(e)){let r=a(),n=f0.create(t,r,s);n.on(),n.events.startDrag.bind(t=>{o.set(e.selection.getRng())}),n.events.beforeResize.bind(t=>{let r=t.table.dom;mx(e,r,nF(r),nH(r),f7+t.type)}),n.events.afterResize.bind(t=>{let r=t.table,l=r.dom;nI(r),o.on(t=>{e.selection.setRng(t),e.focus()}),mS(e,l,nF(l),nH(l),f7+t.type),e.undoManager.add()}),l.set(n)}}),e.on("ObjectResizeStart",o=>{let l=o.target;if(f5(l)){let n=eV.fromDom(l);M(e.dom.select(".mce-clonedresizable"),t=>{e.dom.addClass(t,"mce-"+nC(e)+"-columns")}),!m1(n)&&nD(e)?m5(n):!m0(n)&&nR(e)&&m2(n),m9(n)&&t6(o.origin,f7)&&m2(n),t=o.width,r=nO(e)?"":n$(e,l).getOr("")}}),e.on("ObjectResized",t=>{let r=t.target;if(f5(r)){let o=eV.fromDom(r),l=t.origin;t6(l,"corner-")&&m(o,l,t.width),nI(o),my(e,o.dom,mR)}}),e.on("SwitchMode",()=>{l.on(t=>{e.mode.isReadOnly()?t.hideBars():t.showBars()})}),e.on("dragstart dragend",e=>{l.on(t=>{"dragstart"===e.type?(t.hideBars(),t.off()):(t.on(),t.showBars())})}),e.on("remove",()=>{c()}),{refresh:e=>{l.on(t=>t.refreshBars(eV.fromDom(e)))},hide:()=>{l.on(e=>e.hideBars())},show:()=>{l.on(e=>e.showBars())}}},ge=e=>{nb(e);let t=f8(e),r=fn(e,t),o=mE(e,t,r);return ck(e,o),cE(e,o),sW(e,o),{getSelectedCells:r.getSelectedCells,clearSelectedCells:r.clearSelectedCells}};t.add("dom",e=>({table:ge(e)}))}();