!function(){"use strict";let t,r,n,o;var a,l,i,s,d,c,u,m,f,g,p,h,b,v=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var r=typeof t;return"object"===r&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":r},y=function(t){return{eq:t}},C=y(function(t,r){return t===r}),E=function(t){return y(function(r,n){if(r.length!==n.length)return!1;for(var o=r.length,a=0;a<o;a++)if(!t.eq(r[a],n[a]))return!1;return!0})},w=function(t){return y(function(r,n){var o,a,l=Object.keys(r),i=Object.keys(n);if(!(o=E(C),a=function(t){return Array.prototype.slice.call(t).sort(void 0)},y(function(t,r){return o.eq(a(t),a(r))})).eq(l,i))return!1;for(var s=l.length,d=0;d<s;d++){var c=l[d];if(!t.eq(r[c],n[c]))return!1}return!0})},x=y(function(t,r){if(t===r)return!0;var n=v(t);return n===v(r)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===r:"array"===n?E(x).eq(t,r):"object"===n&&w(x).eq(t,r))});let _=Object.getPrototypeOf,k=(t,r,n)=>{var o;return!!n(t,r.prototype)||(null===(o=t.constructor)||void 0===o?void 0:o.name)===r.name},S=t=>r=>(t=>{let r=typeof t;return null===t?"null":"object"===r&&Array.isArray(t)?"array":"object"===r&&k(t,String,(t,r)=>r.isPrototypeOf(t))?"string":r})(r)===t,N=t=>r=>typeof r===t,R=t=>r=>t===r,A=(t,r)=>O(t)&&k(t,r,(t,r)=>_(t)===r),T=S("string"),O=S("object"),B=t=>A(t,Object),P=S("array"),D=R(null),L=N("boolean"),M=R(void 0),F=t=>null==t,I=t=>!F(t),U=N("function"),z=N("number"),j=(t,r)=>{if(P(t)){for(let n=0,o=t.length;n<o;++n)if(!r(t[n]))return!1;return!0}return!1},H=()=>{},$=(t,r)=>(...n)=>t(r.apply(null,n)),q=(t,r)=>n=>t(r(n)),V=t=>()=>t,W=t=>t,K=(t,r)=>t===r;function Y(t,...r){return(...n)=>{let o=r.concat(n);return t.apply(null,o)}}let G=t=>r=>!t(r),X=t=>()=>{throw Error(t)},Q=t=>t(),J=t=>{t()},Z=V(!1),ee=V(!0);class et{constructor(t,r){this.tag=t,this.value=r}static some(t){return new et(!0,t)}static none(){return et.singletonNone}fold(t,r){return this.tag?r(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?et.some(t(this.value)):et.none()}bind(t){return this.tag?t(this.value):et.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:et.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw Error(null!=t?t:"Called getOrDie on None")}static from(t){return I(t)?et.some(t):et.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}et.singletonNone=new et(!1);let er=Array.prototype.slice,en=Array.prototype.indexOf,eo=Array.prototype.push,ea=(t,r)=>en.call(t,r),el=(t,r)=>ea(t,r)>-1,ei=(t,r)=>{for(let n=0,o=t.length;n<o;n++)if(r(t[n],n))return!0;return!1},es=(t,r)=>{let n=t.length,o=Array(n);for(let a=0;a<n;a++){let n=t[a];o[a]=r(n,a)}return o},ed=(t,r)=>{for(let n=0,o=t.length;n<o;n++)r(t[n],n)},ec=(t,r)=>{for(let n=t.length-1;n>=0;n--)r(t[n],n)},eu=(t,r)=>{let n=[],o=[];for(let a=0,l=t.length;a<l;a++){let l=t[a];(r(l,a)?n:o).push(l)}return{pass:n,fail:o}},em=(t,r)=>{let n=[];for(let o=0,a=t.length;o<a;o++){let a=t[o];r(a,o)&&n.push(a)}return n},ef=(t,r,n)=>(ec(t,(t,o)=>{n=r(n,t,o)}),n),eg=(t,r,n)=>(ed(t,(t,o)=>{n=r(n,t,o)}),n),ep=(t,r,n)=>{for(let o=0,a=t.length;o<a;o++){let a=t[o];if(r(a,o))return et.some(a);if(n(a,o))break}return et.none()},eh=(t,r)=>ep(t,r,Z),eb=(t,r)=>{for(let n=0,o=t.length;n<o;n++)if(r(t[n],n))return et.some(n);return et.none()},ev=t=>{let r=[];for(let n=0,o=t.length;n<o;++n){if(!P(t[n]))throw Error("Arr.flatten item "+n+" was not an array, input: "+t);eo.apply(r,t[n])}return r},ey=(t,r)=>ev(es(t,r)),eC=(t,r)=>{for(let n=0,o=t.length;n<o;++n)if(!0!==r(t[n],n))return!1;return!0},eE=t=>{let r=er.call(t,0);return r.reverse(),r},ew=(t,r)=>em(t,t=>!el(r,t)),ex=(t,r)=>{let n={};for(let o=0,a=t.length;o<a;o++){let a=t[o];n[String(a)]=r(a,o)}return n},e_=(t,r)=>{let n=er.call(t,0);return n.sort(r),n},ek=(t,r)=>r>=0&&r<t.length?et.some(t[r]):et.none(),eS=t=>ek(t,0),eN=t=>ek(t,t.length-1),eR=U(Array.from)?Array.from:t=>er.call(t),eA=(t,r)=>{for(let n=0;n<t.length;n++){let o=r(t[n],n);if(o.isSome())return o}return et.none()},eT=Object.keys,eO=Object.hasOwnProperty,eB=(t,r)=>{let n=eT(t);for(let o=0,a=n.length;o<a;o++){let a=n[o];r(t[a],a)}},eP=(t,r)=>eD(t,(t,n)=>({k:n,v:r(t,n)})),eD=(t,r)=>{let n={};return eB(t,(t,o)=>{let a=r(t,o);n[a.k]=a.v}),n},eL=t=>(r,n)=>{t[n]=r},eM=(t,r,n,o)=>{eB(t,(t,a)=>{(r(t,a)?n:o)(t,a)})},eF=(t,r)=>{let n={};return eM(t,r,eL(n),H),n},eI=(t,r)=>{let n=[];return eB(t,(t,o)=>{n.push(r(t,o))}),n},eU=t=>eI(t,W),ez=(t,r)=>ej(t,r)?et.from(t[r]):et.none(),ej=(t,r)=>eO.call(t,r),eH=(t,r)=>ej(t,r)&&void 0!==t[r]&&null!==t[r],e$=t=>{let r={};return ed(t,t=>{r[t]={}}),eT(r)},eq=t=>void 0!==t.length,eV=Array.isArray,eW=(t,r,n)=>{if(!t)return!1;if(n=n||t,eq(t)){for(let o=0,a=t.length;o<a;o++)if(!1===r.call(n,t[o],o,t))return!1}else for(let o in t)if(ej(t,o)&&!1===r.call(n,t[o],o,t))return!1;return!0},eK=(t,r)=>{let n=[];return eW(t,(o,a)=>{n.push(r(o,a,t))}),n},eY=(t,r)=>{let n=[];return eW(t,(o,a)=>{r&&!r(o,a,t)||n.push(o)}),n},eG=(t,r,n,o)=>{let a=M(n)?t[0]:n;for(let n=0;n<t.length;n++)a=r.call(o,a,t[n],n);return a},eX=(t,r,n)=>{for(let o=0,a=t.length;o<a;o++)if(r.call(n,t[o],o,t))return o;return -1},eQ=t=>t[t.length-1],eJ=t=>{let r,n=!1;return(...o)=>(n||(n=!0,r=t.apply(null,o)),r)},eZ=()=>e0(0,0),e0=(t,r)=>({major:t,minor:r}),e1={nu:e0,detect:(t,r)=>{let n=String(r).toLowerCase();return 0===t.length?eZ():((t,r)=>{let n=((t,r)=>{for(let n=0;n<t.length;n++){let o=t[n];if(o.test(r))return o}})(t,r);if(!n)return{major:0,minor:0};let o=t=>Number(r.replace(n,"$"+t));return e0(o(1),o(2))})(t,n)},unknown:eZ},e2=(t,r)=>{let n=String(r).toLowerCase();return eh(t,t=>t.search(n))},e3=(t,r,n)=>""===r||t.length>=r.length&&t.substr(n,n+r.length)===r,e8=(t,r)=>{var n;return e6(t,r)?(n=r.length,t.substring(n)):t},e5=(t,r,n=0,o)=>{let a=t.indexOf(r,n);return -1!==a&&(!!M(o)||a+r.length<=o)},e6=(t,r)=>e3(t,r,0),e9=(t,r)=>e3(t,r,t.length-r.length),e4=t=>r=>r.replace(t,""),e7=e4(/^\s+|\s+$/g),te=e4(/^\s+/g),tt=e4(/\s+$/g),tr=t=>t.length>0,tn=t=>!tr(t),to=(t,r=10)=>{let n=parseInt(t,r);return isNaN(n)?et.none():et.some(n)},ta=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,tl=t=>r=>e5(r,t),ti=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>e5(t,"edge/")&&e5(t,"chrome")&&e5(t,"safari")&&e5(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ta],search:t=>e5(t,"chrome")&&!e5(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>e5(t,"msie")||e5(t,"trident")},{name:"Opera",versionRegexes:[ta,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:tl("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:tl("firefox")},{name:"Safari",versionRegexes:[ta,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(e5(t,"safari")||e5(t,"mobile/"))&&e5(t,"applewebkit")}],ts=[{name:"Windows",search:tl("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>e5(t,"iphone")||e5(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:tl("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:tl("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:tl("linux"),versionRegexes:[]},{name:"Solaris",search:tl("sunos"),versionRegexes:[]},{name:"FreeBSD",search:tl("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:tl("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],td={browsers:V(ti),oses:V(ts)},tc="Edge",tu="Chromium",tm="Opera",tf="Firefox",tg="Safari",tp=t=>{let r=t.current,n=t.version,o=t=>()=>r===t;return{current:r,version:n,isEdge:o(tc),isChromium:o(tu),isIE:o("IE"),isOpera:o(tm),isFirefox:o(tf),isSafari:o(tg)}},th=()=>tp({current:void 0,version:e1.unknown()}),tb=(V(tc),V(tu),V("IE"),V(tm),V(tf),V(tg),"Windows"),tv="Android",ty="Linux",tC="macOS",tE="Solaris",tw="FreeBSD",tx="ChromeOS",t_=t=>{let r=t.current,n=t.version,o=t=>()=>r===t;return{current:r,version:n,isWindows:o(tb),isiOS:o("iOS"),isAndroid:o(tv),isMacOS:o(tC),isLinux:o(ty),isSolaris:o(tE),isFreeBSD:o(tw),isChromeOS:o(tx)}},tk=()=>t_({current:void 0,version:e1.unknown()}),tS=(V(tb),V("iOS"),V(tv),V(ty),V(tC),V(tE),V(tw),V(tx),t=>window.matchMedia(t).matches),tN=eJ(()=>((t,r,n)=>{let o=td.browsers(),a=td.oses(),l=r.bind(t=>eA(t.brands,t=>{let r=t.brand.toLowerCase();return eh(o,t=>{var n;return r===(null===(n=t.brand)||void 0===n?void 0:n.toLowerCase())}).map(r=>({current:r.name,version:e1.nu(parseInt(t.version,10),0)}))})).orThunk(()=>e2(o,t).map(r=>{let n=e1.detect(r.versionRegexes,t);return{current:r.name,version:n}})).fold(th,tp),i=e2(a,t).map(r=>{let n=e1.detect(r.versionRegexes,t);return{current:r.name,version:n}}).fold(tk,t_),s=((t,r,n,o)=>{let a=t.isiOS()&&!0===/ipad/i.test(n),l=t.isiOS()&&!a,i=t.isiOS()||t.isAndroid(),s=i||o("(pointer:coarse)"),d=a||!l&&i&&o("(min-device-width:768px)"),c=l||i&&!d,u=r.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:V(a),isiPhone:V(l),isTablet:V(d),isPhone:V(c),isTouch:V(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:V(u),isDesktop:V(!c&&!d&&!u)}})(i,l,t,n);return{browser:l,os:i,deviceType:s}})(navigator.userAgent,et.from(navigator.userAgentData),tS)),tR=()=>tN(),tA=navigator.userAgent,tT=tR(),tO=tT.browser,tB=tT.os,tP=tT.deviceType,tD=-1!==tA.indexOf("Windows Phone"),tL={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:tO.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!tO.isIE(),windowsPhone:tD,browser:{current:tO.current,version:tO.version,isChromium:tO.isChromium,isEdge:tO.isEdge,isFirefox:tO.isFirefox,isIE:tO.isIE,isOpera:tO.isOpera,isSafari:tO.isSafari},os:{current:tB.current,version:tB.version,isAndroid:tB.isAndroid,isChromeOS:tB.isChromeOS,isFreeBSD:tB.isFreeBSD,isiOS:tB.isiOS,isLinux:tB.isLinux,isMacOS:tB.isMacOS,isSolaris:tB.isSolaris,isWindows:tB.isWindows},deviceType:{isDesktop:tP.isDesktop,isiPad:tP.isiPad,isiPhone:tP.isiPhone,isPhone:tP.isPhone,isTablet:tP.isTablet,isTouch:tP.isTouch,isWebView:tP.isWebView}},tM=/^\s*|\s*$/g,tF=t=>F(t)?"":(""+t).replace(tM,""),tI=function(t,r,n,o){o=o||this,t&&(n&&(t=t[n]),eW(t,(t,a)=>!1!==r.call(o,t,a,n)&&(tI(t,r,n,o),!0)))},tU={trim:tF,isArray:eV,is:(t,r)=>r?!("array"!==r||!eV(t))||typeof t===r:void 0!==t,toArray:t=>{if(eV(t))return t;{let r=[];for(let n=0,o=t.length;n<o;n++)r[n]=t[n];return r}},makeMap:(t,r,n={})=>{let o=T(t)?t.split(r||","):t||[],a=o.length;for(;a--;)n[o[a]]={};return n},each:eW,map:eK,grep:eY,inArray:(t,r)=>{if(t){for(let n=0,o=t.length;n<o;n++)if(t[n]===r)return n}return -1},hasOwn:ej,extend:(t,...r)=>{for(let n=0;n<r.length;n++){let o=r[n];for(let r in o)if(ej(o,r)){let n=o[r];void 0!==n&&(t[r]=n)}}return t},walk:tI,resolve:(t,r=window)=>{let n=t.split(".");for(let t=0,o=n.length;t<o&&(r=r[n[t]]);t++);return r},explode:(t,r)=>P(t)?t:""===t?[]:eK(t.split(r||","),tF),_addCacheSuffix:t=>{let r=tL.cacheSuffix;return r&&(t+=(-1===t.indexOf("?")?"?":"&")+r),t}},tz=(t,r,n=K)=>t.exists(t=>n(t,r)),tj=(t,r,n=K)=>tH(t,r,n).getOr(t.isNone()&&r.isNone()),tH=(t,r,n)=>t.isSome()&&r.isSome()?et.some(n(t.getOrDie(),r.getOrDie())):et.none(),t$=(t,r)=>t?et.some(r):et.none(),tq="undefined"!=typeof window?window:Function("return this;")(),tV=(t,r)=>((t,r)=>{let n=null!=r?r:tq;for(let r=0;r<t.length&&null!=n;++r)n=n[t[r]];return n})(t.split("."),r),tW=Object.getPrototypeOf,tK=t=>{let r=tV("ownerDocument.defaultView",t);return O(t)&&(((t,r)=>{let n=tV(t,r);if(null==n)throw Error(t+" not available on this browser");return n})("HTMLElement",r).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(tW(t).constructor.name))},tY=t=>t.dom.nodeName.toLowerCase(),tG=t=>t.dom.nodeType,tX=t=>r=>tG(r)===t,tQ=t=>tJ(t)&&tK(t.dom),tJ=tX(1),tZ=tX(3),t0=tX(9),t1=tX(11),t2=t=>r=>tJ(r)&&tY(r)===t,t3=(t,r,n)=>{if(!(T(n)||L(n)||z(n)))throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",n,":: Element ",t),Error("Attribute value was not simple");t.setAttribute(r,n+"")},t8=(t,r,n)=>{t3(t.dom,r,n)},t5=(t,r)=>{let n=t.dom;eB(r,(t,r)=>{t3(n,r,t)})},t6=(t,r)=>{let n=t.dom.getAttribute(r);return null===n?void 0:n},t9=(t,r)=>et.from(t6(t,r)),t4=(t,r)=>{let n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(r)},t7=(t,r)=>{t.dom.removeAttribute(r)},re=t=>eg(t.dom.attributes,(t,r)=>(t[r.name]=r.value,t),{}),rt=(t,r)=>{let n=t6(t,r);return void 0===n||""===n?[]:n.split(" ")},rr=t=>void 0!==t.dom.classList,rn=t=>rt(t,"class"),ro=(t,r)=>((t,r,n)=>{let o=rt(t,r).concat([n]);return t8(t,r,o.join(" ")),!0})(t,"class",r),ra=(t,r)=>((t,r,n)=>{let o=em(rt(t,r),t=>t!==n);return o.length>0?t8(t,r,o.join(" ")):t7(t,r),!1})(t,"class",r),rl=(t,r)=>{rr(t)?t.dom.classList.add(r):ro(t,r)},ri=t=>{0===(rr(t)?t.dom.classList:rn(t)).length&&t7(t,"class")},rs=(t,r)=>{rr(t)?t.dom.classList.remove(r):ra(t,r),ri(t)},rd=(t,r)=>rr(t)&&t.dom.classList.contains(r),rc=t=>{if(null==t)throw Error("Node cannot be null or undefined");return{dom:t}},ru=(t,r)=>{let n=(r||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){let r="HTML does not have a single root node";throw console.error(r,t),Error(r)}return rc(n.childNodes[0])},rm=(t,r)=>rc((r||document).createElement(t)),rf=(t,r)=>rc((r||document).createTextNode(t)),rg=(t,r,n)=>et.from(t.dom.elementFromPoint(r,n)).map(rc),rp=(t,r)=>{let n=[],o=t=>(n.push(t),r(t)),a=r(t);do a=a.bind(o);while(a.isSome());return n},rh=(t,r)=>{let n=t.dom;if(1!==n.nodeType)return!1;if(void 0!==n.matches)return n.matches(r);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(r);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(r);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(r);throw Error("Browser lacks native selectors")},rb=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,rv=(t,r)=>t.dom===r.dom,ry=(t,r)=>{let n=t.dom,o=r.dom;return n!==o&&n.contains(o)},rC=t=>rc(t.dom.ownerDocument),rE=t=>t0(t)?t:rC(t),rw=t=>rc(rE(t).dom.defaultView),rx=t=>et.from(t.dom.parentNode).map(rc),r_=t=>et.from(t.dom.parentElement).map(rc),rk=(t,r)=>{let n=U(r)?r:Z,o=t.dom,a=[];for(;null!==o.parentNode&&void 0!==o.parentNode;){let t=o.parentNode,r=rc(t);if(a.push(r),!0===n(r))break;o=t}return a},rS=t=>et.from(t.dom.previousSibling).map(rc),rN=t=>et.from(t.dom.nextSibling).map(rc),rR=t=>eE(rp(t,rS)),rA=t=>rp(t,rN),rT=t=>es(t.dom.childNodes,rc),rO=(t,r)=>{let n=t.dom.childNodes;return et.from(n[r]).map(rc)},rB=t=>rO(t,0),rP=t=>rO(t,t.dom.childNodes.length-1),rD=t=>t.dom.childNodes.length,rL=t=>t1(t)&&I(t.dom.host),rM=U(Element.prototype.attachShadow)&&U(Node.prototype.getRootNode),rF=V(rM),rI=rM?t=>rc(t.dom.getRootNode()):rE,rU=t=>rL(t)?t:(t=>{let r=t.dom.head;if(null==r)throw Error("Head is not available yet");return rc(r)})(rE(t)),rz=t=>rc(t.dom.host),rj=t=>{if(rF()&&I(t.target)){let r=rc(t.target);if(tJ(r)&&rH(r)&&t.composed&&t.composedPath){let r=t.composedPath();if(r)return eS(r)}}return et.from(t.target)},rH=t=>I(t.dom.shadowRoot),r$=t=>{let r=tZ(t)?t.dom.parentNode:t.dom;if(null==r||null===r.ownerDocument)return!1;let n=r.ownerDocument;return(t=>{let r=rI(t);return rL(r)?et.some(r):et.none()})(rc(r)).fold(()=>n.body.contains(r),q(r$,rz))};var rq=(t,r,n,o,a)=>t(n,o)?et.some(n):U(a)&&a(n)?et.none():r(n,o,a);let rV=(t,r,n)=>{let o=t.dom,a=U(n)?n:Z;for(;o.parentNode;){let t=rc(o=o.parentNode);if(r(t))return et.some(t);if(a(t))break}return et.none()},rW=(t,r,n)=>rq((t,r)=>r(t),rV,t,r,n),rK=(t,r)=>{let n=t=>{for(let o=0;o<t.childNodes.length;o++){let a=rc(t.childNodes[o]);if(r(a))return et.some(a);let l=n(t.childNodes[o]);if(l.isSome())return l}return et.none()};return n(t.dom)},rY=(t,r,n)=>rV(t,t=>rh(t,r),n),rG=(t,r)=>((t,r)=>{let n=void 0===r?document:r.dom;return rb(n)?et.none():et.from(n.querySelector(t)).map(rc)})(r,t),rX=(t,r,n)=>rq((t,r)=>rh(t,r),rY,t,r,n),rQ=(t,r=!1)=>r$(t)?t.dom.isContentEditable:rX(t,"[contenteditable]").fold(V(r),t=>"true"===rJ(t)),rJ=t=>t.dom.contentEditable,rZ=t=>void 0!==t.style&&U(t.style.getPropertyValue),r0=(t,r,n)=>{if(!T(n))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",n,":: Element ",t),Error("CSS value must be a string: "+n);rZ(t)&&t.style.setProperty(r,n)},r1=(t,r,n)=>{r0(t.dom,r,n)},r2=(t,r)=>{let n=t.dom;eB(r,(t,r)=>{r0(n,r,t)})},r3=(t,r)=>{let n=t.dom,o=window.getComputedStyle(n).getPropertyValue(r);return""!==o||r$(t)?o:r8(n,r)},r8=(t,r)=>rZ(t)?t.style.getPropertyValue(r):"",r5=(t,r)=>{let n=r8(t.dom,r);return et.from(n).filter(t=>t.length>0)},r6=t=>{let r={},n=t.dom;if(rZ(n))for(let t=0;t<n.style.length;t++){let o=n.style.item(t);r[o]=n.style[o]}return r},r9=(t,r)=>{var n;rZ(n=t.dom)&&n.style.removeProperty(r),tz(t9(t,"style").map(e7),"")&&t7(t,"style")},r4=(t,r)=>{rx(t).each(n=>{n.dom.insertBefore(r.dom,t.dom)})},r7=(t,r)=>{rN(t).fold(()=>{rx(t).each(t=>{nt(t,r)})},t=>{r4(t,r)})},ne=(t,r)=>{rB(t).fold(()=>{nt(t,r)},n=>{t.dom.insertBefore(r.dom,n.dom)})},nt=(t,r)=>{t.dom.appendChild(r.dom)},nr=(t,r)=>{r4(t,r),nt(r,t)},nn=(t,r)=>{ed(r,r=>{nt(t,r)})},no=t=>{t.dom.textContent="",ed(rT(t),t=>{na(t)})},na=t=>{let r=t.dom;null!==r.parentNode&&r.parentNode.removeChild(r)},nl=t=>{let r=rT(t);r.length>0&&ed(r,(n,o)=>{r7(0===o?t:r[o-1],n)}),na(t)},ni=t=>es(t,rc),ns=t=>t.dom.innerHTML,nd=(t,r)=>{let n=rC(t).dom,o=rc(n.createDocumentFragment());nn(o,((t,r)=>{let n=(r||document).createElement("div");return n.innerHTML=t,rT(rc(n))})(r,n)),no(t),nt(t,o)},nc=(t,r,n,o)=>((t,r,n,o,a)=>{let l=t=>{n(t)&&o((t=>{let r=rc(rj(t).getOr(t.target)),n=()=>t.stopPropagation(),o=()=>t.preventDefault(),a=$(o,n);return{target:r,x:t.clientX,y:t.clientY,stop:n,prevent:o,kill:a,raw:t}})(t))};return t.dom.addEventListener(r,l,!1),{unbind:Y(nu,t,r,l,!1)}})(t,r,n,o),nu=(t,r,n,o)=>{t.dom.removeEventListener(r,n,o)},nm=(t,r)=>({left:t,top:r,translate:(n,o)=>nm(t+n,r+o)}),nf=(t,r)=>void 0!==t?t:void 0!==r?r:0,ng=t=>{let r=t.dom,n=r.ownerDocument.body;return n===r?nm(n.offsetLeft,n.offsetTop):r$(t)?(t=>{let r=t.getBoundingClientRect();return nm(r.left,r.top)})(r):nm(0,0)},np=t=>{let r=void 0!==t?t.dom:document;return nm(r.body.scrollLeft||r.documentElement.scrollLeft,r.body.scrollTop||r.documentElement.scrollTop)},nh=(t,r,n)=>{let o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,r)},nb=(t,r)=>{tR().browser.isSafari()&&U(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(r)},nv=(t,r,n,o)=>({x:t,y:r,width:n,height:o,right:t+n,bottom:r+o}),ny=t=>{let r=void 0===t?window:t,n=np(rc(r.document));return(t=>{let r=void 0===t?window:t;return tR().browser.isFirefox()?et.none():et.from(r.visualViewport)})(r).fold(()=>{let t=r.document.documentElement,o=t.clientWidth,a=t.clientHeight;return nv(n.left,n.top,o,a)},t=>nv(Math.max(t.pageLeft,n.left),Math.max(t.pageTop,n.top),t.width,t.height))},nC=(t,r)=>{let n=[];return ed(rT(t),t=>{r(t)&&(n=n.concat([t])),n=n.concat(nC(t,r))}),n},nE=(t,r)=>((t,r)=>{let n=void 0===r?document:r.dom;return rb(n)?[]:es(n.querySelectorAll(t),rc)})(r,t),nw=(t,r,n)=>rY(t,r,n).isSome();class nx{constructor(t,r){this.node=t,this.rootNode=r,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,r,n,o){if(t){if(!o&&t[r])return t[r];if(t!==this.rootNode){let r=t[n];if(r)return r;for(let o=t.parentNode;o&&o!==this.rootNode;o=o.parentNode)if(r=o[n])return r}}}findPreviousNode(t,r){if(t){let n=t.previousSibling;if(this.rootNode&&n===this.rootNode)return;if(n){if(!r){for(let t=n.lastChild;t;t=t.lastChild)if(!t.lastChild)return t}return n}let o=t.parentNode;if(o&&o!==this.rootNode)return o}}}let n_=t=>r=>!!r&&r.nodeType===t,nk=t=>!!t&&!Object.getPrototypeOf(t),nS=n_(1),nN=t=>nS(t)&&tQ(rc(t)),nR=t=>{let r=t.toLowerCase();return t=>I(t)&&t.nodeName.toLowerCase()===r},nA=t=>{let r=t.map(t=>t.toLowerCase());return t=>!!t&&!!t.nodeName&&el(r,t.nodeName.toLowerCase())},nT=(t,r)=>{let n=r.toLowerCase().split(" ");return r=>{if(nS(r)){let o=r.ownerDocument.defaultView;if(o)for(let a=0;a<n.length;a++){let l=o.getComputedStyle(r,null);if((l?l.getPropertyValue(t):null)===n[a])return!0}}return!1}},nO=t=>r=>nS(r)&&r.hasAttribute(t),nB=t=>nS(t)&&t.hasAttribute("data-mce-bogus"),nP=t=>nS(t)&&"TABLE"===t.tagName,nD=t=>r=>!!nN(r)&&(r.contentEditable===t||r.getAttribute("data-mce-contenteditable")===t),nL=nA(["textarea","input"]),nM=n_(3),nF=n_(4),nI=n_(7),nU=n_(8),nz=n_(9),nj=n_(11),nH=nR("br"),n$=nR("img"),nq=nD("true"),nV=nD("false"),nW=nA(["td","th"]),nK=nA(["td","th","caption"]),nY=nA(["video","audio","object","embed"]),nG=nR("li"),nX=nR("details"),nQ=nR("summary"),nJ=t=>"\uFEFF"===t,nZ=((t,r)=>{let n=r=>t(r)?et.from(r.dom.nodeValue):et.none();return{get:r=>{if(!t(r))throw Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,n)=>{if(!t(r))throw Error("Can only set raw text value of a text node");r.dom.nodeValue=n}}})(tZ),n0=t=>nZ.get(t),n1=t=>nZ.getOption(t),n2=t=>{let r;return n=>ej(r=r||ex(t,ee),tY(n))},n3=t=>tJ(t)&&"br"===tY(t),n8=n2(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),n5=n2(["ul","ol","dl"]),n6=n2(["li","dd","dt"]),n9=n2(["thead","tbody","tfoot"]),n4=n2(["td","th"]),n7=n2(["pre","script","textarea","style"]),oe=()=>{let t=rm("br");return t8(t,"data-mce-bogus","1"),t},ot=t=>{no(t),nt(t,oe())},or=t=>t.replace(/\uFEFF/g,""),on=t=>(nM(t)&&(t=t.parentNode),nS(t)&&t.hasAttribute("data-mce-caret")),oo=t=>nM(t)&&nJ(t.data),oa=t=>on(t)||oo(t),ol=t=>t.firstChild!==t.lastChild||!nH(t.firstChild),oi=t=>{let r=t.container();return!!nM(r)&&("\uFEFF"===r.data.charAt(t.offset())||t.isAtStart()&&oo(r.previousSibling))},os=t=>{let r=t.container();return!!nM(r)&&("\uFEFF"===r.data.charAt(t.offset()-1)||t.isAtEnd()&&oo(r.nextSibling))},od=t=>nM(t)&&"\uFEFF"===t.data[0],oc=t=>nM(t)&&"\uFEFF"===t.data[t.data.length-1],ou=t=>t&&t.hasAttribute("data-mce-caret")?((t=>{var r;let n=t.getElementsByTagName("br"),o=n[n.length-1];nB(o)&&(null===(r=o.parentNode)||void 0===r||r.removeChild(o))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,om=t=>on(t.startContainer),of=nA(["script","style","textarea"]),og=nA(["img","input","textarea","hr","iframe","video","audio","object","embed"]),op=nA(["table"]),oh=t=>!oa(t)&&(nM(t)?!of(t.parentNode):og(t)||nH(t)||op(t)||ob(t)),ob=t=>!(nS(t)&&"true"===t.getAttribute("unselectable"))&&nV(t),ov=(t,r)=>oh(t)&&((t,r)=>{for(let n=t.parentNode;n&&n!==r;n=n.parentNode){if(ob(n))return!1;if(nq(n))break}return!0})(t,r),oy=/^[ \t\r\n]*$/,oC=t=>oy.test(t),oE=t=>{for(let r of t)if(!nJ(r))return!1;return!0},ow=t=>"\n"===t||"\r"===t,ox=(t,r=4,n=!0,o=!0)=>{let a=r<=0?"":Array(r+1).join(" "),l=t.replace(/\t/g,a);return eg(l,(t,r)=>{var a;return -1!==" \f	\v".indexOf(r)||"\xa0"===r?t.pcIsSpace||""===t.str&&n||t.str.length===l.length-1&&o||(a=t.str.length+1)<l.length&&a>=0&&ow(l[a])?{pcIsSpace:!1,str:t.str+"\xa0"}:{pcIsSpace:!0,str:t.str+" "}:{pcIsSpace:ow(r),str:t.str+r}},{pcIsSpace:!1,str:""}).str},o_=(t,r)=>oh(t)&&(!(nM(t)&&oC(t.data))||!!((t,r)=>{let n=rc(r);return nw(rc(t),"pre,code",Y(rv,n))})(t,r))||nS(t)&&"A"===t.nodeName&&!t.hasAttribute("href")&&(t.hasAttribute("name")||t.hasAttribute("id"))||ok(t),ok=nO("data-mce-bookmark"),oS=nO("data-mce-bogus"),oN=t=>nS(t)&&"all"===t.getAttribute("data-mce-bogus"),oR=t=>r_(rc(t)).exists(t=>!rQ(t)),oA=(t,r=!0)=>((t,r)=>{let n=0;if(o_(t,t))return!1;{let o=t.firstChild;if(!o)return!0;let a=new nx(o,t);do{if(r){if(oN(o)){o=a.next(!0);continue}if(oS(o)){o=a.next();continue}}if(nq(o)&&oR(o))return!1;if(nH(o))n++,o=a.next();else{if(o_(o,t))return!1;o=a.next()}}while(o);return n<=1}})(t.dom,r),oT=t=>"svg"===t.toLowerCase(),oO=t=>oT(t.nodeName),oB=t=>"svg"===(null==t?void 0:t.nodeName)?"svg":"html",oP=["svg"],oD="data-mce-block",oL=t=>es(em(eT(t),t=>!/[A-Z]/.test(t)),t=>`${t}:`+es(oP,r=>`not(${r} ${t})`).join(":")).join(","),oM=(t,r)=>I(r.querySelector(t))?(r.setAttribute(oD,"true"),"inline-boundary"===r.getAttribute("data-mce-selected")&&r.removeAttribute("data-mce-selected"),!0):(r.removeAttribute(oD),!1),oF=(t,r)=>{let n=oL(t.getTransparentElements()),o=oL(t.getBlockElements());return em(r.querySelectorAll(n),t=>oM(o,t))},oI=(t,r)=>{var n;let o=r?"lastChild":"firstChild";for(let r=t[o];r;r=r[o])if(oA(rc(r)))return void(null===(n=r.parentNode)||void 0===n||n.removeChild(r))},oU=(t,r,n)=>{let o=t.getBlockElements(),a=rc(r),l=t=>tY(t) in o,i=t=>rv(t,a);ed(ni(n),r=>{rV(r,l,i).each(n=>{let o=em(rT(r),r=>l(r)&&!t.isValidChild(tY(n),tY(r)));if(o.length>0){let r=r_(n);ed(o,t=>{rV(t,l,i).each(r=>{((t,r)=>{let n=document.createRange(),o=t.parentNode;if(o){n.setStartBefore(t),n.setEndBefore(r);let a=n.extractContents();oI(a,!0),n.setStartAfter(r),n.setEndAfter(t);let l=n.extractContents();oI(l,!1),oA(rc(a))||o.insertBefore(a,t),oA(rc(r))||o.insertBefore(r,t),oA(rc(l))||o.insertBefore(l,t),o.removeChild(t)}})(r.dom,t.dom)})}),r.each(r=>oF(t,r.dom))}})})},oz=(t,r)=>{let n=oF(t,r);oU(t,r,n),ed([...n,...oV(t,r)?[r]:[]],r=>ed(nE(rc(r),r.nodeName.toLowerCase()),r=>{oW(t,r.dom)&&nl(r)}))},oj=(t,r)=>{oq(t,r)&&oM(oL(t.getBlockElements()),r)},oH=t=>t.hasAttribute(oD),o$=(t,r)=>ej(t.getTransparentElements(),r),oq=(t,r)=>nS(r)&&o$(t,r.nodeName),oV=(t,r)=>oq(t,r)&&oH(r),oW=(t,r)=>oq(t,r)&&!oH(r),oK=(t,r)=>1===r.type&&o$(t,r.name)&&T(r.attr(oD)),oY=tR().browser,oG=t=>eh(t,tJ),oX=(t,r)=>t.children&&el(t.children,r),oQ=(t,r={})=>{let n=0,o={},a=rc(t),l=rE(a),i=t=>{nt(rU(a),t)},s=t=>{rG(rU(a),"#"+t).each(na)},d=t=>ez(o,t).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),c=t=>new Promise((n,a)=>{let s;let c=tU._addCacheSuffix(t),u=d(c);o[c]=u,u.count++;let m=(t,r)=>{ed(t,J),u.status=r,u.passed=[],u.failed=[],s&&(s.onload=null,s.onerror=null,s=null)},f=()=>m(u.passed,2),g=()=>m(u.failed,3);if(n&&u.passed.push(n),a&&u.failed.push(a),1===u.status)return;if(2===u.status)return void f();if(3===u.status)return void g();u.status=1;let p=rm("link",l.dom);t5(p,{rel:"stylesheet",type:"text/css",id:u.id}),r.contentCssCors&&t8(p,"crossOrigin","anonymous"),r.referrerPolicy&&t8(p,"referrerpolicy",r.referrerPolicy),(s=p.dom).onload=f,s.onerror=g,i(p),t8(p,"href",c)}),u=t=>{let r=tU._addCacheSuffix(t);ez(o,r).each(t=>{0==--t.count&&(delete o[r],s(t.id))})};return{load:c,loadRawCss:(t,r)=>{let n=d(t);o[t]=n,n.count++;let a=rm("style",l.dom);t5(a,{rel:"stylesheet",type:"text/css",id:n.id}),a.dom.innerHTML=r,i(a)},loadAll:t=>Promise.allSettled(es(t,t=>c(t).then(V(t)))).then(t=>{let r=eu(t,t=>"fulfilled"===t.status);return r.fail.length>0?Promise.reject(es(r.fail,t=>t.reason)):es(r.pass,t=>t.value)}),unload:u,unloadRawCss:t=>{ez(o,t).each(r=>{0==--r.count&&(delete o[t],s(r.id))})},unloadAll:t=>{ed(t,t=>{u(t)})},_setReferrerPolicy:t=>{r.referrerPolicy=t},_setContentCssCors:t=>{r.contentCssCors=t}}},oJ=(()=>{let t=new WeakMap;return{forElement:(r,n)=>{let o=rI(r).dom;return et.from(t.get(o)).getOrThunk(()=>{let r=oQ(o,n);return t.set(o,r),r})}}})(),oZ=(t,r,n)=>I(t)&&(o_(t,r)||n.isInline(t.nodeName.toLowerCase())),o0=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),o1=(t,r,n,o)=>{var a;let l=o||r;if(nS(r)&&o0(r))return r;let i=r.childNodes;for(let r=i.length-1;r>=0;r--)o1(t,i[r],n,l);if(nS(r)){let t=r.childNodes;1===t.length&&o0(t[0])&&(null===(a=r.parentNode)||void 0===a||a.insertBefore(t[0],r))}return nj(r)||nz(r)||o_(r,l)||nS(r)&&r.childNodes.length>0||nM(r)&&r.data.length>0&&((t,r,n)=>{let o=new nx(t,r).prev(!1),a=new nx(t,r).next(!1),l=M(o)||oZ(o,r,n),i=M(a)||oZ(a,r,n);return l&&i})(r,l,n)||t.remove(r),r},o2=tU.makeMap,o3=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,o8=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,o5=/[<>&\"\']/g,o6=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,o9={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},o4={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},o7={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ae=(t,r)=>{let n={};if(t){let o=t.split(",");r=r||10;for(let t=0;t<o.length;t+=2){let a=String.fromCharCode(parseInt(o[t],r));if(!o4[a]){let r="&"+o[t+1]+";";n[a]=r,n[r]=a}}return n}},at=ae("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ar=(t,r)=>t.replace(r?o3:o8,t=>o4[t]||t),an=(t,r)=>t.replace(r?o3:o8,t=>t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":o4[t]||"&#"+t.charCodeAt(0)+";"),ao=(t,r,n)=>{let o=n||at;return t.replace(r?o3:o8,t=>o4[t]||o[t]||t)},aa={encodeRaw:ar,encodeAllRaw:t=>(""+t).replace(o5,t=>o4[t]||t),encodeNumeric:an,encodeNamed:ao,getEncodeFunc:(t,r)=>{let n=ae(r)||at,o=o2(t.replace(/\+/g,","));return o.named&&o.numeric?(t,r)=>t.replace(r?o3:o8,t=>void 0!==o4[t]?o4[t]:void 0!==n[t]?n[t]:t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":"&#"+t.charCodeAt(0)+";"):o.named?r?(t,r)=>ao(t,r,n):ao:o.numeric?an:ar},decode:t=>t.replace(o6,(t,r)=>r?(r="x"===r.charAt(0).toLowerCase()?parseInt(r.substr(1),16):parseInt(r,10))>65535?String.fromCharCode(55296+((r-=65536)>>10),56320+(1023&r)):o9[r]||String.fromCharCode(r):o7[t]||at[t]||(t=>{let r=rm("div").dom;return r.innerHTML=t,r.textContent||r.innerText||t})(t))},al=(t,r)=>(t=tU.trim(t))?t.split(r||" "):[],ai=t=>RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),as={},ad=tU.makeMap,ac=tU.each,au=tU.extend,am=tU.explode,af=(t,r={})=>au(ad(t," ",ad(t.toUpperCase()," ")),r),ag=t=>af("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),ap=(t,r)=>{if(t){let n={};return T(t)&&(t={"*":t}),ac(t,(t,o)=>{n[o]=n[o.toUpperCase()]="map"===r?ad(t,/[, ]/):am(t,/[, ]/)}),n}},ah=(t={})=>{var r;let n={},o={},a=[],l={},i={},s=(r,n,o)=>{let a=t[r];if(a)return ad(a,/[, ]/,ad(a.toUpperCase(),/[, ]/));{let t=as[r];return t||(t=af(n,o),as[r]=t),t}},d=null!==(r=t.schema)&&void 0!==r?r:"html5",c=(t=>{let{globalAttributes:r,phrasingContent:n,flowContent:o}=(t=>{let r,n,o;r="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(r+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",o+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==t&&(r+=" xml:lang",o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));let a=[n,o].join(" ");return{globalAttributes:r,blockContent:n,phrasingContent:o,flowContent:a}})(t),a={},l=(t,r,n)=>{a[t]={attributes:ex(r,V({})),attributesOrder:r,children:ex(n,V({}))}},i=(t,n="",o="")=>{let a=al(o),i=al(t),s=i.length,d=al([r,n].join(" "));for(;s--;)l(i[s],d.slice(),a)},s=(t,r)=>{let n=al(t),o=al(r),l=n.length;for(;l--;){let t=a[n[l]];for(let r=0,n=o.length;r<n;r++)t.attributes[o[r]]={},t.attributesOrder.push(o[r])}};return"html5-strict"!==t&&(ed(al("acronym applet basefont big font strike tt"),t=>{i(t,"",n)}),ed(al("center dir isindex noframes"),t=>{i(t,"",o)})),i("html","manifest","head body"),i("head","","base command link meta noscript script style title"),i("title hr noscript br"),i("base","href target"),i("link","href rel media hreflang type sizes hreflang"),i("meta","name http-equiv content charset"),i("style","media type scoped"),i("script","src async defer type charset"),i("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),i("dd div","",o),i("address dt caption","","html4"===t?n:o),i("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),i("blockquote","cite",o),i("ol","reversed start type","li"),i("ul","","li"),i("li","value",o),i("dl","","dt dd"),i("a","href target rel media hreflang type","html4"===t?n:o),i("q","cite",n),i("ins del","cite datetime",o),i("img","src sizes srcset alt usemap ismap width height"),i("iframe","src name width height",o),i("embed","src type width height"),i("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),i("param","name value"),i("map","name",[o,"area"].join(" ")),i("area","alt coords shape href target rel media hreflang type"),i("table","border","caption colgroup thead tfoot tbody tr"+("html4"===t?" col":"")),i("colgroup","span","col"),i("col","span"),i("tbody thead tfoot","","tr"),i("tr","","td th"),i("td","colspan rowspan headers",o),i("th","colspan rowspan headers scope abbr",o),i("form","accept-charset action autocomplete enctype method name novalidate target",o),i("fieldset","disabled form name",[o,"legend"].join(" ")),i("label","form for",n),i("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),i("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===t?o:n),i("select","disabled form multiple name required size","option optgroup"),i("optgroup","disabled label","option"),i("option","disabled label selected value"),i("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),i("menu","type label",[o,"li"].join(" ")),i("noscript","",o),"html4"!==t&&(i("wbr"),i("ruby","",[n,"rt rp"].join(" ")),i("figcaption","",o),i("mark rt rp bdi","",n),i("summary","",[n,"h1 h2 h3 h4 h5 h6"].join(" ")),i("canvas","width height",o),i("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),i("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),i("picture","","img source"),i("source","src srcset type media sizes"),i("track","kind src srclang label default"),i("datalist","",[n,"option"].join(" ")),i("article section nav aside main header footer","",o),i("hgroup","","h1 h2 h3 h4 h5 h6"),i("figure","",[o,"figcaption"].join(" ")),i("time","datetime",n),i("dialog","open",o),i("command","type label icon disabled checked radiogroup command"),i("output","for form name",n),i("progress","value max",n),i("meter","value min max low high optimum",n),i("details","open",[o,"summary"].join(" ")),i("keygen","autofocus challenge disabled form keytype name"),l("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==t&&(s("script","language xml:space"),s("style","xml:space"),s("object","declare classid code codebase codetype archive standby align border hspace vspace"),s("embed","align name hspace vspace"),s("param","valuetype type"),s("a","charset name rev shape coords"),s("br","clear"),s("applet","codebase archive code object alt name width height align hspace vspace"),s("img","name longdesc align border hspace vspace"),s("iframe","longdesc frameborder marginwidth marginheight scrolling align"),s("font basefont","size color face"),s("input","usemap align"),s("select"),s("textarea"),s("h1 h2 h3 h4 h5 h6 div p legend caption","align"),s("ul","type compact"),s("li","type"),s("ol dl menu dir","compact"),s("pre","width xml:space"),s("hr","align noshade size width"),s("isindex","prompt"),s("table","summary width frame rules cellspacing cellpadding align bgcolor"),s("col","width align char charoff valign"),s("colgroup","width align char charoff valign"),s("thead","align char charoff valign"),s("tr","align char charoff valign bgcolor"),s("th","axis align char charoff valign nowrap bgcolor width height"),s("form","accept"),s("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),s("tfoot","align char charoff valign"),s("tbody","align char charoff valign"),s("area","nohref"),s("body","background bgcolor text link vlink alink")),"html4"!==t&&(s("input button select textarea","autofocus"),s("input textarea","placeholder"),s("a","download"),s("link script img","crossorigin"),s("img","loading"),s("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==t&&ed([a.video,a.audio],t=>{delete t.children.audio,delete t.children.video}),ed(al("a form meter progress dfn"),t=>{a[t]&&delete a[t].children[t]}),delete a.caption.children.table,delete a.script,a})(d);!1===t.verify_html&&(t.valid_elements="*[*]");let u=ap(t.valid_styles),m=ap(t.invalid_styles,"map"),f=ap(t.valid_classes,"map"),g=s("whitespace_elements","pre script noscript style textarea video audio iframe object code"),p=s("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=s("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),b=s("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",y=s("non_empty_elements",v+" pre svg",h),C=s("move_caret_before_on_enter_elements",v+" table",h),E="h1 h2 h3 h4 h5 h6",w=s("text_block_elements",E+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),x=s("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",w),_=s("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),k=s("transparent_elements","a ins del canvas map"),S=s("wrap_block_elements","pre "+E);ac("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),t=>{i[t]=RegExp("</"+t+"[^>]*>","gi")});let N=t=>{let r=et.from(n["@"]),o=/[*?+]/;ed(((t,r)=>{let n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return ey(al(r,","),r=>{let o=n.exec(r);if(o){let r=o[1],n=o[2],a=o[3],l=o[4],i=o[5],s={attributes:{},attributesOrder:[]};if(t.each(t=>{eB(t.attributes,(t,r)=>{s.attributes[r]=t}),s.attributesOrder.push(...t.attributesOrder)}),"#"===r?s.paddEmpty=!0:"-"===r&&(s.removeEmpty=!0),"!"===l&&(s.removeEmptyAttrs=!0),i&&((t,r)=>{let n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,o=/[*?+]/,{attributes:a,attributesOrder:l}=r;ed(al(t,"|"),t=>{let i=n.exec(t);if(i){let t={},n=i[1],s=i[2].replace(/[\\:]:/g,":"),d=i[3],c=i[4];if("!"===n&&(r.attributesRequired=r.attributesRequired||[],r.attributesRequired.push(s),t.required=!0),"-"===n)return delete a[s],void l.splice(tU.inArray(l,s),1);(d&&("="===d?(r.attributesDefault=r.attributesDefault||[],r.attributesDefault.push({name:s,value:c}),t.defaultValue=c):"~"===d?(r.attributesForced=r.attributesForced||[],r.attributesForced.push({name:s,value:c}),t.forcedValue=c):"<"===d&&(t.validValues=tU.makeMap(c,"?"))),o.test(s))?(r.attributePatterns=r.attributePatterns||[],t.pattern=ai(s),r.attributePatterns.push(t)):(a[s]||l.push(s),a[s]=t)}})})(i,s),a&&(s.outputName=n),"@"===n){if(!t.isNone())return[];t=et.some(s)}return[a?{name:n,element:s,aliasName:a}:{name:n,element:s}]}return[]})})(r,null!=t?t:""),({name:t,element:r,aliasName:l})=>{(l&&(n[l]=r),o.test(t))?(r.pattern=ai(t),a.push(r)):n[t]=r})},R=t=>{a=[],ed(eT(n),t=>{delete n[t]}),N(t)},A=t=>{delete as.text_block_elements,delete as.block_elements,ed((t=>{let r=/^(~)?(.+)$/;return ey(al(t,","),t=>{let n=r.exec(t);if(n){let t="~"===n[1];return[{inline:t,cloneName:t?"span":"div",name:n[2]}]}return[]})})(null!=t?t:""),({inline:t,name:r,cloneName:a})=>{if(o[r]=o[a],l[r]=a,y[r.toUpperCase()]={},y[r]={},t||(x[r.toUpperCase()]={},x[r]={}),!n[r]){let t=n[a];t=au({},t),delete t.removeEmptyAttrs,delete t.removeEmpty,n[r]=t}eB(o,(t,n)=>{t[a]&&(o[n]=t=au({},o[n]),t[r]=t[a])})})},T=t=>{ed((t=>{let r=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return ey(al(t,","),t=>{let n=r.exec(t);if(n){let t=n[1];return[{operation:t?"-"===t?"remove":"add":"replace",name:n[2],validChildren:al(n[3],"|")}]}return[]})})(null!=t?t:""),({operation:t,name:r,validChildren:n})=>{let a="replace"===t?{"#comment":{}}:o[r];ed(n,r=>{"remove"===t?delete a[r]:a[r]={}}),o[r]=a})},O=t=>{let r=n[t];if(r)return r;let o=a.length;for(;o--;){let r=a[o];if(r.pattern.test(t))return r}};t.valid_elements?(R(t.valid_elements),ac(c,(t,r)=>{o[r]=t.children})):(ac(c,(t,r)=>{n[r]={attributes:t.attributes,attributesOrder:t.attributesOrder},o[r]=t.children}),ac(al("strong/b em/i"),t=>{let r=al(t,"/");n[r[1]].outputName=r[0]}),ac(_,(r,o)=>{n[o]&&(t.padd_empty_block_inline_children&&(n[o].paddInEmptyBlock=!0),n[o].removeEmpty=!0)}),ac(al("ol ul blockquote a table tbody"),t=>{n[t]&&(n[t].removeEmpty=!0)}),ac(al("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),t=>{n[t]&&(n[t].paddEmpty=!0)}),ac(al("span"),t=>{n[t].removeEmptyAttrs=!0})),delete n.svg,A(t.custom_elements),T(t.valid_children),N(t.extended_valid_elements),T("+ol[ul|ol],+ul[ul|ol]"),ac({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(t,r)=>{n[r]&&(n[r].parentsRequired=al(t))}),t.invalid_elements&&ac(am(t.invalid_elements),t=>{n[t]&&delete n[t]}),O("span")||N("span[!data-mce-type|*]");let B=V(u),P=V(m),D=V(f),L=V(b),M=V(x),F=V(w),I=V(_),U=V(Object.seal(h)),z=V(p),j=V(y),H=V(C),$=V(g),q=V(k),W=V(S),K=V(Object.seal(i)),Y=(t,r)=>{let n=O(t);if(n){if(!r)return!0;{if(n.attributes[r])return!0;let t=n.attributePatterns;if(t){let n=t.length;for(;n--;)if(t[n].pattern.test(r))return!0}}}return!1},G=t=>ej(M(),t),X=t=>!e6(t,"#")&&Y(t)&&!G(t);return{type:d,children:o,elements:n,getValidStyles:B,getValidClasses:D,getBlockElements:M,getInvalidStyles:P,getVoidElements:U,getTextBlockElements:F,getTextInlineElements:I,getBoolAttrs:L,getElementRule:O,getSelfClosingElements:z,getNonEmptyElements:j,getMoveCaretBeforeOnEnterElements:H,getWhitespaceElements:$,getTransparentElements:q,getSpecialElements:K,isValidChild:(t,r)=>{let n=o[t.toLowerCase()];return!(!n||!n[r.toLowerCase()])},isValid:Y,isBlock:G,isInline:X,isWrapper:t=>ej(W(),t)||X(t),getCustomElements:V(l),addValidElements:N,setValidElements:R,addCustomElements:A,addValidChildren:T}},ab=t=>{let r=t.toString(16);return(1===r.length?"0"+r:r).toUpperCase()},av=t=>({value:e8(ab(t.red)+ab(t.green)+ab(t.blue),"#").toUpperCase()}),ay=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,aC=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,aE=(t,r,n,o)=>({red:t,green:r,blue:n,alpha:o}),aw=(t,r,n,o)=>{let a=parseInt(t,10);return aE(a,parseInt(r,10),parseInt(n,10),parseFloat(o))},ax=t=>{if("transparent"===t)return et.some(aE(0,0,0,0));let r=ay.exec(t);if(null!==r)return et.some(aw(r[1],r[2],r[3],"1"));let n=aC.exec(t);return null!==n?et.some(aw(n[1],n[2],n[3],n[4])):et.none()},a_=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,ak=t=>ax(t).map(av).map(t=>"#"+t.value).getOr(t),aS=(t={},r)=>{let n,o;let a=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,s={};r&&(n=r.getValidStyles(),o=r.getInvalidStyles());let d="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(let t=0;t<d.length;t++)s[d[t]]="\uFEFF"+t,s["\uFEFF"+t]=d[t];let c={parse:r=>{var n,o,d;let u={},m=!1,f=t.url_converter,g=t.url_converter_scope||c,p=(t,r,n)=>{let o=u[t+"-top"+r];if(!o)return;let a=u[t+"-right"+r];if(!a)return;let l=u[t+"-bottom"+r];if(!l)return;let i=u[t+"-left"+r];if(!i)return;let s=[o,a,l,i],d=s.length-1;for(;d--&&s[d]===s[d+1];);d>-1&&n||(u[t+r]=-1===d?s[0]:s.join(" "),delete u[t+"-top"+r],delete u[t+"-right"+r],delete u[t+"-bottom"+r],delete u[t+"-left"+r])},h=t=>{let r=u[t];if(!r)return;let n=r.indexOf(",")>-1?[r]:r.split(" "),o=n.length;for(;o--;)if(n[o]!==n[0])return!1;return u[t]=n[0],!0},b=t=>(m=!0,s[t]),v=(t,r)=>(m&&(t=t.replace(/\uFEFF[0-9]/g,t=>s[t])),r||(t=t.replace(/\\([\'\";:])/g,"$1")),t),y=t=>String.fromCharCode(parseInt(t.slice(1),16)),C=t=>t.replace(/\\[0-9a-f]+/gi,y),E=(r,n,o,a,l,i)=>{if(l=l||i)return"'"+(l=v(l)).replace(/\'/g,"\\'")+"'";if(n=v(n||o||a||""),!t.allow_script_urls){let r=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(r)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(r))return""}return f&&(n=f.call(g,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(r){let s;for(r=(r=r.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,b).replace(/\"[^\"]+\"|\'[^\']+\'/g,t=>t.replace(/[;:]/g,b));s=l.exec(r);){l.lastIndex=s.index+s[0].length;let r=s[1].replace(i,"").toLowerCase(),n=s[2].replace(i,"");if(r&&n){if(r=C(r),n=C(n),-1!==r.indexOf("\uFEFF")||-1!==r.indexOf('"')||!t.allow_script_urls&&("behavior"===r||/expression\s*\(|\/\*|\*\//.test(n)))continue;"font-weight"===r&&"700"===n?n="bold":"color"!==r&&"background-color"!==r||(n=n.toLowerCase()),T(t.force_hex_color)&&"off"!==t.force_hex_color&&ax(n).each(r=>{"always"!==t.force_hex_color&&1!==r.alpha||(n=ak(a_(r)))}),n=n.replace(a,E),u[r]=m?v(n,!0):n}}p("border","",!0),p("border","-width"),p("border","-color"),p("border","-style"),p("padding",""),p("margin",""),o="border-style",d="border-color",h(n="border-width")&&h(o)&&h(d)&&(u.border=u[n]+" "+u[o]+" "+u[d],delete u[n],delete u[o],delete u[d]),"medium none"===u.border&&delete u.border,"none"===u["border-image"]&&delete u["border-image"]}return u},serialize:(t,r)=>{let a="",l=(r,n)=>{let o=n[r];if(o)for(let r=0,n=o.length;r<n;r++){let n=o[r],l=t[n];l&&(a+=(a.length>0?" ":"")+n+": "+l+";")}};return r&&n?(l("*",n),l(r,n)):eB(t,(t,n)=>{t&&((t,r)=>{if(!o||!r)return!0;let n=o["*"];return!(n&&n[t]||(n=o[r])&&n[t])})(n,r)&&(a+=(a.length>0?" ":"")+n+": "+t+";")}),a}};return c},aN={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},aR=(t,r)=>{let n=null!=r?r:{};for(let r in t)ej(aN,r)||(n[r]=t[r]);return I(t.composedPath)&&(n.composedPath=()=>t.composedPath()),I(t.getModifierState)&&(n.getModifierState=r=>t.getModifierState(r)),I(t.getTargetRanges)&&(n.getTargetRanges=()=>t.getTargetRanges()),n},aA=(t,r,n,o)=>{var a,l;let i=aR(r,o);return i.type=t,F(i.target)&&(i.target=null!==(a=i.srcElement)&&void 0!==a?a:n),(F(r.preventDefault)||(l=r)instanceof Event||U(l.initEvent))&&(i.preventDefault=()=>{i.defaultPrevented=!0,i.isDefaultPrevented=ee,U(r.preventDefault)&&r.preventDefault()},i.stopPropagation=()=>{i.cancelBubble=!0,i.isPropagationStopped=ee,U(r.stopPropagation)&&r.stopPropagation()},i.stopImmediatePropagation=()=>{i.isImmediatePropagationStopped=ee,i.stopPropagation()},i.isDefaultPrevented===ee||i.isDefaultPrevented===Z||(i.isDefaultPrevented=!0===i.defaultPrevented?ee:Z,i.isPropagationStopped=!0===i.cancelBubble?ee:Z,i.isImmediatePropagationStopped=Z)),i},aT=/^(?:mouse|contextmenu)|click/,aO=(t,r,n,o)=>{t.addEventListener(r,n,o||!1)},aB=(t,r,n,o)=>{t.removeEventListener(r,n,o||!1)},aP=(t,r)=>{let n=aA(t.type,t,document,r);if(I(t)&&aT.test(t.type)&&M(t.pageX)&&!M(t.clientX)){let r=n.target.ownerDocument||document,o=r.documentElement,a=r.body;n.pageX=t.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),n.pageY=t.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}return n},aD=(t,r,n)=>{let o=t.document,a={type:"ready"};if(n.domLoaded)return void r(a);let l=()=>{aB(t,"DOMContentLoaded",l),aB(t,"load",l),n.domLoaded||(n.domLoaded=!0,r(a)),t=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?l():aO(t,"DOMContentLoaded",l),n.domLoaded||aO(t,"load",l)};class aL{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,r,n,o){let a,l;let i=this,s=window,d=t=>{i.executeHandlers(aP(t||s.event),l)};if(!t||nM(t)||nU(t))return n;t[i.expando]?l=t[i.expando]:(l=i.count++,t[i.expando]=l,i.events[l]={}),o=o||t;let c=r.split(" "),u=c.length;for(;u--;){let r=c[u],m=d,f=!1,g=!1;"DOMContentLoaded"===r&&(r="ready"),i.domLoaded&&"ready"===r&&"complete"===t.readyState?n.call(o,aP({type:r})):(i.hasFocusIn||"focusin"!==r&&"focusout"!==r||(f=!0,g="focusin"===r?"focus":"blur",m=t=>{let r=aP(t||s.event);r.type="focus"===r.type?"focusin":"focusout",i.executeHandlers(r,l)}),(a=i.events[l][r])?"ready"===r&&i.domLoaded?n(aP({type:r})):a.push({func:n,scope:o}):(i.events[l][r]=a=[{func:n,scope:o}],a.fakeName=g,a.capture=f,a.nativeHandler=m,"ready"===r?aD(t,m,i):aO(t,g||r,m,f)))}return t=a=null,n}unbind(t,r,n){if(!t||nM(t)||nU(t))return this;let o=t[this.expando];if(o){let a=this.events[o];if(r){let o=r.split(" "),l=o.length;for(;l--;){let r=o[l],i=a[r];if(i){if(n){let t=i.length;for(;t--;)if(i[t].func===n){let n=i.nativeHandler,o=i.fakeName,l=i.capture,s=i.slice(0,t).concat(i.slice(t+1));s.nativeHandler=n,s.fakeName=o,s.capture=l,a[r]=s}}n&&0!==i.length||(delete a[r],aB(t,i.fakeName||r,i.nativeHandler,i.capture))}}}else eB(a,(r,n)=>{aB(t,r.fakeName||n,r.nativeHandler,r.capture)}),a={};for(let t in a)if(ej(a,t))return this;delete this.events[o];try{delete t[this.expando]}catch(r){t[this.expando]=null}}return this}fire(t,r,n){return this.dispatch(t,r,n)}dispatch(t,r,n){if(!t||nM(t)||nU(t))return this;let o=aP({type:r,target:t},n);do{let r=t[this.expando];r&&this.executeHandlers(o,r),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||nM(t)||nU(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);let r=t.getElementsByTagName("*"),n=r.length;for(;n--;)(t=r[n])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,r){let n=this.events[r],o=n&&n[t.type];if(o)for(let r=0,n=o.length;r<n;r++){let n=o[r];if(n&&!1===n.func.call(n.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}aL.Event=new aL;let aM=tU.each,aF=tU.grep,aI="data-mce-style",aU=tU.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),az=(t,r,n)=>{F(n)||""===n?t7(t,r):t8(t,r,n)},aj=t=>t.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),aH=(t,r)=>{let n=0;if(t)for(let o=t.nodeType,a=t.previousSibling;a;a=a.previousSibling){let t=a.nodeType;r&&nM(a)&&(t===o||!a.data.length)||(n++,o=t)}return n},a$=(t,r)=>{let n=t6(r,"style"),o=t.serialize(t.parse(n),tY(r));az(r,aI,o)},aq=(t,r,n)=>{let o=aj(r);F(n)||""===n?r9(t,o):r1(t,o,z(n)?ej(aU,o)?n+"":n+"px":n)},aV=(t,r={})=>{let n={},o=window,a={},l=0,i=oJ.forElement(rc(t),{contentCssCors:r.contentCssCors,referrerPolicy:r.referrerPolicy}),s=[],d=r.schema?r.schema:ah({}),c=aS({url_converter:r.url_converter,url_converter_scope:r.url_converter_scope,force_hex_color:r.force_hex_color},r.schema),u=r.ownEvents?new aL:aL.Event,m=d.getBlockElements(),f=r=>r&&t&&T(r)?t.getElementById(r):r,g=t=>{let r=f(t);return I(r)?rc(r):null},p=(t,r,n="")=>{let o;let a=g(t);if(I(a)&&tJ(a)){let t=K[r];o=t&&t.get?t.get(a.dom,r):t6(a,r)}return I(o)?o:n},h=t=>{let r=f(t);return F(r)?[]:r.attributes},b=(t,n,o)=>{k(t,t=>{if(nS(t)){let a=rc(t),l=""===o?null:o,i=t6(a,n),s=K[n];s&&s.set?s.set(a.dom,l,n):az(a,n,l),i!==l&&r.onSetAttrib&&r.onSetAttrib({attrElm:a.dom,attrName:n,attrValue:l})}})},v=()=>r.root_element||t.body,y=(r,n)=>((t,r,n)=>{let o=0,a=0,l=t.ownerDocument;if(n=n||t,r){var i;if(n===t&&r.getBoundingClientRect&&"static"===r3(rc(t),"position")){let n=r.getBoundingClientRect();return{x:o=n.left+(l.documentElement.scrollLeft||t.scrollLeft)-l.documentElement.clientLeft,y:a=n.top+(l.documentElement.scrollTop||t.scrollTop)-l.documentElement.clientTop}}let s=r;for(;s&&s!==n&&s.nodeType&&!oX(s,n);){let t=s;o+=t.offsetLeft||0,a+=t.offsetTop||0,s=t.offsetParent}for(s=r.parentNode;s&&s!==n&&s.nodeType&&!oX(s,n);)o-=s.scrollLeft||0,a-=s.scrollTop||0,s=s.parentNode;a+=(i=rc(r),oY.isFirefox()&&"table"===tY(i)?oG(rT(i)).filter(t=>"caption"===tY(t)).bind(t=>oG(rA(t)).map(r=>{let n=r.dom.offsetTop,o=t.dom.offsetTop,a=t.dom.offsetHeight;return n<=o?-a:0})).getOr(0):0)}return{x:o,y:a}})(t.body,f(r),n),C=(t,r,n)=>{let o=f(t);if(!F(o)&&(nN(o)||nS(o)&&"http://www.w3.org/2000/svg"===o.namespaceURI))return n?r3(rc(o),aj(r)):("float"===(r=r.replace(/-(\D)/g,(t,r)=>r.toUpperCase()))&&(r="cssFloat"),o.style?o.style[r]:void 0)},E=t=>{let r=f(t);if(!r)return{w:0,h:0};let n=C(r,"width"),o=C(r,"height");return n&&-1!==n.indexOf("px")||(n="0"),o&&-1!==o.indexOf("px")||(o="0"),{w:parseInt(n,10)||r.offsetWidth||r.clientWidth,h:parseInt(o,10)||r.offsetHeight||r.clientHeight}},w=(t,r)=>!!t&&ei(P(t)?t:[t],t=>rh(rc(t),r)),x=(t,r,n,o)=>{let a=[],l=f(t);o=void 0===o;let i=n||("BODY"!==v().nodeName?v().parentNode:null);if(T(r)){if("*"===r)r=nS;else{let t=r;r=r=>w(r,t)}}for(;l&&!(l===i||F(l.nodeType)||nz(l)||nj(l));){if(!r||r(l)){if(!o)return[l];a.push(l)}l=l.parentNode}return o?a:null},_=(t,r,n)=>{let o=r;if(t){T(r)&&(o=t=>w(t,r));for(let r=t[n];r;r=r[n])if(U(o)&&o(r))return r}return null},k=function(t,r,n){let o=null!=n?n:this;if(P(t)){let n=[];return aM(t,(t,a)=>{let l=f(t);l&&n.push(r.call(o,l,a))}),n}{let n=f(t);return!!n&&r.call(o,n)}},S=(t,r)=>{k(t,t=>{eB(r,(r,n)=>{b(t,n,r)})})},N=(t,r)=>{k(t,t=>{nd(rc(t),r)})},R=(r,n,o,a,l)=>k(r,r=>{let i=T(n)?t.createElement(n):n;return I(o)&&S(i,o),a&&(!T(a)&&a.nodeType?i.appendChild(a):T(a)&&N(i,a)),l?i:r.appendChild(i)}),A=(r,n,o)=>R(t.createElement(r),r,n,o,!0),O=aa.encodeAllRaw,B=(t,r)=>k(t,t=>{let n=rc(t);return r&&ed(rT(n),t=>{tZ(t)&&0===t.dom.length?na(t):r4(n,t)}),na(n),n.dom}),D=(t,r,n)=>{k(t,t=>{if(nS(t)){let o=rc(t);ed(r.split(" "),t=>{I(n)?(n?rl:rs)(o,t):(rr(o)?o.dom.classList.toggle(t):el(rn(o),t)?ra(o,t):ro(o,t),ri(o))})}})},L=(t,r,n)=>k(r,o=>{var a;let l=P(r)?t.cloneNode(!0):t;return n&&aM(aF(o.childNodes),t=>{l.appendChild(t)}),null===(a=o.parentNode)||void 0===a||a.replaceChild(l,o),o}),M=t=>{if(nS(t)){let r="a"===t.nodeName.toLowerCase()&&!p(t,"href")&&p(t,"id");if(p(t,"name")||p(t,"data-mce-bookmark")||r)return!0}return!1},z=()=>t.createRange(),j=(n,a,l,i)=>{if(P(n)){let t=n.length,r=[];for(;t--;)r[t]=j(n[t],a,l,i);return r}return r.collect&&(n===t||n===o)&&s.push([n,a,l,i]),u.bind(n,a,l,i||W)},$=(r,n,a)=>{if(P(r)){let t=r.length,o=[];for(;t--;)o[t]=$(r[t],n,a);return o}if(s.length>0&&(r===t||r===o)){let t=s.length;for(;t--;){let[o,l,i]=s[t];r!==o||n&&n!==l||a&&a!==i||u.unbind(o,l,i)}}return u.unbind(r,n,a)},q=t=>{if(t&&nN(t)){let r=t.getAttribute("data-mce-contenteditable");return r&&"inherit"!==r?r:"inherit"!==t.contentEditable?t.contentEditable:null}return null},W={doc:t,settings:r,win:o,files:a,stdMode:!0,boxModel:!0,styleSheetLoader:i,boundEvents:s,styles:c,schema:d,events:u,isBlock:t=>T(t)?ej(m,t):nS(t)&&(ej(m,t.nodeName)||oV(d,t)),root:null,clone:(t,r)=>t.cloneNode(r),getRoot:v,getViewPort:t=>{let r=ny(t);return{x:r.x,y:r.y,w:r.width,h:r.height}},getRect:t=>{let r=f(t),n=y(r),o=E(r);return{x:n.x,y:n.y,w:o.w,h:o.h}},getSize:E,getParent:(t,r,n)=>{let o=x(t,r,n,!1);return o&&o.length>0?o[0]:null},getParents:x,get:f,getNext:(t,r)=>_(t,r,"nextSibling"),getPrev:(t,r)=>_(t,r,"previousSibling"),select:(n,o)=>{var a,l;let i=null!==(l=null!==(a=f(o))&&void 0!==a?a:r.root_element)&&void 0!==l?l:t;return U(i.querySelectorAll)?eR(i.querySelectorAll(n)):[]},is:w,add:R,create:A,createHTML:(t,r,n="")=>{let o="<"+t;for(let t in r)eH(r,t)&&(o+=" "+t+'="'+O(r[t])+'"');return tn(n)&&ej(d.getVoidElements(),t)?o+" />":o+">"+n+"</"+t+">"},createFragment:r=>{let n;let o=t.createElement("div"),a=t.createDocumentFragment();for(a.appendChild(o),r&&(o.innerHTML=r);n=o.firstChild;)a.appendChild(n);return a.removeChild(o),a},remove:B,setStyle:(t,n,o)=>{k(t,t=>{let a=rc(t);aq(a,n,o),r.update_styles&&a$(c,a)})},getStyle:C,setStyles:(t,n)=>{k(t,t=>{let o=rc(t);eB(n,(t,r)=>{aq(o,r,t)}),r.update_styles&&a$(c,o)})},removeAllAttribs:t=>k(t,t=>{let r=t.attributes;for(let n=r.length-1;n>=0;n--)t.removeAttributeNode(r.item(n))}),setAttrib:b,setAttribs:S,getAttrib:p,getPos:y,parseStyle:t=>c.parse(t),serializeStyle:(t,r)=>c.serialize(t,r),addStyle:r=>{if(W!==aV.DOM&&t===document){if(n[r])return;n[r]=!0}let o=t.getElementById("mceDefaultStyles");if(!o){(o=t.createElement("style")).id="mceDefaultStyles",o.type="text/css";let r=t.head;r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o)}o.styleSheet?o.styleSheet.cssText+=r:o.appendChild(t.createTextNode(r))},loadCSS:t=>{t||(t=""),ed(t.split(","),t=>{a[t]=!0,i.load(t).catch(H)})},addClass:(t,r)=>{D(t,r,!0)},removeClass:(t,r)=>{D(t,r,!1)},hasClass:(t,r)=>{let n=g(t),o=r.split(" ");return I(n)&&eC(o,t=>rd(n,t))},toggleClass:D,show:t=>{k(t,t=>r9(rc(t),"display"))},hide:t=>{k(t,t=>r1(rc(t),"display","none"))},isHidden:t=>{let r=g(t);return I(r)&&tz(r5(r,"display"),"none")},uniqueId:t=>(t||"mce_")+l++,setHTML:N,getOuterHTML:t=>{let r=g(t);return I(r)?nS(r.dom)?r.dom.outerHTML:(t=>{let r=rm("div");return nt(r,rc(t.dom.cloneNode(!0))),ns(r)})(r):""},setOuterHTML:(t,r)=>{k(t,t=>{nS(t)&&(t.outerHTML=r)})},decode:aa.decode,encode:O,insertAfter:(t,r)=>{let n=f(r);return k(t,t=>{let r=null==n?void 0:n.parentNode,o=null==n?void 0:n.nextSibling;return r&&(o?r.insertBefore(t,o):r.appendChild(t)),t})},replace:L,rename:(t,r)=>{if(t.nodeName!==r.toUpperCase()){let n=A(r);return aM(h(t),r=>{b(n,r.nodeName,p(t,r.nodeName))}),L(n,t,!0),n}return t},findCommonAncestor:(t,r)=>{let n=t;for(;n;){let t=r;for(;t&&n!==t;)t=t.parentNode;if(n===t)break;n=n.parentNode}return!n&&t.ownerDocument?t.ownerDocument.documentElement:n},run:k,getAttribs:h,isEmpty:(t,r,n)=>{let o=0;if(M(t))return!1;let a=t.firstChild;if(a){let l=new nx(a,t),i=d?d.getWhitespaceElements():{},s=r||(d?d.getNonEmptyElements():null),c=a;do{if(nS(c)){let t=c.getAttribute("data-mce-bogus");if(t){c=l.next("all"===t);continue}let r=c.nodeName.toLowerCase();if(s&&s[r]){if("br"===r){o++,c=l.next();continue}return!1}if(M(c))return!1}if(nU(c)||nM(c)&&!oC(c.data)&&(!(null==n?void 0:n.includeZwsp)||!oE(c.data))||nM(c)&&c.parentNode&&i[c.parentNode.nodeName]&&oC(c.data))return!1;c=l.next()}while(c)}return o<=1},createRng:z,nodeIndex:aH,split:(t,r,n)=>{let o,a,l=z();if(t&&r&&t.parentNode&&r.parentNode){let i=t.parentNode;return l.setStart(i,aH(t)),l.setEnd(r.parentNode,aH(r)),o=l.extractContents(),(l=z()).setStart(r.parentNode,aH(r)+1),l.setEnd(i,aH(t)+1),a=l.extractContents(),i.insertBefore(o1(W,o,d),t),n?i.insertBefore(n,t):i.insertBefore(r,t),i.insertBefore(o1(W,a,d),t),B(t),n||r}},bind:j,unbind:$,fire:(t,r,n)=>u.dispatch(t,r,n),dispatch:(t,r,n)=>u.dispatch(t,r,n),getContentEditable:q,getContentEditableParent:t=>{let r=v(),n=null;for(let o=t;o&&o!==r&&null===(n=q(o));o=o.parentNode);return n},isEditable:t=>{if(I(t)){let r=nS(t)?t:t.parentElement;return I(r)&&nN(r)&&rQ(rc(r))}return!1},destroy:()=>{if(s.length>0){let t=s.length;for(;t--;){let[r,n,o]=s[t];u.unbind(r,n,o)}}eB(a,(t,r)=>{i.unload(r),delete a[r]})},isChildOf:(t,r)=>t===r||r.contains(t),dumpRng:t=>"startContainer: "+t.startContainer.nodeName+", startOffset: "+t.startOffset+", endContainer: "+t.endContainer.nodeName+", endOffset: "+t.endOffset},K=((t,r,n)=>{let o=r.keep_values,a={set:(t,o,a)=>{let l=rc(t);U(r.url_converter)&&I(o)&&(o=r.url_converter.call(r.url_converter_scope||n(),String(o),a,t)),az(l,"data-mce-"+a,o),az(l,a,o)},get:(t,r)=>{let n=rc(t);return t6(n,"data-mce-"+r)||t6(n,r)}},l={style:{set:(r,n)=>{let a=rc(r);o&&az(a,aI,n),t7(a,"style"),T(n)&&r2(a,t.parse(n))},get:r=>{let n=rc(r),o=t6(n,aI)||t6(n,"style");return t.serialize(t.parse(o),tY(n))}}};return o&&(l.href=l.src=a),l})(c,r,V(W));return W};aV.DOM=aV(document),aV.nodeIndex=aH;let aW=aV.DOM;class aK{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((r,n)=>{let o;let a=()=>{aW.remove(l),o&&(o.onerror=o.onload=o=null)},l=aW.uniqueId();(o=document.createElement("script")).id=l,o.type="text/javascript",o.src=tU._addCacheSuffix(t),this.settings.referrerPolicy&&aW.setAttrib(o,"referrerpolicy",this.settings.referrerPolicy),o.onload=()=>{a(),r()},o.onerror=()=>{a(),n("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(o)})}isDone(t){return 2===this.states[t]}markDone(t){this.states[t]=2}add(t){let r=this;return r.queue.push(t),void 0===r.states[t]&&(r.states[t]=0),new Promise((n,o)=>{r.scriptLoadedCallbacks[t]||(r.scriptLoadedCallbacks[t]=[]),r.scriptLoadedCallbacks[t].push({resolve:n,reject:o})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){let t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){let r=this,n=(t,n)=>{ez(r.scriptLoadedCallbacks,n).each(r=>{ed(r,r=>r[t](n))}),delete r.scriptLoadedCallbacks[n]},o=t=>{let r=em(t,t=>"rejected"===t.status);return r.length>0?Promise.reject(ey(r,({reason:t})=>P(t)?t:[t])):Promise.resolve()},a=t=>Promise.allSettled(es(t,t=>2===r.states[t]?(n("resolve",t),Promise.resolve()):3===r.states[t]?(n("reject",t),Promise.reject(t)):(r.states[t]=1,r.loadScript(t).then(()=>{r.states[t]=2,n("resolve",t);let l=r.queue;return l.length>0?(r.queue=[],a(l).then(o)):Promise.resolve()},()=>(r.states[t]=3,n("reject",t),Promise.reject(t)))))),l=t=>(r.loading=!0,a(t).then(t=>{r.loading=!1;let n=r.queueLoadedCallbacks.shift();return et.from(n).each(J),o(t)})),i=e$(t);return r.loading?new Promise((t,n)=>{r.queueLoadedCallbacks.push(()=>{l(i).then(t,n)})}):l(i)}}aK.ScriptLoader=new aK;let aY=t=>{let r=t;return{get:()=>r,set:t=>{r=t}}},aG={},aX=aY("en"),aQ=()=>ez(aG,aX.get()),aJ={getData:()=>eP(aG,t=>({...t})),setCode:t=>{t&&aX.set(t)},getCode:()=>aX.get(),add:(t,r)=>{let n=aG[t];n||(aG[t]=n={});let o=es(eT(r),t=>t.toLowerCase());eB(r,(t,a)=>{let l=a.toLowerCase();l!==a&&((t,r)=>{let n=t.indexOf(r);return -1!==n&&t.indexOf(r,n+1)>n})(o,l)?(ej(r,l)||(n[l]=t),n[a]=t):n[l]=t})},translate:t=>{let r=aQ().getOr({}),n=t=>U(t)?Object.prototype.toString.call(t):o(t)?"":""+t,o=t=>""===t||null==t,a=t=>{let o=n(t);return ej(r,o)?n(r[o]):ez(r,o.toLowerCase()).map(n).getOr(o)},l=t=>t.replace(/{context:\w+}$/,"");if(o(t))return"";if(O(t)&&ej(t,"raw"))return n(t.raw);if(P(t)&&t.length>1){let r=t.slice(1);return l(a(t[0]).replace(/\{([0-9]+)\}/g,(t,o)=>ej(r,o)?n(r[o]):t))}return l(a(t))},isRtl:()=>aQ().bind(t=>ez(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>ej(aG,t)},aZ=()=>{let t=[],r={},n={},o=[],a=(t,r)=>{ed(em(o,n=>n.name===t&&n.state===r),t=>t.resolve())},l=t=>ej(r,t),i=(t,n)=>{let o=aJ.getCode();!o||n&&-1===(","+(n||"")+",").indexOf(","+o+",")||aK.ScriptLoader.add(r[t]+"/langs/"+o+".js")},s=(t,r="added")=>"added"===r&&ej(n,t)||"loaded"===r&&l(t)?Promise.resolve():new Promise(n=>{o.push({name:t,state:r,resolve:n})});return{items:t,urls:r,lookup:n,get:t=>{if(n[t])return n[t].instance},requireLangPack:(t,r)=>{!1!==aZ.languageLoad&&(l(t)?i(t,r):s(t,"loaded").then(()=>i(t,r)))},add:(r,o)=>(t.push(o),n[r]={instance:o},a(r,"added"),o),remove:t=>{delete r[t],delete n[t]},createUrl:(t,r)=>T(r)?T(t)?{prefix:"",resource:r,suffix:""}:{prefix:t.prefix,resource:r,suffix:t.suffix}:r,load:(t,o)=>{if(r[t])return Promise.resolve();let l=T(o)?o:o.prefix+o.resource+o.suffix;0!==l.indexOf("/")&&-1===l.indexOf("://")&&(l=aZ.baseURL+"/"+l),r[t]=l.substring(0,l.lastIndexOf("/"));let i=()=>(a(t,"loaded"),Promise.resolve());return n[t]?i():aK.ScriptLoader.add(l).then(i)},waitFor:s}};aZ.languageLoad=!0,aZ.baseURL="",aZ.PluginManager=aZ(),aZ.ThemeManager=aZ(),aZ.ModelManager=aZ();let a0=t=>{let r=aY(et.none()),n=()=>r.get().each(t=>clearInterval(t));return{clear:()=>{n(),r.set(et.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:o=>{n(),r.set(et.some(setInterval(o,t)))}}},a1=()=>{let t=(t=>{let r=aY(et.none()),n=()=>r.get().each(t);return{clear:()=>{n(),r.set(et.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:t=>{n(),r.set(et.some(t))}}})(H);return{...t,on:r=>t.get().each(r)}},a2=(t,r)=>{let n=null;return{cancel:()=>{D(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{D(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},r))}}},a3=(t,r)=>{let n=null,o=()=>{D(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...a)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,a)},r)}}},a8=V("mce-annotation"),a5=V("data-mce-annotation"),a6=V("data-mce-annotation-uid"),a9=V("data-mce-annotation-active"),a4=V("data-mce-annotation-classes"),a7=V("data-mce-annotation-attrs"),le=t=>r=>rv(r,t),lt=(t,r)=>{let n=t.selection.getRng(),o=rc(n.startContainer),a=rc(t.getBody()),l=r.fold(()=>"."+a8(),t=>`[${a5()}="${t}"]`);return rX(rO(o,n.startOffset).getOr(o),l,le(a)).bind(r=>t9(r,`${a6()}`).bind(n=>t9(r,`${a5()}`).map(r=>{let o=ln(t,n);return{uid:n,name:r,elements:o}})))},lr=(t,r)=>t4(t,"data-mce-bogus")||nw(t,'[data-mce-bogus="all"]',le(r)),ln=(t,r)=>{let n=rc(t.getBody());return em(nE(n,`[${a6()}="${r}"]`),t=>!lr(t,n))},lo=(t,r)=>{let n=rc(t.getBody()),o=nE(n,`[${a5()}="${r}"]`),a={};return ed(o,t=>{if(!lr(t,n)){let r=t6(t,a6()),n=ez(a,r).getOr([]);a[r]=n.concat([t])}}),a},la=0,ll=t=>{let r=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++la+String(r)},li=(t,r)=>rc(t.dom.cloneNode(r)),ls=t=>li(t,!1),ld=t=>li(t,!0),lc=(t,r,n=Z)=>{let o=new nx(t,r),a=t=>{let r;do r=o[t]();while(r&&!nM(r)&&!n(r));return et.from(r).filter(nM)};return{current:()=>et.from(o.current()).filter(nM),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},lu=(t,r)=>{let n=r||(r=>t.isBlock(r)||nH(r)||nV(r)),o=(t,r,n,a)=>{if(nM(t)){let n=a(t,r,t.data);if(-1!==n)return et.some({container:t,offset:n})}return n().bind(t=>o(t.container,t.offset,n,a))};return{backwards:(r,a,l,i)=>{let s=lc(r,null!=i?i:t.getRoot(),n);return o(r,a,()=>s.prev().map(t=>({container:t,offset:t.length})),l).getOrNull()},forwards:(r,a,l,i)=>{let s=lc(r,null!=i?i:t.getRoot(),n);return o(r,a,()=>s.next().map(t=>({container:t,offset:0})),l).getOrNull()}}},lm=Math.round,lf=t=>t?{left:lm(t.left),top:lm(t.top),bottom:lm(t.bottom),right:lm(t.right),width:lm(t.width),height:lm(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},lg=(t,r)=>(t=lf(t),r||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),lp=(t,r,n)=>t>=0&&t<=Math.min(r.height,n.height)/2,lh=(t,r)=>{let n=Math.min(r.height/2,t.height/2);return t.bottom-n<r.top||!(t.top>r.bottom)&&lp(r.top-t.bottom,t,r)},lb=(t,r)=>t.top>r.bottom||!(t.bottom<r.top)&&lp(r.bottom-t.top,t,r),lv=(t,r,n)=>{let o=Math.max(Math.min(r,t.left+t.width),t.left),a=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((r-o)*(r-o)+(n-a)*(n-a))},ly=t=>{let r=t.startContainer,n=t.startOffset;return r===t.endContainer&&r.hasChildNodes()&&t.endOffset===n+1?r.childNodes[n]:null},lC=(t,r)=>{if(nS(t)&&t.hasChildNodes()){let n=t.childNodes,o=Math.min(Math.max(r,0),n.length-1);return n[o]}return t},lE=RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),lw=t=>T(t)&&t.charCodeAt(0)>=768&&lE.test(t),lx=nT("display","block table"),l_=((...t)=>r=>{for(let n=0;n<t.length;n++)if(!t[n](r))return!1;return!0})(nS,oh,G(nT("float","left right"))),lk=G(nT("white-space","pre pre-line pre-wrap")),lS=aV.nodeIndex,lN=(t,r)=>r<0&&nS(t)&&t.hasChildNodes()?void 0:lC(t,r),lR=t=>t?t.createRange():aV.DOM.createRng(),lA=t=>T(t)&&/[\r\n\t ]/.test(t),lT=t=>!!t.setStart&&!!t.setEnd,lO=t=>{let r=t.startContainer,n=t.startOffset;if(lA(t.toString())&&lk(r.parentNode)&&nM(r)){let t=r.data;if(lA(t[n-1])||lA(t[n+1]))return!0}return!1},lB=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,lP=t=>{var r;let n;let o=t.getClientRects();return n=o.length>0?lf(o[0]):lf(t.getBoundingClientRect()),!lT(t)&&nH(t)&&lB(n)?(t=>{let r=t.ownerDocument,n=lR(r),o=r.createTextNode("\xa0"),a=t.parentNode;a.insertBefore(o,t),n.setStart(o,0),n.setEnd(o,1);let l=lf(n.getBoundingClientRect());return a.removeChild(o),l})(t):lB(n)&&lT(t)&&null!==(r=(t=>{let r=t.startContainer,n=t.endContainer,o=t.startOffset,a=t.endOffset;if(r===n&&nM(n)&&0===o&&1===a){let r=t.cloneRange();return r.setEndAfter(n),lP(r)}return null})(t))&&void 0!==r?r:n},lD=(t,r)=>{let n=lg(t,r);return n.width=1,n.right=n.left+1,n},lL=(t,r,n)=>{let o=()=>(n||(n=(t=>{let r=[],n=t=>{var n;0!==t.height&&(r.length>0&&(n=r[r.length-1],t.left===n.left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right)||r.push(t))},o=(t,r)=>{let o=lR(t.ownerDocument);if(r<t.data.length){if(lw(t.data[r]))return;if(lw(t.data[r-1])&&(o.setStart(t,r),o.setEnd(t,r+1),!lO(o)))return void n(lD(lP(o),!1))}r>0&&(o.setStart(t,r-1),o.setEnd(t,r),lO(o)||n(lD(lP(o),!1))),r<t.data.length&&(o.setStart(t,r),o.setEnd(t,r+1),lO(o)||n(lD(lP(o),!0)))},a=t.container(),l=t.offset();if(nM(a))return o(a,l),r;if(nS(a)){if(t.isAtEnd()){let t=lN(a,l);nM(t)&&o(t,t.data.length),l_(t)&&!nH(t)&&n(lD(lP(t),!1))}else{let i=lN(a,l);if(nM(i)&&o(i,0),l_(i)&&t.isAtEnd())return n(lD(lP(i),!1)),r;let s=lN(t.container(),t.offset()-1);l_(s)&&!nH(s)&&(lx(s)||lx(i)||!l_(i))&&n(lD(lP(s),!1)),l_(i)&&n(lD(lP(i),!0))}}return r})(lL(t,r))),n);return{container:V(t),offset:V(r),toRange:()=>{let n=lR(t.ownerDocument);return n.setStart(t,r),n.setEnd(t,r),n},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(nM(t),0===r),isAtEnd:()=>nM(t)?r>=t.data.length:r>=t.childNodes.length,isEqual:n=>n&&t===n.container()&&r===n.offset(),getNode:n=>lN(t,n?r-1:r)}};lL.fromRangeStart=t=>lL(t.startContainer,t.startOffset),lL.fromRangeEnd=t=>lL(t.endContainer,t.endOffset),lL.after=t=>lL(t.parentNode,lS(t)+1),lL.before=t=>lL(t.parentNode,lS(t)),lL.isAbove=(t,r)=>tH(eS(r.getClientRects()),eN(t.getClientRects()),lh).getOr(!1),lL.isBelow=(t,r)=>tH(eN(r.getClientRects()),eS(t.getClientRects()),lb).getOr(!1),lL.isAtStart=t=>!!t&&t.isAtStart(),lL.isAtEnd=t=>!!t&&t.isAtEnd(),lL.isTextPosition=t=>!!t&&nM(t.container()),lL.isElementPosition=t=>!lL.isTextPosition(t);let lM=(t,r)=>{nM(r)&&0===r.data.length&&t.remove(r)},lF=(t,r,n)=>{nj(n)?((t,r,n)=>{let o=et.from(n.firstChild),a=et.from(n.lastChild);r.insertNode(n),o.each(r=>lM(t,r.previousSibling)),a.each(r=>lM(t,r.nextSibling))})(t,r,n):(r.insertNode(n),lM(t,n.previousSibling),lM(t,n.nextSibling))},lI=aV.nodeIndex,lU=t=>{let r=t.parentNode;return nB(r)?lU(r):r},lz=t=>t?eG(t.childNodes,(t,r)=>(nB(r)&&"BR"!==r.nodeName?t=t.concat(lz(r)):t.push(r),t),[]):[],lj=t=>r=>t===r,lH=t=>(nM(t)?"text()":t.nodeName.toLowerCase())+"["+(t=>{let r,n;n=eX(r=lz(lU(t)),lj(t),t);let o=eG(r=r.slice(0,n+1),(t,n,o)=>(nM(n)&&nM(r[o-1])&&t++,t),0);return(n=eX(r=eY(r,nA([t.nodeName])),lj(t),t))-o})(t)+"]",l$=(t,r)=>{let n,o=[],a=r.container(),l=r.offset();if(nM(a))n=((t,r)=>{let n=t;for(;(n=n.previousSibling)&&nM(n);)r+=n.data.length;return r})(a,l);else{let t=a.childNodes;l>=t.length?(n="after",l=t.length-1):n="before",a=t[l]}o.push(lH(a));let i=((t,r,n)=>{let o=[];for(let n=r.parentNode;n&&n!==t;n=n.parentNode)o.push(n);return o})(t,a);return i=eY(i,G(nB)),(o=o.concat(eK(i,t=>lH(t)))).reverse().join("/")+","+n},lq=(t,r)=>{if(!r)return null;let n=r.split(","),o=n[0].split("/"),a=n.length>1?n[1]:"before",l=eG(o,(t,r)=>{var n,o;let a;let l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(r);return l?("text()"===l[1]&&(l[1]="#text"),n=l[1],o=parseInt(l[2],10),a=eY(a=lz(t),(t,r)=>!nM(t)||!nM(a[r-1])),(a=eY(a,nA([n])))[o]):null},t);if(!l)return null;if(!nM(l)&&l.parentNode){let t;return t="after"===a?lI(l)+1:lI(l),lL(l.parentNode,t)}return((t,r)=>{let n=t,o=0;for(;nM(n);){let a=n.data.length;if(r>=o&&r<=o+a){t=n,r-=o;break}if(!nM(n.nextSibling)){t=n,r=a;break}o+=a,n=n.nextSibling}return nM(t)&&r>t.data.length&&(r=t.data.length),lL(t,r)})(l,parseInt(a,10))},lV=(t,r,n,o,a)=>{let l=a?o.startContainer:o.endContainer,i=a?o.startOffset:o.endOffset,s=[],d=t.getRoot();if(nM(l))s.push(n?((t,r,n)=>{let o=t(r.data.slice(0,n)).length;for(let n=r.previousSibling;n&&nM(n);n=n.previousSibling)o+=t(n.data).length;return o})(r,l,i):i);else{let r=0,o=l.childNodes;i>=o.length&&o.length&&(r=1,i=Math.max(0,o.length-1)),s.push(t.nodeIndex(o[i],n)+r)}for(let r=l;r&&r!==d;r=r.parentNode)s.push(t.nodeIndex(r,n));return s},lW=(t,r,n)=>{let o=0;return tU.each(t.select(r),t=>"all"===t.getAttribute("data-mce-bogus")?void 0:t!==n&&void o++),o},lK=(t,r)=>{let n=r?t.startContainer:t.endContainer,o=r?t.startOffset:t.endOffset;if(nS(n)&&"TR"===n.nodeName){let a=n.childNodes;(n=a[Math.min(r?o:o-1,a.length-1)])&&(o=r?0:n.childNodes.length,r?t.setStart(n,o):t.setEnd(n,o))}},lY=t=>(lK(t,!0),lK(t,!1),t),lG=(t,r)=>{if(nS(t)&&nV(t=lC(t,r)))return t;if(oa(t)){nM(t)&&on(t)&&(t=t.parentNode);let r=t.previousSibling;if(nV(r)||nV(r=t.nextSibling))return r}},lX=(t,r,n)=>{let o=n.getNode(),a=n.getRng();if("IMG"===o.nodeName||nV(o)){let t=o.nodeName;return{name:t,index:lW(n.dom,t,o)}}let l=lG(a.startContainer,a.startOffset)||lG(a.endContainer,a.endOffset);if(l){let t=l.tagName;return{name:t,index:lW(n.dom,t,l)}}return((t,r,n,o)=>{let a=r.dom,l=lV(a,t,n,o,!0),i=r.isForward(),s=om(o)?{isFakeCaret:!0}:{};return r.isCollapsed()?{start:l,forward:i,...s}:{start:l,end:lV(a,t,n,o,!1),forward:i,...s}})(t,n,r,a)},lQ=(t,r,n)=>{let o={"data-mce-type":"bookmark",id:r,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},lJ=(t,r)=>{let n=t.dom,o=t.getRng(),a=n.uniqueId(),l=t.isCollapsed(),i=t.getNode(),s=i.nodeName,d=t.isForward();if("IMG"===s)return{name:s,index:lW(n,s,i)};let c=lY(o.cloneRange());if(!l){c.collapse(!1);let t=lQ(n,a+"_end",r);lF(n,c,t)}(o=lY(o)).collapse(!0);let u=lQ(n,a+"_start",r);return lF(n,o,u),t.moveToBookmark({id:a,keep:!0,forward:d}),{id:a,forward:d}},lZ=Y(lX,W,!0),l0=t=>{let r=r=>r(t),n=V(t),o=()=>a,a={tag:!0,inner:t,fold:(r,n)=>n(t),isValue:ee,isError:Z,map:r=>l2.value(r(t)),mapError:o,bind:r,exists:r,forall:r,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:r=>{r(t)},toOptional:()=>et.some(t)};return a},l1=t=>{let r=()=>n,n={tag:!1,inner:t,fold:(r,n)=>r(t),isValue:Z,isError:ee,map:r,mapError:r=>l2.error(r(t)),bind:r,exists:Z,forall:ee,getOr:W,or:W,getOrThunk:Q,orThunk:Q,getOrDie:X(String(t)),each:H,toOptional:et.none};return n},l2={value:l0,error:l1,fromOption:(t,r)=>t.fold(()=>l1(r),l0)},l3=t=>{if(!P(t))throw Error("cases must be an array");if(0===t.length)throw Error("there must be at least one case");let r=[],n={};return ed(t,(o,a)=>{let l=eT(o);if(1!==l.length)throw Error("one and only one name per case");let i=l[0],s=o[i];if(void 0!==n[i])throw Error("duplicate key detected:"+i);if("cata"===i)throw Error("cannot have a case named cata (sorry)");if(!P(s))throw Error("case arguments must be an array");r.push(i),n[i]=(...n)=>{let o=n.length;if(o!==s.length)throw Error("Wrong number of arguments to case "+i+". Expected "+s.length+" ("+s+"), got "+o);return{fold:(...r)=>{if(r.length!==t.length)throw Error("Wrong number of arguments to fold. Expected "+t.length+", got "+r.length);return r[a].apply(null,n)},match:t=>{let o=eT(t);if(r.length!==o.length)throw Error("Wrong number of arguments to match. Expected: "+r.join(",")+"\nActual: "+o.join(","));if(!eC(r,t=>el(o,t)))throw Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+r.join(", "));return t[i].apply(null,n)},log:t=>{console.log(t,{constructors:r,constructor:i,params:n})}}}}),n};l3([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);let l8=t=>"inline-command"===t.type||"inline-format"===t.type,l5=t=>"block-command"===t.type||"block-format"===t.type,l6=t=>{let r=r=>l2.error({message:r,pattern:t}),n=(n,o,a)=>{if(void 0!==t.format){let a;if(P(t.format)){if(!eC(t.format,T))return r(n+" pattern has non-string items in the `format` array");a=t.format}else{if(!T(t.format))return r(n+" pattern has non-string `format` parameter");a=[t.format]}return l2.value(o(a))}return void 0!==t.cmd?T(t.cmd)?l2.value(a(t.cmd,t.value)):r(n+" pattern has non-string `cmd` parameter"):r(n+" pattern is missing both `format` and `cmd` parameters")};if(!O(t))return r("Raw pattern is not an object");if(!T(t.start))return r("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!T(t.end))return r("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return r("Inline pattern has empty `start` and `end` parameters");let o=t.start,a=t.end;return 0===a.length&&(a=o,o=""),n("Inline",t=>({type:"inline-format",start:o,end:a,format:t}),(t,r)=>({type:"inline-command",start:o,end:a,cmd:t,value:r}))}return void 0!==t.replacement?T(t.replacement)?0===t.start.length?r("Replacement pattern has empty `start` parameter"):l2.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):r("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?r("Block pattern has empty `start` parameter"):n("Block",r=>({type:"block-format",start:t.start,format:r[0]}),(r,n)=>({type:"block-command",start:t.start,cmd:r,value:n}))},l9=t=>em(t,l5),l4=t=>em(t,l8),l7=t=>{let r=(t=>{let r=[],n=[];return ed(t,t=>{t.fold(t=>{r.push(t)},t=>{n.push(t)})}),{errors:r,values:n}})(es(t,l6));return ed(r.errors,t=>console.error(t.message,t.pattern)),r.values},ie=tR().deviceType,it=ie.isTouch(),ir=aV.DOM,io=t=>A(t,RegExp),ia=t=>r=>r.options.get(t),il=t=>T(t)||O(t),ii=(t,r="")=>n=>{let o=T(n);if(o)return -1!==n.indexOf("=")?{value:ez(eg(n.indexOf("=")>0?n.split(/[;,](?![^=;,]*(?:[;,]|$))/):n.split(","),(t,r)=>{let n=r.split("="),o=n[0],a=n.length>1?n[1]:o;return t[e7(o)]=e7(a),t},{}),t.id).getOr(r),valid:o}:{value:n,valid:o};return{valid:!1,message:"Must be a string."}},is=ia("iframe_attrs"),id=ia("doctype"),ic=ia("document_base_url"),iu=ia("body_id"),im=ia("body_class"),ig=ia("content_security_policy"),ip=ia("br_in_pre"),ih=ia("forced_root_block"),ib=ia("forced_root_block_attrs"),iv=ia("newline_behavior"),iy=ia("br_newline_selector"),iC=ia("no_newline_selector"),iE=ia("keep_styles"),iw=ia("end_container_on_empty_block"),ix=ia("automatic_uploads"),i_=ia("images_reuse_filename"),ik=ia("images_replace_blob_uris"),iS=ia("icons"),iN=ia("icons_url"),iR=ia("images_upload_url"),iA=ia("images_upload_base_path"),iT=ia("images_upload_credentials"),iO=ia("images_upload_handler"),iB=ia("content_css_cors"),iP=ia("referrer_policy"),iD=ia("language"),iL=ia("language_url"),iM=ia("indent_use_margin"),iF=ia("indentation"),iI=ia("content_css"),iU=ia("content_style"),iz=ia("font_css"),ij=ia("directionality"),iH=ia("inline_boundaries_selector"),i$=ia("object_resizing"),iq=ia("resize_img_proportional"),iV=ia("placeholder"),iW=ia("event_root"),iK=ia("service_message"),iY=ia("theme"),iG=ia("theme_url"),iX=ia("model"),iQ=ia("model_url"),iJ=ia("inline_boundaries"),iZ=ia("formats"),i0=ia("preview_styles"),i1=ia("format_empty_lines"),i2=ia("format_noneditable_selector"),i3=ia("custom_ui_selector"),i8=ia("inline"),i5=ia("hidden_input"),i6=ia("submit_patch"),i9=ia("add_form_submit_trigger"),i4=ia("add_unload_trigger"),i7=ia("custom_undo_redo_levels"),se=ia("disable_nodechange"),st=ia("readonly"),sr=ia("editable_root"),sn=ia("content_css_cors"),so=ia("plugins"),sa=ia("external_plugins"),sl=ia("block_unsupported_drop"),si=ia("visual"),ss=ia("visual_table_class"),sd=ia("visual_anchor_class"),sc=ia("iframe_aria_text"),su=ia("setup"),sm=ia("init_instance_callback"),sf=ia("urlconverter_callback"),sg=ia("auto_focus"),sp=ia("browser_spellcheck"),sh=ia("protect"),sb=ia("paste_block_drop"),sv=ia("paste_data_images"),sy=ia("paste_preprocess"),sC=ia("paste_postprocess"),sE=ia("newdocument_content"),sw=ia("paste_webkit_styles"),sx=ia("paste_remove_styles_if_webkit"),s_=ia("paste_merge_formats"),sk=ia("smart_paste"),sS=ia("paste_as_text"),sN=ia("paste_tab_spaces"),sR=ia("allow_html_data_urls"),sA=ia("text_patterns"),sT=ia("text_patterns_lookup"),sO=ia("noneditable_class"),sB=ia("editable_class"),sP=ia("noneditable_regexp"),sD=ia("preserve_cdata"),sL=ia("highlight_on_focus"),sM=ia("xss_sanitization"),sF=ia("init_content_sync"),sI=t=>tU.explode(t.options.get("images_file_types")),sU=ia("table_tab_navigation"),sz=ia("details_initial_state"),sj=ia("details_serialized_state"),sH=ia("force_hex_color"),s$=ia("sandbox_iframes"),sq=t=>{let r=t.parentNode;r&&r.removeChild(t)},sV=t=>{let r=or(t);return{count:t.length-r.length,text:r}},sW=t=>{let r;for(;-1!==(r=t.data.lastIndexOf("\uFEFF"));)t.deleteData(r,1)},sK=(t,r)=>(sG(t),r),sY=(t,r)=>lL.isTextPosition(r)?nM(t)&&r.container()===t?((t,r)=>{let n=sV(t.data.substr(0,r.offset())),o=sV(t.data.substr(r.offset()));return(n.text+o.text).length>0?(sW(t),lL(t,r.offset()-n.count)):r})(t,r):sK(t,r):r.container()===t.parentNode?((t,r)=>{let n=r.container(),o=((t,r)=>{let n=ea(t,r);return -1===n?et.none():et.some(n)})(eR(n.childNodes),t).map(t=>t<r.offset()?lL(n,r.offset()-1):r).getOr(r);return sG(t),o})(t,r):sK(t,r),sG=t=>{nS(t)&&oa(t)&&(ol(t)?t.removeAttribute("data-mce-caret"):sq(t)),nM(t)&&(sW(t),0===t.data.length&&sq(t))},sX=(t,r,n)=>{let o,a;let l=lg(r.getBoundingClientRect(),n);if("BODY"===t.tagName){let r=t.ownerDocument.documentElement;o=t.scrollLeft||r.scrollLeft,a=t.scrollTop||r.scrollTop}else{let r=t.getBoundingClientRect();o=t.scrollLeft-r.left,a=t.scrollTop-r.top}l.left+=o,l.right+=o,l.top+=a,l.bottom+=a,l.width=1;let i=r.offsetWidth-r.clientWidth;return i>0&&(n&&(i*=-1),l.left+=i,l.right+=i),l},sQ=(t,r,n,o)=>{let a,l;let i=a1(),s=ih(t),d=t.dom,c=()=>{(t=>{var r,n;let o=nE(rc(t),"*[contentEditable=false],video,audio,embed,object");for(let t=0;t<o.length;t++){let a=o[t].dom,l=a.previousSibling;if(oc(l)){let t=l.data;1===t.length?null===(r=l.parentNode)||void 0===r||r.removeChild(l):l.deleteData(t.length-1,1)}od(l=a.nextSibling)&&(1===l.data.length?null===(n=l.parentNode)||void 0===n||n.removeChild(l):l.deleteData(0,1))}})(r),l&&(sG(l),l=null),i.on(t=>{d.remove(t.caret),i.clear()}),a&&(clearInterval(a),a=void 0)};return{show:(t,u)=>{let m;if(c(),nW(u))return null;if(!n(u))return l=((t,r)=>{var n;let o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createTextNode("\uFEFF"),a=t.parentNode;if(r){let r=t.previousSibling;if(nM(r)){if(oa(r))return r;if(oc(r))return r.splitText(r.data.length-1)}null==a||a.insertBefore(o,t)}else{let r=t.nextSibling;if(nM(r)){if(oa(r))return r;if(od(r))return r.splitText(1),r}t.nextSibling?null==a||a.insertBefore(o,t.nextSibling):null==a||a.appendChild(o)}return o})(u,t),m=u.ownerDocument.createRange(),sZ(l.nextSibling)?(m.setStart(l,0),m.setEnd(l,0)):(m.setStart(l,1),m.setEnd(l,1)),m;{let n=((t,r,n)=>{var o;let a=(null!==(o=r.ownerDocument)&&void 0!==o?o:document).createElement(t);a.setAttribute("data-mce-caret",n?"before":"after"),a.setAttribute("data-mce-bogus","all"),a.appendChild(oe().dom);let l=r.parentNode;return n?null==l||l.insertBefore(a,r):r.nextSibling?null==l||l.insertBefore(a,r.nextSibling):null==l||l.appendChild(a),a})(s,u,t),c=sX(r,u,t);d.setStyle(n,"top",c.top),l=n;let f=d.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});d.setStyles(f,{...c}),d.add(r,f),i.set({caret:f,element:u,before:t}),t&&d.addClass(f,"mce-visual-caret-before"),a=setInterval(()=>{i.on(t=>{o()?d.toggleClass(t.caret,"mce-visual-caret-hidden"):d.addClass(t.caret,"mce-visual-caret-hidden")})},500),(m=u.ownerDocument.createRange()).setStart(n,0),m.setEnd(n,0)}return m},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(t=>{let n=sX(r,t.element,t.before);d.setStyles(t.caret,{...n})})},destroy:()=>clearInterval(a)}},sJ=()=>tL.browser.isFirefox(),sZ=t=>nV(t)||nY(t),s0=t=>(sZ(t)||nP(t)&&sJ())&&r_(rc(t)).exists(rQ),s1=nT("display","block table table-cell table-caption list-item"),s2=t=>t>0,s3=t=>t<0,s8=(t,r)=>{let n;for(;n=t(r);)if(!on(n))return n;return null},s5=(t,r,n,o,a)=>{let l;let i=new nx(t,o),s=nV(t)||on(t);if(s3(r)){if(s&&n(l=s8(i.prev.bind(i),!0)))return l;for(;l=s8(i.prev.bind(i),a);)if(n(l))return l}if(s2(r)){if(s&&n(l=s8(i.next.bind(i),!0)))return l;for(;l=s8(i.next.bind(i),a);)if(n(l))return l}return null},s6=(t,r)=>{for(;t&&t!==r;){if(s1(t))return t;t=t.parentNode}return null},s9=(t,r,n)=>s6(t.container(),n)===s6(r.container(),n),s4=(t,r)=>{if(!r)return et.none();let n=r.container(),o=r.offset();return nS(n)?et.from(n.childNodes[o+t]):et.none()},s7=(t,r)=>{var n;let o=(null!==(n=r.ownerDocument)&&void 0!==n?n:document).createRange();return t?(o.setStartBefore(r),o.setEndBefore(r)):(o.setStartAfter(r),o.setEndAfter(r)),o},de=(t,r,n)=>s6(r,t)===s6(n,t),dt=(t,r,n)=>{let o=t?"previousSibling":"nextSibling",a=n;for(;a&&a!==r;){let t=a[o];if(t&&oa(t)&&(t=t[o]),nV(t)||nY(t)){if(de(r,t,a))return t;break}if(oh(t))break;a=a.parentNode}return null},dr=Y(s7,!0),dn=Y(s7,!1),da=(t,r,n)=>{let o;let a=Y(dt,!0,r),l=Y(dt,!1,r),i=n.startContainer,s=n.startOffset;if(on(i)){let t=nM(i)?i.parentNode:i,r=t.getAttribute("data-mce-caret");if("before"===r&&s0(o=t.nextSibling))return dr(o);if("after"===r&&s0(o=t.previousSibling))return dn(o)}if(!n.collapsed)return n;if(nM(i)){if(oa(i)){if(1===t){if(o=l(i))return dr(o);if(o=a(i))return dn(o)}if(-1===t){if(o=a(i))return dn(o);if(o=l(i))return dr(o)}return n}if(oc(i)&&s>=i.data.length-1)return 1===t&&(o=l(i))?dr(o):n;if(od(i)&&s<=1)return -1===t&&(o=a(i))?dn(o):n;if(s===i.data.length)return(o=l(i))?dr(o):n;if(0===s)return(o=a(i))?dn(o):n}return n},dl=(t,r)=>s4(t?0:-1,r).filter(nV),di=(t,r,n)=>{let o=da(t,r,n);return -1===t?lL.fromRangeStart(o):lL.fromRangeEnd(o)},ds=t=>et.from(t.getNode()).map(rc),dd=(t,r)=>{let n=r;for(;(n=t(n))&&!n.isVisible(););return n},dc=(t,r)=>{let n=s9(t,r);return!(n||!nH(t.getNode()))||n};(a=m||(m={}))[a.Backwards=-1]="Backwards",a[a.Forwards=1]="Forwards";let du=t=>og(t)||!!ob(t)&&!eg(eR(t.getElementsByTagName("*")),(t,r)=>t||nq(r),!1),dm=(t,r)=>t.hasChildNodes()&&r<t.childNodes.length?t.childNodes[r]:null,df=(t,r)=>{if(s2(t)){if(oh(r.previousSibling)&&!nM(r.previousSibling))return lL.before(r);if(nM(r))return lL(r,0)}if(s3(t)){if(oh(r.nextSibling)&&!nM(r.nextSibling))return lL.after(r);if(nM(r))return lL(r,r.data.length)}return s3(t)?nH(r)?lL.before(r):lL.after(r):lL.before(r)},dg=(t,r,n)=>{let o,a,l,i;if(!nS(n)||!r)return null;if(r.isEqual(lL.after(n))&&n.lastChild){if(i=lL.after(n.lastChild),s3(t)&&oh(n.lastChild)&&nS(n.lastChild))return nH(n.lastChild)?lL.before(n.lastChild):i}else i=r;let s=i.container(),d=i.offset();if(nM(s)){if(s3(t)&&d>0)return lL(s,--d);if(s2(t)&&d<s.length)return lL(s,++d);o=s}else{if(s3(t)&&d>0&&oh(a=dm(s,d-1)))return!du(a)&&(l=s5(a,t,ov,a))?nM(l)?lL(l,l.data.length):lL.after(l):nM(a)?lL(a,a.data.length):lL.before(a);if(s2(t)&&d<s.childNodes.length&&oh(a=dm(s,d)))return nH(a)?((t,r)=>{let n=r.nextSibling;return n&&oh(n)?nM(n)?lL(n,0):lL.before(n):dg(m.Forwards,lL.after(r),t)})(n,a):!du(a)&&(l=s5(a,t,ov,a))?nM(l)?lL(l,0):lL.before(l):nM(a)?lL(a,0):lL.after(a);o=a||i.getNode()}if(o&&(s2(t)&&i.isAtEnd()||s3(t)&&i.isAtStart())&&ov(o=s5(o,t,ee,n,!0),n))return df(t,o);a=o?s5(o,t,ov,n):o;let c=eQ(em(((t,r)=>{let n=[],o=t;for(;o&&o!==r;)n.push(o),o=o.parentNode;return n})(s,n),nV));return!c||a&&c.contains(a)?a?df(t,a):null:i=s2(t)?lL.after(c):lL.before(c)},dp=t=>({next:r=>dg(m.Forwards,r,t),prev:r=>dg(m.Backwards,r,t)}),dh=t=>lL.isTextPosition(t)?0===t.offset():oh(t.getNode()),db=t=>{if(lL.isTextPosition(t)){let r=t.container();return t.offset()===r.data.length}return oh(t.getNode(!0))},dv=(t,r)=>!lL.isTextPosition(t)&&!lL.isTextPosition(r)&&t.getNode()===r.getNode(!0),dy=(t,r,n)=>{let o=dp(r);return et.from(t?o.next(n):o.prev(n))},dC=(t,r,n)=>dy(t,r,n).bind(o=>s9(n,o,r)&&(t?!dv(n,o)&&!(!lL.isTextPosition(n)&&nH(n.getNode()))&&db(n)&&dh(o):!dv(o,n)&&dh(n)&&db(o))?dy(t,r,o):et.some(o)),dE=(t,r,n,o)=>dC(t,r,n).bind(n=>o(n)?dE(t,r,n,o):et.some(n)),dw=(t,r)=>{let n=t?r.firstChild:r.lastChild;return nM(n)?et.some(lL(n,t?0:n.data.length)):n?oh(n)?et.some(t?lL.before(n):nH(n)?lL.before(n):lL.after(n)):((t,r,n)=>{let o=t?lL.before(n):lL.after(n);return dy(t,r,o)})(t,r,n):et.none()},dx=Y(dy,!0),d_=Y(dy,!1),dk=Y(dw,!0),dS=Y(dw,!1),dN="_mce_caret",dR=t=>nS(t)&&t.id===dN,dA=(t,r)=>{let n=r;for(;n&&n!==t;){if(dR(n))return n;n=n.parentNode}return null},dT=t=>ej(t,"name"),dO=t=>tU.isArray(t.start),dB=t=>!(!dT(t)&&L(t.forward))||t.forward,dP=(t,r)=>(nS(r)&&t.isBlock(r)&&!r.innerHTML&&(r.innerHTML='<br data-mce-bogus="1" />'),r),dD=(t,r)=>dS(t).fold(Z,t=>(r.setStart(t.container(),t.offset()),r.setEnd(t.container(),t.offset()),!0)),dL=(t,r,n)=>!(r.hasChildNodes()||!dA(t,r)||(((t,r)=>{var n;let o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createTextNode("\uFEFF");t.appendChild(o),r.setStart(o,0),r.setEnd(o,0)})(r,n),0)),dM=(t,r,n,o)=>{let a=n[r?"start":"end"],l=t.getRoot();if(a){let t=l,n=a[0];for(let r=a.length-1;t&&r>=1;r--){let n=t.childNodes;if(dL(l,t,o))return!0;if(a[r]>n.length-1)return!!dL(l,t,o)||dD(t,o);t=n[a[r]]}nM(t)&&(n=Math.min(a[0],t.data.length)),nS(t)&&(n=Math.min(a[0],t.childNodes.length)),r?o.setStart(t,n):o.setEnd(t,n)}return!0},dF=t=>nM(t)&&t.data.length>0,dI=(t,r,n)=>{let o=t.get(n.id+"_"+r),a=null==o?void 0:o.parentNode,l=n.keep;if(o&&a){let i,s;if("start"===r?l?o.hasChildNodes()?(i=o.firstChild,s=1):dF(o.nextSibling)?(i=o.nextSibling,s=0):dF(o.previousSibling)?(i=o.previousSibling,s=o.previousSibling.data.length):(i=a,s=t.nodeIndex(o)+1):(i=a,s=t.nodeIndex(o)):l?o.hasChildNodes()?(i=o.firstChild,s=1):dF(o.previousSibling)?(i=o.previousSibling,s=o.previousSibling.data.length):(i=a,s=t.nodeIndex(o)):(i=a,s=t.nodeIndex(o)),!l){let a;let l=o.previousSibling,d=o.nextSibling;for(tU.each(tU.grep(o.childNodes),t=>{nM(t)&&(t.data=t.data.replace(/\uFEFF/g,""))});a=t.get(n.id+"_"+r);)t.remove(a,!0);if(nM(d)&&nM(l)&&!tL.browser.isOpera()){let r=l.data.length;l.appendData(d.data),t.remove(d),i=l,s=r}}return et.some(lL(i,s))}return et.none()},dU=(t,r,n)=>((t,r,n=!1)=>2===r?lX(or,n,t):3===r?(t=>{let r=t.getRng();return{start:l$(t.dom.getRoot(),lL.fromRangeStart(r)),end:l$(t.dom.getRoot(),lL.fromRangeEnd(r)),forward:t.isForward()}})(t):r?{rng:t.getRng(),forward:t.isForward()}:lJ(t,!1))(t,r,n),dz=(t,r)=>{((t,r)=>{let n=t.dom;if(r){if(dO(r))return((t,r)=>{let n=t.createRng();return dM(t,!0,r,n)&&dM(t,!1,r,n)?et.some({range:n,forward:dB(r)}):et.none()})(n,r);if(T(r.start))return tH(et.from(lq(n.getRoot(),r.start)),et.from(lq(n.getRoot(),r.end)),(t,o)=>{let a=n.createRng();return a.setStart(t.container(),t.offset()),a.setEnd(o.container(),o.offset()),{range:a,forward:dB(r)}});if(ej(r,"id"))return((t,r)=>{let n=dI(t,"start",r);return tH(n,dI(t,"end",r).or(n),(n,o)=>{let a=t.createRng();return a.setStart(dP(t,n.container()),n.offset()),a.setEnd(dP(t,o.container()),o.offset()),{range:a,forward:dB(r)}})})(n,r);if(dT(r))return et.from(n.select(r.name)[r.index]).map(t=>{let r=n.createRng();return r.selectNode(t),{range:r,forward:!0}});if(ej(r,"rng"))return et.some({range:r.rng,forward:dB(r)})}return et.none()})(t,r).each(({range:r,forward:n})=>{t.setRng(r,n)})},dj=t=>nS(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),dH=t=>"\xa0"===t,d$=t=>""!==t&&-1!==" \f\n\r	\v".indexOf(t),dq=t=>!d$(t)&&!dH(t)&&!nJ(t),dV=t=>{let r=[];if(t)for(let n=0;n<t.rangeCount;n++)r.push(t.getRangeAt(n));return r},dW=(t,r)=>{let n=nE(r,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:em(ey(t,t=>{let r=ly(t);return r?[rc(r)]:[]}),n4)},dK=t=>dW(dV(t.selection.getSel()),rc(t.getBody())),dY=(t,r)=>rY(t,"table",r),dG=t=>rB(t).fold(V([t]),r=>[t].concat(dG(r))),dX=t=>rP(t).fold(V([t]),r=>"br"===tY(r)?rS(r).map(r=>[t].concat(dX(r))).getOr([]):[t].concat(dX(r))),dQ=(t,r)=>tH((t=>{let r=t.startContainer,n=t.startOffset;return nM(r)?0===n?et.some(rc(r)):et.none():et.from(r.childNodes[n]).map(rc)})(r),(t=>{let r=t.endContainer,n=t.endOffset;return nM(r)?n===r.data.length?et.some(rc(r)):et.none():et.from(r.childNodes[n-1]).map(rc)})(r),(r,n)=>{let o=eh(dG(t),Y(rv,r)),a=eh(dX(t),Y(rv,n));return o.isSome()&&a.isSome()}).getOr(!1),dJ=(t,r,n,o)=>{let a=new nx(n,n),l=eF(t.schema.getMoveCaretBeforeOnEnterElements(),(t,r)=>!el(["td","th","table"],r.toLowerCase())),i=n;do{if(nM(i)&&0!==tU.trim(i.data).length)return void(o?r.setStart(i,0):r.setEnd(i,i.data.length));if(l[i.nodeName])return void(o?r.setStartBefore(i):"BR"===i.nodeName?r.setEndBefore(i):r.setEndAfter(i))}while(i=o?a.next():a.prev());"BODY"===n.nodeName&&(o?r.setStart(n,0):r.setEnd(n,n.childNodes.length))},dZ=t=>{let r=t.selection.getSel();return I(r)&&r.rangeCount>0},d0=(t,r)=>{let n=dK(t);n.length>0?ed(n,n=>{let o=n.dom,a=t.dom.createRng();a.setStartBefore(o),a.setEndAfter(o),r(a,!0)}):r(t.selection.getRng(),!1)},d1=(t,r,n)=>{let o=lJ(t,r);n(o),t.moveToBookmark(o)},d2=t=>z(null==t?void 0:t.nodeType),d3=t=>nS(t)&&!dj(t)&&!dR(t)&&!nB(t),d8=(t,r,n)=>{let{selection:o,dom:a}=t,l=o.getNode(),i=nV(l);d1(o,!0,()=>{r()}),i&&nV(l)&&a.isChildOf(l,t.getBody())?t.selection.select(l):n(o.getStart())&&d5(a,o)},d5=(t,r)=>{var n,o;let a=r.getRng(),{startContainer:l,startOffset:i}=a;if(!((t,r)=>{if(d3(r)&&!/^(TD|TH)$/.test(r.nodeName)){let n=parseInt(t.getAttrib(r,"data-mce-selected"),10);return!isNaN(n)&&n>0}return!1})(t,r.getNode())&&nS(l)){let s;let d=l.childNodes,c=t.getRoot();if(i<d.length){let r=d[i];s=new nx(r,null!==(n=t.getParent(r,t.isBlock))&&void 0!==n?n:c)}else{let r=d[d.length-1];(s=new nx(r,null!==(o=t.getParent(r,t.isBlock))&&void 0!==o?o:c)).next(!0)}for(let n=s.current();n;n=s.next()){if("false"===t.getContentEditable(n))return;if(nM(n)&&!d7(n))return a.setStart(n,0),void r.setRng(a)}}},d6=(t,r,n)=>{if(t){let o=r?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(nS(t)||!d7(t))return t}},d9=(t,r)=>!!t.getTextBlockElements()[r.nodeName.toLowerCase()]||oV(t,r),d4=(t,r,n)=>t.schema.isValidChild(r,n),d7=(t,r=!1)=>!!(I(t)&&nM(t))&&oC(r?t.data.replace(/ /g,"\xa0"):t.data),ce=(t,r)=>{let n=t.dom;return d3(r)&&"false"===n.getContentEditable(r)&&((t,r)=>{let n="[data-mce-cef-wrappable]",o=i2(t),a=tn(o)?n:`${n},${o}`;return rh(rc(r),a)})(t,r)&&0===n.select('[contenteditable="true"]',r).length},ct=(t,r)=>U(t)?t(r):(I(r)&&(t=t.replace(/%(\w+)/g,(t,n)=>r[n]||t)),t),cr=(t,r)=>(r=r||"",t=""+((t=t||"").nodeName||t),r=""+(r.nodeName||r),t.toLowerCase()===r.toLowerCase()),cn=(t,r)=>{if(F(t))return null;{let n=String(t);return"color"!==r&&"backgroundColor"!==r||(n=ak(n)),"fontWeight"===r&&700===t&&(n="bold"),"fontFamily"===r&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},co=(t,r,n)=>cn(t.getStyle(r,n),n),ca=(t,r)=>{let n;return t.getParent(r,r=>!!nS(r)&&!!(n=t.getStyle(r,"text-decoration"))&&"none"!==n),n},cl=(t,r,n)=>t.getParents(r,n,t.getRoot()),ci=(t,r,n)=>{let o=t.formatter.get(r);return I(o)&&ei(o,n)},cs=t=>eH(t,"block"),cd=t=>eH(t,"selector"),cc=t=>eH(t,"inline"),cu=t=>cd(t)&&!1!==t.expand&&!cc(t),cm=t=>(t=>{let r=[],n=t;for(;n;){if(nM(n)&&"\uFEFF"!==n.data||n.childNodes.length>1)return[];nS(n)&&r.push(n),n=n.firstChild}return r})(t).length>0,cf=t=>dR(t.dom)&&cm(t.dom),cg=(t,r)=>{let n=r;for(;n;){if(nS(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:r;n=n.parentNode}return r},cp=(t,r,n,o)=>{let a=r.data;if(t){for(let t=n;t>0;t--)if(o(a.charAt(t-1)))return t}else for(let t=n;t<a.length;t++)if(o(a.charAt(t)))return t;return -1},ch=(t,r,n)=>cp(t,r,n,t=>dH(t)||d$(t)),cb=(t,r,n)=>cp(t,r,n,dq),cv=(t,r,n,o,a,l)=>{let i;let s=t.getParent(n,t.isBlock)||r,d=(r,n,o)=>{let l=lu(t),d=a?l.backwards:l.forwards;return et.from(d(r,n,(t,r)=>dj(t.parentNode)?-1:(i=t,o(a,t,r)),s))};return d(n,o,ch).bind(t=>l?d(t.container,t.offset+(a?-1:0),cb):et.some(t)).orThunk(()=>i?et.some({container:i,offset:a?0:i.length}):et.none())},cy=(t,r,n,o,a)=>{let l=o[a];nM(o)&&tn(o.data)&&l&&(o=l);let i=cl(t,o);for(let o=0;o<i.length;o++)for(let a=0;a<r.length;a++){let l=r[a];if((!I(l.collapsed)||l.collapsed===n.collapsed)&&cd(l)&&t.is(i[o],l.selector))return i[o]}return o},cC=(t,r,n,o)=>{var a;let l=n,i=t.getRoot(),s=r[0];if(cs(s)&&(l=s.wrapper?null:t.getParent(n,s.block,i)),!l){let r=null!==(a=t.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==a?a:i;l=t.getParent(nM(n)?n.parentNode:n,r=>r!==i&&d9(t.schema,r),r)}if(l&&cs(s)&&s.wrapper&&(l=cl(t,l,"ul,ol").reverse()[0]||l),!l)for(l=n;l&&l[o]&&!t.isBlock(l[o])&&!cr(l=l[o],"br"););return l||n},cE=(t,r,n,o)=>{let a=n.parentNode;return!I(n[o])&&(!(a!==r&&!F(a)&&!t.isBlock(a))||cE(t,r,a,o))},cw=(t,r,n,o,a)=>{var l;let i=n,s=a?"previousSibling":"nextSibling",d=t.getRoot();if(nM(n)&&!d7(n)&&(a?o>0:o<n.data.length))return n;for(;i;){if(!r[0].block_expand&&t.isBlock(i))return i;for(let r=i[s];r;r=r[s]){let n=nM(r)&&!cE(t,d,r,s);if(!dj(r)&&(!nH(l=r)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!d7(r,n))return i}if(i===d||i.parentNode===d){n=i;break}i=i.parentNode}return n},cx=t=>dj(t.parentNode)||dj(t),c_=(t,r,n,o=!1)=>{let{startContainer:a,startOffset:l,endContainer:i,endOffset:s}=r,d=n[0];return nS(a)&&a.hasChildNodes()&&nM(a=lC(a,l))&&(l=0),nS(i)&&i.hasChildNodes()&&nM(i=lC(i,r.collapsed?s:s-1))&&(s=i.data.length),a=cg(t,a),i=cg(t,i),cx(a)&&(a=dj(a)?a:a.parentNode,nM(a=r.collapsed?a.previousSibling||a:a.nextSibling||a)&&(l=r.collapsed?a.length:0)),cx(i)&&(i=dj(i)?i:i.parentNode,nM(i=r.collapsed?i.nextSibling||i:i.previousSibling||i)&&(s=r.collapsed?0:i.length)),r.collapsed&&(cv(t,t.getRoot(),a,l,!0,o).each(({container:t,offset:r})=>{a=t,l=r}),cv(t,t.getRoot(),i,s,!1,o).each(({container:t,offset:r})=>{i=t,s=r})),(cc(d)||d.block_expand)&&(cc(d)&&nM(a)&&0!==l||(a=cw(t,n,a,l,!0)),cc(d)&&nM(i)&&s!==i.data.length||(i=cw(t,n,i,s,!1))),cu(d)&&(a=cy(t,n,r,a,"previousSibling"),i=cy(t,n,r,i,"nextSibling")),(cs(d)||cd(d))&&(a=cC(t,n,a,"previousSibling"),i=cC(t,n,i,"nextSibling"),cs(d)&&(t.isBlock(a)||(a=cw(t,n,a,l,!0)),t.isBlock(i)||(i=cw(t,n,i,s,!1)))),nS(a)&&a.parentNode&&(l=t.nodeIndex(a),a=a.parentNode),nS(i)&&i.parentNode&&(s=t.nodeIndex(i)+1,i=i.parentNode),{startContainer:a,startOffset:l,endContainer:i,endOffset:s}},ck=(t,r,n)=>{var o;let a=r.startOffset,l=lC(r.startContainer,a),i=r.endOffset,s=lC(r.endContainer,i-1),d=t=>{let r=t[0];nM(r)&&r===l&&a>=r.data.length&&t.splice(0,1);let n=t[t.length-1];return 0===i&&t.length>0&&n===s&&nM(n)&&t.splice(t.length-1,1),t},c=(t,r,n)=>{let o=[];for(;t&&t!==n;t=t[r])o.push(t);return o},u=(r,n)=>t.getParent(r,t=>t.parentNode===n,n),m=(t,r,o)=>{let a=o?"nextSibling":"previousSibling";for(let l=t,i=l.parentNode;l&&l!==r;l=i){i=l.parentNode;let r=c(l===t?l:l[a],a);r.length&&(o||r.reverse(),n(d(r)))}};if(l===s)return n(d([l]));let f=null!==(o=t.findCommonAncestor(l,s))&&void 0!==o?o:t.getRoot();if(t.isChildOf(l,s))return m(l,f,!0);if(t.isChildOf(s,l))return m(s,f);let g=u(l,f)||l,p=u(s,f)||s;m(l,g,!0);let h=c(g===l?g:g.nextSibling,"nextSibling",p===s?p.nextSibling:p);h.length&&n(d(h)),m(s,p)},cS=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],cN=(t,r,n,o,a,l)=>{let{uid:i=r,...s}=n;rl(t,a8()),t8(t,`${a6()}`,i),t8(t,`${a5()}`,o);let{attributes:d={},classes:c=[]}=a(i,s);if(t5(t,d),ed(c,r=>{rl(t,r)}),l){c.length>0&&t8(t,`${a4()}`,c.join(","));let r=eT(d);r.length>0&&t8(t,`${a7()}`,r.join(","))}},cR=(t,r,n,o,a)=>{let l=rm("span",t);return cN(l,r,n,o,a,!1),l},cA=(t,r,n,o,a,l)=>{let i=[],s=cR(t.getDoc(),n,l,o,a),d=a1(),c=()=>{d.clear()},u=t=>{ed(t,m)},m=r=>{var m,f;switch(m="span",f=tY(r),rx(r).fold(()=>"skipping",n=>"br"===f||tZ(r)&&"\uFEFF"===n0(r)?"valid":tJ(r)&&rd(r,a8())?"existing":dR(r.dom)?"caret":ei(cS,t=>rh(r,t))?"valid-block":d4(t,m,f)&&d4(t,tY(n),m)?"valid":"invalid-child")){case"invalid-child":c(),u(rT(r)),c();break;case"valid-block":c(),cN(r,n,l,o,a,!0);break;case"valid":nr(r,d.get().getOrThunk(()=>{let t=ls(s);return i.push(t),d.set(t),t}))}};return ck(t.dom,r,t=>{c(),u(es(t,rc))}),i},cT=t=>{let r=(()=>{let t={};return{register:(r,n)=>{t[r]={name:r,settings:n}},lookup:r=>ez(t,r).map(t=>t.settings),getNames:()=>eT(t)}})();((t,r)=>{let n=a5(),o=t=>et.from(t.attr(n)).bind(r.lookup),a=t=>{var r,n;t.attr(a6(),null),t.attr(a5(),null),t.attr(a9(),null);let o=et.from(t.attr(a7())).map(t=>t.split(",")).getOr([]),a=et.from(t.attr(a4())).map(t=>t.split(",")).getOr([]);ed(o,r=>t.attr(r,null));let l=ew(null!==(n=null===(r=t.attr("class"))||void 0===r?void 0:r.split(" "))&&void 0!==n?n:[],[a8()].concat(a));t.attr("class",l.length>0?l.join(" "):null),t.attr(a4(),null),t.attr(a7(),null)};t.serializer.addTempAttr(a9()),t.serializer.addAttributeFilter(n,t=>{for(let r of t)o(r).each(t=>{!1===t.persistent&&("span"===r.name?r.unwrap():a(r))})})})(t,r);let n=((t,r)=>{let n=aY({}),o=()=>({listeners:[],previous:a1()}),a=(t,r)=>{l(t,t=>(r(t),t))},l=(t,r)=>{let a=n.get(),l=r(ez(a,t).getOrThunk(o));a[t]=l,n.set(a)},i=(r,n)=>{ed(ln(t,r),t=>{n?t8(t,a9(),"true"):t7(t,a9())})},s=a3(()=>{ed(e_(r.getNames()),r=>{l(r,n=>{let o=n.previous.get();return lt(t,et.some(r)).fold(()=>{o.each(t=>{a(r,t=>{ed(t.listeners,t=>t(!1,r))}),n.previous.clear(),i(t,!1)})},({uid:t,name:r,elements:l})=>{tz(o,t)||(o.each(t=>i(t,!1)),a(r,n=>{ed(n.listeners,n=>n(!0,r,{uid:t,nodes:es(l,t=>t.dom)}))}),n.previous.set(t),i(t,!0))}),{previous:n.previous,listeners:n.listeners}})})},30);return t.on("remove",()=>{s.cancel()}),t.on("NodeChange",()=>{s.throttle()}),{addListener:(t,r)=>{l(t,t=>({previous:t.previous,listeners:t.listeners.concat([r])}))}}})(t,r),o=t2("span"),a=t=>{ed(t,t=>{o(t)?nl(t):(t=>{rs(t,a8()),t7(t,`${a6()}`),t7(t,`${a5()}`),t7(t,`${a9()}`);let r=t9(t,`${a7()}`).map(t=>t.split(",")).getOr([]),n=t9(t,`${a4()}`).map(t=>t.split(",")).getOr([]);ed(r,r=>t7(t,r)),ed(n,r=>{rs(t,r)}),t7(t,`${a4()}`),t7(t,`${a7()}`)})(t)})};return{register:(t,n)=>{r.register(t,n)},annotate:(n,o)=>{r.lookup(n).each(r=>{((t,r,n,o)=>{t.undoManager.transact(()=>{let a=t.selection,l=a.getRng(),i=dK(t).length>0,s=ll("mce-annotation");if(l.collapsed&&!i&&((t,r)=>{let n=c_(t.dom,r,[{inline:"span"}]);r.setStart(n.startContainer,n.startOffset),r.setEnd(n.endContainer,n.endOffset),t.selection.setRng(r)})(t,l),a.getRng().collapsed&&!i){let l=cR(t.getDoc(),s,o,r,n.decorate);nd(l,"\xa0"),a.getRng().insertNode(l.dom),a.select(l.dom)}else d1(a,!1,()=>{d0(t,a=>{cA(t,a,s,r,n.decorate,o)})})})})(t,n,r,o)})},annotationChanged:(t,r)=>{n.addListener(t,r)},remove:r=>{lt(t,et.some(r)).each(({elements:r})=>{let n=t.selection.getBookmark();a(r),t.selection.moveToBookmark(n)})},removeAll:r=>{let n=t.selection.getBookmark();eB(lo(t,r),(t,r)=>{a(t)}),t.selection.moveToBookmark(n)},getAll:r=>eP(lo(t,r),t=>es(t,t=>t.dom))}},cO=t=>({getBookmark:Y(dU,t),moveToBookmark:Y(dz,t)});cO.isBookmarkNode=dj;let cB=(t,r,n)=>!n.collapsed&&ei(n.getClientRects(),n=>t>=n.left&&t<=n.right&&r>=n.top&&r<=n.bottom),cP=(t,r,n)=>{t.dispatch(r,n)},cD=(t,r,n,o)=>{t.dispatch("FormatApply",{format:r,node:n,vars:o})},cL=(t,r,n,o)=>{t.dispatch("FormatRemove",{format:r,node:n,vars:o})},cM=(t,r)=>t.dispatch("SetContent",r),cF=(t,r)=>t.dispatch("GetContent",r),cI=(t,r)=>t.dispatch("PastePlainTextToggle",{state:r}),cU={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||cU.metaKeyPressed(t),metaKeyPressed:t=>tL.os.isMacOS()||tL.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},cz="data-mce-selected",cj=Math.abs,cH=Math.round,c$={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},cq=(t,r)=>{let n,o,a,l,i,s,d,c,u,m,f,g,p,h,b;let v=r.dom,y=r.getDoc(),C=document,E=r.getBody(),w=t=>I(t)&&(n$(t)||v.is(t,"figure.image")),x=t=>nY(t)||v.hasClass(t,"mce-preview-object"),_=t=>{let n=t.target;((t,r)=>{if("longpress"===t.type||0===t.type.indexOf("touch")){let n=t.touches[0];return w(t.target)&&!cB(n.clientX,n.clientY,r)}return w(t.target)&&!cB(t.clientX,t.clientY,r)})(t,r.selection.getRng())&&!t.isDefaultPrevented()&&r.selection.select(n)},k=t=>v.hasClass(t,"mce-preview-object")&&I(t.firstElementChild)?[t,t.firstElementChild]:v.is(t,"figure.image")?[t.querySelector("img")]:[t],S=t=>{let n=i$(r);return!!n&&"false"!==t.getAttribute("data-mce-resize")&&t!==r.getBody()&&(v.hasClass(t,"mce-preview-object")&&I(t.firstElementChild)?rh(rc(t.firstElementChild),n):rh(rc(t),n))},N=(t,n,o)=>{I(o)&&ed(k(t),t=>{t.style[n]||!r.schema.isValid(t.nodeName.toLowerCase(),n)?v.setStyle(t,n,o):v.setAttrib(t,n,""+o)})},R=(t,r,n)=>{N(t,"width",r),N(t,"height",n)},A=t=>{let i,y,C,_;i=t.screenX-s,y=t.screenY-d,g=i*l[2]+c,p=y*l[3]+u,g=g<5?5:g,p=p<5?5:p,((w(n)||x(n))&&!1!==iq(r)?!cU.modifierPressed(t):cU.modifierPressed(t))&&(cj(i)>cj(y)?(p=cH(g*m),g=cH(p/m)):(g=cH(p/m),p=cH(g*m))),R(o,g,p),C=l.startPos.x+i,_=l.startPos.y+y,C=C>0?C:0,_=_>0?_:0,v.setStyles(a,{left:C,top:_,display:"block"}),a.innerHTML=g+" &times; "+p,l[2]<0&&o.clientWidth<=g&&v.setStyle(o,"left",(void 0)+(c-g)),l[3]<0&&o.clientHeight<=p&&v.setStyle(o,"top",(void 0)+(u-p)),(i=E.scrollWidth-h)+(y=E.scrollHeight-b)!=0&&v.setStyles(a,{left:C-i,top:_-y}),f||(((t,r,n,o,a)=>{t.dispatch("ObjectResizeStart",{target:r,width:n,height:o,origin:a})})(r,n,c,u,"corner-"+l.name),f=!0)},T=()=>{let t=f;f=!1,t&&(N(n,"width",g),N(n,"height",p)),v.unbind(y,"mousemove",A),v.unbind(y,"mouseup",T),C!==y&&(v.unbind(C,"mousemove",A),v.unbind(C,"mouseup",T)),v.remove(o),v.remove(a),v.remove(i),O(n),t&&(((t,r,n,o,a)=>{t.dispatch("ObjectResized",{target:r,width:n,height:o,origin:a})})(r,n,g,p,"corner-"+l.name),v.setAttrib(n,"style",v.getAttrib(n,"style"))),r.nodeChanged()},O=t=>{M();let f=v.getPos(t,E),w=f.x,_=f.y,N=t.getBoundingClientRect(),O=N.width||N.right-N.left,B=N.height||N.bottom-N.top;n!==t&&(P(),n=t,g=p=0);let D=r.dispatch("ObjectSelected",{target:t});S(t)&&!D.isDefaultPrevented()?eB(c$,(t,r)=>{let f=v.get("mceResizeHandle"+r);f&&v.remove(f),f=v.add(E,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),v.bind(f,"mousedown",f=>{f.stopImmediatePropagation(),f.preventDefault(),(f=>{var g;let p=k(n)[0];s=f.screenX,d=f.screenY,c=p.clientWidth,m=(u=p.clientHeight)/c,(l=t).name=r,l.startPos={x:O*t[0]+w,y:B*t[1]+_},h=E.scrollWidth,b=E.scrollHeight,i=v.add(E,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),v.setStyles(i,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),o=x(g=n)?v.create("img",{src:tL.transparentSrc}):g.cloneNode(!0),v.addClass(o,"mce-clonedresizable"),v.setAttrib(o,"data-mce-bogus","all"),o.contentEditable="false",v.setStyles(o,{left:w,top:_,margin:0}),R(o,O,B),o.removeAttribute(cz),E.appendChild(o),v.bind(y,"mousemove",A),v.bind(y,"mouseup",T),C!==y&&(v.bind(C,"mousemove",A),v.bind(C,"mouseup",T)),a=v.add(E,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},c+" &times; "+u)})(f)}),t.elm=f,v.setStyles(f,{left:O*t[0]+w-f.offsetWidth/2,top:B*t[1]+_-f.offsetHeight/2})}):P(!1)},B=a2(O,0),P=(t=!0)=>{B.cancel(),M(),n&&t&&n.removeAttribute(cz),eB(c$,(t,r)=>{let n=v.get("mceResizeHandle"+r);n&&(v.unbind(n),v.remove(n))})},D=(t,r)=>v.isChildOf(t,r),L=n=>{if(f||r.removed||r.composing)return;let o=rX(rc("mousedown"===n.type?n.target:t.getNode()),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(t=>t.dom).filter(t=>v.isEditable(t.parentElement)||"IMG"===t.nodeName&&v.isEditable(t)).getOrUndefined(),a=I(o)?v.getAttrib(o,cz,"1"):"1";if(ed(v.select(`img[${cz}],hr[${cz}]`),t=>{t.removeAttribute(cz)}),I(o)&&D(o,E)&&r.hasFocus()&&(F(),D(t.getStart(!0),o)&&D(t.getEnd(!0),o)))return v.setAttrib(o,cz,a),void B.throttle(o);P()},M=()=>{eB(c$,t=>{t.elm&&(v.unbind(t.elm),delete t.elm)})},F=()=>{try{r.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(t){}};return r.on("init",()=>{F(),r.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",L),r.on("keyup compositionend",t=>{n&&"TABLE"===n.nodeName&&L(t)}),r.on("hide blur",P),r.on("contextmenu longpress",_,!0)}),r.on("remove",M),{isResizable:S,showResizeRect:O,hideResizeRect:P,updateResizeRect:L,destroy:()=>{B.cancel(),n=o=i=null}}},cV=(t,r,n)=>{let o=t.document.createRange();return r.fold(t=>{o.setStartBefore(t.dom)},(t,r)=>{o.setStart(t.dom,r)},t=>{o.setStartAfter(t.dom)}),((t,r)=>{r.fold(r=>{t.setEndBefore(r.dom)},(r,n)=>{t.setEnd(r.dom,n)},r=>{t.setEndAfter(r.dom)})})(o,n),o},cW=(t,r,n,o,a)=>{let l=t.document.createRange();return l.setStart(r.dom,n),l.setEnd(o.dom,a),l},cK=l3([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),cY=(t,r,n)=>r(rc(n.startContainer),n.startOffset,rc(n.endContainer),n.endOffset);cK.ltr,cK.rtl;let cG=(t,r,n,o)=>({start:t,soffset:r,finish:n,foffset:o}),cX=document.caretPositionFromPoint?(t,r,n)=>{var o,a;return et.from(null===(a=(o=t.dom).caretPositionFromPoint)||void 0===a?void 0:a.call(o,r,n)).bind(r=>{if(null===r.offsetNode)return et.none();let n=t.dom.createRange();return n.setStart(r.offsetNode,r.offset),n.collapse(),et.some(n)})}:document.caretRangeFromPoint?(t,r,n)=>{var o,a;return et.from(null===(a=(o=t.dom).caretRangeFromPoint)||void 0===a?void 0:a.call(o,r,n))}:et.none,cQ=l3([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),cJ={before:cQ.before,on:cQ.on,after:cQ.after,cata:(t,r,n,o)=>t.fold(r,n,o),getStart:t=>t.fold(W,W,W)},cZ=l3([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),c0={domRange:cZ.domRange,relative:cZ.relative,exact:cZ.exact,exactFromRange:t=>cZ.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>rw(t.match({domRange:t=>rc(t.startContainer),relative:(t,r)=>cJ.getStart(t),exact:(t,r,n,o)=>t})),range:cG},c1=(t,r)=>{let n=tY(t);return"input"===n?cJ.after(t):el(["br","img"],n)?0===r?cJ.before(t):cJ.after(t):cJ.on(t,r)},c2=(t,r)=>{let n=t.fold(cJ.before,c1,cJ.after),o=r.fold(cJ.before,c1,cJ.after);return c0.relative(n,o)},c3=(t,r,n,o)=>{let a=c1(t,r),l=c1(n,o);return c0.relative(a,l)},c8=(t,r)=>{let n=(r||document).createDocumentFragment();return ed(t,t=>{n.appendChild(t.dom)}),rc(n)},c5=t=>{let r=c0.getWin(t).dom,n=(t,n,o,a)=>cW(r,t,n,o,a);return((t,r)=>{let n=r.ltr();return n.collapsed?r.rtl().filter(t=>!1===t.collapsed).map(t=>cK.rtl(rc(t.endContainer),t.endOffset,rc(t.startContainer),t.startOffset)).getOrThunk(()=>cY(0,cK.ltr,n)):cY(0,cK.ltr,n)})(0,t.match({domRange:t=>{let r=rc(t.startContainer),n=rc(t.endContainer);return c3(r,t.startOffset,n,t.endOffset)},relative:c2,exact:c3}).match({domRange:t=>({ltr:V(t),rtl:et.none}),relative:(t,n)=>({ltr:eJ(()=>cV(r,t,n)),rtl:eJ(()=>et.some(cV(r,n,t)))}),exact:(t,n,o,a)=>({ltr:eJ(()=>cW(r,t,n,o,a)),rtl:eJ(()=>et.some(cW(r,o,a,t,n)))})})).match({ltr:n,rtl:n})},c6=(t,r,n)=>{var o;return(o=rw(rc(n)).dom,cX(rc(o.document),t,r).map(t=>cG(rc(t.startContainer),t.startOffset,rc(t.endContainer),t.endOffset))).map(t=>{let r=n.createRange();return r.setStart(t.start.dom,t.soffset),r.setEnd(t.finish.dom,t.foffset),r}).getOrUndefined()},c9=(t,r)=>I(t)&&I(r)&&t.startContainer===r.startContainer&&t.startOffset===r.startOffset&&t.endContainer===r.endContainer&&t.endOffset===r.endOffset,c4=(t,r,n)=>null!==((t,r,n)=>{let o=t;for(;o&&o!==r;){if(n(o))return o;o=o.parentNode}return null})(t,r,n),c7=(t,r,n)=>c4(t,r,t=>t.nodeName===n),ue=(t,r)=>oa(t)&&!c4(t,r,dR),ut=(t,r,n)=>{let o=r.parentNode;if(o){let a;let l=new nx(r,t.getParent(o,t.isBlock)||t.getRoot());for(;a=l[n?"prev":"next"]();)if(nH(a))return!0}return!1},ur=(t,r,n,o,a)=>{let l,i;let s=t.getRoot(),d=t.schema.getNonEmptyElements(),c=a.parentNode;if(!c)return et.none();let u=t.getParent(c,t.isBlock)||s;if(o&&nH(a)&&r&&t.isEmpty(u))return et.some(lL(c,t.nodeIndex(a)));let m=new nx(a,u);for(;i=m[o?"prev":"next"]();){if("false"===t.getContentEditableParent(i)||ue(i,s))return et.none();if(nM(i)&&i.data.length>0)return c7(i,s,"A")?et.none():et.some(lL(i,o?i.data.length:0));if(t.isBlock(i)||d[i.nodeName.toLowerCase()])return et.none();l=i}return nU(l)?et.none():n&&l?et.some(lL(l,0)):et.none()},un=(t,r,n,o)=>{var a;let l=t.getRoot(),i,s=!1,d=n?o.startContainer:o.endContainer,c=n?o.startOffset:o.endOffset,u=nS(d)&&c===d.childNodes.length,m=t.schema.getNonEmptyElements(),f=n;if(oa(d))return et.none();if(nS(d)&&c>d.childNodes.length-1&&(f=!1),nz(d)&&(d=l,c=0),d===l){if(f&&(i=d.childNodes[c>0?c-1:0])&&(oa(i)||m[i.nodeName]||nP(i)))return et.none();if(d.hasChildNodes()){if(c=Math.min(!f&&c>0?c-1:c,d.childNodes.length-1),c=nM(d=d.childNodes[c])&&u?d.data.length:0,!r&&d===l.lastChild&&nP(d)||((t,r)=>{let n=r;for(;n&&n!==t;){if(nV(n))return!0;n=n.parentNode}return!1})(l,d)||oa(d)||nX(d))return et.none();if(d.hasChildNodes()&&!nP(d)){i=d;let r=new nx(d,l);do{if(nV(i)||oa(i)){s=!1;break}if(nM(i)&&i.data.length>0){c=f?0:i.data.length,d=i,s=!0;break}if(m[i.nodeName.toLowerCase()]&&!nK(i)){c=t.nodeIndex(i),d=i.parentNode,f||c++,s=!0;break}}while(i=f?r.next():r.prev())}}}return r&&(nM(d)&&0===c&&ur(t,u,r,!0,d).each(t=>{d=t.container(),c=t.offset(),s=!0}),nS(d)&&((i=d.childNodes[c])||(i=d.childNodes[c-1]),!i||!nH(i)||"A"===(null===(a=i.previousSibling)||void 0===a?void 0:a.nodeName)||ut(t,i,!1)||ut(t,i,!0)||ur(t,u,r,!0,i).each(t=>{d=t.container(),c=t.offset(),s=!0}))),f&&!r&&nM(d)&&c===d.data.length&&ur(t,u,r,!1,d).each(t=>{d=t.container(),c=t.offset(),s=!0}),s&&d?et.some(lL(d,c)):et.none()},uo=(t,r)=>{let n=r.collapsed,o=r.cloneRange(),a=lL.fromRangeStart(r);return un(t,n,!0,o).each(t=>{n&&lL.isAbove(a,t)||o.setStart(t.container(),t.offset())}),n||un(t,n,!1,o).each(t=>{o.setEnd(t.container(),t.offset())}),n&&o.collapse(!0),c9(r,o)?et.none():et.some(o)},ua=(t,r)=>t.splitText(r),ul=t=>{let r=t.startContainer,n=t.startOffset,o=t.endContainer,a=t.endOffset;if(r===o&&nM(r)){if(n>0&&n<r.data.length){if(r=(o=ua(r,n)).previousSibling,a>n){let t=ua(o,a-=n).previousSibling;r=o=t,a=t.data.length,n=0}else a=0}}else if(nM(r)&&n>0&&n<r.data.length&&(r=ua(r,n),n=0),nM(o)&&a>0&&a<o.data.length){let t=ua(o,a).previousSibling;o=t,a=t.data.length}return{startContainer:r,startOffset:n,endContainer:o,endOffset:a}},ui=t=>({walk:(r,n)=>ck(t,r,n),split:ul,expand:(r,n={type:"word"})=>{if("word"===n.type){let n=c_(t,r,[{inline:"span"}]),o=t.createRng();return o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),o}return r},normalize:r=>uo(t,r).fold(Z,t=>(r.setStart(t.startContainer,t.startOffset),r.setEnd(t.endContainer,t.endOffset),!0))});ui.compareRanges=c9,ui.getCaretRangeFromPoint=c6,ui.getSelectedNode=ly,ui.getNode=lC;let us=((t,r)=>{let n=r=>{let n=(t=>{let r=t.dom;return r$(t)?r.getBoundingClientRect().height:r.offsetHeight})(r);return n<=0||null===n?parseFloat(r3(r,t))||0:n},o=(t,r)=>eg(r,(r,n)=>{let o=r3(t,n),a=void 0===o?0:parseInt(o,10);return isNaN(a)?r:r+a},0);return{set:(r,n)=>{if(!z(n)&&!n.match(/^[0-9]+$/))throw Error(t+".set accepts only positive integer values. Value was "+n);let o=r.dom;rZ(o)&&(o.style[t]=n+"px")},get:n,getOuter:n,aggregate:o,max:(t,r,n)=>{let a=o(t,n);return r>a?r-a:0}}})("height"),ud=()=>rc(document),uc=(t,r)=>t.view(r).fold(V([]),r=>{let n=t.owner(r);return[r].concat(uc(t,n))});var uu=Object.freeze({__proto__:null,view:t=>{var r;return(t.dom===document?et.none():et.from(null===(r=t.dom.defaultView)||void 0===r?void 0:r.frameElement)).map(rc)},owner:t=>rE(t)});let um=t=>"textarea"===tY(t),uf=(t,r)=>{let n=(t=>{let r=t.dom.ownerDocument,n=r.body,o=r.defaultView,a=r.documentElement;if(n===t.dom)return nm(n.offsetLeft,n.offsetTop);let l=nf(null==o?void 0:o.pageYOffset,a.scrollTop),i=nf(null==o?void 0:o.pageXOffset,a.scrollLeft),s=nf(a.clientTop,n.clientTop),d=nf(a.clientLeft,n.clientLeft);return ng(t).translate(i-d,l-s)})(t),o=us.get(t);return{element:t,bottom:n.top+o,height:o,pos:n,cleanup:r}},ug=(t,r,n,o)=>{uv(t,(a,l)=>uh(t,r,n,o),n)},up=(t,r,n,o,a)=>{let l={elm:o.element.dom,alignToTop:a};t.dispatch("ScrollIntoView",l).isDefaultPrevented()||(n(t,r,np(r).top,o,a),((t,r)=>{t.dispatch("AfterScrollIntoView",r)})(t,l))},uh=(t,r,n,o)=>{let a=rc(t.getBody()),l=rc(t.getDoc());a.dom.offsetWidth;let i=((t,r)=>{let n=((t,r)=>{let n=rT(t);if(0===n.length||um(t))return{element:t,offset:r};if(r<n.length&&!um(n[r]))return{element:n[r],offset:0};{let o=n[n.length-1];return um(o)?{element:t,offset:r}:"img"===tY(o)?{element:o,offset:1}:tZ(o)?{element:o,offset:n0(o).length}:{element:o,offset:rT(o).length}}})(t,r),o=ru('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return r4(n.element,o),uf(o,()=>na(o))})(rc(n.startContainer),n.startOffset);up(t,l,r,i,o),i.cleanup()},ub=(t,r,n,o)=>{let a=rc(t.getDoc());up(t,a,n,uf(rc(r),H),o)},uv=(t,r,n)=>{let o=n.startContainer,a=n.startOffset,l=n.endContainer,i=n.endOffset;r(rc(o),rc(l));let s=t.dom.createRng();s.setStart(o,a),s.setEnd(l,i),t.selection.setRng(n)},uy=(t,r,n,o,a)=>{let l=r.pos;if(o)nh(l.left,l.top,a);else{let o=l.top-n+r.height;nh(-t.getBody().getBoundingClientRect().left,o,a)}},uC=(t,r,n,o,a,l)=>{let i=o+n,s=a.pos.top,d=a.bottom,c=d-s>=o;s<n?uy(t,a,o,!1!==l,r):s>i?uy(t,a,o,c?!1!==l:!0===l,r):d>i&&!c&&uy(t,a,o,!0===l,r)},uE=(t,r,n,o,a)=>{let l=rw(r).dom.innerHeight;uC(t,r,n,l,o,a)},uw=(t,r,n,o,a)=>{let l=rw(r).dom.innerHeight;uC(t,r,n,l,o,a);let i=(t=>{let r=np(ud()),n=((t,r)=>{let n=r.owner(t);return uc(r,n)})(t,uu),o=ng(t),a=ef(n,(t,r)=>{let n=ng(r);return{left:t.left+n.left,top:t.top+n.top}},{left:0,top:0});return nm(a.left+o.left+r.left,a.top+o.top+r.top)})(o.element),s=ny(window);i.top<s.y?nb(o.element,!1!==a):i.top>s.bottom&&nb(o.element,!0===a)},ux=(t,r,n)=>ug(t,uE,r,n),u_=(t,r,n)=>ub(t,r,uE,n),uk=(t,r,n)=>ug(t,uw,r,n),uS=(t,r,n)=>ub(t,r,uw,n),uN=(t,r,n)=>{(t.inline?ux:uk)(t,r,n)},uR=(t,r=!1)=>t.dom.focus({preventScroll:r}),uA=t=>{let r=rI(t).dom;return t.dom===r.activeElement},uT=(t=ud())=>et.from(t.dom.activeElement).map(rc),uO=(t,r)=>{let n=tZ(r)?n0(r).length:rT(r).length+1;return t>n?n:t<0?0:t},uB=t=>c0.range(t.start,uO(t.soffset,t.start),t.finish,uO(t.foffset,t.finish)),uP=(t,r)=>!nk(r.dom)&&(ry(t,r)||rv(t,r)),uD=t=>r=>uP(t,r.start)&&uP(t,r.finish),uL=t=>c0.range(rc(t.startContainer),t.startOffset,rc(t.endContainer),t.endOffset),uM=t=>{let r=document.createRange();try{return r.setStart(t.start.dom,t.soffset),r.setEnd(t.finish.dom,t.foffset),et.some(r)}catch(t){return et.none()}},uF=t=>{var r;let n=t.inline||tL.browser.isFirefox()?(t=>{let r=t.getSelection();return(r&&0!==r.rangeCount?et.from(r.getRangeAt(0)):et.none()).map(uL)})(rw(r=rc(t.getBody())).dom).filter(uD(r)):et.none();t.bookmark=n.isSome()?n:t.bookmark},uI=t=>(t.bookmark?t.bookmark:et.none()).bind(r=>{var n;return n=rc(t.getBody()),et.from(r).filter(uD(n)).map(uB)}).bind(uM),uU={isEditorUIElement:t=>{let r=t.className.toString();return -1!==r.indexOf("tox-")||-1!==r.indexOf("mce-")}},uz={setEditorTimeout:(t,r,n)=>{var o;return z(o=n)||(o=0),setTimeout(()=>{t.removed||r()},o)},setEditorInterval:(t,r,n)=>{var o;let a=(z(o=n)||(o=0),setInterval(()=>{t.removed?clearInterval(a):r()},o));return a}},uj=aV.DOM,uH=t=>{let r=t.classList;return void 0!==r&&(r.contains("tox-edit-area")||r.contains("tox-edit-area__iframe")||r.contains("mce-content-body"))},u$=(t,r)=>{let n=i3(t);return null!==uj.getParent(r,r=>nS(r)&&uU.isEditorUIElement(r)||!!n&&t.dom.is(r,n))},uq=t=>{try{let r=rI(rc(t.getElement()));return uT(r).fold(()=>document.body,t=>t.dom)}catch(t){return document.body}},uV=(r,n)=>{let o=n.editor;(t=>{let r=a2(()=>{uF(t)},0);t.on("init",()=>{t.inline&&((t,r)=>{let n=()=>{r.throttle()};aV.DOM.bind(document,"mouseup",n),t.on("remove",()=>{aV.DOM.unbind(document,"mouseup",n)})})(t,r),((t,r)=>{t.on("mouseup touchend",t=>{r.throttle()})})(t,r),t.on("keyup NodeChange AfterSetSelectionRange",r=>{"nodechange"===r.type&&r.selectionChange||uF(t)})}),t.on("remove",()=>{r.cancel()})})(o);let a=(t,r)=>{sL(t)&&!0!==t.inline&&r(rc(t.getContainer()),"tox-edit-focus")};o.on("focusin",()=>{let t=r.focusedEditor;uH(uq(o))&&a(o,rl),t!==o&&(t&&t.dispatch("blur",{focusedEditor:o}),r.setActive(o),r.focusedEditor=o,o.dispatch("focus",{blurredEditor:t}),o.focus(!0))}),o.on("focusout",()=>{uz.setEditorTimeout(o,()=>{let t=r.focusedEditor;uH(uq(o))&&t===o||a(o,rs),u$(o,uq(o))||t!==o||(o.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null)})}),t||(t=t=>{let n=r.activeEditor;n&&rj(t).each(t=>{t.ownerDocument===document&&(t===document.body||u$(n,t)||r.focusedEditor!==n||(n.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null))})},uj.bind(document,"focusin",t))},uW=(r,n)=>{r.focusedEditor===n.editor&&(r.focusedEditor=null),!r.activeEditor&&t&&(uj.unbind(document,"focusin",t),t=null)},uK=(t,r)=>{var n;(n=rc(t.getBody()),(r.collapsed?et.from(lC(r.startContainer,r.startOffset)).map(rc):et.none()).bind(t=>n9(t)?et.some(t):ry(n,t)?et.none():et.some(n))).bind(t=>dk(t.dom)).fold(()=>{t.selection.normalize()},r=>t.selection.setRng(r.toRange()))},uY=t=>{if(t.setActive)try{t.setActive()}catch(r){t.focus()}else t.focus()},uG=t=>t.inline?(t=>{var r;let n=t.getBody();return n&&(uA(r=rc(n))||uT(rI(r)).filter(t=>r.dom.contains(t.dom)).isSome())})(t):I(t.iframeElement)&&uA(rc(t.iframeElement)),uX=t=>uG(t)||uT(rI(rc(t.getElement()))).filter(r=>!uH(r.dom)&&u$(t,r.dom)).isSome(),uQ=t=>t.editorManager.setActive(t),uJ=(t,r)=>r.collapsed?t.isEditable(r.startContainer):t.isEditable(r.startContainer)&&t.isEditable(r.endContainer),uZ=(t,r,n,o,a)=>{let l=n?r.startContainer:r.endContainer,i=n?r.startOffset:r.endOffset;return et.from(l).map(rc).map(t=>o&&r.collapsed?t:rO(t,a(t,i)).getOr(t)).bind(t=>tJ(t)?et.some(t):rx(t).filter(tJ)).map(t=>t.dom).getOr(t)},u0=(t,r,n=!1)=>uZ(t,r,!0,n,(t,r)=>Math.min(rD(t),r)),u1=(t,r,n=!1)=>uZ(t,r,!1,n,(t,r)=>r>0?r-1:r),u2=(t,r)=>{let n=t;for(;t&&nM(t)&&0===t.length;)t=r?t.nextSibling:t.previousSibling;return t||n},u3=(t,r)=>es(r,r=>{let n=t.dispatch("GetSelectionRange",{range:r});return n.range!==r?n.range:r}),u8=["img","br"],u5=t=>n1(t).filter(t=>0!==t.trim().length||t.indexOf("\xa0")>-1).isSome()||el(u8,tY(t))||tQ(t)&&"false"===t6(t,"contenteditable"),u6="[data-mce-autocompleter]",u9=(t,r)=>{if(u4(rc(t.getBody())).isNone()){let n=ru('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());nt(n,rc(r.extractContents())),r.insertNode(n.dom),rx(n).each(t=>t.dom.normalize()),((t,r)=>{let n=t=>{let o=rT(t);for(let t=o.length-1;t>=0;t--){let a=o[t];if(r(a))return et.some(a);let l=n(a);if(l.isSome())return l}return et.none()};return n(t)})(n,u5).map(r=>{t.selection.setCursorLocation(r.dom,"img"===tY(r)?1:n1(r).fold(()=>rT(r).length,t=>t.length))})}},u4=t=>rG(t,u6),u7={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},me=(t,r,n)=>{let o=n?"lastChild":"firstChild",a=n?"prev":"next";if(t[o])return t[o];if(t!==r){let n=t[a];if(n)return n;for(let o=t.parent;o&&o!==r;o=o.parent)if(n=o[a])return n}},mt=t=>{var r;let n=null!==(r=t.value)&&void 0!==r?r:"";if(!oC(n))return!1;let o=t.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},mr=t=>{let r="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||r};class mn{static create(t,r){let n=new mn(t,u7[t]||1);return r&&eB(r,(t,r)=>{n.attr(r,t)}),n}constructor(t,r){this.name=t,this.type=r,1===r&&(this.attributes=[],this.attributes.map={})}replace(t){return t.parent&&t.remove(),this.insert(t,this),this.remove(),this}attr(t,r){let n=this;if(!T(t))return I(t)&&eB(t,(t,r)=>{n.attr(r,t)}),n;let o=n.attributes;if(o){if(void 0!==r){if(null===r){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),n}return n}if(t in o.map){let n=o.length;for(;n--;)if(o[n].name===t){o[n].value=r;break}}else o.push({name:t,value:r});return o.map[t]=r,n}return o.map[t]}}clone(){let t=new mn(this.name,this.type),r=this.attributes;if(r){let n=[];n.map={};for(let t=0,o=r.length;t<o;t++){let o=r[t];"id"!==o.name&&(n[n.length]={name:o.name,value:o.value},n.map[o.name]=o.value)}t.attributes=n}return t.value=this.value,t}wrap(t){return this.parent&&(this.parent.insert(t,this),t.append(this)),this}unwrap(){for(let t=this.firstChild;t;){let r=t.next;this.insert(t,this,!0),t=r}this.remove()}remove(){let t=this.parent,r=this.next,n=this.prev;return t&&(t.firstChild===this?(t.firstChild=r,r&&(r.prev=null)):n&&(n.next=r),t.lastChild===this?(t.lastChild=n,n&&(n.next=null)):r&&(r.prev=n),this.parent=this.next=this.prev=null),this}append(t){t.parent&&t.remove();let r=this.lastChild;return r?(r.next=t,t.prev=r,this.lastChild=t):this.lastChild=this.firstChild=t,t.parent=this,t}insert(t,r,n){t.parent&&t.remove();let o=r.parent||this;return n?(r===o.firstChild?o.firstChild=t:r.prev&&(r.prev.next=t),t.prev=r.prev,t.next=r,r.prev=t):(r===o.lastChild?o.lastChild=t:r.next&&(r.next.prev=t),t.next=r.next,t.prev=r,r.next=t),t.parent=o,t}getAll(t){let r=[];for(let n=this.firstChild;n;n=me(n,this))n.name===t&&r.push(n);return r}children(){let t=[];for(let r=this.firstChild;r;r=r.next)t.push(r);return t}empty(){if(this.firstChild){let t=[];for(let r=this.firstChild;r;r=me(r,this))t.push(r);let r=t.length;for(;r--;){let n=t[r];n.parent=n.firstChild=n.lastChild=n.next=n.prev=null}}return this.firstChild=this.lastChild=null,this}isEmpty(t,r={},n){var o;let a=this.firstChild;if(mr(this))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(t[a.name]||mr(a))return!1}if(8===a.type||3===a.type&&!mt(a)||3===a.type&&a.parent&&r[a.parent.name]&&oC(null!==(o=a.value)&&void 0!==o?o:"")||n&&n(a))return!1}while(a=me(a,this));return!0}walk(t){return me(this,null,t)}}let mo=tU.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),ma=t=>T(t.nodeValue)&&t.nodeValue.includes("\uFEFF"),ml=t=>(0===t.length?"":`${es(t,t=>`[${t}]`).join(",")},`)+'[data-mce-bogus="all"]',mi=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,t=>ma(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),ms=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,t=>{if(ma(t)){let r=t.parentNode;return r&&ej(mo,r.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),md=t=>null!==mi(t).nextNode(),mc=t=>null!==ms(t).nextNode(),mu=(t,r)=>null!==r.querySelector(ml(t)),mm=(t,r)=>{ed(r.querySelectorAll(ml(t)),r=>{let n=rc(r);"all"===t6(n,"data-mce-bogus")?na(n):ed(t,t=>{t4(n,t)&&t7(n,t)})})},mf=t=>{let r=t.nextNode();for(;null!==r;)r.nodeValue=null,r=t.nextNode()},mg=$(mf,mi),mp=$(mf,ms),mh=(t,r)=>{let n=[{condition:Y(mu,r),action:Y(mm,r)},{condition:md,action:mg},{condition:mc,action:mp}],o=t,a=!1;return ed(n,({condition:r,action:n})=>{r(o)&&(a||(o=t.cloneNode(!0),a=!0),n(o))}),o},mb=t=>{ed(nE(t,"[data-mce-bogus]"),t=>{"all"===t6(t,"data-mce-bogus")?na(t):n3(t)?(r4(t,rf("\uFEFF")),na(t)):nl(t)})},mv=t=>{ed(nE(t,"input"),t=>{t7(t,"name")})},my=(t,r,n)=>{let o;return o="raw"===r.format?tU.trim(or(mh(n,t.serializer.getTempAttrs()).innerHTML)):"text"===r.format?((t,r)=>{let n=t.getDoc(),o=rI(rc(t.getBody())),a=rm("div",n);t8(a,"data-mce-bogus","all"),r2(a,{position:"fixed",left:"-9999999px",top:"0"}),nd(a,r.innerHTML),mb(a),mv(a),nt(rL(o)?o:rc(rE(o).dom.body),a);let l=or(a.dom.innerText);return na(a),l})(t,n):"tree"===r.format?t.serializer.serialize(n,r):((t,r)=>{let n=ih(t),o=RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return r.replace(o,"")})(t,t.serializer.serialize(n,r)),"text"!==r.format&&!n7(rc(n))&&T(o)?tU.trim(o):o},mC=tU.makeMap,mE=t=>{let r=[],n=(t=t||{}).indent,o=mC(t.indent_before||""),a=mC(t.indent_after||""),l=aa.getEncodeFunc(t.entity_encoding||"raw",t.entities),i="xhtml"!==t.element_format;return{start:(t,s,d)=>{if(n&&o[t]&&r.length>0){let t=r[r.length-1];t.length>0&&"\n"!==t&&r.push("\n")}if(r.push("<",t),s)for(let t=0,n=s.length;t<n;t++){let n=s[t];r.push(" ",n.name,'="',l(n.value,!0),'"')}if(r[r.length]=!d||i?">":" />",d&&n&&a[t]&&r.length>0){let t=r[r.length-1];t.length>0&&"\n"!==t&&r.push("\n")}},end:t=>{let o;r.push("</",t,">"),n&&a[t]&&r.length>0&&(o=r[r.length-1]).length>0&&"\n"!==o&&r.push("\n")},text:(t,n)=>{t.length>0&&(r[r.length]=n?t:l(t))},cdata:t=>{r.push("<![CDATA[",t,"]]>")},comment:t=>{r.push("<!--",t,"-->")},pi:(t,o)=>{o?r.push("<?",t," ",l(o),"?>"):r.push("<?",t,"?>"),n&&r.push("\n")},doctype:t=>{r.push("<!DOCTYPE",t,">",n?"\n":"")},reset:()=>{r.length=0},getContent:()=>r.join("").replace(/\n$/,"")}},mw=(t={},r=ah())=>{let n=mE(t);return t.validate=!("validate"in t)||t.validate,{serialize:o=>{let a=t.validate,l={3:t=>{var r;n.text(null!==(r=t.value)&&void 0!==r?r:"",t.raw)},8:t=>{var r;n.comment(null!==(r=t.value)&&void 0!==r?r:"")},7:t=>{n.pi(t.name,t.value)},10:t=>{var r;n.doctype(null!==(r=t.value)&&void 0!==r?r:"")},4:t=>{var r;n.cdata(null!==(r=t.value)&&void 0!==r?r:"")},11:t=>{let r=t;if(r=r.firstChild)do i(r);while(r=r.next)}};n.reset();let i=t=>{var o;let s=l[t.type];if(s)s(t);else{let l=t.name,s=l in r.getVoidElements(),d=t.attributes;if(a&&d&&d.length>1){let n=[];n.map={};let o=r.getElementRule(t.name);if(o){for(let t=0,r=o.attributesOrder.length;t<r;t++){let r=o.attributesOrder[t];if(r in d.map){let t=d.map[r];n.map[r]=t,n.push({name:r,value:t})}}for(let t=0,r=d.length;t<r;t++){let r=d[t].name;if(!(r in n.map)){let t=d.map[r];n.map[r]=t,n.push({name:r,value:t})}}d=n}}if(n.start(l,d,s),oT(l))T(t.value)&&n.text(t.value,!0),n.end(l);else if(!s){let r=t.firstChild;if(r){"pre"!==l&&"textarea"!==l||3!==r.type||"\n"!==(null===(o=r.value)||void 0===o?void 0:o[0])||n.text("\n",!0);do i(r);while(r=r.next)}n.end(l)}}};return 1!==o.type||t.inner?3===o.type?l[3](o):l[11](o):i(o),n.getContent()}}},mx=new Set;ed(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{mx.add(t)});let m_=["font","text-decoration","text-emphasis"],mk=(t,r)=>eT(t.parseStyle(t.getAttrib(r,"style"))),mS=(t,r,n)=>{let o=mk(t,r),a=mk(t,n),l=o=>{var a,l;let i=null!==(a=t.getStyle(r,o))&&void 0!==a?a:"",s=null!==(l=t.getStyle(n,o))&&void 0!==l?l:"";return tr(i)&&tr(s)&&i!==s};return ei(o,t=>{let r=r=>ei(r,r=>r===t);if(!r(a)&&r(m_)){let t=em(a,t=>ei(m_,r=>e6(t,r)));return ei(t,l)}return l(t)})},mN=(t,r,n)=>et.from(n.container()).filter(nM).exists(o=>r(o.data.charAt(n.offset()+(t?0:-1)))),mR=Y(mN,!0,d$),mA=Y(mN,!1,d$),mT=t=>{let r=t.container();return nM(r)&&(0===r.data.length||nJ(r.data)&&cO.isBookmarkNode(r.parentNode))},mO=(t,r)=>n=>s4(t?0:-1,n).filter(r).isSome(),mB=t=>n$(t)&&"block"===r3(rc(t),"display"),mP=t=>nV(t)&&!(nS(t)&&"all"===t.getAttribute("data-mce-bogus")),mD=mO(!0,mB),mL=mO(!1,mB),mM=mO(!0,nY),mF=mO(!1,nY),mI=mO(!0,nP),mU=mO(!1,nP),mz=mO(!0,mP),mj=mO(!1,mP),mH=(t,r)=>ry(r,t)?rk(t,t=>Z(t)||rv(t,r)).slice(0,-1):[],m$=(t,r)=>[t].concat(mH(t,r)),mq=(t,r,n)=>dE(t,r,n,mT),mV=(t,r,n)=>eh(m$(rc(r.container()),t),t=>n.isBlock(tY(t))),mW=(t,r,n,o)=>mq(t,r.dom,n).forall(t=>mV(r,n,o).fold(()=>!s9(t,n,r.dom),o=>!s9(t,n,r.dom)&&ry(o,rc(t.container())))),mK=(t,r,n,o)=>mV(r,n,o).fold(()=>mq(t,r.dom,n).forall(t=>!s9(t,n,r.dom)),r=>mq(t,r.dom,n).isNone()),mY=Y(mK,!1),mG=Y(mK,!0),mX=Y(mW,!1),mQ=Y(mW,!0),mJ=t=>ds(t).exists(n3),mZ=(t,r,n,o)=>dy(t,eS(em(m$(rc(n.container()),r),t=>o.isBlock(tY(t)))).getOr(r).dom,n).filter(mJ),m0=(t,r,n)=>ds(r).exists(n3)||mZ(!0,t,r,n).isSome(),m1=(t,r,n)=>et.from(r.getNode(!0)).map(rc).exists(n3)||mZ(!1,t,r,n).isSome(),m2=Y(mZ,!1),m3=Y(mZ,!0),m8=t=>lL.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),m5=(t,r,n)=>eS(em(m$(rc(r.container()),t),t=>n.isBlock(tY(t)))).getOr(t),m6=(t,r,n)=>m8(r)?mA(r):mA(r)||d_(m5(t,r,n).dom,r).exists(mA),m9=(t,r,n)=>m8(r)?mR(r):mR(r)||dx(m5(t,r,n).dom,r).exists(mR),m4=t=>ds(t).bind(t=>rW(t,tJ)).exists(t=>el(["pre","pre-wrap"],r3(t,"white-space"))),m7=(t,r)=>n=>{var o;return I(o=new nx(n,t)[r]())&&nV(o)&&s1(o)},fe=(t,r,n)=>!m4(r)&&(d_(t.dom,r).isNone()||dx(t.dom,r).isNone()||mY(t,r,n)||mG(t,r,n)||m1(t,r,n)||m0(t,r,n)||m6(t,r,n)||m9(t,r,n)),ft=(t,r,n)=>!m4(r)&&(mY(t,r,n)||mX(t,r,n)||m1(t,r,n)||m6(t,r,n)||((t,r)=>{let n=d_(t.dom,r).getOr(r),o=m7(t.dom,"prev");return r.isAtStart()&&(o(r.container())||o(n.container()))})(t,r)),fr=(t,r,n)=>!m4(r)&&(mG(t,r,n)||mQ(t,r,n)||m0(t,r,n)||m9(t,r,n)||((t,r)=>{let n=dx(t.dom,r).getOr(r),o=m7(t.dom,"next");return r.isAtEnd()&&(o(r.container())||o(n.container()))})(t,r)),fn=(t,r,n)=>ft(t,r,n)||fr(t,(t=>{let r=t.container(),n=t.offset();return nM(r)&&n<r.data.length?lL(r,n+1):t})(r),n),fo=(t,r)=>dH(t.charAt(r)),fa=(t,r)=>d$(t.charAt(r)),fl=(t,r,n,o)=>{let a=r.data,l=lL(r,0);return n||!fo(a,0)||fn(t,l,o)?!!(n&&fa(a,0)&&ft(t,l,o))&&(r.data="\xa0"+a.slice(1),!0):(r.data=" "+a.slice(1),!0)},fi=(t,r,n,o)=>{let a=r.data,l=lL(r,a.length-1);return n||!fo(a,a.length-1)||fn(t,l,o)?!!(n&&fa(a,a.length-1)&&fr(t,l,o))&&(r.data=a.slice(0,-1)+"\xa0",!0):(r.data=a.slice(0,-1)+" ",!0)},fs=(t,r,n)=>{let o=r.container();return nM(o)?(t=>{let r=t.container();return nM(r)&&e5(r.data,"\xa0")})(r)?t$(fl(t,o,!1,n)||(t=>{let r=t.data,n=(t=>{let r=t.split("");return es(r,(t,n)=>dH(t)&&n>0&&n<r.length-1&&dq(r[n-1])&&dq(r[n+1])?" ":t).join("")})(r);return n!==r&&(t.data=n,!0)})(o)||fi(t,o,!1,n),r):fn(t,r,n)?t$(fl(t,o,!0,n)||fi(t,o,!0,n),r):et.none():et.none()},fd=(t,r,n,o)=>{if(0===n)return;let a=rc(t),l=rV(a,t=>o.isBlock(tY(t))).getOr(a),i=t.data.slice(r,r+n),s=r+n>=t.data.length&&fr(l,lL(t,t.data.length),o),d=0===r&&ft(l,lL(t,0),o);t.replaceData(r,n,ox(i,4,d,s))},fc=(t,r,n)=>{let o=t.data.slice(r);fd(t,r,o.length-te(o).length,n)},fu=(t,r,n)=>{let o=t.data.slice(0,r),a=o.length-tt(o).length;fd(t,r-a,a,n)},fm=(t,r,n,o,a=!0)=>{let l=tt(t.data).length,i=a?t:r,s=a?r:t;return a?i.appendData(s.data):i.insertData(0,s.data),na(rc(s)),o&&fc(i,l,n),i},ff=(t,r)=>((t,r)=>{let n=t.container(),o=t.offset();return!lL.isTextPosition(t)&&n===r.parentNode&&o>lL.before(r).offset()})(r,t)?lL(r.container(),r.offset()-1):r,fg=t=>{var r;return oh(t.previousSibling)?et.some(nM(r=t.previousSibling)?lL(r,r.data.length):lL.after(r)):t.previousSibling?dS(t.previousSibling):et.none()},fp=t=>{var r;return oh(t.nextSibling)?et.some(nM(r=t.nextSibling)?lL(r,0):lL.before(r)):t.nextSibling?dk(t.nextSibling):et.none()},fh=(t,r,n)=>(t?fp(n).orThunk(()=>fg(n)).orThunk(()=>dx(r,lL.after(n)).orThunk(()=>d_(r,lL.before(n)))):fg(n).orThunk(()=>fp(n)).orThunk(()=>et.from(n.previousSibling?n.previousSibling:n.parentNode).bind(t=>d_(r,lL.before(t))).orThunk(()=>dx(r,lL.after(n))))).map(Y(ff,n)),fb=(t,r,n)=>{n.fold(()=>{t.focus()},n=>{t.selection.setRng(n.toRange(),r)})},fv=(t,r)=>r&&ej(t.schema.getBlockElements(),tY(r)),fy=(t,r,n,o=!0,a=!1)=>{var l;let i=fh(r,t.getBody(),n.dom),s=rV(n,Y(fv,t),(l=t.getBody(),t=>t.dom===l)),d=((t,r,n,o)=>{let a=rS(t).filter(tZ),l=rN(t).filter(tZ);return na(t),(a.isSome()&&l.isSome()&&r.isSome()?et.some(((t,r,a)=>{let l=t.dom,i=r.dom,s=l.data.length;return fm(l,i,n,o),a.container()===i?lL(l,s):a})(a.getOrDie(),l.getOrDie(),r.getOrDie())):et.none()).orThunk(()=>(o&&(a.each(t=>fu(t.dom,t.dom.length,n)),l.each(t=>fc(t.dom,0,n))),r))})(n,i,t.schema,ej(t.schema.getTextInlineElements(),tY(n)));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(t=>((t,r)=>{if(oA(t)){let n=ru('<br data-mce-bogus="1">');return r?ed(rT(t),t=>{cf(t)||na(t)}):no(t),nt(t,n),et.some(lL.before(n.dom))}return et.none()})(t,a)).fold(()=>{o&&fb(t,r,d)},n=>{o&&fb(t,r,et.some(n))})},fC=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,fE=(t,r)=>rh(rc(r),iH(t))&&!oV(t.schema,r)&&t.dom.isEditable(r),fw=t=>{var r,n;return"rtl"===aV.DOM.getStyle(t,"direction",!0)||(n=null!==(r=t.textContent)&&void 0!==r?r:"",fC.test(n))},fx=(t,r,n)=>{let o=em(aV.DOM.getParents(n.container(),"*",r),t);return et.from(o[o.length-1])},f_=(t,r)=>{let n=r.container(),o=r.offset();return t?oo(n)?nM(n.nextSibling)?lL(n.nextSibling,0):lL.after(n):oi(r)?lL(n,o+1):r:oo(n)?nM(n.previousSibling)?lL(n.previousSibling,n.previousSibling.data.length):lL.before(n):os(r)?lL(n,o-1):r},fk=Y(f_,!0),fS=Y(f_,!1),fN=(t,r)=>{let n=t=>t.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(r),t.off("beforeinput input",n)},fR=t=>fN(t,"Delete"),fA=t=>n8(t)||n6(t),fT=(t,r)=>ry(t,r)?rW(r,fA,r=>tz(rx(r),t,rv)):et.none(),fO=(t,r=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!r})},fB=(t,r,n)=>tH(dk(n),dS(n),(o,a)=>{let l=f_(!0,o),i=f_(!1,a),s=f_(!1,r);return t?dx(n,s).exists(t=>t.isEqual(i)&&r.isEqual(l)):d_(n,s).exists(t=>t.isEqual(l)&&r.isEqual(i))}).getOr(!0),fP=t=>(8===tG(t)||"#comment"===tY(t)?rS(t):rP(t)).bind(fP).orThunk(()=>et.some(t)),fD=(t,r,n,o=!0)=>{var a;r.deleteContents();let l=fP(n).getOr(n),i=rc(null!==(a=t.dom.getParent(l.dom,t.dom.isBlock))&&void 0!==a?a:n.dom);i.dom===t.getBody()?fO(t,o):oA(i)&&(ot(i),o&&t.selection.setCursorLocation(i.dom,0)),rv(n,i)||ed((tz(rx(i),n)?[]:rx(i).map(rT).map(t=>em(t,t=>!rv(i,t))).getOr([])).concat(rT(n)),t=>{rv(t,i)||ry(t,i)||!oA(t)||na(t)})},fL=(t,r)=>((t,r)=>{var n,o;let a=t.dom;return a.parentNode?(n=rc(a.parentNode),o=n=>!rv(t,n)&&r(n),eh(n.dom.childNodes,t=>o(rc(t))).map(rc)):et.none()})(t,r).isSome(),fM=(t,r)=>rK(t,r).isSome(),fF=t=>nE(t,"td,th"),fI=(t,r)=>dY(rc(t),r),fU=(t,r)=>({start:t,end:r}),fz=l3([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),fj=(t,r)=>rX(rc(t),"td,th",r),fH=t=>!rv(t.start,t.end),f$=(t,r)=>dY(t.start,r).bind(n=>dY(t.end,r).bind(t=>t$(rv(n,t),n))),fq=t=>r=>f$(r,t).map(t=>({rng:r,table:t,cells:fF(t)})),fV=(t,r,n,o)=>{if(n.collapsed||!t.forall(fH))return et.none();if(r.isSameTable){let r=t.bind(fq(o));return et.some({start:r,end:r})}{let t=fj(n.startContainer,o),r=fj(n.endContainer,o),a=t.bind(t=>dY(t,o).bind(r=>eN(fF(r)).map(r=>fU(t,r)))).bind(fq(o)),l=r.bind(t=>dY(t,o).bind(r=>eS(fF(r)).map(r=>fU(r,t)))).bind(fq(o));return et.some({start:a,end:l})}},fW=(t,r)=>eb(t,t=>rv(t,r)),fK=t=>tH(fW(t.cells,t.rng.start),fW(t.cells,t.rng.end),(r,n)=>t.cells.slice(r,n+1)),fY=(t,r)=>{let{startTable:n,endTable:o}=r,a=t.cloneRange();return n.each(t=>a.setStartAfter(t.dom)),o.each(t=>a.setEndBefore(t.dom)),a},fG=(t,r)=>{let n=r=>rv(t,r),o=tH(fj(r.startContainer,n),fj(r.endContainer,n),fU),a=((t,r)=>{var n;let o=fI(t.startContainer,r),a=fI(t.endContainer,r),l=o.isSome(),i=a.isSome(),s=tH(o,a,rv).getOr(!1);return tH((n={startTable:o,endTable:a,isStartInTable:l,isEndInTable:i,isSameTable:s,isMultiTable:!s&&l&&i}).startTable,n.endTable,(t,r)=>{let o=fM(t,t=>rv(t,r)),a=fM(r,r=>rv(r,t));return o||a?{...n,startTable:o?et.none():n.startTable,endTable:a?et.none():n.endTable,isSameTable:!1,isMultiTable:!1}:n}).getOr(n)})(r,n);return o.exists(t=>!fH(t)&&f$(t,n).exists(t=>{let r=t.dom.rows;return 1===r.length&&1===r[0].cells.length})&&dQ(t.start,r))?o.map(t=>fz.singleCellTable(r,t.start)):a.isMultiTable?fV(o,a,r,n).bind(({start:t,end:n})=>{let o=t.bind(fK).getOr([]),l=n.bind(fK).getOr([]);if(o.length>0&&l.length>0){let t=fY(r,a);return et.some(fz.multiTable(o,l,t))}return et.none()}):fV(o,a,r,n).bind(({start:t,end:r})=>t.or(r)).bind(t=>{let{isSameTable:n}=a,o=fK(t).getOr([]);if(n&&t.cells.length===o.length)return et.some(fz.fullTable(t.table));if(o.length>0){if(n)return et.some(fz.partialTable(o,et.none()));{let t=fY(r,a);return et.some(fz.partialTable(o,et.some({...a,rng:t})))}}return et.none()})},fX=t=>ed(t,t=>{t7(t,"contenteditable"),ot(t)}),fQ=(t,r,n,o)=>{let a=n.cloneRange();o?(a.setStart(n.startContainer,n.startOffset),a.setEndAfter(r.dom.lastChild)):(a.setStartBefore(r.dom.firstChild),a.setEnd(n.endContainer,n.endOffset)),f1(t,a,r,!1).each(t=>t())},fJ=t=>{let r=dK(t),n=rc(t.selection.getNode());nW(n.dom)&&oA(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),r.length>1&&ei(r,t=>rv(t,n))&&t8(n,"data-mce-selected","1")},fZ=(t,r,n)=>et.some(()=>{let o=t.selection.getRng();fX(n.bind(({rng:n,isStartInTable:a})=>{var l;let i=(l=a?n.endContainer:n.startContainer,et.from(t.dom.getParent(l,t.dom.isBlock)).map(rc));n.deleteContents(),((t,r,n)=>{n.each(n=>{r?na(n):(ot(n),t.selection.setCursorLocation(n.dom,0))})})(t,a,i.filter(oA));let s=a?r[0]:r[r.length-1];return fQ(t,s,o,a),oA(s)?et.none():et.some(a?r.slice(1):r.slice(0,-1))}).getOr(r)),fJ(t)}),f0=(t,r,n,o)=>et.some(()=>{let a=t.selection.getRng(),l=r[0],i=n[n.length-1];fQ(t,l,a,!0),fQ(t,i,a,!1);let s=oA(l)?r:r.slice(1),d=oA(i)?n:n.slice(0,-1);fX(s.concat(d)),o.deleteContents(),fJ(t)}),f1=(t,r,n,o=!0)=>et.some(()=>{fD(t,r,n,o)}),f2=(t,r)=>et.some(()=>fy(t,!1,r)),f3=(t,r)=>eh(m$(r,t),n4),f8=(t,r)=>eh(m$(r,t),t2("caption")),f5=(t,r)=>et.some(()=>{ot(r),t.selection.setCursorLocation(r.dom,0)}),f6=(t,r)=>t?mI(r):mU(r),f9=(t,r,n)=>{let o=rc(t.getBody());return f8(o,n).fold(()=>((t,r,n,o)=>{let a=lL.fromRangeStart(t.selection.getRng());return f3(n,o).bind(o=>oA(o)?f5(t,o):dC(r,t.getBody(),a).bind(t=>f3(n,rc(t.getNode())).bind(t=>rv(t,o)?et.none():et.some(H))))})(t,r,o,n).orThunk(()=>t$(((t,r)=>{let n=lL.fromRangeStart(t.selection.getRng());return f6(r,n)||dy(r,t.getBody(),n).exists(t=>f6(r,t))})(t,r),H)),n=>((t,r,n,o)=>{let a=lL.fromRangeStart(t.selection.getRng());return oA(o)?f5(t,o):dC(r,t.getBody(),a).fold(()=>et.some(H),l=>dk(o.dom).bind(t=>dS(o.dom).map(n=>r?a.isEqual(t)&&l.isEqual(n):a.isEqual(n)&&l.isEqual(t))).getOr(!0)?f5(t,o):f8(n,rc(l.getNode())).fold(()=>et.some(H),t=>t$(!rv(t,o),H)))})(t,r,o,n))},f4=(t,r)=>{let n=rc(t.selection.getStart(!0)),o=dK(t);return t.selection.isCollapsed()&&0===o.length?f9(t,r,n):((t,r,n)=>{let o=rc(t.getBody()),a=t.selection.getRng();return 0!==n.length?fZ(t,n,et.none()):f8(o,r).fold(()=>fG(o,a).bind(r=>r.fold(Y(f1,t),Y(f2,t),Y(fZ,t),Y(f0,t))),r=>f5(t,r))})(t,n,o)},f7=(t,r)=>{let n=r;for(;n&&n!==t;){if(nq(n)||nV(n))return n;n=n.parentNode}return null},ge=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],gt=tU.each,gr=t=>{let r=t.dom,n=new Set(t.serializer.getTempAttrs()),o=t=>ei(ge,r=>e6(t,r))||n.has(t);return{compare:(t,n)=>{if(t.nodeName!==n.nodeName||t.nodeType!==n.nodeType)return!1;let a=t=>{let n={};return gt(r.getAttribs(t),a=>{let l=a.nodeName.toLowerCase();"style"===l||o(l)||(n[l]=r.getAttrib(t,l))}),n},l=(t,r)=>{for(let n in t)if(ej(t,n)){let o=r[n];if(M(o)||t[n]!==o)return!1;delete r[n]}for(let t in r)if(ej(r,t))return!1;return!0};return(!(nS(t)&&nS(n))||!!l(a(t),a(n))&&!!l(r.parseStyle(r.getAttrib(t,"style")),r.parseStyle(r.getAttrib(n,"style"))))&&!dj(t)&&!dj(n)},isAttributeInternal:o}},gn=t=>["h1","h2","h3","h4","h5","h6"].includes(t.name),go=(t,r,n,o)=>{let a=n.name;for(let r=0,l=t.length;r<l;r++){let l=t[r];if(l.name===a){let t=o.nodes[a];t?t.nodes.push(n):o.nodes[a]={filter:l,nodes:[n]}}}if(n.attributes)for(let t=0,a=r.length;t<a;t++){let a=r[t],l=a.name;if(l in n.attributes.map){let t=o.attributes[l];t?t.nodes.push(n):o.attributes[l]={filter:a,nodes:[n]}}}},ga=(t,r)=>{let n=(t,n)=>{eB(t,t=>{let o=eR(t.nodes);ed(t.filter.callbacks,a=>{for(let r=o.length-1;r>=0;r--){let a=o[r];((n?void 0===a.attr(t.filter.name):a.name!==t.filter.name)||F(a.parent))&&o.splice(r,1)}o.length>0&&a(o,t.filter.name,r)})})};n(t.nodes,!1),n(t.attributes,!0)},gl=(t,r,n,o={})=>{ga(((t,r,n)=>{let o={nodes:{},attributes:{}};return n.firstChild&&((n,a)=>{let l=n;for(;l=l.walk();)go(t,r,l,o)})(n),o})(t,r,n),o)},gi=(t,r,n,o)=>{if((t.pad_empty_with_br||r.insert)&&n(o)){let t=new mn("br",1);r.insert&&t.attr("data-mce-bogus","1"),o.empty().append(t)}else o.empty().append(new mn("#text",3)).value="\xa0"},gs=(t,r)=>{let n=null==t?void 0:t.firstChild;return I(n)&&n===t.lastChild&&n.name===r},gd=(t,r,n,o)=>o.isEmpty(r,n,r=>((t,r)=>{let n=t.getElementRule(r.name);return!0===(null==n?void 0:n.paddEmpty)})(t,r)),gc=t=>{let r;for(let n=t;n;n=n.parent){let t=n.attr("contenteditable");if("false"===t)break;"true"===t&&(r=n)}return et.from(r)},gu=(t,r,n=t.parent)=>{if(r.getSpecialElements()[t.name])t.empty().remove();else{for(let o of t.children())n&&!r.isValidChild(n.name,o.name)&&gu(o,r,n);t.unwrap()}},gm=(t,r,n,o=H)=>{let a=r.getTextBlockElements(),l=r.getNonEmptyElements(),i=r.getWhitespaceElements(),s=tU.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),d=new Set,c=t=>t!==n&&!s[t.name];for(let n=0;n<t.length;n++){let s,u,m;let f=t[n];if(!f.parent||d.has(f))continue;if(a[f.name]&&"li"===f.parent.name){let t=f.next;for(;t&&a[t.name];)t.name="li",d.add(t),f.parent.insert(t,f.parent),t=t.next;f.unwrap();continue}let g=[f];for(s=f.parent;s&&!r.isValidChild(s.name,f.name)&&c(s);s=s.parent)g.push(s);if(s&&g.length>1){if(gf(r,f,s))gu(f,r);else{g.reverse(),o(u=g[0].clone());let t=u;for(let n=0;n<g.length-1;n++){r.isValidChild(t.name,g[n].name)&&n>0?(o(m=g[n].clone()),t.append(m)):m=t;for(let t=g[n].firstChild;t&&t!==g[n+1];){let r=t.next;m.append(t),t=r}t=m}gd(r,l,i,u)?s.insert(f,g[0],!0):(s.insert(u,g[0],!0),s.insert(f,u)),(gd(r,l,i,s=g[0])||gs(s,"br"))&&s.empty().remove()}}else if(f.parent){if("li"===f.name){let t=f.prev;if(t&&("ul"===t.name||"ol"===t.name)){t.append(f);continue}if((t=f.next)&&("ul"===t.name||"ol"===t.name)&&t.firstChild){t.insert(f,t.firstChild,!0);continue}let r=new mn("ul",1);o(r),f.wrap(r);continue}if(r.isValidChild(f.parent.name,"div")&&r.isValidChild("div",f.name)){let t=new mn("div",1);o(t),f.wrap(t)}else gu(f,r)}}},gf=(t,r,n=r.parent)=>!(!n||(!t.children[r.name]||t.isValidChild(n.name,r.name))&&("a"!==r.name||!((t,r)=>{let n=t;for(;n;){if("a"===n.name)return!0;n=n.parent}return!1})(n))&&("summary"!==n.name||!gn(r)||(null==n?void 0:n.firstChild)===r&&(null==n?void 0:n.lastChild)===r)),gg=t=>t.collapsed?t:(t=>{let r=lL.fromRangeStart(t),n=lL.fromRangeEnd(t),o=t.commonAncestorContainer;return dy(!1,o,n).map(a=>!s9(r,n,o)&&s9(r,a,o)?((t,r,n,o)=>{let a=document.createRange();return a.setStart(t,r),a.setEnd(n,o),a})(r.container(),r.offset(),a.container(),a.offset()):t).getOr(t)})(t),gp=(t,r)=>{let n=r.firstChild,o=r.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((t,r)=>{var n,o;let a=t.getNonEmptyElements();return I(r)&&(r.isEmpty(a)||t.getBlockElements()[r.name]&&I((n=r).firstChild)&&n.firstChild===n.lastChild&&("br"===(o=r.firstChild).name||"\xa0"===o.value))})(t,o)&&(o=null==o?void 0:o.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)},gh=t=>{var r,n;return t.length>0&&(!(r=t[t.length-1]).firstChild||I(null==r?void 0:r.firstChild)&&r.firstChild===r.lastChild&&("\xa0"===(n=r.firstChild).data||nH(n)))?t.slice(0,-1):t},gb=(t,r)=>{let n=t.getParent(r,t.isBlock);return n&&"LI"===n.nodeName?n:null},gv=(t,r)=>{let n=lL.after(t),o=dp(r).prev(n);return o?o.toRange():null},gy=(t,r,n,o)=>{var a,l;let i=((t,r,n)=>{let o=r.serialize(n);return(t=>{var r,n;let o=t.firstChild,a=t.lastChild;return o&&"META"===o.nodeName&&(null===(r=o.parentNode)||void 0===r||r.removeChild(o)),a&&"mce_marker"===a.id&&(null===(n=a.parentNode)||void 0===n||n.removeChild(a)),t})(t.createFragment(o))})(r,t,o),s=gb(r,n.startContainer),d=gh(em(null!==(l=null==(a=i.firstChild)?void 0:a.childNodes)&&void 0!==l?l:[],t=>"LI"===t.nodeName)),c=r.getRoot(),u=t=>{let o=lL.fromRangeStart(n),a=dp(r.getRoot()),l=1===t?a.prev(o):a.next(o),i=null==l?void 0:l.getNode();return!i||gb(r,i)!==s};return s?u(1)?((t,r,n)=>{let o=t.parentNode;return o&&tU.each(r,r=>{o.insertBefore(r,t)}),((t,r)=>{let n=lL.before(t),o=dp(r).next(n);return o?o.toRange():null})(t,n)})(s,d,c):u(2)?(r.insertAfter(d.reverse(),s),gv(d[0],c)):((t,r,n,o)=>{let a=((t,r)=>{let n=r.cloneRange(),o=r.cloneRange();return n.setStartBefore(t),o.setEndAfter(t),[n.cloneContents(),o.cloneContents()]})(t,o),l=t.parentNode;return l&&(l.insertBefore(a[0],t),tU.each(r,r=>{l.insertBefore(r,t)}),l.insertBefore(a[1],t),l.removeChild(t)),gv(r[r.length-1],n)})(s,d,c,n):null},gC=["pre"],gE=(t,r,n)=>{var o,a,l,i,s;let d=t.selection,c=t.dom,u=t.parser,m=n.merge,f=mw({validate:!0},t.schema),g='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(r=or(r)),-1===r.indexOf("{$caret}")&&(r+="{$caret}"),r=r.replace(/\{\$caret\}/,g);let p=d.getRng(),h=p.startContainer,b=t.getBody();h===b&&d.isCollapsed()&&c.isBlock(b.firstChild)&&I(i=b.firstChild)&&!t.schema.getVoidElements()[i.nodeName]&&c.isEmpty(b.firstChild)&&((p=c.createRng()).setStart(b.firstChild,0),p.setEnd(b.firstChild,0),d.setRng(p)),d.isCollapsed()||(t=>{let r=t.dom,n=gg(t.selection.getRng());t.selection.setRng(n);let o=r.getParent(n.startContainer,nW);I(o)&&o===r.getParent(n.endContainer,nW)&&dQ(rc(o),n)?f1(t,n,rc(o)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset==1&&nM(n.startContainer.childNodes[n.startOffset])?n.deleteContents():t.getDoc().execCommand("Delete",!1)})(t);let v=d.getNode(),y={context:v.nodeName.toLowerCase(),data:n.data,insert:!0},C=u.parse(r,y);if(!0===n.paste&&gp(t.schema,C)&&gb(c,v))return(p=gy(f,c,d.getRng(),C))&&d.setRng(p),r;!0===n.paste&&((t,r,n,o)=>{var a;let l=r.firstChild,i=r.lastChild,s=l===("bookmark"===i.attr("data-mce-type")?i.prev:i),d=el(gC,l.name);if(s&&d){let r="false"!==l.attr("contenteditable"),i=(null===(a=t.getParent(n,t.isBlock))||void 0===a?void 0:a.nodeName.toLowerCase())===l.name,s=et.from(f7(o,n)).forall(nq);return r&&i&&s}return!1})(c,C,v,t.getBody())&&(null===(o=C.firstChild)||void 0===o||o.unwrap()),(t=>{let r=t;for(;r=r.walk();)1===r.type&&r.attr("data-mce-fragment","1")})(C);let E=C.lastChild;if(E&&"mce_marker"===E.attr("id")){let r=E;for(E=E.prev;E;E=E.walk(!0))if(3===E.type||!c.isBlock(E.name)){E.parent&&t.schema.isValidChild(E.parent.name,"span")&&E.parent.insert(r,E,"br"===E.name);break}}if(t._selectionOverrides.showBlockCaretContainer(v),y.invalid||ei(C.children(),gn)&&"SUMMARY"===(null===(s=c.getParent(v,c.isBlock))||void 0===s?void 0:s.nodeName)){t.selection.setContent(g);let n,o=d.getNode(),l=t.getBody();for(nz(o)?o=n=l:n=o;n&&n!==l;)o=n,n=n.parentNode;r=o===l?l.innerHTML:c.getOuterHTML(o);let i=u.parse(r),s=(t=>{for(let r=t;r;r=r.walk())if("mce_marker"===r.attr("id"))return et.some(r);return et.none()})(i),m=s.bind(gc).getOr(i);s.each(t=>t.replace(C));let p=C.children(),h=null!==(a=C.parent)&&void 0!==a?a:i;C.unwrap(),gm(em(p,r=>gf(t.schema,r,h)),t.schema,m),gl(u.getNodeFilters(),u.getAttributeFilters(),i),r=f.serialize(i),o===l?c.setHTML(l,r):c.setOuterHTML(o,r)}else((t,r,n)=>{var o;if("all"===n.getAttribute("data-mce-bogus"))null===(o=n.parentNode)||void 0===o||o.insertBefore(t.dom.createFragment(r),n);else{let o=n.firstChild,a=n.lastChild;o&&(o!==a||"BR"!==o.nodeName)?t.selection.setContent(r,{no_events:!0}):t.dom.setHTML(n,r)}})(t,r=f.serialize(C),v);return((t,r)=>{let n=t.schema.getTextInlineElements(),o=t.dom;if(r){let r=t.getBody(),a=gr(t);tU.each(o.select("*[data-mce-fragment]"),t=>{if(I(n[t.nodeName.toLowerCase()])&&eC(mk(o,t),t=>!mx.has(t))){for(let n=t.parentElement;I(n)&&n!==r&&!mS(o,t,n);n=n.parentElement)if(a.compare(n,t)){o.remove(t,!0);break}}})}})(t,m),((t,r)=>{var n,o,a,l;let i;let s=t.dom,d=t.selection;if(!r)return;d.scrollIntoView(r);let c=f7(t.getBody(),r);if(c&&"false"===s.getContentEditable(c))return s.remove(r),void d.select(c);let u=s.createRng(),m=r.previousSibling;if(nM(m)){u.setStart(m,null!==(o=null===(n=m.nodeValue)||void 0===n?void 0:n.length)&&void 0!==o?o:0);let t=r.nextSibling;nM(t)&&(m.appendData(t.data),null===(a=t.parentNode)||void 0===a||a.removeChild(t))}else u.setStartBefore(r),u.setEndBefore(r);let f=s.getParent(r,s.isBlock);if(s.remove(r),f&&s.isEmpty(f)){let r;let n=nW(f);no(rc(f)),u.setStart(f,0),u.setEnd(f,0),n||f.getAttribute("data-mce-fragment")||(l=u,r=lL.fromRangeStart(l),!(i=null==(r=dp(t.getBody()).next(r))?void 0:r.toRange()))?s.add(f,s.create("br",n?{}:{"data-mce-bogus":"1"})):(u=i,s.remove(f))}d.setRng(u)})(t,c.get("mce_marker")),l=t.getBody(),tU.each(l.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")}),((t,r,n)=>{et.from(t.getParent(r,"td,th")).map(rc).each(t=>((t,r)=>{rP(t).each(n=>{rS(n).each(o=>{r.isBlock(tY(t))&&n3(n)&&r.isBlock(tY(o))&&na(n)})})})(t,n))})(c,d.getStart(),t.schema),((t,r,n)=>{let o=rk(rc(n),t=>rv(t,rc(r)));ek(o,o.length-2).filter(tJ).fold(()=>oz(t,r),r=>oz(t,r.dom))})(t.schema,t.getBody(),d.getStart()),r},gw=t=>t instanceof mn,gx=(t,r,n)=>{t.dom.setHTML(t.getBody(),r),!0!==n&&uG(t)&&dk(t.getBody()).each(r=>{let n=r.getNode(),o=nP(n)?dk(n).getOr(r):r;t.selection.setRng(o.toRange())})},g_=t=>U(t)?t:Z,gk=(t,r,n)=>{let o=r(t),a=g_(n);return o.orThunk(()=>a(t)?et.none():((t,r,n)=>{let o=t.dom,a=g_(n);for(;o.parentNode;){let t=rc(o=o.parentNode),n=r(t);if(n.isSome())return n;if(a(t))break}return et.none()})(t,r,a))},gS=(t,r,n)=>{let o=t.formatter.get(n);if(o)for(let n=0;n<o.length;n++){let a=o[n];if(cd(a)&&!1===a.inherit&&t.dom.is(r,a.selector))return!0}return!1},gN=(t,r,n,o,a)=>{let l=t.dom.getRoot();if(r===l)return!1;let i=t.dom.getParent(r,r=>!!gS(t,r,n)||r.parentNode===l||!!gT(t,r,n,o,!0));return!!gT(t,i,n,o,a)},gR=(t,r,n)=>!(!cc(n)||!cr(r,n.inline))||!(!cs(n)||!cr(r,n.block))||!!cd(n)&&nS(r)&&t.is(r,n.selector),gA=(t,r,n,o,a,l)=>{let i=n[o],s="attributes"===o;if(U(n.onmatch))return n.onmatch(r,n,o);if(i){if(eq(i))for(let n=0;n<i.length&&(s?!t.getAttrib(r,i[n]):!co(t,r,i[n]));n++);else for(let o in i)if(ej(i,o)){let d=s?t.getAttrib(r,o):co(t,r,o),c=ct(i[o],l),u=F(d)||tn(d);if(u&&F(c))continue;if(a&&u&&!n.exact||(!a||n.exact)&&!cr(d,cn(c,o)))return!1}}return!0},gT=(t,r,n,o,a)=>{let l=t.formatter.get(n),i=t.dom;if(l&&nS(r))for(let n=0;n<l.length;n++){let s=l[n];if(gR(t.dom,r,s)&&gA(i,r,s,"attributes",a,o)&&gA(i,r,s,"styles",a,o)){let n=s.classes;if(n){for(let a=0;a<n.length;a++)if(!t.dom.hasClass(r,ct(n[a],o)))return}return s}}},gO=(t,r,n,o,a)=>{if(o)return gN(t,o,r,n,a);if(o=t.selection.getNode(),gN(t,o,r,n,a))return!0;let l=t.selection.getStart();return!(l===o||!gN(t,l,r,n,a))},gB=t=>{if(t){let r=new nx(t,t);for(let t=r.current();t;t=r.next())if(nM(t))return t}return null},gP=t=>{let r=rm("span");return t5(r,{id:dN,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&nt(r,rf("\uFEFF")),r},gD=(t,r,n)=>{let o=t.dom,a=t.selection;if(cm(r))fy(t,!1,rc(r),n,!0);else{let t=a.getRng(),n=o.getParent(r,o.isBlock),l=t.startContainer,i=t.startOffset,s=t.endContainer,d=t.endOffset,c=(t=>{let r=gB(t);return r&&"\uFEFF"===r.data.charAt(0)&&r.deleteData(0,1),r})(r);o.remove(r,!0),l===c&&i>0&&t.setStart(c,i-1),s===c&&d>0&&t.setEnd(c,d-1),n&&o.isEmpty(n)&&ot(rc(n)),a.setRng(t)}},gL=(t,r,n)=>{let o=t.dom,a=t.selection;if(r)gD(t,r,n);else if(!(r=dA(t.getBody(),a.getStart())))for(;r=o.get(dN);)gD(t,r,n)},gM=(t,r)=>(t.appendChild(r),r),gF=(t,r)=>{var n;let o=ef(t,(t,r)=>gM(t,r.cloneNode(!1)),r),a=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return gM(o,a.createTextNode("\uFEFF"))},gI=(t,r,n,o)=>{let a;let l=t.dom,i=t.selection,s=!1,d=t.formatter.get(r);if(!d)return;let c=i.getRng(),u=c.startContainer,m=c.startOffset,f=u;nM(u)&&(m!==u.data.length&&(s=!0),f=f.parentNode);let g=[];for(;f;){if(gT(t,f,r,n,o)){a=f;break}f.nextSibling&&(s=!0),g.push(f),f=f.parentNode}if(a){if(s){let a=i.getBookmark();c.collapse(!0);let s=c_(l,c,d,!0);s=ul(s),t.formatter.remove(r,n,s,o),i.moveToBookmark(a)}else{let s=dA(t.getBody(),a),d=I(s)?l.getParents(a.parentNode,ee,s):[],c=gP(!1).dom;((t,r,n)=>{var o,a;let l=t.dom,i=l.getParent(n,Y(d9,t.schema));i&&l.isEmpty(i)?null===(o=n.parentNode)||void 0===o||o.replaceChild(r,n):((t=>{let r=nE(t,"br"),n=em((t=>{let r=[],n=t.dom;for(;n;)r.push(rc(n)),n=n.lastChild;return r})(t).slice(-1),n3);r.length===n.length&&ed(n,na)})(rc(n)),l.isEmpty(n)?null===(a=n.parentNode)||void 0===a||a.replaceChild(r,n):l.insertAfter(r,n))})(t,c,null!=s?s:a);let u=gF([...g,...((t,r,n,o,a,l)=>{let i=t.formatter,s=t.dom,d=em(eT(i.get()),t=>t!==o&&!e5(t,"removeformat"));if(em(eg(d,(r,o)=>{let a=ci(t,o,t=>{let r=t=>U(t)||t.length>1&&"%"===t.charAt(0);return ei(["styles","attributes"],n=>ez(t,n).exists(t=>ei(P(t)?t:eU(t),r)))});return t.formatter.matchNode(n,o,{},a)?r.concat([o]):r},[]),r=>!((t,r,n)=>{let o=["inline","block","selector","attributes","styles","classes"],a=t=>eF(t,(t,r)=>ei(o,t=>t===r));return ci(t,r,r=>{let o=a(r);return ci(t,n,t=>((t,r,n=x)=>w(n).eq(t,r))(o,a(t)))})})(t,r,o)).length>0){let t=n.cloneNode(!1);return s.add(r,t),i.remove(o,a,t,l),s.remove(t),et.some(t)}return et.none()})(t,c,a,r,n,o).toArray(),...d],c);s&&gD(t,s,I(s)),i.setCursorLocation(u,1),l.isEmpty(a)&&l.remove(a)}}},gU=t=>{let r=gP(!1),n=gF(t,r.dom);return{caretContainer:r,caretPosition:lL(n,0)}},gz=(t,r)=>{let{caretContainer:n,caretPosition:o}=gU(r);return r4(rc(t),n),na(rc(t)),o},gj=(t,r)=>!dR(r.dom)&&ej(t.schema.getTextInlineElements(),tY(r))&&!dR(r.dom)&&!nB(r.dom),gH={},g$=nA(["pre"]);gH.pre||(gH.pre=[]),gH.pre.push(t=>{if(!t.selection.getRng().collapsed){let r=t.selection.getSelectedBlocks();ed(em(em(r,g$),t=>{let n=t.previousSibling;return g$(n)&&el(r,n)}),t=>{((t,r)=>{let n=rc(r),o=rE(n).dom;na(n),nn(rc(t),[rm("br",o),rm("br",o),...rT(n)])})(t.previousSibling,t)})}});let gq=["fontWeight","fontStyle","color","fontSize","fontFamily"],gV=(t,r)=>{let n=t.get(r);return P(n)?eh(n,t=>{var r;return cc(t)&&"span"===t.inline&&O((r=t).styles)&&ei(eT(r.styles),t=>el(gq,t))}):et.none()},gW=(t,r)=>d_(r,lL.fromRangeStart(t)).isNone(),gK=(t,r)=>!1===dx(r,lL.fromRangeEnd(t)).exists(t=>!nH(t.getNode())||dx(r,t).isSome()),gY=t=>r=>nG(r)&&t.isEditable(r),gG=t=>em(t.getSelectedBlocks(),gY(t.dom)),gX=tU.each,gQ=t=>nS(t)&&!dj(t)&&!dR(t)&&!nB(t),gJ=(t,r)=>{for(let n=t;n&&!(nM(n)&&tr(n.data));n=n[r])if(nS(n)&&!dj(n))return n;return t},gZ=(t,r,n)=>{let o=gr(t),a=nN(r)&&t.dom.isEditable(r),l=nN(n)&&t.dom.isEditable(n);if(a&&l){let a=gJ(r,"previousSibling"),l=gJ(n,"nextSibling");if(o.compare(a,l)){for(let t=a.nextSibling;t&&t!==l;){let r=t;t=t.nextSibling,a.appendChild(r)}return t.dom.remove(l),tU.each(tU.grep(l.childNodes),t=>{a.appendChild(t)}),a}}return n},g0=(t,r,n,o)=>{var a;if(o&&!1!==r.merge_siblings){let r=null!==(a=gZ(t,d6(o),o))&&void 0!==a?a:o;gZ(t,r,d6(r,!0))}},g1=(t,r,n)=>{gX(t.childNodes,t=>{gQ(t)&&(r(t)&&n(t),t.hasChildNodes()&&g1(t,r,n))})},g2=(t,r)=>n=>!(!n||!co(t,n,r)),g3=(t,r,n)=>o=>{t.setStyle(o,r,n),""===o.getAttribute("style")&&o.removeAttribute("style"),"SPAN"===o.nodeName&&0===t.getAttribs(o).length&&t.remove(o,!0)},g8=l3([{keep:[]},{rename:["name"]},{removed:[]}]),g5=/^(src|href|style)$/,g6=tU.each,g9=(t,r,n)=>t.isChildOf(r,n)&&r!==n&&!t.isBlock(n),g4=(t,r,n)=>{let o=r[n?"startContainer":"endContainer"],a=r[n?"startOffset":"endOffset"];if(nS(o)){let t=o.childNodes.length-1;!n&&a&&a--,o=o.childNodes[a>t?t:a]}return nM(o)&&n&&a>=o.data.length&&(o=new nx(o,t.getBody()).next()||o),nM(o)&&!n&&0===a&&(o=new nx(o,t.getBody()).prev()||o),o},g7=(t,r)=>{let n=r?"firstChild":"lastChild",o=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&o?"TR"===t.nodeName&&o[n]||o:t},pe=(t,r,n,o)=>{var a;let l=t.create(n,o);return null===(a=r.parentNode)||void 0===a||a.insertBefore(l,r),l.appendChild(r),l},pt=(t,r,n,o,a)=>{let l=rc(r),i=rc(t.create(o,a));return nn(i,n?rA(l):rR(l)),n?(r4(l,i),ne(i,l)):(r7(l,i),nt(i,l)),i.dom},pr=(t,r,n)=>{let o;let a=r.parentNode,l=t.dom,i=ih(t);cs(n)&&a===l.getRoot()&&(n.list_block&&cr(r,n.list_block)||ed(eR(r.childNodes),r=>{d4(t,i,r.nodeName.toLowerCase())?o?o.appendChild(r):(o=pe(l,r,i),l.setAttribs(o,ib(t))):o=null})),cd(n)&&cc(n)&&tz(ez(n,"mixed"),!0)&&!cr(n.inline,r)||l.remove(r,!0)},pn=(t,r,n)=>z(t)?{name:r,value:null}:{name:t,value:ct(r,n)},po=(t,r)=>{""===t.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style"))},pa=(t,r,n,o,a)=>{let l=!1;g6(n.styles,(i,s)=>{let{name:d,value:c}=pn(s,i,o),u=cn(c,d);(n.remove_similar||D(c)||!nS(a)||cr(co(t,a,d),u))&&t.setStyle(r,d,""),l=!0}),l&&po(t,r)},pl=(t,r,n,o,a)=>{let l=t.dom,i=gr(t),s=t.schema;if(cc(r)&&o$(s,r.inline)&&oV(s,o)&&o.parentElement===t.getBody())return pr(t,o,r),g8.removed();if(!r.ceFalseOverride&&o&&"false"===l.getContentEditableParent(o)||o&&!gR(l,o,r)&&(!r.links||"A"!==o.nodeName))return g8.keep();let d=r.preserve_attributes;if(cc(r)&&"all"===r.remove&&P(d)){let t=em(l.getAttribs(o),t=>el(d,t.name.toLowerCase()));if(l.removeAllAttribs(o),ed(t,t=>l.setAttrib(o,t.name,t.value)),t.length>0)return g8.rename("span")}if("all"!==r.remove){pa(l,o,r,n,a),g6(r.attributes,(t,i)=>{let{name:s,value:d}=pn(i,t,n);if(r.remove_similar||D(d)||!nS(a)||cr(l.getAttrib(a,s),d)){if("class"===s){let t=l.getAttrib(o,s);if(t){let r="";if(ed(t.split(/\s+/),t=>{/mce\-\w+/.test(t)&&(r+=(r?" ":"")+t)}),r)return void l.setAttrib(o,s,r)}}if(g5.test(s)&&o.removeAttribute("data-mce-"+s),"style"===s&&nA(["li"])(o)&&"none"===l.getStyle(o,"list-style-type"))return o.removeAttribute(s),void l.setStyle(o,"list-style-type","none");"class"===s&&o.removeAttribute("className"),o.removeAttribute(s)}}),g6(r.classes,t=>{t=ct(t,n),nS(a)&&!l.hasClass(a,t)||l.removeClass(o,t)});let t=l.getAttribs(o);for(let r=0;r<t.length;r++){let n=t[r].nodeName;if(!i.isAttributeInternal(n))return g8.keep()}}return"none"!==r.remove?(pr(t,o,r),g8.removed()):g8.keep()},pi=(t,r,n,o)=>pl(t,r,n,o,o).fold(V(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),V(null)),ps=(t,r,n,o,a)=>{(o||t.selection.isEditable())&&((t,r,n,o,a)=>{let l=t.formatter.get(r),i=l[0],s=t.dom,d=t.selection,c=o=>{let s;let d=(o.parentNode&&ed(cl(t.dom,o.parentNode).reverse(),o=>{if(!s&&nS(o)&&"_start"!==o.id&&"_end"!==o.id){let l=gT(t,o,r,n,a);l&&!1!==l.split&&(s=o)}}),s);return((t,r,n,o,a,l,i,s)=>{var d,c;let u,m;let f=t.dom;if(n){let l=n.parentNode;for(let n=o.parentNode;n&&n!==l;n=n.parentNode){let o=f.clone(n,!1);for(let n=0;n<r.length&&null!==(o=pi(t,r[n],s,o));n++);o&&(u&&o.appendChild(u),m||(m=o),u=o)}i.mixed&&f.isBlock(n)||(o=null!==(d=f.split(n,o))&&void 0!==d?d:o),u&&m&&(null===(c=a.parentNode)||void 0===c||c.insertBefore(u,a),m.appendChild(a),cc(i)&&g0(t,i,0,u))}return o})(t,l,d,o,o,0,i,n)},u=r=>ei(l,o=>pd(t,o,n,r,r)),m=r=>{let n=eR(r.childNodes),o=u(r)||ei(l,t=>gR(s,r,t)),a=r.parentNode;if(!o&&I(a)&&cu(i)&&u(a),i.deep&&n.length)for(let t=0;t<n.length;t++)m(n[t]);ed(["underline","line-through","overline"],n=>{nS(r)&&t.dom.getStyle(r,"text-decoration")===n&&r.parentNode&&ca(s,r.parentNode)===n&&pd(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},void 0,r)})},f=t=>{let r=s.get(t?"_start":"_end");if(r){var n;let o=r[t?"firstChild":"lastChild"];return dj(n=o)&&nS(n)&&("_start"===n.id||"_end"===n.id)&&(o=o[t?"firstChild":"lastChild"]),nM(o)&&0===o.data.length&&(o=t?r.previousSibling||r.nextSibling:r.nextSibling||r.previousSibling),s.remove(r,!0),o}return null},g=r=>{let n,o,a=c_(s,r,l,r.collapsed);if(i.split){if((n=g4(t,a=ul(a),!0))!==(o=g4(t,a))){if(g9(s,n=g7(n,!0),o=g7(o,!1)))return c(pt(s,et.from(n.firstChild).getOr(n),!0,"span",{id:"_start","data-mce-type":"bookmark"})),void f(!0);if(g9(s,o,n))return c(pt(s,et.from(o.lastChild).getOr(o),!1,"span",{id:"_end","data-mce-type":"bookmark"})),void f(!1);n=pe(s,n,"span",{id:"_start","data-mce-type":"bookmark"}),o=pe(s,o,"span",{id:"_end","data-mce-type":"bookmark"});let t=s.createRng();t.setStartAfter(n),t.setEndBefore(o),ck(s,t,t=>{ed(t,t=>{dj(t)||dj(t.parentNode)||c(t)})}),c(n),c(o),n=f(!0),o=f()}else n=o=c(n);a.startContainer=n.parentNode?n.parentNode:n,a.startOffset=s.nodeIndex(n),a.endContainer=o.parentNode?o.parentNode:o,a.endOffset=s.nodeIndex(o)+1}ck(s,a,t=>{ed(t,m)})};if(o){if(d2(o)){let t=s.createRng();t.setStartBefore(o),t.setEndAfter(o),g(t)}else g(o);cL(t,r,o,n)}else d.isCollapsed()&&cc(i)&&!dK(t).length?gI(t,r,n,a):(d8(t,()=>d0(t,g),o=>cc(i)&&gO(t,r,n,o)),t.nodeChanged()),"removeformat"===r?ed(gG(t.selection),r=>{ed(gq,n=>t.dom.setStyle(r,n,"")),po(t.dom,r)}):gV(t.formatter,r).each(r=>{ed(gG(t.selection),o=>pa(t.dom,o,r,n,null))}),cL(t,r,o,n)})(t,r,n,o,a)},pd=(t,r,n,o,a)=>pl(t,r,n,o,a).fold(Z,r=>(t.dom.rename(o,r),!0),ee),pc=tU.each,pu=tU.each,pm=(t,r,n,o)=>{if(pu(n.styles,(n,a)=>{t.setStyle(r,a,ct(n,o))}),n.styles){let n=t.getAttrib(r,"style");n&&t.setAttrib(r,"data-mce-style",n)}},pf=(t,r,n,o)=>{let a=t.formatter.get(r),l=a[0],i=!o&&t.selection.isCollapsed(),s=t.dom,d=t.selection,c=(t,r=l)=>{U(r.onformat)&&r.onformat(t,r,n,o),pm(s,t,r,n),pu(r.attributes,(r,o)=>{s.setAttrib(t,o,ct(r,n))}),pu(r.classes,r=>{let o=ct(r,n);s.hasClass(t,o)||s.addClass(t,o)})},u=(t,r)=>{let n=!1;return pu(t,t=>!(!cd(t)||("false"!==s.getContentEditable(r)||t.ceFalseOverride)&&(!I(t.collapsed)||t.collapsed===i)&&s.is(r,t.selector)&&!dR(r)&&(c(r,t),n=!0,1))),n},m=t=>{if(T(t)){let r=s.create(t);return c(r),r}return null},f=(o,i,s)=>{let d=[],f=!0,g=l.inline||l.block,p=m(g);ck(o,i,i=>{let m;let h=i=>{let b=!1,v=f,y=!1,C=i.parentNode,E=C.nodeName.toLowerCase(),w=o.getContentEditable(i);I(w)&&(v=f,f="true"===w,b=!0,y=ce(t,i));let x=f&&!b;if(nH(i)&&!((t,r,n,o)=>{if(i1(t)&&cc(r)&&n.parentNode){let r=ag(t.schema),a=fL(rc(n),t=>dR(t.dom));return eH(r,o)&&oA(rc(n.parentNode),!1)&&!a}return!1})(t,l,i,E))return m=null,void(cs(l)&&o.remove(i));if(cs(l)&&!0===l.wrapper&&gT(t,i,r,n))m=null;else{if(((r,n,o)=>{let a=cs(l)&&!0!==l.wrapper&&d9(t.schema,r)&&d4(t,n,g);return o&&a})(i,E,x)){let t=o.rename(i,g);return c(t),d.push(t),void(m=null)}if(cd(l)){let t=u(a,i);if(!t&&I(C)&&cu(l)&&(t=u(a,C)),!cc(l)||t)return void(m=null)}I(p)&&((r,n,a,i)=>{let d=d4(t,g,r.nodeName.toLowerCase())&&d4(t,n,g),c=!s&&nM(r)&&nJ(r.data),u=dR(r),m=!cc(l)||!o.isBlock(r);return(a||i)&&d&&!c&&!u&&m})(i,E,x,y)?(m||(m=o.clone(p,!1),C.insertBefore(m,i),d.push(m)),y&&b&&(f=v),m.appendChild(i)):(m=null,ed(eR(i.childNodes),h),b&&(f=v),m=null)}};ed(i,h)}),!0===l.links&&ed(d,t=>{let r=t=>{"A"===t.nodeName&&c(t,l),ed(eR(t.childNodes),r)};r(t)}),ed(d,i=>{var s,u;let m;let f=(m=0,ed(i.childNodes,t=>{I(t)&&nM(t)&&0===t.length||dj(t)||m++}),m);!(d.length>1)&&o.isBlock(i)||0!==f?(cc(l)||cs(l)&&l.wrapper)&&(l.exact||1!==f||(i=eh((s=i).childNodes,d3).filter(t=>"false"!==o.getContentEditable(t)&&gR(o,t,l)).map(t=>{let r=o.clone(t,!1);return c(r),o.replace(r,s,!0),o.remove(t,!0),r}).getOr(s)),u=i,pc(a,r=>{cc(r)&&pc(t.dom.select(r.inline,u),o=>{gQ(o)&&pd(t,r,n,o,r.exact?o:null)}),((t,r,n)=>{if(r.clear_child_styles){let o=r.links?"*:not(a)":"*";gX(t.select(o,n),n=>{gQ(n)&&t.isEditable(n)&&gX(r.styles,(r,o)=>{t.setStyle(n,o,"")})})}})(t.dom,r,u)}),((t,r,n,o,a)=>{let l=a.parentNode;gT(t,l,n,o)&&pd(t,r,o,a)||r.merge_with_parents&&l&&t.dom.getParent(l,l=>!!gT(t,l,n,o)&&(pd(t,r,o,a),!0))})(t,l,r,n,i),((t,r,n,o)=>{if(r.styles&&r.styles.backgroundColor){let a=g2(t,"fontSize");g1(o,r=>a(r)&&t.isEditable(r),g3(t,"backgroundColor",ct(r.styles.backgroundColor,n)))}})(o,l,n,i),((t,r,n,o)=>{let a=r=>{if(nN(r)&&nS(r.parentNode)&&t.isEditable(r)){let n=ca(t,r.parentNode);t.getStyle(r,"color")&&n?t.setStyle(r,"text-decoration",n):t.getStyle(r,"text-decoration")===n&&t.setStyle(r,"text-decoration",null)}};r.styles&&(r.styles.color||r.styles.textDecoration)&&(tU.walk(o,a,"childNodes"),a(o))})(o,l,0,i),((t,r,n,o)=>{if(cc(r)&&("sub"===r.inline||"sup"===r.inline)){let n=g2(t,"fontSize");g1(o,r=>n(r)&&t.isEditable(r),g3(t,"fontSize",""));let a=em(t.select("sup"===r.inline?"sub":"sup",o),t.isEditable);t.remove(a,!0)}})(o,l,0,i),g0(t,l,0,i)):o.remove(i,!0)})},g=d2(o)?o:d.getNode();if("false"===s.getContentEditable(g)&&!ce(t,g))return u(a,o=g),void cD(t,r,o,n);if(l){if(o){if(d2(o)){if(!u(a,o)){let t=s.createRng();t.setStartBefore(o),t.setEndAfter(o),f(s,c_(s,t,a),!0)}}else f(s,o,!0)}else i&&cc(l)&&!dK(t).length?((t,r,n)=>{var o,a;let l;let i=t.selection,s=t.formatter.get(r);if(!s)return;let d=i.getRng(),c=d.startOffset,u=d.startContainer.nodeValue;l=dA(t.getBody(),i.getStart());let m=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(u&&c>0&&c<u.length&&m.test(u.charAt(c))&&m.test(u.charAt(c-1))){let o=i.getBookmark();d.collapse(!0);let a=c_(t.dom,d,s);a=ul(a),t.formatter.apply(r,n,a),i.moveToBookmark(o)}else{let s=l?gB(l):null;l&&(null==s?void 0:s.data)==="\uFEFF"||(o=t.getDoc(),a=gP(!0).dom,s=(l=o.importNode(a,!0)).firstChild,d.insertNode(l),c=1),t.formatter.apply(r,n,l),i.setCursorLocation(s,c)}})(t,r,n):(d.setRng(gg(d.getRng())),d8(t,()=>{d0(t,(t,r)=>{let n=r?t:c_(s,t,a);f(s,n,!1)})},ee),t.nodeChanged()),gV(t.formatter,r).each(r=>{var o;ed(em((t=>{let r=t.getSelectedBlocks(),n=t.getRng();if(t.isCollapsed())return[];if(1===r.length)return gW(n,r[0])&&gK(n,r[0])?r:[];{let t=eS(r).filter(t=>gW(n,t)).toArray(),o=eN(r).filter(t=>gK(n,t)).toArray(),a=r.slice(1,-1);return t.concat(a).concat(o)}})(o=t.selection),gY(o.dom)),t=>pm(s,t,r,n))});ej(gH,r)&&ed(gH[r],r=>{r(t)})}cD(t,r,o,n)},pg=(t,r,n,o)=>{(o||t.selection.isEditable())&&pf(t,r,n,o)},pp=t=>ej(t,"vars"),ph=t=>t.selection.getStart(),pb=(t,r,n,o,a)=>ep(r,r=>!M(t.formatter.matchNode(r,n,null!=a?a:{},o)),r=>!!gS(t,r,n)||!o&&I(t.formatter.matchNode(r,n,a,!0))),pv=(t,r)=>{let n=null!=r?r:ph(t);return em(cl(t.dom,n),t=>nS(t)&&!nB(t))},py=(t,r,n)=>{let o=pv(t,r);eB(n,(n,a)=>{let l=n=>{let l=pb(t,o,a,n.similar,pp(n)?n.vars:void 0),i=l.isSome();if(n.state.get()!==i){n.state.set(i);let t=l.getOr(r);pp(n)?n.callback(i,{node:t,format:a,parents:o}):ed(n.callbacks,r=>r(i,{node:t,format:a,parents:o}))}};ed([n.withSimilar,n.withoutSimilar],l),ed(n.withVars,l)})},pC=tU.explode,pE=()=>{let t={};return{addFilter:(r,n)=>{ed(pC(r),r=>{ej(t,r)||(t[r]={name:r,callbacks:[]}),t[r].callbacks.push(n)})},getFilters:()=>eU(t),removeFilter:(r,n)=>{ed(pC(r),r=>{if(ej(t,r)){if(I(n)){let o=t[r],a=em(o.callbacks,t=>t!==n);a.length>0?o.callbacks=a:delete t[r]}else delete t[r]}})}}},pw=(t,r,n)=>{var o;let a=aS();r.convert_fonts_to_spans&&((t,r,n)=>{t.addNodeFilter("font",t=>{ed(t,t=>{let o=r.parse(t.attr("style")),a=t.attr("color"),l=t.attr("face"),i=t.attr("size");a&&(o.color=a),l&&(o["font-family"]=l),i&&to(i).each(t=>{o["font-size"]=n[t-1]}),t.name="span",t.attr("style",r.serialize(o)),ed(["color","face","size"],r=>{t.attr(r,null)})})})})(t,a,tU.explode(null!==(o=r.font_size_legacy_values)&&void 0!==o?o:"")),((t,r,n)=>{t.addNodeFilter("strike",t=>{let o="html4"!==r.type;ed(t,t=>{if(o)t.name="s";else{let r=n.parse(t.attr("style"));r["text-decoration"]="line-through",t.name="span",t.attr("style",n.serialize(r))}})})})(t,n,a)},px=(t,r,n)=>{r.addNodeFilter("br",(r,o,a)=>{let l=tU.extend({},n.getBlockElements()),i=n.getNonEmptyElements(),s=n.getWhitespaceElements();l.body=1;let d=t=>t.name in l||oK(n,t);for(let o=0,c=r.length;o<c;o++){let c=r[o],u=c.parent;if(u&&d(u)&&c===u.lastChild){let r=c.prev;for(;r;){let t=r.name;if("span"!==t||"bookmark"!==r.attr("data-mce-type")){"br"===t&&(c=null);break}r=r.prev}if(c&&(c.remove(),gd(n,i,s,u))){let r=n.getElementRule(u.name);r&&(r.removeEmpty?u.remove():r.paddEmpty&&gi(t,a,d,u))}}else{let t=c;for(;u&&u.firstChild===t&&u.lastChild===t&&(t=u,!l[u.name]);)u=u.parent;if(t===u){let t=new mn("#text",3);t.value="\xa0",c.replace(t)}}}})},p_=t=>{let[r,...n]=t.split(","),o=n.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(r);if(a){let t=";base64"===a[2],r=t?(t=>{let r=/([a-z0-9+\/=\s]+)/i.exec(t);return r?r[1]:""})(o):decodeURIComponent(o);return et.some({type:a[1],data:r,base64Encoded:t})}return et.none()},pk=(t,r,n=!0)=>{let o=r;if(n)try{o=atob(r)}catch(t){return et.none()}let a=new Uint8Array(o.length);for(let t=0;t<a.length;t++)a[t]=o.charCodeAt(t);return et.some(new Blob([a],{type:t}))},pS=t=>new Promise((r,n)=>{let o=new FileReader;o.onloadend=()=>{r(o.result)},o.onerror=()=>{var t;n(null===(t=o.error)||void 0===t?void 0:t.message)},o.readAsDataURL(t)}),pN=0,pR=(t,r,n)=>p_(t).bind(({data:t,type:o,base64Encoded:a})=>r&&!a?et.none():n(a?t:btoa(t),o)),pA=(t,r,n)=>{let o=t.create("blobid"+pN++,r,n);return t.add(o),o},pT=(t,r,n=!1)=>pR(r,n,(r,n)=>et.from(t.getByData(r,n)).orThunk(()=>pk(n,r).map(n=>pA(t,n,r)))),pO=(t,r)=>e6(t,`${r}/`),pB=(t,r)=>{let n=t.schema;r.remove_trailing_brs&&px(r,t,n),t.addAttributeFilter("href",t=>{let n=t.length,o=t=>{let r=t?tU.trim(t):"";return/\b(noopener)\b/g.test(r)?r:r.split(" ").filter(t=>t.length>0).concat(["noopener"]).sort().join(" ")};if(!r.allow_unsafe_link_target)for(;n--;){let r=t[n];"a"===r.name&&"_blank"===r.attr("target")&&r.attr("rel",o(r.attr("rel")))}}),r.allow_html_in_named_anchor||t.addAttributeFilter("id,name",t=>{let r,n,o,a,l=t.length;for(;l--;)if("a"===(a=t[l]).name&&a.firstChild&&!a.attr("href"))for(o=a.parent,r=a.lastChild;r&&o;)n=r.prev,o.insert(r,a),r=n}),r.fix_list_elements&&t.addNodeFilter("ul,ol",t=>{let r,n,o=t.length;for(;o--;)if((n=(r=t[o]).parent)&&("ul"===n.name||"ol"===n.name)){if(r.prev&&"li"===r.prev.name)r.prev.append(r);else{let t=new mn("li",1);t.attr("style","list-style-type: none"),r.wrap(t)}}});let o=n.getValidClasses();r.validate&&o&&t.addAttributeFilter("class",t=>{var r;let n=t.length;for(;n--;){let a=t[n],l=null!==(r=a.attr("class"))&&void 0!==r?r:"",i=tU.explode(l," "),s="";for(let t=0;t<i.length;t++){let r=i[t],n=!1,l=o["*"];l&&l[r]&&(n=!0),l=o[a.name],!n&&l&&l[r]&&(n=!0),n&&(s&&(s+=" "),s+=r)}s.length||(s=null),a.attr("class",s)}}),((t,r)=>{let{blob_cache:n}=r;if(n){let r=t=>{let r=t.attr("src");t.attr("src")===tL.transparentSrc||I(t.attr("data-mce-placeholder"))||I(t.attr("data-mce-bogus"))||F(r)||pT(n,r,!0).each(r=>{t.attr("src",r.blobUri())})};t.addAttributeFilter("src",t=>ed(t,r))}})(t,r),r.convert_unsafe_embeds&&t.addNodeFilter("object,embed",t=>ed(t,t=>{t.replace(((t,r,n,o,a)=>{let l;let i=new mn(l=M(t)?"iframe":pO(t,"image")?"img":pO(t,"video")?"video":pO(t,"audio")?"audio":"iframe",1);return i.attr("audio"===l?{src:r}:{src:r,width:n,height:o}),"audio"!==l&&"video"!==l||i.attr("controls",""),"iframe"===l&&a&&i.attr("sandbox",""),i})(t.attr("type"),"object"===t.name?t.attr("data"):t.attr("src"),t.attr("width"),t.attr("height"),r.sandbox_iframes))})),r.sandbox_iframes&&t.addNodeFilter("iframe",t=>ed(t,t=>t.attr("sandbox","")))},{entries:pP,setPrototypeOf:pD,isFrozen:pL,getPrototypeOf:pM,getOwnPropertyDescriptor:pF}=Object,{freeze:pI,seal:pU,create:pz}=Object,{apply:pj,construct:pH}="undefined"!=typeof Reflect&&Reflect;pj||(pj=function(t,r,n){return t.apply(r,n)}),pI||(pI=function(t){return t}),pU||(pU=function(t){return t}),pH||(pH=function(t,r){return new t(...r)});let p$=p0(Array.prototype.forEach),pq=p0(Array.prototype.pop),pV=p0(Array.prototype.push),pW=p0(String.prototype.toLowerCase),pK=p0(String.prototype.toString),pY=p0(String.prototype.match),pG=p0(String.prototype.replace),pX=p0(String.prototype.indexOf),pQ=p0(String.prototype.trim),pJ=p0(RegExp.prototype.test),pZ=(f=TypeError,function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return pH(f,r)});function p0(t){return function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return pj(t,r,o)}}function p1(t,r,n){var o;n=null!==(o=n)&&void 0!==o?o:pW,pD&&pD(t,null);let a=r.length;for(;a--;){let o=r[a];if("string"==typeof o){let t=n(o);t!==o&&(pL(r)||(r[a]=t),o=t)}t[o]=!0}return t}function p2(t){let r=pz(null);for(let[n,o]of pP(t))r[n]=o;return r}function p3(t,r){for(;null!==t;){let n=pF(t,r);if(n){if(n.get)return p0(n.get);if("function"==typeof n.value)return p0(n.value)}t=pM(t)}return function(t){return console.warn("fallback value for",t),null}}let p8=pI(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),p5=pI(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),p6=pI(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),p9=pI(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),p4=pI(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),p7=pI(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),he=pI(["#text"]),ht=pI(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),hr=pI(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),hn=pI(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ho=pI(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ha=pU(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hl=pU(/<%[\w\W]*|[\w\W]*%>/gm),hi=pU(/\${[\w\W]*}/gm),hs=pU(/^data-[\-\w.\u00B7-\uFFFF]/),hd=pU(/^aria-[\-\w]+$/),hc=pU(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),hu=pU(/^(?:\w+script|data):/i),hm=pU(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hf=pU(/^html$/i);var hg=Object.freeze({__proto__:null,MUSTACHE_EXPR:ha,ERB_EXPR:hl,TMPLIT_EXPR:hi,DATA_ATTR:hs,ARIA_ATTR:hd,IS_ALLOWED_URI:hc,IS_SCRIPT_OR_DATA:hu,ATTR_WHITESPACE:hm,DOCTYPE_NAME:hf});let hp=()=>"undefined"==typeof window?null:window;var hh=function t(){let r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hp(),o=r=>t(r);if(o.version="3.0.5",o.removed=[],!n||!n.document||9!==n.document.nodeType)return o.isSupported=!1,o;let a=n.document,l=a.currentScript,{document:i}=n,{DocumentFragment:s,HTMLTemplateElement:d,Node:c,Element:u,NodeFilter:m,NamedNodeMap:f=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:g,DOMParser:p,trustedTypes:h}=n,b=u.prototype,v=p3(b,"cloneNode"),y=p3(b,"nextSibling"),C=p3(b,"childNodes"),E=p3(b,"parentNode");if("function"==typeof d){let t=i.createElement("template");t.content&&t.content.ownerDocument&&(i=t.content.ownerDocument)}let w,x="",{implementation:_,createNodeIterator:k,createDocumentFragment:S,getElementsByTagName:N}=i,{importNode:R}=a,A={};o.isSupported="function"==typeof pP&&"function"==typeof E&&_&&void 0!==_.createHTMLDocument;let{MUSTACHE_EXPR:T,ERB_EXPR:O,TMPLIT_EXPR:B,DATA_ATTR:P,ARIA_ATTR:D,IS_SCRIPT_OR_DATA:L,ATTR_WHITESPACE:M}=hg,{IS_ALLOWED_URI:F}=hg,I=null,U=p1({},[...p8,...p5,...p6,...p4,...he]),z=null,j=p1({},[...ht,...hr,...hn,...ho]),H=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$=null,q=null,V=!0,W=!0,K=!1,Y=!0,G=!1,X=!1,Q=!1,J=!1,Z=!1,ee=!1,et=!1,er=!0,en=!1,eo=!0,ea=!1,el={},ei=null,es=p1({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ed=null,ec=p1({},["audio","video","img","source","image","track"]),eu=null,em=p1({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ef="http://www.w3.org/1998/Math/MathML",eg="http://www.w3.org/2000/svg",ep="http://www.w3.org/1999/xhtml",eh=ep,eb=!1,ev=null,ey=p1({},[ef,eg,ep],pK),eC=["application/xhtml+xml","text/html"],eE,ew=null,ex=i.createElement("form"),e_=function(t){return t instanceof RegExp||t instanceof Function},ek=function(t){if(!ew||ew!==t){if(t&&"object"==typeof t||(t={}),t=p2(t),eE="application/xhtml+xml"===(r=r=-1===eC.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE)?pK:pW,I="ALLOWED_TAGS"in t?p1({},t.ALLOWED_TAGS,eE):U,z="ALLOWED_ATTR"in t?p1({},t.ALLOWED_ATTR,eE):j,ev="ALLOWED_NAMESPACES"in t?p1({},t.ALLOWED_NAMESPACES,pK):ey,eu="ADD_URI_SAFE_ATTR"in t?p1(p2(em),t.ADD_URI_SAFE_ATTR,eE):em,ed="ADD_DATA_URI_TAGS"in t?p1(p2(ec),t.ADD_DATA_URI_TAGS,eE):ec,ei="FORBID_CONTENTS"in t?p1({},t.FORBID_CONTENTS,eE):es,$="FORBID_TAGS"in t?p1({},t.FORBID_TAGS,eE):{},q="FORBID_ATTR"in t?p1({},t.FORBID_ATTR,eE):{},el="USE_PROFILES"in t&&t.USE_PROFILES,V=!1!==t.ALLOW_ARIA_ATTR,W=!1!==t.ALLOW_DATA_ATTR,K=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,G=t.SAFE_FOR_TEMPLATES||!1,X=t.WHOLE_DOCUMENT||!1,Z=t.RETURN_DOM||!1,ee=t.RETURN_DOM_FRAGMENT||!1,et=t.RETURN_TRUSTED_TYPE||!1,J=t.FORCE_BODY||!1,er=!1!==t.SANITIZE_DOM,en=t.SANITIZE_NAMED_PROPS||!1,eo=!1!==t.KEEP_CONTENT,ea=t.IN_PLACE||!1,F=t.ALLOWED_URI_REGEXP||hc,eh=t.NAMESPACE||ep,H=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&e_(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&e_(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(H.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),G&&(W=!1),ee&&(Z=!0),el&&(I=p1({},[...he]),z=[],!0===el.html&&(p1(I,p8),p1(z,ht)),!0===el.svg&&(p1(I,p5),p1(z,hr),p1(z,ho)),!0===el.svgFilters&&(p1(I,p6),p1(z,hr),p1(z,ho)),!0===el.mathMl&&(p1(I,p4),p1(z,hn),p1(z,ho))),t.ADD_TAGS&&(I===U&&(I=p2(I)),p1(I,t.ADD_TAGS,eE)),t.ADD_ATTR&&(z===j&&(z=p2(z)),p1(z,t.ADD_ATTR,eE)),t.ADD_URI_SAFE_ATTR&&p1(eu,t.ADD_URI_SAFE_ATTR,eE),t.FORBID_CONTENTS&&(ei===es&&(ei=p2(ei)),p1(ei,t.FORBID_CONTENTS,eE)),eo&&(I["#text"]=!0),X&&p1(I,["html","head","body"]),I.table&&(p1(I,["tbody"]),delete $.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw pZ('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw pZ('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=(w=t.TRUSTED_TYPES_POLICY).createHTML("")}else void 0===w&&(w=function(t,r){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null,o="data-tt-policy-suffix";r&&r.hasAttribute(o)&&(n=r.getAttribute(o));let a="dompurify"+(n?"#"+n:"");try{return t.createPolicy(a,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+a+" could not be created."),null}}(h,l)),null!==w&&"string"==typeof x&&(x=w.createHTML(""));pI&&pI(t),ew=t}},eS=p1({},["mi","mo","mn","ms","mtext"]),eN=p1({},["foreignobject","desc","title","annotation-xml"]),eR=p1({},["title","style","font","a","script"]),eA=p1({},p5);p1(eA,p6),p1(eA,p9);let eT=p1({},p4);p1(eT,p7);let eO=function(t){pV(o.removed,{element:t});try{t.parentNode.removeChild(t)}catch(r){t.remove()}},eB=function(t,r){try{pV(o.removed,{attribute:r.getAttributeNode(t),from:r})}catch(t){pV(o.removed,{attribute:null,from:r})}if(r.removeAttribute(t),"is"===t&&!z[t]){if(Z||ee)try{eO(r)}catch(t){}else try{r.setAttribute(t,"")}catch(t){}}},eP=function(t){let n,o;if(J)t="<remove></remove>"+t;else{let r=pY(t,/^[\r\n\t ]+/);o=r&&r[0]}"application/xhtml+xml"===r&&eh===ep&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");let a=w?w.createHTML(t):t;if(eh===ep)try{n=(new p).parseFromString(a,r)}catch(t){}if(!n||!n.documentElement){n=_.createDocument(eh,"template",null);try{n.documentElement.innerHTML=eb?x:a}catch(t){}}let l=n.body||n.documentElement;return t&&o&&l.insertBefore(i.createTextNode(o),l.childNodes[0]||null),eh===ep?N.call(n,X?"html":"body")[0]:X?n.documentElement:l},eD=function(t){return k.call(t.ownerDocument||t,t,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT,null,!1)},eL=function(t){return"object"==typeof c?t instanceof c:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},eM=function(t,r,n){A[t]&&p$(A[t],t=>{t.call(o,r,n,ew)})},eF=function(t){let n;if(eM("beforeSanitizeElements",t,null),t instanceof g&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof f)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes))return eO(t),!0;let a=eE(t.nodeName);if(eM("uponSanitizeElement",t,{tagName:a,allowedTags:I}),t.hasChildNodes()&&!eL(t.firstElementChild)&&(!eL(t.content)||!eL(t.content.firstElementChild))&&pJ(/<[/\w]/g,t.innerHTML)&&pJ(/<[/\w]/g,t.textContent))return eO(t),!0;if(!I[a]||$[a]){if(!$[a]&&eU(a)&&(H.tagNameCheck instanceof RegExp&&pJ(H.tagNameCheck,a)||H.tagNameCheck instanceof Function&&H.tagNameCheck(a)))return!1;if(eo&&!ei[a]){let r=E(t)||t.parentNode,n=C(t)||t.childNodes;if(n&&r)for(let o=n.length-1;o>=0;--o)r.insertBefore(v(n[o],!0),y(t))}return eO(t),!0}return t instanceof u&&!function(t){let n=E(t);n&&n.tagName||(n={namespaceURI:eh,tagName:"template"});let o=pW(t.tagName),a=pW(n.tagName);return!!ev[t.namespaceURI]&&(t.namespaceURI===eg?n.namespaceURI===ep?"svg"===o:n.namespaceURI===ef?"svg"===o&&("annotation-xml"===a||eS[a]):!!eA[o]:t.namespaceURI===ef?n.namespaceURI===ep?"math"===o:n.namespaceURI===eg?"math"===o&&eN[a]:!!eT[o]:t.namespaceURI===ep?!(n.namespaceURI===eg&&!eN[a])&&!(n.namespaceURI===ef&&!eS[a])&&!eT[o]&&(eR[o]||!eA[o]):!("application/xhtml+xml"!==r||!ev[t.namespaceURI]))}(t)?(eO(t),!0):("noscript"===a||"noembed"===a||"noframes"===a)&&pJ(/<\/no(script|embed|frames)/i,t.innerHTML)?(eO(t),!0):(G&&3===t.nodeType&&(n=pG(n=t.textContent,T," "),n=pG(n,O," "),n=pG(n,B," "),t.textContent!==n&&(pV(o.removed,{element:t.cloneNode()}),t.textContent=n)),eM("afterSanitizeElements",t,null),!1)},eI=function(t,r,n){if(er&&("id"===r||"name"===r)&&(n in i||n in ex))return!1;if(W&&!q[r]&&pJ(P,r));else if(V&&pJ(D,r));else if(!z[r]||q[r]){if(!(eU(t)&&(H.tagNameCheck instanceof RegExp&&pJ(H.tagNameCheck,t)||H.tagNameCheck instanceof Function&&H.tagNameCheck(t))&&(H.attributeNameCheck instanceof RegExp&&pJ(H.attributeNameCheck,r)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(r))||"is"===r&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&pJ(H.tagNameCheck,n)||H.tagNameCheck instanceof Function&&H.tagNameCheck(n))))return!1}else if(eu[r]);else if(pJ(F,pG(n,M,"")));else if("src"!==r&&"xlink:href"!==r&&"href"!==r||"script"===t||0!==pX(n,"data:")||!ed[t]){if(K&&!pJ(L,pG(n,M,"")));else if(n)return!1}return!0},eU=function(t){return t.indexOf("-")>0},ez=function(t){let r,n,o,a;eM("beforeSanitizeAttributes",t,null);let{attributes:l}=t;if(!l)return;let i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z};for(a=l.length;a--;){let{name:s,namespaceURI:d}=r=l[a],c=n="value"===s?r.value:pQ(r.value);if(o=eE(s),i.attrName=o,i.attrValue=n,i.keepAttr=!0,i.forceKeepAttr=void 0,eM("uponSanitizeAttribute",t,i),n=i.attrValue,i.forceKeepAttr)continue;if(!i.keepAttr||!Y&&pJ(/\/>/i,n)){eB(s,t);continue}G&&(n=pG(n,T," "),n=pG(n,O," "),n=pG(n,B," "));let u=eE(t.nodeName);if(eI(u,o,n)){if(en&&("id"===o||"name"===o)&&(eB(s,t),n="user-content-"+n),w&&"object"==typeof h&&"function"==typeof h.getAttributeType){if(d);else switch(h.getAttributeType(u,o)){case"TrustedHTML":n=w.createHTML(n);break;case"TrustedScriptURL":n=w.createScriptURL(n)}}if(n!==c)try{d?t.setAttributeNS(d,s,n):t.setAttribute(s,n)}catch(r){eB(s,t)}}else eB(s,t)}eM("afterSanitizeAttributes",t,null)},ej=function t(r){let n;let o=eD(r);for(eM("beforeSanitizeShadowDOM",r,null);n=o.nextNode();)eM("uponSanitizeShadowNode",n,null),eF(n)||(n.content instanceof s&&t(n.content),ez(n));eM("afterSanitizeShadowDOM",r,null)};return o.sanitize=function(t){let r,n,l,i,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((eb=!t)&&(t="<!-->"),"string"!=typeof t&&!eL(t)){if("function"!=typeof t.toString)throw pZ("toString is not a function");if("string"!=typeof(t=t.toString()))throw pZ("dirty is not a string, aborting")}if(!o.isSupported)return t;if(Q||ek(d),o.removed=[],"string"==typeof t&&(ea=!1),ea){if(t.nodeName){let r=eE(t.nodeName);if(!I[r]||$[r])throw pZ("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof c)1===(n=(r=eP("<!---->")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===n.nodeName||"HTML"===n.nodeName?r=n:r.appendChild(n);else{if(!Z&&!G&&!X&&-1===t.indexOf("<"))return w&&et?w.createHTML(t):t;if(!(r=eP(t)))return Z?null:et?x:""}r&&J&&eO(r.firstChild);let u=eD(ea?t:r);for(;l=u.nextNode();)eF(l)||(l.content instanceof s&&ej(l.content),ez(l));if(ea)return t;if(Z){if(ee)for(i=S.call(r.ownerDocument);r.firstChild;)i.appendChild(r.firstChild);else i=r;return(z.shadowroot||z.shadowrootmode)&&(i=R.call(a,i,!0)),i}let m=X?r.outerHTML:r.innerHTML;return X&&I["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&pJ(hf,r.ownerDocument.doctype.name)&&(m="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+m),G&&(m=pG(m,T," "),m=pG(m,O," "),m=pG(m,B," ")),w&&et?w.createHTML(m):m},o.setConfig=function(t){ek(t),Q=!0},o.clearConfig=function(){ew=null,Q=!1},o.isValidAttribute=function(t,r,n){return ew||ek({}),eI(eE(t),eE(r),n)},o.addHook=function(t,r){"function"==typeof r&&(A[t]=A[t]||[],pV(A[t],r))},o.removeHook=function(t){if(A[t])return pq(A[t])},o.removeHooks=function(t){A[t]&&(A[t]=[])},o.removeAllHooks=function(){A={}},o}();let hb=tU.each,hv=tU.trim,hy=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],hC={ftp:21,http:80,https:443,mailto:25},hE=["img","video"],hw=(t,r,n)=>{var o;let a=(t=>{try{return decodeURIComponent(t)}catch(r){return unescape(t)}})(r).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(a)||!t.allow_html_data_urls&&(/^data:image\//i.test(a)?(I(o=t.allow_svg_data_urls)?!o:!I(n)||!el(hE,n))&&/^data:image\/svg\+xml/i.test(a):/^data:/i.test(a)))};class hx{static parseDataUri(t){let r;let n=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(n[0]);return o&&(r=o[1]),{type:r,data:n[1]}}static isDomSafe(t,r,n={}){return!!n.allow_script_urls||!hw(n,aa.decode(t).replace(/[\s\u0000-\u001F]+/g,""),r)}static getDocumentBaseUrl(t){var r;let n;return n=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?null!==(r=t.href)&&void 0!==r?r:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}constructor(t,r={}){this.path="",this.directory="",t=hv(t),this.settings=r;let n=r.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(o.source=t);let a=0===t.indexOf("//");if(0!==t.indexOf("/")||a||(t=(n&&n.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){let r=n?n.path:new hx(document.location.href).directory;if(""===(null==n?void 0:n.protocol))t="//mce_host"+o.toAbsPath(r,t);else{let a=/([^#?]*)([#?]?.*)/.exec(t);a&&(t=(n&&n.protocol||"http")+"://mce_host"+o.toAbsPath(r,a[1])+a[2])}}t=t.replace(/@@/g,"(mce_at)");let l=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);l&&hb(hy,(t,r)=>{let n=l[r];n&&(n=n.replace(/\(mce_at\)/g,"@@")),o[t]=n}),n&&(o.protocol||(o.protocol=n.protocol),o.userInfo||(o.userInfo=n.userInfo),o.port||"mce_host"!==o.host||(o.port=n.port),o.host&&"mce_host"!==o.host||(o.host=n.host),o.source=""),a&&(o.protocol="")}setPath(t){let r=/^(.*?)\/?(\w+)?$/.exec(t);r&&(this.path=r[0],this.directory=r[1],this.file=r[2]),this.source="",this.getURI()}toRelative(t){if("./"===t)return t;let r=new hx(t,{base_uri:this});if("mce_host"!==r.host&&this.host!==r.host&&r.host||this.port!==r.port||this.protocol!==r.protocol&&""!==r.protocol)return r.getURI();let n=this.getURI(),o=r.getURI();if(n===o||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===o)return n;let a=this.toRelPath(this.path,r.path);return r.query&&(a+="?"+r.query),r.anchor&&(a+="#"+r.anchor),a}toAbsolute(t,r){let n=new hx(t,{base_uri:this});return n.getURI(r&&this.isSameOrigin(n))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;let r=this.protocol?hC[this.protocol]:null;if(r&&(this.port||r)==(t.port||r))return!0}return!1}toRelPath(t,r){let n,o,a=0,l="",i=t.substring(0,t.lastIndexOf("/")).split("/"),s=r.split("/");if(i.length>=s.length){for(n=0,o=i.length;n<o;n++)if(n>=s.length||i[n]!==s[n]){a=n+1;break}}if(i.length<s.length){for(n=0,o=s.length;n<o;n++)if(n>=i.length||i[n]!==s[n]){a=n+1;break}}if(1===a)return r;for(n=0,o=i.length-(a-1);n<o;n++)l+="../";for(n=a-1,o=s.length;n<o;n++)l+=n!==a-1?"/"+s[n]:s[n];return l}toAbsPath(t,r){let n,o=0,a=/\/$/.test(r)?"/":"",l=t.split("/"),i=r.split("/"),s=[];hb(l,t=>{t&&s.push(t)});let d=[];for(let t=i.length-1;t>=0;t--)0!==i[t].length&&"."!==i[t]&&(".."!==i[t]?o>0?o--:d.push(i[t]):o++);let c=s.length-o;return 0!==(n=c<=0?eE(d).join("/"):s.slice(0,c).join("/")+"/"+eE(d).join("/")).indexOf("/")&&(n="/"+n),a&&n.lastIndexOf("/")!==n.length-1&&(n+=a),n}getURI(t=!1){let r;return this.source&&!t||(r="",t||(this.protocol?r+=this.protocol+"://":r+="//",this.userInfo&&(r+=this.userInfo+"@"),this.host&&(r+=this.host),this.port&&(r+=":"+this.port)),this.path&&(r+=this.path),this.query&&(r+="?"+this.query),this.anchor&&(r+="#"+this.anchor),this.source=r),this.source}}let h_=tU.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),hk="data-mce-type",hS=0,hN=(t,r,n,o,a)=>{var l,i,s,d;let c=r.validate,u=n.getSpecialElements();8===t.nodeType&&!r.allow_conditional_comments&&/^\[if/i.test(null!==(l=t.nodeValue)&&void 0!==l?l:"")&&(t.nodeValue=" "+t.nodeValue);let m=null!==(i=null==a?void 0:a.tagName)&&void 0!==i?i:t.nodeName.toLowerCase();if("html"!==o&&n.isValid(o))return void(I(a)&&(a.allowedTags[m]=!0));if(1!==t.nodeType||"body"===m)return;let f=rc(t),g=t4(f,hk),p=t6(f,"data-mce-bogus");if(!g&&T(p))return void("all"===p?na(f):nl(f));let h=n.getElementRule(m);if(!c||h){if(I(a)&&(a.allowedTags[m]=!0),c&&h&&!g){if(ed(null!==(s=h.attributesForced)&&void 0!==s?s:[],t=>{t8(f,t.name,"{$uid}"===t.value?"mce_"+hS++:t.value)}),ed(null!==(d=h.attributesDefault)&&void 0!==d?d:[],t=>{t4(f,t.name)||t8(f,t.name,"{$uid}"===t.value?"mce_"+hS++:t.value)}),h.attributesRequired&&!ei(h.attributesRequired,t=>t4(f,t))||h.removeEmptyAttrs&&(t=>{let r=t.dom.attributes;return null==r||0===r.length})(f))return void nl(f);h.outputName&&h.outputName!==m&&((t,r)=>{let n=((t,r)=>{let n=rm(r);return t5(n,re(t)),n})(t,r);r7(t,n),nn(n,rT(t)),na(t)})(f,h.outputName)}}else ej(u,m)?na(f):nl(f)},hR=(t,r,n,o,a,l)=>"html"!==n&&!oT(o)||!(a in h_&&hw(t,l,o))&&(!t.validate||r.isValid(o,a)||e6(a,"data-")||e6(a,"aria-")),hA=(t,r)=>t.hasAttribute(hk)&&("id"===r||"class"===r||"style"===r),hT=(t,r)=>t in r.getBoolAttrs(),hO=(t,r,n,o)=>{let{attributes:a}=t;for(let l=a.length-1;l>=0;l--){let i=a[l],s=i.name,d=i.value;hR(r,n,o,t.tagName.toLowerCase(),s,d)||hA(t,s)?hT(s,n)&&t.setAttribute(s,s):t.removeAttribute(s)}},hB=(t,r,n)=>{let o=hh();return o.addHook("uponSanitizeElement",(o,a)=>{hN(o,t,r,n.track(o),a)}),o.addHook("uponSanitizeAttribute",(o,a)=>{((t,r,n,o,a)=>{let l=t.tagName.toLowerCase(),{attrName:i,attrValue:s}=a;a.keepAttr=hR(r,n,o,l,i,s),a.keepAttr?(a.allowedAttributes[i]=!0,hT(i,n)&&(a.attrValue=i),r.allow_svg_data_urls&&e6(s,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):hA(t,i)&&(a.forceKeepAttr=!0)})(o,t,r,n.current(),a)}),o},hP=t=>{let r=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(t=>`xlink:${t}`);return hh().sanitize(t,{IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:r}),t.innerHTML},hD=tU.makeMap,hL=tU.extend,hM=(t,r,n,o)=>{let a=t.name,l=a in n&&"title"!==a&&"textarea"!==a,i=r.childNodes;for(let r=0,a=i.length;r<a;r++){let a=i[r],s=new mn(a.nodeName.toLowerCase(),a.nodeType);if(nS(a)){let t=a.attributes;for(let r=0,n=t.length;r<n;r++){let n=t[r];s.attr(n.name,n.value)}oT(s.name)&&(o(a),s.value=a.innerHTML)}else nM(a)?(s.value=a.data,l&&(s.raw=!0)):(nU(a)||nF(a)||nI(a))&&(s.value=a.data);oT(s.name)||hM(s,a,n,o),t.append(s)}},hF=(t={},r=ah())=>{let n=pE(),o=pE(),a={validate:!0,root_name:"body",sanitize:!0,...t},l=new DOMParser,i=((t,r)=>{let n=(()=>{let t=[],r=()=>t[t.length-1];return{track:n=>{oO(n)&&t.push(n);let o=r();return o&&!o.contains(n)&&(t.pop(),o=r()),oB(o)},current:()=>oB(r()),reset:()=>{t=[]}}})();if(t.sanitize){let o=hB(t,r,n);return{sanitizeHtmlElement:(r,a)=>{o.sanitize(r,((t,r)=>{let n={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return n.PARSER_MEDIA_TYPE=r,t.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:t.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n})(t,a)),o.removed=[],n.reset()},sanitizeNamespaceElement:hP}}return{sanitizeHtmlElement:(o,a)=>{let l;let i=document.createNodeIterator(o,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);for(;l=i.nextNode();){let o=n.track(l);hN(l,t,r,o),nS(l)&&hO(l,t,r,o)}n.reset()},sanitizeNamespaceElement:H}})(a,r),s=n.addFilter,d=n.getFilters,c=n.removeFilter,u=o.addFilter,m=o.getFilters,f=o.removeFilter,g=(t,n)=>{let o=T(n.attr(hk)),a=1===n.type&&!ej(t,n.name)&&!oK(r,n)&&!oT(n.name);return 3===n.type||a&&!o},p={schema:r,addAttributeFilter:u,getAttributeFilters:m,removeAttributeFilter:f,addNodeFilter:s,getNodeFilters:d,removeNodeFilter:c,parse:(t,n={})=>{var o;let s=a.validate,c=null!==(o=n.context)&&void 0!==o?o:a.root_name,u=((t,n,o="html")=>{let a="xhtml"===o?"application/xhtml+xml":"text/html",s=ej(r.getSpecialElements(),n.toLowerCase()),d=s?`<${n}>${t}</${n}>`:t,c="xhtml"===o?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${d}</body></html>`:`<body>${d}</body>`,u=l.parseFromString(c,a).body;return i.sanitizeHtmlElement(u,a),s?u.firstChild:u})(t,c,n.format);oz(r,u);let f=new mn(c,11);hM(f,u,r.getSpecialElements(),i.sanitizeNamespaceElement),u.innerHTML="";let[p,h]=((t,r,n,o)=>{let a=n.validate,l=r.getNonEmptyElements(),i=r.getWhitespaceElements(),s=hL(hD("script,style,head,html,body,title,meta,param"),r.getBlockElements()),d=ag(r),c=/[ \t\r\n]+/g,u=/^[ \t\r\n]+/,m=/[ \t\r\n]+$/,f=t=>{let r=t.parent;for(;I(r);){if(r.name in i)return!0;r=r.parent}return!1},g=n=>n.name in s||oK(r,n)||oT(n.name)&&n.parent===t,p=(r,n)=>!I(n?r.prev:r.next)&&!F(r.parent)&&g(r.parent)&&(r.parent!==t||!0===o.isRootContent);return[t=>{var r,n;if(3===t.type&&!f(t)){let o=null!==(r=t.value)&&void 0!==r?r:"";o=o.replace(c," "),(I(n=t.prev)&&(g(n)||"br"===n.name)||p(t,!0))&&(o=o.replace(u,"")),0===o.length?t.remove():t.value=o}},t=>{var s,c;if(1===t.type){let s=r.getElementRule(t.name);if(a&&s){let a=gd(r,l,i,t);s.paddInEmptyBlock&&a&&(t=>{let n=t;for(;I(n);){if(n.name in d)return gd(r,l,i,n);n=n.parent}return!1})(t)?gi(n,o,g,t):s.removeEmpty&&a?g(t)?t.remove():t.unwrap():s.paddEmpty&&(a||gs(t,"#text")&&(null===(c=null==t?void 0:t.firstChild)||void 0===c?void 0:c.value)==="\xa0")&&gi(n,o,g,t)}}else if(3===t.type&&!f(t)){let r=null!==(s=t.value)&&void 0!==s?s:"";(t.next&&g(t.next)||p(t,!1))&&(r=r.replace(m,"")),0===r.length?t.remove():t.value=r}}]})(f,r,a,n),b=[],v={nodes:{},attributes:{}},y=t=>go(d(),m(),t,v);if(((t,r,n)=>{let o=[];for(let n=t,a=n;n;a=n,n=n.walk()){let l=n;ed(r,t=>t(l)),F(l.parent)&&l!==t?n=a:o.push(l)}for(let t=o.length-1;t>=0;t--){let r=o[t];ed(n,t=>t(r))}})(f,[p,y],[h,s?t=>{gf(r,t)&&b.push(t)}:H]),b.reverse(),s&&b.length>0){if(n.context){let{pass:t,fail:o}=eu(b,t=>t.parent===f);gm(o,r,f,y),n.invalid=t.length>0}else gm(b,r,f,y)}let C=((t,r)=>{var n;let o=null!==(n=r.forced_root_block)&&void 0!==n?n:t.forced_root_block;return!1===o?"":!0===o?"p":o})(a,n);return C&&("body"===f.name||n.isRootContent)&&((t,n)=>{let o=hL(hD("script,style,head,html,body,title,meta,param"),r.getBlockElements()),l=/^[ \t\r\n]+/,i=/[ \t\r\n]+$/,s=t.firstChild,d=null,c=t=>{var r,n;t&&((s=t.firstChild)&&3===s.type&&(s.value=null===(r=s.value)||void 0===r?void 0:r.replace(l,"")),(s=t.lastChild)&&3===s.type&&(s.value=null===(n=s.value)||void 0===n?void 0:n.replace(i,"")))};if(r.isValidChild(t.name,n.toLowerCase())){for(;s;){let r=s.next;g(o,s)?(d||((d=new mn(n,1)).attr(a.forced_root_block_attrs),t.insert(d,s)),d.append(s)):(c(d),d=null),s=r}c(d)}})(f,C),n.invalid||ga(v,n),f}};return pB(p,a),a.inline_styles&&pw(p,a,r),p},hI=(t,r,n)=>{let o=gw(t)?mw({validate:!1}).serialize(t):t,a=r(o);if(a.isDefaultPrevented())return a;if(gw(t)){if(a.content!==o){let r=hF({validate:!1,forced_root_block:!1,...n}).parse(a.content,{context:t.name});return{...a,content:r}}return{...a,content:t}}return a},hU=(t,r)=>{if(r.no_events)return l2.value(r);{let n=t.dispatch("BeforeGetContent",r);return n.isDefaultPrevented()?l2.error(cF(t,{content:"",...n}).content):l2.value(n)}},hz=(t,r,n)=>n.no_events?r:hI(r,r=>cF(t,{...n,content:r}),{sanitize:sM(t),sandbox_iframes:s$(t)}).content,hj=(t,r)=>{if(r.no_events)return l2.value(r);{let n=hI(r.content,n=>{var o;return o={...r,content:n},t.dispatch("BeforeSetContent",o)},{sanitize:sM(t),sandbox_iframes:s$(t)});return n.isDefaultPrevented()?(cM(t,n),l2.error(void 0)):l2.value(n)}},hH=(t,r,n)=>{n.no_events||cM(t,{...n,content:r})},h$=(t,r,n)=>({element:t,width:r,rows:n}),hq=(t,r)=>({element:t,cells:r}),hV=(t,r)=>({x:t,y:r}),hW=(t,r)=>t9(t,r).bind(to).getOr(1),hK=(t,r,n)=>{let o=t.rows;return!!(o[n]?o[n].cells:[])[r]},hY=t=>eg(t,(t,r)=>r.cells.length>t?r.cells.length:t,0),hG=(t,r)=>{let n=t.rows;for(let t=0;t<n.length;t++){let o=n[t].cells;for(let n=0;n<o.length;n++)if(rv(o[n],r))return et.some(hV(n,t))}return et.none()},hX=(t,r,n,o,a)=>{let l=[],i=t.rows;for(let t=n;t<=a;t++){let n=i[t].cells,a=r<o?n.slice(r,o+1):n.slice(o,r+1);l.push(hq(i[t].element,a))}return l},hQ=t=>((t,r)=>{let n=ls(t.element),o=rm("tbody");return nn(o,r),nt(n,o),n})(t,es(t.rows,t=>{let r=es(t.cells,t=>{let r=ld(t);return t7(r,"colspan"),t7(r,"rowspan"),r}),n=ls(t.element);return nn(n,r),n})),hJ=(t,r,n)=>{let o=rc(r.commonAncestorContainer),a=m$(o,t),l=em(a,t=>n.isWrapper(tY(t))),i=eh(a,t=>"li"===tY(t)&&dQ(t,r)).fold(V([]),t=>eh(a,t=>"ul"===tY(t)||"ol"===tY(t)).map(t=>{let r=rm(tY(t));return r2(r,eF(r6(t),(t,r)=>e6(r,"list-style"))),[rm("li"),r]}).getOr([]));return es(l.concat(i.length?i:n6(o)?rx(o).filter(n5).fold(V([]),t=>[o,t]):n5(o)?[o]:[]),ls)},hZ=()=>c8([]),h0=(t,r)=>rY(r[0],"table",Y(rv,t)).bind(t=>{var n;let o=r[0],a=r[r.length-1];return hG(n=(t=>{let r=h$(ls(t),0,[]);return ed(nE(t,"tr"),(t,n)=>{ed(nE(t,"td,th"),(o,a)=>{((t,r,n,o,a)=>{let l=hW(a,"rowspan"),i=hW(a,"colspan"),s=t.rows;for(let t=n;t<n+l;t++){s[t]||(s[t]=hq(ld(o),[]));for(let o=r;o<r+i;o++)s[t].cells[o]=t===n&&o===r?a:ls(a)}})(r,((t,r,n)=>{for(;hK(t,r,n);)r++;return r})(r,a,n),n,t,o)})}),h$(r.element,hY(r.rows),r.rows)})(t),o).bind(t=>hG(n,a).map(r=>((t,r,n)=>{let o=r.x,a=r.y,l=n.x,i=n.y,s=a<i?hX(t,o,a,l,i):hX(t,o,i,l,a);return h$(t.element,hY(s),s)})(n,t,r))).map(t=>c8([hQ(t)]))}).getOrThunk(hZ),h1=(t,r,n)=>{var o;let a=dW(r,t);return a.length>0?h0(t,a):r.length>0&&r[0].collapsed?hZ():((t,r)=>{let n=eg(r,(t,r)=>(nt(r,t),r),t);return r.length>0?c8([n]):n})(rc((o=r[0]).cloneContents()),hJ(t,o,n))},h2=(t,r)=>r>=0&&r<t.length&&d$(t.charAt(r)),h3=t=>or(t.innerText),h8=t=>nS(t)?t.outerHTML:nM(t)?aa.encodeRaw(t.data,!1):nU(t)?"<!--"+t.data+"-->":"",h5=(t,r)=>{var n;let o;return n=((t,r)=>{let n=t.length+r.length+2,o=Array(n),a=Array(n),l=(n,o,a,i,d)=>{let c=s(n,o,a,i);if(null===c||c.start===o&&c.diag===o-i||c.end===n&&c.diag===n-a){let l=n,s=a;for(;l<o||s<i;)l<o&&s<i&&t[l]===r[s]?(d.push([0,t[l]]),++l,++s):o-n>i-a?(d.push([2,t[l]]),++l):(d.push([1,r[s]]),++s)}else{l(n,c.start,a,c.start-c.diag,d);for(let r=c.start;r<c.end;++r)d.push([0,t[r]]);l(c.end,o,c.end-c.diag,i,d)}},i=(n,o,a,l)=>{let i=n;for(;i-o<l&&i<a&&t[i]===r[i-o];)++i;return{start:n,end:i,diag:o}},s=(n,l,s,d)=>{let c,u,m,f,g;let p=l-n,h=d-s;if(0===p||0===h)return null;let b=p-h,v=h+p,y=(v%2==0?v:v+1)/2;for(o[1+y]=n,a[1+y]=l+1,c=0;c<=y;++c){for(u=-c;u<=c;u+=2){for(m=u+y,u===-c||u!==c&&o[m-1]<o[m+1]?o[m]=o[m+1]:o[m]=o[m-1]+1,g=(f=o[m])-n+s-u;f<l&&g<d&&t[f]===r[g];)o[m]=++f,++g;if(b%2!=0&&b-c<=u&&u<=b+c&&a[m-b]<=o[m])return i(a[m-b],u+n-s,l,d)}for(u=b-c;u<=b+c;u+=2){for(m=u+y-b,u===b-c||u!==b+c&&a[m+1]<=a[m-1]?a[m]=a[m+1]-1:a[m]=a[m-1],g=(f=a[m]-1)-n+s-u;f>=n&&g>=s&&t[f]===r[g];)a[m]=f--,g--;if(b%2==0&&-c<=u&&u<=c&&a[m]<=o[m+b])return i(a[m],u+n-s,l,d)}}return null},d=[];return l(0,t.length,0,r.length,d),d})(es(eR(r.childNodes),h8),t),o=0,ed(n,t=>{0===t[0]?o++:1===t[0]?(((t,r,n)=>{let o=(t=>{let r;let n=document.createElement("div"),o=document.createDocumentFragment();for(t&&(n.innerHTML=t);r=n.firstChild;)o.appendChild(r);return o})(r);if(t.hasChildNodes()&&n<t.childNodes.length){let r=t.childNodes[n];t.insertBefore(o,r)}else t.appendChild(o)})(r,t[1],o),o++):2===t[0]&&((t,r)=>{if(t.hasChildNodes()&&r<t.childNodes.length){let n=t.childNodes[r];t.removeChild(n)}})(r,o)}),r},h6=eJ(()=>document.implementation.createHTMLDocument("undo")),h9=t=>{let r=t.serializer.getTempAttrs(),n=mh(t.getBody(),r);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:em(es(eR(n.childNodes),$(or,h8)),t=>t.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:or(n.innerHTML),bookmark:null,beforeBookmark:null}},h4=(t,r,n)=>{let o=n?r.beforeBookmark:r.bookmark;"fragmented"===r.type?h5(r.fragments,t.getBody()):t.setContent(r.content,{format:"raw",no_selection:!I(o)||!dO(o)||!o.isFakeCaret}),o&&(t.selection.moveToBookmark(o),t.selection.scrollIntoView())},h7=t=>"fragmented"===t.type?t.fragments.join(""):t.content,be=t=>{let r=rm("body",h6());return nd(r,h7(t)),ed(nE(r,"*[data-mce-bogus]"),nl),ns(r)},bt=(t,r)=>!(!t||!r)&&(h7(t)===h7(r)||be(t)===be(r)),br=t=>0===t.get(),bn=(t,r,n)=>{br(n)&&(t.typing=r)},bo=(t,r)=>{t.typing&&(bn(t,!1,r),t.add())},ba=t=>({init:{bindEvents:H},undoManager:{beforeChange:(r,n)=>{br(r)&&n.set(lZ(t.selection))},add:(r,n,o,a,l,i)=>((t,r,n,o,a,l,i)=>{let s=h9(t),d=tU.extend(l||{},s);if(!br(o)||t.removed)return null;let c=r.data[n.get()];if(t.dispatch("BeforeAddUndo",{level:d,lastLevel:c,originalEvent:i}).isDefaultPrevented()||c&&bt(c,d))return null;r.data[n.get()]&&a.get().each(t=>{r.data[n.get()].beforeBookmark=t});let u=i7(t);if(u&&r.data.length>u){for(let t=0;t<r.data.length-1;t++)r.data[t]=r.data[t+1];r.data.length--,n.set(r.data.length)}d.bookmark=lZ(t.selection),n.get()<r.data.length-1&&(r.data.length=n.get()+1),r.data.push(d),n.set(r.data.length-1);let m={level:d,lastLevel:c,originalEvent:i};return n.get()>0?(t.setDirty(!0),t.dispatch("AddUndo",m),t.dispatch("change",m)):t.dispatch("AddUndo",m),d})(t,r,n,o,a,l,i),undo:(r,n,o)=>{let a;return r.typing&&(r.add(),r.typing=!1,bn(r,!1,n)),o.get()>0&&(o.set(o.get()-1),h4(t,a=r.data[o.get()],!0),t.setDirty(!0),t.dispatch("Undo",{level:a})),a},redo:(r,n)=>{let o;return r.get()<n.length-1&&(r.set(r.get()+1),h4(t,o=n[r.get()],!1),t.setDirty(!0),t.dispatch("Redo",{level:o})),o},clear:(r,n)=>{r.data=[],n.set(0),r.typing=!1,t.dispatch("ClearUndos")},reset:t=>{t.clear(),t.add()},hasUndo:(r,n)=>n.get()>0||r.typing&&r.data[0]&&!bt(h9(t),r.data[0]),hasRedo:(t,r)=>r.get()<t.data.length-1&&!t.typing,transact:(t,r,n)=>(bo(t,r),t.beforeChange(),t.ignore(n),t.add()),ignore:(t,r)=>((t,r)=>{try{t.set(t.get()+1),r()}finally{t.set(t.get()-1)}})(t,r),extra:(r,n,o,a)=>((t,r,n,o,a)=>{if(r.transact(o)){let o=r.data[n.get()].bookmark;h4(t,r.data[n.get()-1],!0),r.transact(a)&&(r.data[n.get()-1].beforeBookmark=o)}})(t,r,n,o,a)},formatter:{match:(r,n,o,a)=>gO(t,r,n,o,a),matchAll:(r,n)=>((t,r,n)=>{let o=[],a={},l=t.selection.getStart();return t.dom.getParent(l,l=>{for(let i=0;i<r.length;i++){let s=r[i];!a[s]&&gT(t,l,s,n)&&(a[s]=!0,o.push(s))}},t.dom.getRoot()),o})(t,r,n),matchNode:(r,n,o,a)=>gT(t,r,n,o,a),canApply:r=>((t,r)=>{let n=t.formatter.get(r),o=t.dom;if(n&&t.selection.isEditable()){let r=cl(o,t.selection.getStart());for(let t=n.length-1;t>=0;t--){let a=n[t];if(!cd(a))return!0;for(let t=r.length-1;t>=0;t--)if(o.is(r[t],a.selector))return!0}}return!1})(t,r),closest:r=>((t,r)=>{let n=r=>rv(r,rc(t.getBody()));return et.from(t.selection.getStart(!0)).bind(o=>gk(rc(o),n=>eA(r,r=>gT(t,n.dom,r)?et.some(r):et.none()),n)).getOrNull()})(t,r),apply:(r,n,o)=>pg(t,r,n,o),remove:(r,n,o,a)=>ps(t,r,n,o,a),toggle:(r,n,o)=>((t,r,n,o)=>{let a=t.formatter.get(r);a&&(!gO(t,r,n,o)||"toggle"in a[0]&&!a[0].toggle?pg(t,r,n,o):ps(t,r,n,o))})(t,r,n,o),formatChanged:(r,n,o,a,l)=>(((t,r,n,o,a,l)=>{let i=r.get();ed(n.split(","),r=>{let n=ez(i,r).getOrThunk(()=>{let t={withSimilar:{state:aY(!1),similar:!0,callbacks:[]},withoutSimilar:{state:aY(!1),similar:!1,callbacks:[]},withVars:[]};return i[r]=t,t}),s=()=>{let n=pv(t);return pb(t,n,r,a,l).isSome()};if(M(l)){let t=a?n.withSimilar:n.withoutSimilar;t.callbacks.push(o),1===t.callbacks.length&&t.state.set(s())}else n.withVars.push({state:aY(s()),similar:a,vars:l,callback:o})}),r.set(i)})(t,r,n,o,a,l),{unbind:()=>((t,r,n)=>{let o=t.get();ed(r.split(","),t=>ez(o,t).each(r=>{o[t]={withSimilar:{...r.withSimilar,callbacks:em(r.withSimilar.callbacks,t=>t!==n)},withoutSimilar:{...r.withoutSimilar,callbacks:em(r.withoutSimilar.callbacks,t=>t!==n)},withVars:em(r.withVars,t=>t.callback!==n)}})),t.set(o)})(r,n,o)})},editor:{getContent:r=>et.from(t.getBody()).fold(V("tree"===r.format?new mn("body",11):""),n=>my(t,r,n)),setContent:(r,n)=>et.from(t.getBody()).map(o=>gw(r)?((t,r,n,o)=>{gl(t.parser.getNodeFilters(),t.parser.getAttributeFilters(),n);let a=mw({validate:!1},t.schema).serialize(n),l=or(n7(rc(r))?a:tU.trim(a));return gx(t,l,o.no_selection),{content:n,html:l}})(t,o,r,n):((t,r,n,o)=>{if(0===(n=or(n)).length||/^\s+$/.test(n)){let a='<br data-mce-bogus="1">';"TABLE"===r.nodeName?n="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(r.nodeName)&&(n="<li>"+a+"</li>");let l=ih(t);return t.schema.isValidChild(r.nodeName.toLowerCase(),l.toLowerCase())?(n=a,n=t.dom.createHTML(l,ib(t),n)):n||(n=a),gx(t,n,o.no_selection),{content:n,html:n}}{"raw"!==o.format&&(n=mw({validate:!1},t.schema).serialize(t.parser.parse(n,{isRootContent:!0,insert:!0})));let a=n7(rc(r))?n:tU.trim(n);return gx(t,a,o.no_selection),{content:a,html:a}}})(t,o,r,n)).getOr({content:r,html:gw(n.content)?"":n.content}),insertContent:(r,n)=>gE(t,r,n),addVisual:r=>((t,r)=>{let n=t.dom,o=I(r)?r:t.getBody();ed(n.select("table,a",o),r=>{switch(r.nodeName){case"TABLE":let o=ss(t),a=n.getAttrib(r,"border");a&&"0"!==a||!t.hasVisual?n.removeClass(r,o):n.addClass(r,o);break;case"A":if(!n.getAttrib(r,"href")){let o=n.getAttrib(r,"name")||r.id,a=sd(t);o&&t.hasVisual?n.addClass(r,a):n.removeClass(r,a)}}}),t.dispatch("VisualAid",{element:r,hasVisual:t.hasVisual})})(t,r)},selection:{getContent:(r,n)=>((t,r,n={})=>hU(t,{...n,format:r,get:!0,selection:!0,getInner:!0}).fold(W,r=>{let n=((t,r)=>{if("text"===r.format)return et.from(t.selection.getRng()).map(r=>{var n;let o=et.from(t.dom.getParent(r.commonAncestorContainer,t.dom.isBlock)),a=t.getBody(),l=o.map(t=>t.nodeName).getOr("div").toLowerCase(),i=rc(r.cloneContents());mb(i),mv(i);let s=t.dom.add(a,l,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},i.dom),d=h3(s),c=or(null!==(n=s.textContent)&&void 0!==n?n:"");if(t.dom.remove(s),h2(c,0)||h2(c,c.length-1)){let t=h3(o.getOr(a)),r=t.indexOf(d);return -1===r?d:(h2(t,r-1)?" ":"")+d+(h2(t,r+d.length)?" ":"")}return d}).getOr("");{let n=((t,r)=>{let n=t.selection.getRng(),o=t.dom.create("body"),a=t.selection.getSel(),l=u3(t,dV(a)),i=r.contextual?h1(rc(t.getBody()),l,t.schema).dom:n.cloneContents();return i&&o.appendChild(i),t.selection.serializer.serialize(o,r)})(t,r);return"tree"===r.format?n:t.selection.isCollapsed()?"":n}})(t,r);return hz(t,n,r)}))(t,r,n)},autocompleter:{addDecoration:r=>u9(t,r),removeDecoration:()=>u4(rc(t.getBody())).each(r=>{let n=t.selection.getBookmark();nl(r),t.selection.moveToBookmark(n)})},raw:{getModel:()=>et.none()}}),bl=t=>ej(t.plugins,"rtc"),bi=t=>t.rtcInstance?t.rtcInstance:ba(t),bs=t=>{let r=t.rtcInstance;if(r)return r;throw Error("Failed to get RTC instance not yet initialized.")},bd=t=>bs(t).init.bindEvents(),bc=t=>0===t.dom.length?(na(t),et.none()):et.some(t),bu=(t,r,n,o,a)=>{t.bind(t=>((o?fu:fc)(t.dom,o?t.dom.length:0,a),r.filter(tZ).map(r=>((t,r,n,o,a)=>{let l=t.dom,i=r.dom,s=o?l.length:i.length;o?(fm(l,i,a,!1,!o),n.setStart(i,s)):(fm(i,l,a,!1,!o),n.setEnd(i,s))})(t,r,n,o,a)))).orThunk(()=>r.filter(t=>cO.isBookmarkNode(t.dom)).bind(o?rN:rS).or(r).filter(tZ).map(t=>((t,r,n)=>{rx(t).each(o=>{let a=t.dom;r&&ft(o,lL(a,0),n)?fc(a,0,n):!r&&fr(o,lL(a,a.length),n)&&fu(a,a.length,n)})})(t,o,a)))},bm=(t,r,n)=>{if(ej(t,r)){let o=em(t[r],t=>t!==n);0===o.length?delete t[r]:t[r]=o}},bf=t=>!(!t||!t.ownerDocument)&&ry(rc(t.ownerDocument),rc(t)),bg=(t,r,n,o)=>{let a,l;let{selectorChangedWithUnbind:i}=((t,r)=>{let n,o;let a=(r,n)=>eh(n,n=>t.is(n,r)),l=r=>t.getParents(r,void 0,t.getRoot());return{selectorChangedWithUnbind:(t,i)=>(n||(n={},o={},r.on("NodeChange",t=>{let r=t.element,i=l(r),s={};eB(n,(t,r)=>{a(r,i).each(n=>{o[r]||(ed(t,t=>{t(!0,{node:n,selector:r,parents:i})}),o[r]=t),s[r]=t})}),eB(o,(t,n)=>{s[n]||(delete o[n],ed(t,t=>{t(!1,{node:r,selector:n,parents:i})}))})})),n[t]||(n[t]=[]),n[t].push(i),a(t,l(r.selection.getStart())).each(()=>{o[t]=n[t]}),{unbind:()=>{bm(n,t,i),bm(o,t,i)}})}})(t,o),s=(t,r)=>((t,r,n={})=>{hj(t,{format:"html",...n,set:!0,selection:!0,content:r}).each(r=>{let n=((t,r)=>{if("raw"!==r.format){let n=t.selection.getRng(),o=t.dom.getParent(n.commonAncestorContainer,t.dom.isBlock),a=o?{context:o.nodeName.toLowerCase()}:{},l=t.parser.parse(r.content,{forced_root_block:!1,...a,...r});return mw({validate:!1},t.schema).serialize(l)}return r.content})(t,r),o=t.selection.getRng();((t,r,n)=>{let o=et.from(r.firstChild).map(rc),a=et.from(r.lastChild).map(rc);t.deleteContents(),t.insertNode(r);let l=o.bind(rS).filter(tZ).bind(bc),i=a.bind(rN).filter(tZ).bind(bc);bu(l,o,t,!0,n),bu(i,a,t,!1,n),t.collapse(!1)})(o,o.createContextualFragment(n),t.schema),t.selection.setRng(o),uN(t,o),hH(t,n,r)})})(o,t,r),d=t=>{let r=u();r.collapse(!!t),m(r)},c=()=>r.getSelection?r.getSelection():r.document.selection,u=()=>{let n;let i=(t,r,n)=>{try{return r.compareBoundaryPoints(t,n)}catch(t){return -1}},s=r.document;if(I(o.bookmark)&&!uG(o)){let t=uI(o);if(t.isSome())return t.map(t=>u3(o,[t])[0]).getOr(s.createRange())}try{let t=c();t&&!nk(t.anchorNode)&&(n=t.rangeCount>0?t.getRangeAt(0):s.createRange(),n=u3(o,[n])[0])}catch(t){}if(n||(n=s.createRange()),nz(n.startContainer)&&n.collapsed){let r=t.getRoot();n.setStart(r,0),n.setEnd(r,0)}return a&&l&&(0===i(n.START_TO_START,n,a)&&0===i(n.END_TO_END,n,a)?n=l:(a=null,l=null)),n},m=(t,r)=>{var n;if(!((n=t)&&bf(n.startContainer)&&bf(n.endContainer)))return;let i=c();if(t=o.dispatch("SetSelectionRange",{range:t,forward:r}).range,i){l=t;try{i.removeAllRanges(),i.addRange(t)}catch(t){}!1===r&&i.extend&&(i.collapse(t.endContainer,t.endOffset),i.extend(t.startContainer,t.startOffset)),a=i.rangeCount>0?i.getRangeAt(0):null}if(!t.collapsed&&t.startContainer===t.endContainer&&(null==i?void 0:i.setBaseAndExtent)&&t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()){let r=t.startContainer.childNodes[t.startOffset];r&&"IMG"===r.nodeName&&(i.setBaseAndExtent(t.startContainer,t.startOffset,t.endContainer,t.endOffset),i.anchorNode===t.startContainer&&i.focusNode===t.endContainer||i.setBaseAndExtent(r,0,r,1))}o.dispatch("AfterSetSelectionRange",{range:t,forward:r})},f=()=>{let r=c(),n=null==r?void 0:r.anchorNode,o=null==r?void 0:r.focusNode;if(!r||!n||!o||nk(n)||nk(o))return!0;let a=t.createRng(),l=t.createRng();try{a.setStart(n,r.anchorOffset),a.collapse(!0),l.setStart(o,r.focusOffset),l.collapse(!0)}catch(t){return!0}return 0>=a.compareBoundaryPoints(a.START_TO_START,l)},g={dom:t,win:r,serializer:n,editor:o,expand:(r={type:"word"})=>m(ui(t).expand(u(),r)),collapse:d,setCursorLocation:(r,n)=>{let a=t.createRng();I(r)&&I(n)?(a.setStart(r,n),a.setEnd(r,n),m(a),d(!1)):(dJ(t,a,o.getBody(),!0),m(a))},getContent:t=>((t,r={})=>{var n;return n=r.format?r.format:"html",bs(t).selection.getContent(n,r)})(o,t),setContent:s,getBookmark:(t,r)=>p.getBookmark(t,r),moveToBookmark:t=>p.moveToBookmark(t),select:(r,n)=>(et.from(r).bind(r=>et.from(r.parentNode).map(o=>{let a=t.nodeIndex(r),l=t.createRng();return l.setStart(o,a),l.setEnd(o,a+1),n&&(dJ(t,l,r,!0),dJ(t,l,r,!1)),l})).each(m),r),isCollapsed:()=>{let t=u(),r=c();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!r||t.collapsed)},isEditable:()=>{let r=u(),n=o.getBody().querySelectorAll('[data-mce-selected="1"]');return n.length>0?eC(n,r=>t.isEditable(r.parentElement)):uJ(t,r)},isForward:f,setNode:r=>(s(t.getOuterHTML(r)),r),getNode:()=>((t,r)=>{if(!r)return t;let n=r.startContainer,o=r.endContainer,a=r.startOffset,l=r.endOffset,i=r.commonAncestorContainer;r.collapsed||(n===o&&l-a<2&&n.hasChildNodes()&&(i=n.childNodes[a]),nM(n)&&nM(o)&&(n=n.length===a?u2(n.nextSibling,!0):n.parentNode,o=0===l?u2(o.previousSibling,!1):o.parentNode,n&&n===o&&(i=n)));let s=nM(i)?i.parentNode:i;return nN(s)?s:t})(o.getBody(),u()),getSel:c,setRng:m,getRng:u,getStart:t=>u0(o.getBody(),u(),t),getEnd:t=>u1(o.getBody(),u(),t),getSelectedBlocks:(r,n)=>((t,r,n,o)=>{let a=[],l=t.getRoot(),i=t.getParent(n||u0(l,r,r.collapsed),t.isBlock),s=t.getParent(o||u1(l,r,r.collapsed),t.isBlock);if(i&&i!==l&&a.push(i),i&&s&&i!==s){let r;let n=new nx(i,l);for(;(r=n.next())&&r!==s;)t.isBlock(r)&&a.push(r)}return s&&i!==s&&s!==l&&a.push(s),a})(t,u(),r,n),normalize:()=>{let r=u();if(!(dV(c()).length>1)&&dZ(o)){let n=uo(t,r);return n.each(t=>{m(t,f())}),n.getOr(r)}return r},selectorChanged:(t,r)=>(i(t,r),g),selectorChangedWithUnbind:i,getScrollContainer:()=>{let r,n=t.getRoot();for(;n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){r=n;break}n=n.parentNode}return r},scrollIntoView:(t,r)=>{I(t)?((t,r,n)=>{(t.inline?u_:uS)(t,r,n)})(o,t,r):uN(o,u(),r)},placeCaretAt:(t,r)=>m(c6(t,r,o.getDoc())),getBoundingClientRect:()=>{let t=u();return t.collapsed?lL.fromRangeStart(t).getClientRects()[0]:t.getBoundingClientRect()},destroy:()=>{r=a=l=null,h.destroy()}},p=cO(g),h=cq(g,o);return g.bookmarkManager=p,g.controlSelection=h,g},bp=(t,r,n)=>{-1===tU.inArray(r,n)&&(t.addAttributeFilter(n,(t,r)=>{let n=t.length;for(;n--;)t[n].attr(r,null)}),r.push(n))},bh=(t,r)=>{let n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},a=r&&r.dom?r.dom:aV.DOM,l=r&&r.schema?r.schema:ah(o),i=hF(o,l);return i.addAttributeFilter("data-mce-tabindex",(t,r)=>{let n=t.length;for(;n--;){let o=t[n];o.attr("tabindex",o.attr("data-mce-tabindex")),o.attr(r,null)}}),i.addAttributeFilter("src,href,style",(t,r)=>{let n="data-mce-"+r,l=o.url_converter,i=o.url_converter_scope,s=t.length;for(;s--;){let o=t[s],d=o.attr(n);void 0!==d?(o.attr(r,d.length>0?d:null),o.attr(n,null)):(d=o.attr(r),"style"===r?d=a.serializeStyle(a.parseStyle(d),o.name):l&&(d=l.call(i,d,r,o.name)),o.attr(r,d.length>0?d:null))}}),i.addAttributeFilter("class",t=>{let r=t.length;for(;r--;){let n=t[r],o=n.attr("class");o&&(o=o.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",o.length>0?o:null))}}),i.addAttributeFilter("data-mce-type",(t,r,n)=>{let o=t.length;for(;o--;){let r=t[o];"bookmark"!==r.attr("data-mce-type")||n.cleanup||(et.from(r.firstChild).exists(t=>{var r;return!nJ(null!==(r=t.value)&&void 0!==r?r:"")})?r.unwrap():r.remove())}}),i.addNodeFilter("noscript",t=>{var r;let n=t.length;for(;n--;){let o=t[n].firstChild;o&&(o.value=aa.decode(null!==(r=o.value)&&void 0!==r?r:""))}}),i.addNodeFilter("script,style",(t,r)=>{var n;let a=t=>t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,""),l=t.length;for(;l--;){let i=t[l],s=i.firstChild,d=null!==(n=null==s?void 0:s.value)&&void 0!==n?n:"";if("script"===r){let t=i.attr("type");t&&i.attr("type","mce-no/type"===t?null:t.replace(/^mce\-/,"")),"xhtml"===o.element_format&&s&&d.length>0&&(s.value="// <![CDATA[\n"+a(d)+"\n// ]]>")}else"xhtml"===o.element_format&&s&&d.length>0&&(s.value="<!--\n"+a(d)+"\n-->")}}),i.addNodeFilter("#comment",t=>{let r=t.length;for(;r--;){let n=t[r],l=n.value;o.preserve_cdata&&0===(null==l?void 0:l.indexOf("[CDATA["))?(n.name="#cdata",n.type=4,n.value=a.decode(l.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==l?void 0:l.indexOf("mce:protected "))&&(n.name="#text",n.type=3,n.raw=!0,n.value=unescape(l).substr(14))}}),i.addNodeFilter("xml:namespace,input",(t,r)=>{let n=t.length;for(;n--;){let o=t[n];7===o.type?o.remove():1===o.type&&("input"!==r||o.attr("type")||o.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",t=>{ed(t,t=>{"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(i.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(t,r)=>{let n=t.length;for(;n--;)t[n].attr(r,null)}),o.remove_trailing_brs&&px(o,i,i.schema),{schema:l,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:(t,n={})=>{let s={format:"html",...n},d=((t,r,n)=>{let o=n.selection?{forced_root_block:!1,...n}:n,a=t.parse(r,o);return(t=>{let r=t=>"br"===(null==t?void 0:t.name),n=t.lastChild;if(r(n)){let t=n.prev;r(t)&&(n.remove(),t.remove())}})(a),a})(i,((t,r,n)=>{let o=or(n.getInner?r.innerHTML:t.getOuterHTML(r));return n.selection||n7(rc(r))?o:tU.trim(o)})(a,I(r)&&r.hasEventListeners("PreProcess")&&!s.no_events?((t,r,n)=>{let o;let a=t.dom,l=r.cloneNode(!0),i=document.implementation;if(i.createHTMLDocument){let t=i.createHTMLDocument("");tU.each("BODY"===l.nodeName?l.childNodes:[l],r=>{t.body.appendChild(t.importNode(r,!0))}),l="BODY"!==l.nodeName?t.body.firstChild:t.body,o=a.doc,a.doc=t}return((t,r)=>{t.dispatch("PreProcess",r)})(t,{...n,node:l}),o&&(a.doc=o),l})(r,t,s):t,s),s);return"tree"===s.format?d:((t,r,n)=>{if(!r.no_events&&t){var o;return(o={...r,content:n},t.dispatch("PostProcess",o)).content}return n})(r,s,mw(o,l).serialize(d))},addRules:l.addValidElements,setRules:l.setValidElements,addTempAttr:Y(bp,i,n),getTempAttrs:V(n),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters,removeNodeFilter:i.removeNodeFilter,removeAttributeFilter:i.removeAttributeFilter}},bb=(t,r)=>{let n=bh(t,r);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},bv=(t,r,n={})=>hj(t,{format:"html",...n,set:!0,content:r}).map(r=>{var n;let o=(n=r.content,bi(t).editor.setContent(n,r));return hH(t,o.html,r),o.content}).getOr(r),by="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),bC="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),bE="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),bw=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],bx=(t,r)=>e_(em(r,r=>ej(t,r))),b_=t=>{let r=bx(t,by),n=t.forced_root_block;return!1!==n&&""!==n||r.push("forced_root_block (false only)"),e_(r)},bk=t=>bx(t,bC),bS=(t,r)=>{let n=tU.makeMap(t.plugins," ");return e_(em(r,t=>ej(n,t)))},bN=t=>bS(t,bE),bR=t=>bS(t,bw.map(t=>t.name)),bA=t=>eh(bw,r=>r.name===t).fold(()=>t,r=>r.replacedWith?`${t}, replaced by ${r.replacedWith}`:t),bT=aV.DOM,bO=t=>et.from(t).each(t=>t.destroy()),bB=(()=>{let t={};return{add:(r,n)=>{t[r]=n},get:r=>t[r]?t[r]:{icons:{}},has:r=>ej(t,r)}})(),bP=aZ.ModelManager,bD=(t,r)=>r.dom[t],bL=(t,r)=>parseInt(r3(r,t),10),bM=Y(bD,"clientWidth"),bF=Y(bD,"clientHeight"),bI=Y(bL,"margin-top"),bU=Y(bL,"margin-left"),bz=t=>{let r=[],n=()=>{let r=t.theme;return r&&r.getNotificationManagerImpl?r.getNotificationManagerImpl():(()=>{let t=()=>{throw Error("Theme did not provide a NotificationManager implementation.")};return{open:t,close:t,getArgs:t}})()},o=()=>et.from(r[0]),a=()=>{ed(r,t=>{t.reposition()})},l=t=>{eb(r,r=>r===t).each(t=>{r.splice(t,1)})},i=(i,s=!0)=>{var d;return t.removed||!(d=t.inline?t.getBody():t.getContentAreaContainer(),et.from(d).map(rc)).map(r$).getOr(!1)?{}:(s&&t.dispatch("BeforeOpenNotification",{notification:i}),eh(r,t=>{var r;return!((r=n().getArgs(t)).type!==i.type||r.text!==i.text||r.progressBar||r.timeout||i.progressBar||i.timeout)}).getOrThunk(()=>{t.editorManager.setActive(t);let s=n().open(i,()=>{l(s),a(),uX(t)&&o().fold(()=>t.focus(),t=>uR(rc(t.getEl())))});return r.push(s),a(),t.dispatch("OpenNotification",{notification:{...s}}),s}))},s=V(r);return t.on("SkinLoaded",()=>{let r=iK(t);r&&i({text:r,type:"warning",timeout:0},!1),a()}),t.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(a)}),t.on("remove",()=>{ed(r.slice(),t=>{n().close(t)})}),{open:i,close:()=>{o().each(t=>{n().close(t),l(t),a()})},getNotifications:s}},bj=aZ.PluginManager,bH=aZ.ThemeManager,b$=t=>{let r=[],n=()=>{let r=t.theme;return r&&r.getWindowManagerImpl?r.getWindowManagerImpl():(()=>{let t=()=>{throw Error("Theme did not provide a WindowManager implementation.")};return{open:t,openUrl:t,alert:t,confirm:t,close:t}})()},o=(t,r)=>(...n)=>r?r.apply(t,n):void 0,a=n=>{t.dispatch("CloseWindow",{dialog:n}),0===(r=em(r,t=>t!==n)).length&&t.focus()},l=n=>{t.editorManager.setActive(t),uF(t),t.ui.show();let o=n();return r.push(o),t.dispatch("OpenWindow",{dialog:o}),o};return t.on("remove",()=>{ed(r,t=>{n().close(t)})}),{open:(t,r)=>l(()=>n().open(t,r,a)),openUrl:t=>l(()=>n().openUrl(t,a)),alert:(t,r,a)=>{let l=n();l.alert(t,o(a||l,r))},confirm:(t,r,a)=>{let l=n();l.confirm(t,o(a||l,r))},close:()=>{et.from(r[r.length-1]).each(t=>{n().close(t),a(t)})}}},bq=(t,r)=>{t.notificationManager.open({type:"error",text:r})},bV=(t,r)=>{t._skinLoaded?bq(t,r):t.on("SkinLoaded",()=>{bq(t,r)})},bW=(t,r,n)=>{cP(t,r,{message:n}),console.error(n)},bK=(t,r,n)=>n?`Failed to load ${t}: ${n} from url ${r}`:`Failed to load ${t} url: ${r}`,bY=(t,...r)=>{let n=window.console;n&&(n.error?n.error(t,...r):n.log(t,...r))},bG=t=>"content/"+t+"/content.css",bX=(t,r)=>{let n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`;return es(r,r=>tinymce.Resource.has(bG(r))?r:/^[a-z0-9\-]+$/i.test(r)&&!t.inline?`${n}/${r}/${o}`:t.documentBaseURI.toAbsolute(r))},bQ=(t,r)=>{let n={};return{findAll:(o,a=ee)=>Promise.all(es(em(o?eR(o.getElementsByTagName("img")):[],r=>{let n=r.src;return!r.hasAttribute("data-mce-bogus")&&!r.hasAttribute("data-mce-placeholder")&&!(!n||n===tL.transparentSrc)&&(e6(n,"blob:")?!t.isUploaded(n)&&a(r):!!e6(n,"data:")&&a(r))}),t=>{let o=t.src;if(ej(n,o))return n[o].then(r=>T(r)?r:{image:t,blobInfo:r.blobInfo});{let a=((t,r)=>{let n=()=>Promise.reject("Invalid data URI");if(e6(r,"blob:")){let o=t.getByUri(r);return I(o)?Promise.resolve(o):(e6(r,"blob:")?fetch(r).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${r} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})):e6(r,"data:")?new Promise((t,n)=>{p_(r).bind(({type:t,data:r,base64Encoded:n})=>pk(t,r,n)).fold(()=>n("Invalid data URI"),t)}):Promise.reject("Unknown URI format")).then(r=>pS(r).then(o=>pR(o,!1,n=>et.some(pA(t,r,n))).getOrThunk(n)))}return e6(r,"data:")?pT(t,r).fold(n,t=>Promise.resolve(t)):Promise.reject("Unknown image data format")})(r,o).then(r=>(delete n[o],{image:t,blobInfo:r})).catch(t=>(delete n[o],t));return n[o]=a,a}}))}},bJ=()=>{let t={},r=(t,r)=>({status:t,resultUri:r}),n=r=>r in t;return{hasBlobUri:n,getResultUri:r=>{let n=t[r];return n?n.resultUri:null},isPending:r=>!!n(r)&&1===t[r].status,isUploaded:r=>!!n(r)&&2===t[r].status,markPending:n=>{t[n]=r(1,null)},markUploaded:(n,o)=>{t[n]=r(2,o)},removeFailed:r=>{delete t[r]},destroy:()=>{t={}}}},bZ=0,b0=(t,r)=>{let n={},o=(t,n)=>new Promise((o,a)=>{let l=new XMLHttpRequest;l.open("POST",r.url),l.withCredentials=r.credentials,l.upload.onprogress=t=>{n(t.loaded/t.total*100)},l.onerror=()=>{a("Image upload failed due to a XHR Transport error. Code: "+l.status)},l.onload=()=>{var t,n;if(l.status<200||l.status>=300)return void a("HTTP Error: "+l.status);let i=JSON.parse(l.responseText);i&&T(i.location)?o((t=r.basePath,n=i.location,t?t.replace(/\/$/,"")+"/"+n.replace(/^\//,""):n)):a("Invalid JSON: "+l.responseText)};let i=new FormData;i.append("file",t.blob(),t.filename()),l.send(i)}),a=U(r.handler)?r.handler:o,l=(t,r)=>({url:r,blobInfo:t,status:!0}),i=(t,r)=>({url:"",blobInfo:t,status:!1,error:r}),s=(t,r)=>{tU.each(n[t],t=>{t(r)}),delete n[t]};return{upload:(d,c)=>{var u;return r.url||a!==o?(u=d,u=tU.grep(u,r=>!t.isUploaded(r.blobUri())),Promise.all(tU.map(u,r=>t.isPending(r.blobUri())?(t=>{let r=t.blobUri();return new Promise(t=>{n[r]=n[r]||[],n[r].push(t)})})(r):(t.markPending(r.blobUri()),new Promise(n=>{let o,d;try{let u=()=>{o&&(o.close(),d=H)},m=o=>{u(),t.removeFailed(r.blobUri()),s(r.blobUri(),i(r,o)),n(i(r,o))};d=t=>{t<0||t>100||et.from(o).orThunk(()=>et.from(c).map(Q)).each(r=>{o=r,r.progressBar.value(t)})},a(r,d).then(o=>{u(),t.markUploaded(r.blobUri(),o),s(r.blobUri(),l(r,o)),n(l(r,o))},t=>{m(T(t)?{message:t}:t)})}catch(t){n(i(r,t))}}))))):new Promise(t=>{t([])})}}},b1=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),b2=(t,r)=>b0(r,{url:iR(t),basePath:iA(t),credentials:iT(t),handler:iO(t)}),b3=t=>{let r,n;let o=(()=>{let t=[],r=t=>{if(!t.blob||!t.base64)throw Error("blob and base64 representations of the image are required for BlobInfo to be created");let r=t.id||"blobid"+bZ+++(()=>{let t=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+t()+t()+t()})(),n=t.name||r,o=t.blob;return{id:V(r),name:V(n),filename:V(t.filename||n+"."+(({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[o.type.toLowerCase()]||"dat")),blob:V(o),base64:V(t.base64),blobUri:V(t.blobUri||URL.createObjectURL(o)),uri:V(t.uri)}},n=r=>eh(t,r).getOrUndefined(),o=t=>n(r=>r.id()===t);return{create:(t,n,o,a,l)=>{if(T(t))return r({id:t,name:a,filename:l,blob:n,base64:o});if(O(t))return r(t);throw Error("Unknown input type")},add:r=>{o(r.id())||t.push(r)},get:o,getByUri:t=>n(r=>r.blobUri()===t),getByData:(t,r)=>n(n=>n.base64()===t&&n.blob().type===r),findFirst:n,removeByUri:r=>{t=em(t,t=>t.blobUri()!==r||(URL.revokeObjectURL(t.blobUri()),!1))},destroy:()=>{ed(t,t=>{URL.revokeObjectURL(t.blobUri())}),t=[]}}})(),a=bJ(),l=[],i=r=>n=>t.selection?r(n):[],s=(t,r,n)=>{let o=0;do -1!==(o=t.indexOf(r,o))&&(t=t.substring(0,o)+n+t.substr(o+r.length),o+=n.length-r.length+1);while(-1!==o);return t},d=(t,r,n)=>(t=s(t,`src="${r}"`,`src="${n}"${n===tL.transparentSrc?' data-mce-placeholder="1"':""}`),s(t,'data-mce-src="'+r+'"','data-mce-src="'+n+'"')),c=(r,n)=>{ed(t.undoManager.data,t=>{"fragmented"===t.type?t.fragments=es(t.fragments,t=>d(t,r,n)):t.content=d(t.content,r,n)})},u=()=>(r||(r=b2(t,a)),g().then(i(n=>{let a=es(n,t=>t.blobInfo);return r.upload(a,b1(t)).then(i(r=>{let a=[],l=!1,i=es(r,(r,i)=>{var s;let{blobInfo:d,image:u}=n[i],m=!1;return r.status&&ik(t)?(r.url&&!e5(u.src,r.url)&&(l=!0),o.removeByUri(u.src),bl(t)||((r,n)=>{let o=t.convertURL(n,"src");c(r.src,n),t5(rc(r),{src:i_(t)?n+(-1===n.indexOf("?")?"?":"&")+(new Date).getTime():n,"data-mce-src":o})})(u,r.url)):r.error&&(r.error.remove&&(c(u.src,tL.transparentSrc),a.push(u),m=!0),s=r.error.message,bV(t,aJ.translate(["Failed to upload image: {0}",s]))),{element:u,status:r.status,uploadUri:r.url,blobInfo:d,removed:m}});return a.length>0&&!bl(t)?t.undoManager.transact(()=>{ed(ni(a),r=>{let n=rx(r);na(r),n.each(r=>{t.dom.isEmpty(r.dom)&&I(t.schema.getTextBlockElements()[tY(r)])&&nt(r,ru('<br data-mce-bogus="1" />'))}),o.removeByUri(r.dom.src)})}):l&&t.undoManager.dispatchChange(),i}))}))),m=()=>ix(t)?u():Promise.resolve([]),f=t=>eC(l,r=>r(t)),g=()=>(n||(n=bQ(a,o)),n.findAll(t.getBody(),f).then(i(r=>{let n=em(r,r=>T(r)?(bV(t,r),!1):"blob"!==r.uriType);return bl(t)||ed(n,t=>{c(t.image.src,t.blobInfo.blobUri()),t.image.src=t.blobInfo.blobUri(),t.image.removeAttribute("data-mce-src")}),n}))),p=r=>r.replace(/src="(blob:[^"]+)"/g,(r,n)=>{let l=a.getResultUri(n);if(l)return'src="'+l+'"';let i=o.getByUri(n);return i||(i=eg(t.editorManager.get(),(t,r)=>t||r.editorUpload&&r.editorUpload.blobCache.getByUri(n),void 0)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':r});return t.on("SetContent",()=>{ix(t)?m():g()}),t.on("RawSaveContent",t=>{t.content=p(t.content)}),t.on("GetContent",t=>{t.source_view||"raw"===t.format||"tree"===t.format||(t.content=p(t.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",t=>{ed(t,t=>{let r=t.attr("src");if(!r||o.getByUri(r))return;let n=a.getResultUri(r);n&&t.attr("src",n)})})}),{blobCache:o,addFilter:t=>{l.push(t)},uploadImages:u,uploadImagesAuto:m,scanForImages:g,destroy:()=>{o.destroy(),a.destroy(),n=r=null}}},b8={remove_similar:!0,inherit:!1},b5={selector:"td,th",...b8},b6=V({tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...b5},tablecellverticalalign:{styles:{"vertical-align":"%value"},...b5},tablecellbordercolor:{styles:{borderColor:"%value"},...b5},tablecellclass:{classes:["%value"],...b5},tableclass:{selector:"table",classes:["%value"],...b8},tablecellborderstyle:{styles:{borderStyle:"%value"},...b5},tablecellborderwidth:{styles:{borderWidth:"%value"},...b5}}),b9=tU.each,b4=aV.DOM,b7=t=>I(t)&&O(t),ve=(t,r)=>{let n=r&&r.schema||ah({}),o=t=>{let r=T(t)?{name:t,classes:[],attrs:{}}:t,n=b4.create(r.name);return r.classes.length>0&&b4.addClass(n,r.classes.join(" ")),b4.setAttribs(n,r.attrs),n},a=(t,r,l)=>{let i;let s=r[0],d=b7(s)?s.name:void 0,c=((t,r)=>{let o=n.getElementRule(t.nodeName.toLowerCase()),a=null==o?void 0:o.parentsRequired;return!(!a||!a.length)&&(r&&el(a,r)?r:a[0])})(t,d);if(c)d===c?(i=s,r=r.slice(1)):i=c;else if(s)i=s,r=r.slice(1);else if(!l)return t;let u=i?o(i):b4.create("div");return u.appendChild(t),l&&tU.each(l,r=>{let n=o(r);u.insertBefore(n,t)}),a(u,r,b7(i)?i.siblings:void 0)},l=b4.create("div");if(t.length>0){let r=t[0],n=o(r),i=b7(r)?r.siblings:void 0;l.appendChild(a(n,t.slice(1),i))}return l},vt=t=>{let r="div",n={name:r,classes:[],attrs:{},selector:t=tU.trim(t)};return"*"!==t&&(r=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(t,r,o,a,l)=>{switch(r){case"#":n.attrs.id=o;break;case".":n.classes.push(o);break;case":":-1!==tU.inArray("checked disabled enabled read-only required".split(" "),o)&&(n.attrs[o]=o)}if("["===a){let t=l.match(/([\w\-]+)(?:\=\"([^\"]+))?/);t&&(n.attrs[t[1]]=t[2])}return""})),n.name=r||"div",n},vr=(t,r)=>{var n;let o="",a=i0(t);if(""===a)return"";let l=t=>T(t)?t.replace(/%(\w+)/g,""):"",i=(r,n)=>b4.getStyle(null!=n?n:t.getBody(),r,!0);if(T(r)){let n=t.formatter.get(r);if(!n)return"";r=n[0]}if("preview"in r){let t=r.preview;if(!1===t)return"";a=t||a}let s,d=r.block||r.inline||"span",c=T(n=r.selector)?(n=(n=n.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),tU.map(n.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{let r=tU.map(t.split(/(?:~\+|~|\+)/),vt),n=r.pop();return r.length&&(n.siblings=r),n}).reverse()):[];c.length>0?(c[0].name||(c[0].name=d),d=r.selector,s=ve(c,t)):s=ve([d],t);let u=b4.select(d,s)[0]||s.firstChild;b9(r.styles,(t,r)=>{let n=l(t);n&&b4.setStyle(u,r,n)}),b9(r.attributes,(t,r)=>{let n=l(t);n&&b4.setAttrib(u,r,n)}),b9(r.classes,t=>{let r=l(t);b4.hasClass(u,r)||b4.addClass(u,r)}),t.dispatch("PreviewFormats"),b4.setStyles(s,{position:"absolute",left:-65535}),t.getBody().appendChild(s);let m=i("fontSize"),f=/px$/.test(m)?parseInt(m,10):0;return b9(a.split(" "),t=>{let r=i(t,u);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(r)&&"#ffffff"===ak(r=i(t)).toLowerCase()||"color"===t&&"#000000"===ak(r).toLowerCase())){if("font-size"===t&&/em|%$/.test(r)){if(0===f)return;r=parseFloat(r)/(/%$/.test(r)?100:1)*f+"px"}"border"===t&&r&&(o+="padding:0 2px;"),o+=t+":"+r+";"}}),t.dispatch("AfterPreviewFormats"),b4.remove(s),o},vn=t=>{let r=(t=>{let r={},n=(t,o)=>{t&&(T(t)?(P(o)||(o=[o]),ed(o,t=>{M(t.deep)&&(t.deep=!cd(t)),M(t.split)&&(t.split=!cd(t)||cc(t)),M(t.remove)&&cd(t)&&!cc(t)&&(t.remove="none"),cd(t)&&cc(t)&&(t.mixed=!0,t.block_expand=!0),T(t.classes)&&(t.classes=t.classes.split(/\s+/))}),r[t]=o):eB(t,(t,r)=>{n(r,t)}))};return n((t=>{let r=t.dom,n=t.schema.type,o={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:t=>{r.setStyle(t,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:t=>{r.setStyle(t,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{let t={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},o={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==n?[o,t,r]:[t,o,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(t,r,n)=>nS(t)&&t.hasAttribute("href"),onformat:(t,n,o)=>{tU.each(o,(n,o)=>{r.setAttrib(t,o,n)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":t=>{var r;return null!==(r=null==t?void 0:t.customValue)&&void 0!==r?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return tU.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),t=>{o[t]={block:t,remove:"all"}}),o})(t)),n(b6()),n(iZ(t)),{get:t=>I(t)?r[t]:r,has:t=>ej(r,t),register:n,unregister:t=>(t&&r[t]&&delete r[t],r)}})(t),n=aY({});return(t=>{t.addShortcut("meta+b","","Bold"),t.addShortcut("meta+i","","Italic"),t.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)t.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);t.addShortcut("access+7","",["FormatBlock",!1,"p"]),t.addShortcut("access+8","",["FormatBlock",!1,"div"]),t.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(t=>{t.on("mouseup keydown",r=>{var n;((t,r,n)=>{let o=t.selection,a=t.getBody();gL(t,null,n),(8===r||46===r)&&o.isCollapsed()&&"\uFEFF"===o.getStart().innerHTML&&gL(t,dA(a,o.getStart()),!0),37!==r&&39!==r||gL(t,dA(a,o.getStart()),!0)})(t,r.keyCode,nM(n=t.selection.getRng().endContainer)&&e9(n.data,"\xa0"))})})(t),bl(t)||(n.set({}),t.on("NodeChange",r=>{py(t,r.element,n.get())}),t.on("FormatApply FormatRemove",r=>{let o=et.from(r.node).map(t=>d2(t)?t:t.startContainer).bind(t=>nS(t)?et.some(t):et.from(t.parentElement)).getOrThunk(()=>ph(t));py(t,o,n.get())})),{get:r.get,has:r.has,register:r.register,unregister:r.unregister,apply:(r,n,o)=>{((t,r,n,o)=>{bs(t).formatter.apply(r,n,o)})(t,r,n,o)},remove:(r,n,o,a)=>{((t,r,n,o,a)=>{bs(t).formatter.remove(r,n,o,a)})(t,r,n,o,a)},toggle:(r,n,o)=>{((t,r,n,o)=>{bs(t).formatter.toggle(r,n,o)})(t,r,n,o)},match:(r,n,o,a)=>bs(t).formatter.match(r,n,o,a),closest:r=>bs(t).formatter.closest(r),matchAll:(r,n)=>bs(t).formatter.matchAll(r,n),matchNode:(r,n,o,a)=>bs(t).formatter.matchNode(r,n,o,a),canApply:r=>bs(t).formatter.canApply(r),formatChanged:(r,o,a,l)=>bs(t).formatter.formatChanged(n,r,o,a,l),getCssText:Y(vr,t)}},vo=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},va=t=>{let r=a1(),n=aY(0),o=aY(0),a={data:[],typing:!1,beforeChange:()=>{((t,r,n)=>{bs(t).undoManager.beforeChange(r,n)})(t,n,r)},add:(l,i)=>bs(t).undoManager.add(a,o,n,r,l,i),dispatchChange:()=>{t.setDirty(!0);let r=h9(t);r.bookmark=lZ(t.selection),t.dispatch("change",{level:r,lastLevel:ek(a.data,o.get()).getOrUndefined()})},undo:()=>bs(t).undoManager.undo(a,n,o),redo:()=>{var r;return r=a.data,bs(t).undoManager.redo(o,r)},clear:()=>{((t,r,n)=>{bs(t).undoManager.clear(r,n)})(t,a,o)},reset:()=>{((t,r)=>{bs(t).undoManager.reset(r)})(t,a)},hasUndo:()=>bs(t).undoManager.hasUndo(a,o),hasRedo:()=>bs(t).undoManager.hasRedo(a,o),transact:r=>bs(t).undoManager.transact(a,n,r),ignore:r=>{((t,r,n)=>{bs(t).undoManager.ignore(r,n)})(t,n,r)},extra:(r,n)=>{((t,r,n,o,a)=>{bs(t).undoManager.extra(r,n,o,a)})(t,a,o,r,n)}};return bl(t)||((t,r,n)=>{let o=aY(!1),a=t=>{bn(r,!1,n),r.add({},t)};t.on("init",()=>{r.add()}),t.on("BeforeExecCommand",t=>{vo(t.command)||(bo(r,n),r.beforeChange())}),t.on("ExecCommand",t=>{vo(t.command)||a(t)}),t.on("ObjectResizeStart cut",()=>{r.beforeChange()}),t.on("SaveContent ObjectResized blur",a),t.on("dragend",a),t.on("keyup",n=>{let l=n.keyCode;if(n.isDefaultPrevented())return;let i=tL.os.isMacOS()&&"Meta"===n.key;(l>=33&&l<=36||l>=37&&l<=40||45===l||n.ctrlKey||i)&&(a(),t.nodeChanged()),46!==l&&8!==l||t.nodeChanged(),o.get()&&r.typing&&!bt(h9(t),r.data[0])&&(t.isDirty()||t.setDirty(!0),t.dispatch("TypingUndo"),o.set(!1),t.nodeChanged())}),t.on("keydown",t=>{let l=t.keyCode;if(t.isDefaultPrevented())return;if(l>=33&&l<=36||l>=37&&l<=40||45===l)return void(r.typing&&a(t));let i=t.ctrlKey&&!t.altKey||t.metaKey;if((l<16||l>20)&&224!==l&&91!==l&&!r.typing&&!i)return r.beforeChange(),bn(r,!0,n),r.add({},t),void o.set(!0);(tL.os.isMacOS()?t.metaKey:t.ctrlKey&&!t.altKey)&&r.beforeChange()}),t.on("mousedown",t=>{r.typing&&a(t)}),t.on("input",t=>{var r;t.inputType&&("insertReplacementText"===t.inputType||"insertText"===t.inputType&&null===t.data||"insertFromPaste"===(r=t).inputType||"insertFromDrop"===r.inputType)&&a(t)}),t.on("AddUndo Undo Redo ClearUndos",r=>{r.isDefaultPrevented()||t.nodeChanged()})})(t,a,n),t.addShortcut("meta+z","","Undo"),t.addShortcut("meta+y,meta+shift+z","","Redo"),a},vl=[9,27,cU.HOME,cU.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,cU.DOWN,cU.UP,cU.LEFT,cU.RIGHT].concat(tL.browser.isFirefox()?[224]:[]),vi="data-mce-placeholder",vs=t=>"keydown"===t.type||"keyup"===t.type,vd=t=>{let r=t.keyCode;return r===cU.BACKSPACE||r===cU.DELETE},vc=(t,r)=>({from:t,to:r}),vu=(t,r)=>fT(rc(t),rc(r.container())).map(t=>({block:t,position:r})),vm=(t,r)=>rW(r,t=>n4(t)||nq(t.dom),r=>rv(r,t)).filter(tJ).getOr(t),vf=(t,r)=>{let n=((t,r)=>{let n=rT(t);return eb(n,t=>r.isBlock(tY(t))).fold(V(n),t=>n.slice(0,t))})(t,r);return ed(n,na),n},vg=(t,r)=>eh(m$(r,t).reverse(),t=>oA(t)).each(na),vp=(t,r,n,o,a)=>{if(oA(n))return ot(n),dk(n.dom);0===em(rR(a),t=>!oA(t)).length&&oA(r)&&r4(a,rm("br"));let l=d_(n.dom,lL.before(a.dom));return ed(vf(r,o),t=>{r4(a,t)}),vg(t,r),l},vh=(t,r,n,o)=>{if(oA(n)){if(oA(r)){let t=ef((t=>{let r=(t,n)=>rB(t).fold(()=>n,t=>o.isInline(tY(t))?r(t,n.concat(ls(t))):n);return r(t,[])})(n),(t,r)=>(nr(t,r),r),oe());no(r),nt(r,t)}return na(n),dk(r.dom)}let a=dS(n.dom);return ed(vf(r,o),t=>{nt(n,t)}),vg(t,r),a},vb=(t,r)=>{dw(t,r.dom).bind(t=>et.from(t.getNode())).map(rc).filter(n3).each(na)},vv=(t,r,n,o)=>(vb(!0,r),vb(!1,n),(ry(n,r)?((t,r)=>{let n=m$(r,t);return et.from(n[n.length-1])})(n,r):et.none()).fold(Y(vh,t,r,n,o),Y(vp,t,r,n,o))),vy=(t,r,n,o,a)=>r?vv(t,o,n,a):vv(t,n,o,a),vC=(t,r)=>{var n,o;let a=rc(t.getBody());return(n=a.dom,(o=t.selection.getRng()).collapsed?((t,r,n)=>{let o=vu(t,lL.fromRangeStart(n)),a=o.bind(n=>dy(r,t,n.position).bind(n=>vu(t,n).map(n=>nH(n.position.getNode())&&!oA(n.block)?dw(!1,n.block.dom).bind(o=>o.isEqual(n.position)?dy(r,t,o).bind(r=>vu(t,r)):et.some(n)).getOr(n):n)));return tH(o,a,vc).filter(r=>{var n;return!rv(r.from.block,r.to.block)&&((t,r)=>{let n=rc(t);return rv(vm(n,r.from.block),vm(n,r.to.block))})(t,r)&&!1===nV((n=r).from.block.dom)&&!1===nV(n.to.block.dom)&&(t=>{let r=t=>n8(t)||oH(t.dom);return r(t.from.block)&&r(t.to.block)})(r)})})(n,r,o):et.none()).map(n=>()=>{vy(a,r,n.from.block,n.to.block,t.schema).each(r=>{t.selection.setRng(r.toRange())})})},vE=(t,r)=>rV(rc(r),n4,Y(rv,t)).isSome(),vw=t=>{let r=rc(t.getBody());return((t,r)=>{let n=d_(t.dom,lL.fromRangeStart(r)).isNone(),o=dx(t.dom,lL.fromRangeEnd(r)).isNone();return!(vE(t,r.startContainer)||vE(t,r.endContainer))&&n&&o})(r,t.selection.getRng())?et.some(()=>{t.setContent(""),t.selection.setCursorLocation()}):((t,r,n)=>{let o=r.getRng();return tH(fT(t,rc(o.startContainer)),fT(t,rc(o.endContainer)),(a,l)=>rv(a,l)?et.none():et.some(()=>{o.deleteContents(),vy(t,!0,a,l,n).each(t=>{r.setRng(t.toRange())})})).getOr(et.none())})(r,t.selection,t.schema)},vx=(t,r)=>t.selection.isCollapsed()?et.none():vw(t),v_=(t,r,n,o,a)=>et.from(r._selectionOverrides.showCaret(t,n,o,a)),vk=(t,r)=>t.dispatch("BeforeObjectSelected",{target:r}).isDefaultPrevented()?et.none():et.some((t=>{let r=t.ownerDocument.createRange();return r.selectNode(t),r})(r)),vS=(t,r,n)=>r.collapsed?((t,r,n)=>{let o=da(1,t.getBody(),r),a=lL.fromRangeStart(o),l=a.getNode();if(sZ(l))return v_(1,t,l,!a.isAtEnd(),!1);let i=a.getNode(!0);if(sZ(i))return v_(1,t,i,!1,!1);let s=f7(t.dom.getRoot(),a.getNode());return sZ(s)?v_(1,t,s,!1,n):et.none()})(t,r,n).getOr(r):r,vN=t=>mz(t)||mM(t),vR=t=>mj(t)||mF(t),vA=(t,r,n,o,a,l)=>{var i;v_(o,t,l.getNode(!a),a,!0).each(n=>{if(r.collapsed){let t=r.cloneRange();a?t.setEnd(n.startContainer,n.startOffset):t.setStart(n.endContainer,n.endOffset),t.deleteContents()}else r.deleteContents();t.selection.setRng(n)}),i=t.dom,nM(n)&&0===n.data.length&&i.remove(n)},vT=(t,r)=>((t,r)=>{let n=t.selection.getRng();if(!nM(n.commonAncestorContainer))return et.none();let o=r?m.Forwards:m.Backwards,a=dp(t.getBody()),l=Y(dd,r?a.next:a.prev),i=r?vN:vR,s=di(o,t.getBody(),n),d=l(s),c=d?f_(r,d):d;if(!c||!dc(s,c))return et.none();if(i(c))return et.some(()=>vA(t,n,s.getNode(),o,r,c));let u=l(c);return u&&i(u)&&dc(c,u)?et.some(()=>vA(t,n,s.getNode(),o,r,u)):et.none()})(t,r),vO=(t,r)=>{let n=t.getBody();return r?dk(n).filter(mz):dS(n).filter(mj)},vB=t=>{let r=t.selection.getRng();return!r.collapsed&&(vO(t,!0).exists(t=>t.isEqual(lL.fromRangeStart(r)))||vO(t,!1).exists(t=>t.isEqual(lL.fromRangeEnd(r))))},vP=l3([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),vD=(t,r,n,o)=>dy(r,t,n).bind(a=>{var l;return I(l=a.getNode())&&(n4(rc(l))||n6(rc(l)))||((t,r,n,o,a)=>{let l=r=>a.isInline(r.nodeName.toLowerCase())&&!s9(n,o,t);return dl(!r,n).fold(()=>dl(r,o).fold(Z,l),l)})(t,r,n,a,o)?et.none():r&&nV(a.getNode())||!r&&nV(a.getNode(!0))?((t,r,n,o)=>{let a=o.getNode(!r);return fT(rc(t),rc(n.getNode())).map(t=>oA(t)?vP.remove(t.dom):vP.moveToElement(a)).orThunk(()=>et.some(vP.moveToElement(a)))})(t,r,n,a):r&&mj(n)||!r&&mz(n)?et.some(vP.moveToPosition(a)):et.none()}),vL=(t,r)=>et.from(f7(t.getBody(),r)),vM=(t,r)=>{let n=t.selection.getNode();return vL(t,n).filter(nV).fold(()=>((t,r,n,o)=>{var a;let l=da(r?1:-1,t,n),i=lL.fromRangeStart(l),s=rc(t);return!r&&mj(i)?et.some(vP.remove(i.getNode(!0))):r&&mz(i)?et.some(vP.remove(i.getNode())):!r&&mz(i)&&m1(s,i,o)?m2(s,i,o).map(t=>vP.remove(t.getNode())):r&&mj(i)&&m0(s,i,o)?m3(s,i,o).map(t=>vP.remove(t.getNode())):((t,r)=>{let n=r.getNode(!t);return nS(n)&&n.getAttribute("data-mce-caret")===(t?"after":"before")})(r,i)?(F(a=i.getNode(!r))?et.none():r&&nV(a.nextSibling)?et.some(vP.moveToElement(a.nextSibling)):!r&&nV(a.previousSibling)?et.some(vP.moveToElement(a.previousSibling)):et.none()).orThunk(()=>vD(t,r,i,o)):vD(t,r,i,o).bind(r=>r.fold(t=>et.some(vP.remove(t)),t=>et.some(vP.moveToElement(t)),r=>s9(i,r,t)?et.none():et.some(vP.moveToPosition(r))))})(t.getBody(),r,t.selection.getRng(),t.schema).map(n=>()=>n.fold(n=>(t._selectionOverrides.hideFakeCaret(),fy(t,r,rc(n)),!0),n=>{let o=r?lL.before(n):lL.after(n);return t.selection.setRng(o.toRange()),!0},r=>(t.selection.setRng(r.toRange()),!0))),()=>et.some(H))},vF=t=>{let r=t.dom,n=t.selection,o=f7(t.getBody(),n.getNode());if(nq(o)&&r.isBlock(o)&&r.isEmpty(o)){let t=r.create("br",{"data-mce-bogus":"1"});r.setHTML(o,""),o.appendChild(t),n.setRng(lL.before(t).toRange())}return!0},vI=(t,r)=>t.selection.isCollapsed()?vM(t,r):((t,r)=>{let n=t.selection.getNode();return nV(n)&&!nW(n)?vL(t,n.parentNode).filter(nV).fold(()=>et.some(()=>{ed(nE(rc(t.getBody()),".mce-offscreen-selection"),na),fy(t,r,rc(t.selection.getNode())),fO(t)}),()=>et.some(H)):vB(t)?et.some(()=>{fD(t,t.selection.getRng(),rc(t.getBody()))}):et.none()})(t,r),vU=(t,r)=>t.selection.isCollapsed()?((t,r)=>{let n=lL.fromRangeStart(t.selection.getRng());return dy(r,t.getBody(),n).filter(t=>r?mD(t):mL(t)).bind(t=>s4(r?0:-1,t)).map(r=>()=>t.selection.select(r))})(t,r):et.none(),vz=t=>nM(t)&&"\uFEFF"===t.data[0],vj=t=>nM(t)&&"\uFEFF"===t.data[t.data.length-1],vH=t=>{var r;return(null!==(r=t.ownerDocument)&&void 0!==r?r:document).createTextNode("\uFEFF")},v$=(t,r)=>t?(t=>{var r;if(nM(t.previousSibling))return vj(t.previousSibling)||t.previousSibling.appendData("\uFEFF"),t.previousSibling;if(nM(t))return vz(t)||t.insertData(0,"\uFEFF"),t;{let n=vH(t);return null===(r=t.parentNode)||void 0===r||r.insertBefore(n,t),n}})(r):(t=>{var r,n;if(nM(t.nextSibling))return vz(t.nextSibling)||t.nextSibling.insertData(0,"\uFEFF"),t.nextSibling;if(nM(t))return vj(t)||t.appendData("\uFEFF"),t;{let o=vH(t);return t.nextSibling?null===(r=t.parentNode)||void 0===r||r.insertBefore(o,t.nextSibling):null===(n=t.parentNode)||void 0===n||n.appendChild(o),o}})(r),vq=Y(v$,!0),vV=Y(v$,!1),vW=(t,r)=>nM(t.container())?v$(r,t.container()):v$(r,t.getNode()),vK=(t,r)=>{let n=r.get();return n&&t.container()===n&&oo(n)},vY=(t,r)=>r.fold(r=>{sG(t.get());let n=vq(r);return t.set(n),et.some(lL(n,n.length-1))},r=>dk(r).map(r=>{if(vK(r,t))return lL(t.get(),1);{sG(t.get());let n=vW(r,!0);return t.set(n),lL(n,1)}}),r=>dS(r).map(r=>{if(vK(r,t)){let r=t.get();return lL(r,r.length-1)}{sG(t.get());let n=vW(r,!1);return t.set(n),lL(n,n.length-1)}}),r=>{sG(t.get());let n=vV(r);return t.set(n),et.some(lL(n,1))}),vG=(t,r)=>{for(let n=0;n<t.length;n++){let o=t[n].apply(null,r);if(o.isSome())return o}return et.none()},vX=l3([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),vQ=(t,r)=>s6(r,t)||t,vJ=(t,r,n)=>{let o=fk(n),a=vQ(r,o.container());return fx(t,a,o).fold(()=>dx(a,o).bind(Y(fx,t,a)).map(t=>vX.before(t)),et.none)},vZ=(t,r)=>null===dA(t,r),v0=(t,r,n)=>fx(t,r,n).filter(Y(vZ,r)),v1=(t,r,n)=>{let o=fS(n);return v0(t,r,o).bind(t=>d_(t,o).isNone()?et.some(vX.start(t)):et.none())},v2=(t,r,n)=>{let o=fk(n);return v0(t,r,o).bind(t=>dx(t,o).isNone()?et.some(vX.end(t)):et.none())},v3=(t,r,n)=>{let o=fS(n),a=vQ(r,o.container());return fx(t,a,o).fold(()=>d_(a,o).bind(Y(fx,t,a)).map(t=>vX.after(t)),et.none)},v8=t=>!fw(v6(t)),v5=(t,r,n)=>vG([vJ,v1,v2,v3],[t,r,n]).filter(v8),v6=t=>t.fold(W,W,W,W),v9=t=>t.fold(V("before"),V("start"),V("end"),V("after")),v4=t=>t.fold(vX.before,vX.before,vX.after,vX.after),v7=t=>t.fold(vX.start,vX.start,vX.end,vX.end),ye=(t,r,n,o,a,l)=>tH(fx(r,n,o),fx(r,n,a),(r,o)=>r!==o&&((t,r,n)=>{let o=s6(r,t),a=s6(n,t);return I(o)&&o===a})(n,r,o)?vX.after(t?r:o):l).getOr(l),yt=(t,r)=>t.fold(ee,t=>!(v9(t)===v9(r)&&v6(t)===v6(r))),yr=(t,r)=>t?r.fold($(et.some,vX.start),et.none,$(et.some,vX.after),et.none):r.fold(et.none,$(et.some,vX.before),et.none,$(et.some,vX.end)),yn=(t,r,n)=>(r.setRng(lL(n.container(),n.offset()+(t?1:-1)).toRange()),r.getSel().modify("move",t?"forward":"backward","word"),!0);(l=g||(g={}))[l.Br=0]="Br",l[l.Block=1]="Block",l[l.Wrap=2]="Wrap",l[l.Eol=3]="Eol";let yo=(t,r)=>t===m.Backwards?eE(r):r,ya=(t,r,n)=>t===m.Forwards?r.next(n):r.prev(n),yl=(t,r,n,o)=>nH(o.getNode(r===m.Forwards))?g.Br:!1===s9(n,o)?g.Block:g.Wrap,yi=(t,r,n,o)=>{let a=dp(n),l=o,i=[];for(;l;){let n=ya(r,a,l);if(!n)break;if(nH(n.getNode(!1)))return r===m.Forwards?{positions:yo(r,i).concat([n]),breakType:g.Br,breakAt:et.some(n)}:{positions:yo(r,i),breakType:g.Br,breakAt:et.some(n)};if(n.isVisible()){if(t(l,n)){let t=yl(0,r,l,n);return{positions:yo(r,i),breakType:t,breakAt:et.some(n)}}i.push(n),l=n}else l=n}return{positions:yo(r,i),breakType:g.Eol,breakAt:et.none()}},ys=(t,r,n,o)=>r(n,o).breakAt.map(o=>{let a=r(n,o).positions;return t===m.Backwards?a.concat(o):[o].concat(a)}).getOr([]),yd=(t,r)=>eg(t,(t,n)=>t.fold(()=>et.some(n),o=>tH(eS(o.getClientRects()),eS(n.getClientRects()),(t,a)=>{let l=Math.abs(r-t.left);return Math.abs(r-a.left)<=l?n:o}).or(t)),et.none()),yc=(t,r)=>eS(r.getClientRects()).bind(r=>yd(t,r.left)),yu=Y(yi,lL.isAbove,-1),ym=Y(yi,lL.isBelow,1),yf=Y(ys,-1,yu),yg=Y(ys,1,ym),yp=(t,r)=>yu(t,r).breakAt.isNone(),yh=(t,r)=>ym(t,r).breakAt.isNone(),yb=(t,r)=>yc(yf(t,r),r),yv=(t,r)=>yc(yg(t,r),r),yy=(t,r)=>Math.abs(t.left-r),yC=(t,r)=>Math.abs(t.right-r),yE=(t,r)=>eG(t,(t,n)=>{let o=Math.min(yy(t,r),yC(t,r)),a=Math.min(yy(n,r),yC(n,r));return a===o&&eH(n,"node")&&nV(n.node)||a<o?n:t}),yw=t=>{let r=r=>es(r,r=>{let n=lf(r);return n.node=t,n});if(nS(t))return r(t.getClientRects());if(nM(t)){let n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),r(n.getClientRects())}return[]},yx=t=>ey(t,yw);(i=p||(p={}))[i.Up=-1]="Up",i[i.Down=1]="Down";let y_=(t,r,n,o,a,l)=>{let i=0,s=[],d=o=>{let l=yx([o]);-1===t&&(l=l.reverse());for(let t=0;t<l.length;t++){let o=l[t];if(!n(o,c)){if(s.length>0&&r(o,eQ(s))&&i++,o.line=i,a(o))return!0;s.push(o)}}return!1},c=eQ(l.getClientRects());if(!c)return s;let u=l.getNode();return u&&(d(u),((t,r,n,o)=>{let a=o;for(;a=s5(a,t,ov,r);)if(n(a))return})(t,o,d,u)),s},yk=Y(y_,p.Up,lh,lb),yS=Y(y_,p.Down,lb,lh),yN=t=>eQ(t.getClientRects()),yR=t=>r=>r.line>t,yA=t=>r=>r.line===t,yT=(t,r)=>{t.selection.setRng(r),uN(t,t.selection.getRng())},yO=(t,r,n)=>et.some(vS(t,r,n)),yB=(t,r,n,o,a,l)=>{let i=r===m.Forwards,s=dp(t.getBody()),d=Y(dd,i?s.next:s.prev),c=i?o:a;if(!n.collapsed){let o=ly(n);if(l(o))return v_(r,t,o,r===m.Backwards,!1);if(vB(t)){let t=n.cloneRange();return t.collapse(r===m.Backwards),et.from(t)}}let u=di(r,t.getBody(),n);if(c(u))return vk(t,u.getNode(!i));let f=d(u),g=om(n);if(!f)return g?et.some(n):et.none();if(c(f=f_(i,f)))return v_(r,t,f.getNode(!i),i,!1);let p=d(f);return p&&c(p)&&dc(f,p)?v_(r,t,p.getNode(!i),i,!1):g?yO(t,f.toRange(),!1):et.none()},yP=(t,r,n,o,a,l)=>{let i;let s=di(r,t.getBody(),n),d=eQ(s.getClientRects()),c=r===p.Down,u=t.getBody();if(!d)return et.none();if(vB(t)){let t=c?lL.fromRangeEnd(n):lL.fromRangeStart(n);return(c?yv:yb)(u,t).orThunk(()=>et.from(t)).map(t=>t.toRange())}let m=em((c?yS:yk)(u,yR(1),s),yA(1)),f=d.left,g=yE(m,f);if(g&&l(g.node)){let n=Math.abs(f-g.left),o=Math.abs(f-g.right);return v_(r,t,g.node,n<o,!1)}if(i=o(s)?s.getNode():a(s)?s.getNode(!0):ly(n)){let n=((t,r,n,o)=>{let a,l,i,s;let d=dp(r),c=[],u=0;1===t?(a=d.next,l=lb,i=lh,s=lL.after(o)):(a=d.prev,l=lh,i=lb,s=lL.before(o));let m=yN(s);do{if(!s.isVisible())continue;let t=yN(s);if(i(t,m))continue;c.length>0&&l(t,eQ(c))&&u++;let r=lf(t);if(r.position=s,r.line=u,n(r))break;c.push(r)}while(s=a(s));return c})(r,u,yR(1),i),o=yE(em(n,yA(1)),f);if(o||(o=eQ(em(n,yA(0)))))return yO(t,o.position.toRange(),!1)}return 0===m.length?yD(t,c).filter(c?a:o).map(r=>vS(t,r.toRange(),!1)):et.none()},yD=(t,r)=>{var n,o;let a=t.selection.getRng(),l=r?lL.fromRangeEnd(a):lL.fromRangeStart(a),i=(n=l.container(),o=t.getBody(),rV(rc(n),t=>nq(t.dom),t=>t.dom===o).map(t=>t.dom).getOr(o));return r?eN(ym(i,l).positions):eS(yu(i,l).positions)},yL=(t,r,n)=>yD(t,r).filter(n).exists(r=>(t.selection.setRng(r.toRange()),!0)),yM=(t,r)=>{let n=t.dom.createRng();n.setStart(r.container(),r.offset()),n.setEnd(r.container(),r.offset()),t.selection.setRng(n)},yF=(t,r)=>{t?r.setAttribute("data-mce-selected","inline-boundary"):r.removeAttribute("data-mce-selected")},yI=(t,r,n)=>vY(r,n).map(r=>(yM(t,r),n)),yU=(t,r,n)=>{let o=t.getBody(),a=((t,r,n)=>{let o=lL.fromRangeStart(t);if(t.collapsed)return o;{let a=lL.fromRangeEnd(t);return n?d_(r,a).getOr(a):dx(r,o).getOr(o)}})(t.selection.getRng(),o,n);return((t,r,n,o)=>{let a=f_(t,o),l=v5(r,n,a);return v5(r,n,a).bind(Y(yr,t)).orThunk(()=>((t,r,n,o,a)=>{let l=f_(t,a);return dy(t,n,l).map(Y(f_,t)).fold(()=>o.map(v4),a=>v5(r,n,a).map(Y(ye,t,r,n,l,a)).filter(Y(yt,o))).filter(v8)})(t,r,n,l,o))})(n,Y(fE,t),o,a).bind(n=>yI(t,r,n))},yz=(t,r,n)=>!!iJ(t)&&yU(t,r,n).isSome(),yj=(t,r,n)=>!!iJ(r)&&((t,r)=>{let n=r.selection.getRng(),o=t?lL.fromRangeEnd(n):lL.fromRangeStart(n);return!!U(r.selection.getSel().modify)&&(t&&oi(o)?yn(!0,r.selection,o):!(t||!os(o))&&yn(!1,r.selection,o))})(t,r),yH=t=>{let r=aY(null),n=Y(fE,t);return t.on("NodeChange",o=>{var a;iJ(t)&&(((t,r,n)=>{let o=em(es(nE(rc(r.getRoot()),'*[data-mce-selected="inline-boundary"]'),t=>t.dom),t),a=em(n,t);ed(ew(o,a),Y(yF,!1)),ed(ew(a,o),Y(yF,!0))})(n,t.dom,o.parents),((t,r)=>{let n=r.get();if(t.selection.isCollapsed()&&!t.composing&&n){let o=lL.fromRangeStart(t.selection.getRng());lL.isTextPosition(o)&&!(oi(o)||os(o))&&(yM(t,sY(n,o)),r.set(null))}})(t,r),a=o.parents,t.selection.isCollapsed()&&ed(em(a,n),o=>{let a=lL.fromRangeStart(t.selection.getRng());v5(n,t.getBody(),a).bind(n=>yI(t,r,n))}))}),r},y$=Y(yj,!0),yq=Y(yj,!1),yV=(t,r,n)=>{if(iJ(t)){let o=yD(t,r).getOrThunk(()=>{let n=t.selection.getRng();return r?lL.fromRangeEnd(n):lL.fromRangeStart(n)});return v5(Y(fE,t),t.getBody(),o).exists(r=>vY(n,v4(r)).exists(r=>(yM(t,r),!0)))}return!1},yW=(t,r)=>n=>vY(r,n).map(r=>()=>yM(t,r)),yK=(t,r,n,o)=>{let a=t.getBody(),l=Y(fE,t);t.undoManager.ignore(()=>{t.selection.setRng(((t,r)=>{let n=document.createRange();return n.setStart(t.container(),t.offset()),n.setEnd(r.container(),r.offset()),n})(n,o)),fR(t),v5(l,a,lL.fromRangeStart(t.selection.getRng())).map(v7).bind(yW(t,r)).each(J)}),t.nodeChanged()},yY=(t,r,n)=>{if(t.selection.isCollapsed()&&iJ(t)){let o=lL.fromRangeStart(t.selection.getRng());return((t,r,n,o)=>{var a;let l=(a=t.getBody(),s6(o.container(),a)||a),i=Y(fE,t),s=v5(i,l,o);return s.bind(t=>n?t.fold(V(et.some(v7(t))),et.none,V(et.some(v4(t))),et.none):t.fold(et.none,V(et.some(v4(t))),et.none,V(et.some(v7(t))))).map(yW(t,r)).getOrThunk(()=>{let a=dC(n,l,o),d=a.bind(t=>v5(i,l,t));return tH(s,d,()=>fx(i,l,o).bind(r=>tH(dk(r),dS(r),(t,n)=>{let o=f_(!0,t),a=f_(!1,n);return dx(r,o).forall(t=>t.isEqual(a))}).getOr(!0)?et.some(()=>{fy(t,n,rc(r))}):et.none())).getOrThunk(()=>d.bind(()=>a.map(a=>()=>{n?yK(t,r,o,a):yK(t,r,a,o)})))})})(t,r,n,o)}return et.none()},yG=(t,r)=>{let n=rc(t.getBody()),o=m$(rc(t.selection.getStart()),n);return eb(o,r).fold(V(o),t=>o.slice(0,t))},yX=t=>1===rD(t),yQ=(t,r)=>{let n=Y(gj,t);return ey(r,t=>n(t)?[t.dom]:[])},yJ=t=>{let r=yG(t,r=>t.schema.isBlock(tY(r)));return yQ(t,r)},yZ=(t,r)=>{let n=em(yG(t,r=>t.schema.isBlock(tY(r))||rD(r)>1),yX);return eN(n).bind(o=>fB(r,lL.fromRangeStart(t.selection.getRng()),o.dom)&&!cf(o)?et.some(()=>((t,r,n,o)=>{let a=yQ(r,o);if(0===a.length)fy(r,t,n);else{let t=gz(n.dom,a);r.selection.setRng(t.toRange())}})(r,t,o,n)):et.none())},y0=(t,r)=>{let n=t.selection.getStart(),o=((t,r)=>{let n=r.parentElement;return nH(r)&&!D(n)&&t.dom.isEmpty(n)})(t,n)||cf(rc(n))?gz(n,r):((t,r)=>{let{caretContainer:n,caretPosition:o}=gU(r);return t.insertNode(n.dom),o})(t.selection.getRng(),r);t.selection.setRng(o.toRange())},y1=t=>nM(t.startContainer),y2=t=>{let r=t.selection.getRng();return 0===r.startOffset&&y1(r)&&((t,r)=>{let n=r.startContainer.parentElement;return!D(n)&&gj(t,rc(n))})(t,r)&&((t=>{let r=t.startContainer.parentNode,n=t.endContainer.parentNode;return!D(r)&&!D(n)&&r.isEqualNode(n)})(r)&&(t=>{let r=t.endContainer;return t.endOffset===(nM(r)?r.length:r.childNodes.length)})(r)||!r.endContainer.isEqualNode(r.commonAncestorContainer))},y3=(t,r)=>t.selection.isCollapsed()?yZ(t,r):(t=>{if(y2(t)){let r=yJ(t);return et.some(()=>{fR(t),((t,r)=>{let n=ew(r,yJ(t));n.length>0&&y0(t,n)})(t,r)})}return et.none()})(t),y8=(t,r)=>rV(t,t=>dR(t.dom),t=>r.isBlock(tY(t))).isSome(),y5=t=>((t=>{let r=t.selection.getRng();return r.collapsed&&(y1(r)||t.dom.isEmpty(r.startContainer))&&!y8(rc(t.selection.getStart()),t.schema)})(t)&&y0(t,[]),!0),y6=(t,r,n)=>I(n)?et.some(()=>{t._selectionOverrides.hideFakeCaret(),fy(t,r,rc(n))}):et.none(),y9=(t,r)=>t.selection.isCollapsed()?((t,r)=>{let n=r?mM:mF,o=di(r?m.Forwards:m.Backwards,t.getBody(),t.selection.getRng());return n(o)?y6(t,r,o.getNode(!r)):et.from(f_(r,o)).filter(t=>n(t)&&dc(o,t)).bind(n=>y6(t,r,n.getNode(!r)))})(t,r):((t,r)=>{let n=t.selection.getNode();return nY(n)?y6(t,r,n):et.none()})(t,r),y4=t=>to(null!=t?t:"").getOr(0),y7=(t,r)=>(t||"table"===tY(r)?"margin":"padding")+("rtl"===r3(r,"direction")?"-right":"-left"),Ce=t=>{let r=Cr(t);return!t.mode.isReadOnly()&&(r.length>1||eC(r,r=>{let n=y7(iM(t),r),o=r5(r,n).map(y4).getOr(0);return"false"!==t.dom.getContentEditable(r.dom)&&o>0}))},Ct=t=>n5(t)||n6(t),Cr=t=>em(ni(t.selection.getSelectedBlocks()),t=>!Ct(t)&&!rx(t).exists(Ct)&&rW(t,t=>nq(t.dom)||nV(t.dom)).exists(t=>nq(t.dom))),Cn=(t,r)=>{var n,o;let{dom:a}=t,l=iF(t),i=null!==(o=null===(n=/[a-z%]+$/i.exec(l))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",s=y4(l),d=iM(t);ed(Cr(t),t=>{((t,r,n,o,a,l)=>{let i=y7(n,rc(l)),s=y4(t.getStyle(l,i));if("outdent"===r){let r=Math.max(0,s-o);t.setStyle(l,i,r?r+a:"")}else t.setStyle(l,i,s+o+a)})(a,r,d,s,i,t.dom)})},Co=t=>Cn(t,"outdent"),Ca=t=>{if(t.selection.isCollapsed()&&Ce(t)){let r=t.dom,n=t.selection.getRng(),o=lL.fromRangeStart(n),a=r.getParent(n.startContainer,r.isBlock);if(null!==a&&mY(rc(a),o,t.schema))return et.some(()=>Co(t))}return et.none()},Cl=(t,r,n)=>eA([Ca,vI,vT,(t,n)=>yY(t,r,n),vC,f4,vU,y9,vx,y3],r=>r(t,n)).filter(r=>t.selection.isEditable()),Ci=(t,r)=>{t.addCommand("delete",()=>{((t,r)=>{Cl(t,r,!1).fold(()=>{t.selection.isEditable()&&(fR(t),fO(t))},J)})(t,r)}),t.addCommand("forwardDelete",()=>{((t,r)=>{Cl(t,r,!0).fold(()=>{t.selection.isEditable()&&fN(t,"ForwardDelete")},J)})(t,r)})},Cs=t=>void 0===t.touches||1!==t.touches.length?et.none():et.some(t.touches[0]),Cd=(t,r)=>ej(t,r.nodeName),Cc=(t,r)=>!!nM(r)||!!nS(r)&&!(Cd(t.getBlockElements(),r)||dj(r)||oV(t,r)||oO(r)),Cu=(t,r)=>{if(nM(r)){if(0===r.data.length)return!0;if(/^\s+$/.test(r.data))return!r.nextSibling||Cd(t,r.nextSibling)||oO(r.nextSibling)}return!1},Cm=t=>t.dom.create(ih(t),ib(t)),Cf=t=>{let r=t.dom,n=t.selection,o=t.schema,a=o.getBlockElements(),l=n.getStart(),i=t.getBody(),s,d,c=!1,u=ih(t);if(!l||!nS(l))return;let m=i.nodeName.toLowerCase();if(!o.isValidChild(m,u.toLowerCase())||ei(mH(rc(l),rc(i)),t=>Cd(a,t.dom)))return;let f=n.getRng(),{startContainer:g,startOffset:p,endContainer:h,endOffset:b}=f,v=uG(t),y=i.firstChild;for(;y;)if(nS(y)&&oj(o,y),Cc(o,y)){if(Cu(a,y)){d=y,y=y.nextSibling,r.remove(d);continue}s||(s=Cm(t),i.insertBefore(s,y),c=!0),d=y,y=y.nextSibling,s.appendChild(d)}else s=null,y=y.nextSibling;c&&v&&(f.setStart(g,p),f.setEnd(h,b),n.setRng(f),t.nodeChanged())},Cg=(t,r,n)=>{let o=rc(Cm(t)),a=oe();nt(o,a),n(r,o);let l=document.createRange();return l.setStartBefore(a.dom),l.setEndBefore(a.dom),l},Cp=t=>r=>-1!==(" "+r.attr("class")+" ").indexOf(t),Ch=(t,r,n)=>function(o){let a=arguments,l=a[a.length-2],i=l>0?r.charAt(l-1):"";if('"'===i)return o;if(">"===i){let t=r.lastIndexOf("<",l);if(-1!==t&&-1!==r.substring(t,l).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(a[0])+'">'+t.dom.encode("string"==typeof a[1]?a[1]:a[0])+"</span>"},Cb=(t,r)=>{r.hasAttribute("data-mce-caret")&&(ou(r),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(r))},Cv=(t,r)=>{let n=rG(rc(t.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull();if(n)return"compositionstart"===r.type?(r.preventDefault(),r.stopPropagation(),void Cb(t,n)):void(ol(n)&&(Cb(t,n),t.undoManager.add()))},Cy=(t,r,n)=>{let o=dp(t.getBody()),a=Y(dd,1===r?o.next:o.prev);if(n.collapsed){let o=t.dom.getParent(n.startContainer,"PRE");if(!o)return;if(!a(lL.fromRangeStart(n))){let n=rc((t=>{let r=t.dom.create(ih(t));return r.innerHTML='<br data-mce-bogus="1">',r})(t));1===r?r7(rc(o),n):r4(rc(o),n),t.selection.select(n.dom,!0),t.selection.collapse()}}},CC=(t,r)=>{var n;return((t,r)=>{let n=r?m.Forwards:m.Backwards,o=t.selection.getRng();return yB(t,n,o,mz,mj,nV).orThunk(()=>(Cy(t,n,o),et.none()))})(t,(n=t.selection,fw(r?n.getEnd(!0):n.getStart(!0))?!r:r)).exists(r=>(yT(t,r),!0))},CE=(t,r)=>((t,r)=>{let n=r?1:-1,o=t.selection.getRng();return yP(t,n,o,t=>mz(t)||mI(t),t=>mj(t)||mU(t),nV).orThunk(()=>(Cy(t,n,o),et.none()))})(t,r).exists(r=>(yT(t,r),!0)),Cw=(t,r)=>yL(t,r,r?mj:mz),Cx=(t,r)=>vO(t,!r).map(n=>{let o=n.toRange(),a=t.selection.getRng();return r?o.setStart(a.startContainer,a.startOffset):o.setEnd(a.endContainer,a.endOffset),o}).exists(r=>(yT(t,r),!0)),C_=t=>el(["figcaption"],tY(t)),Ck=(t,r)=>!!t.selection.isCollapsed()&&((t,r)=>{let n=rc(t.getBody()),o=lL.fromRangeStart(t.selection.getRng());return((t,r,n)=>{let o=Y(rv,r);return rW(rc(t.container()),t=>n.isBlock(tY(t)),o).filter(C_)})(o,n,t.schema).exists(()=>{if(r?yh(n.dom,o):yp(n.dom,o)){let o=Cg(t,n,r?nt:ne);return t.selection.setRng(o),!0}return!1})})(t,r),CS=(t,r)=>r?et.from(t.dom.getParent(t.selection.getNode(),"details")).map(r=>((t,r)=>{let n=t.selection.getRng(),o=lL.fromRangeStart(n);return!(t.getBody().lastChild!==r||!yh(r,o)||(t.execCommand("InsertNewBlockAfter"),0))})(t,r)).getOr(!1):et.from(t.dom.getParent(t.selection.getNode(),"summary")).bind(r=>et.from(t.dom.getParent(r,"details")).map(n=>((t,r,n)=>{let o=t.selection.getRng(),a=lL.fromRangeStart(o);return!(t.getBody().firstChild!==r||!yp(n,a)||(t.execCommand("InsertNewBlockBefore"),0))})(t,n,r))).getOr(!1),CN={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},CR=(t,r)=>r.keyCode===t.keyCode&&r.shiftKey===t.shiftKey&&r.altKey===t.altKey&&r.ctrlKey===t.ctrlKey&&r.metaKey===t.metaKey,CA=(t,...r)=>()=>t.apply(null,r),CT=(t,r)=>eh(ey(es(t,t=>({...CN,...t})),t=>CR(t,r)?[t]:[]),t=>t.action()),CO=(t,r)=>eA(ey(es(t,t=>({...CN,...t})),t=>CR(t,r)?[t]:[]),t=>t.action()),CB=(t,r)=>{let n=r?m.Forwards:m.Backwards,o=t.selection.getRng();return yB(t,n,o,mM,mF,nY).exists(r=>(yT(t,r),!0))},CP=(t,r)=>{let n=t.selection.getRng();return yP(t,r?1:-1,n,mM,mF,nY).exists(r=>(yT(t,r),!0))},CD=(t,r)=>yL(t,r,r?mF:mM),CL=l3([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),CM={...CL,none:t=>CL.none(t)},CF=(t,r,n)=>ey(rT(t),t=>rh(t,r)?n(t)?[t]:[]:CF(t,r,n)),CI=(t,r)=>rX(t,"table",r),CU=(t,r,n,o,a=ee)=>{let l=1===o;if(!l&&n<=0)return CM.first(t[0]);if(l&&n>=t.length-1)return CM.last(t[t.length-1]);{let l=n+o,i=t[l];return a(i)?CM.middle(r,i):CU(t,r,l,o,a)}},Cz=(t,r)=>CI(t,r).bind(r=>{let n=CF(r,"th,td",ee);return eb(n,r=>rv(t,r)).map(t=>({index:t,all:n}))}),Cj=(t,r,n,o,a)=>eg(em(ey(nE(rc(n),"td,th,caption").map(t=>t.dom),r=>{var n;let o={left:(n=lf(r.getBoundingClientRect())).left- -1,top:n.top- -1,right:n.right+-2,bottom:n.bottom+-2,width:n.width+-1,height:n.height+-1};return[{x:o.left,y:t(o),cell:r},{x:o.right,y:t(o),cell:r}]}),t=>r(t,a)),(t,r)=>t.fold(()=>et.some(r),t=>{let n=Math.sqrt(Math.abs(t.x-o)+Math.abs(t.y-a)),l=Math.sqrt(Math.abs(r.x-o)+Math.abs(r.y-a));return et.some(l<n?r:t)}),et.none()).map(t=>t.cell),CH=Y(Cj,t=>t.bottom,(t,r)=>t.y<r),C$=Y(Cj,t=>t.top,(t,r)=>t.y>r),Cq=(t,r,n)=>{var o;let a=t(r,n);return(a.breakType!==g.Wrap||0!==a.positions.length)&&(nH(n.getNode())||(o=a).breakType!==g.Br||1!==o.positions.length)?a.breakAt.isNone():!a.breakAt.exists(n=>t(r,n).breakAt.isSome())},CV=Y(Cq,yu),CW=Y(Cq,ym),CK=(t,r,n,o)=>{let a=t.selection.getRng();return!(!sJ()||!((t,r,n)=>{let o=lL.fromRangeStart(r);return dw(!t,n).exists(t=>t.isEqual(o))})(r,a,n)||(v_(r?1:-1,t,n,!r,!1).each(r=>{yT(t,r)}),0))},CY=(t,r,n)=>{let o=((t,r)=>{let n=r.getNode(t);return nP(n)?et.some(n):et.none()})(!!r,n),a=!1===r;o.fold(()=>yT(t,n.toRange()),o=>dw(a,t.getBody()).filter(t=>t.isEqual(n)).fold(()=>yT(t,n.toRange()),n=>((t,r,n)=>{r.undoManager.transact(()=>{let o=Cg(r,rc(n),t?r7:r4);yT(r,o)})})(r,t,o)))},CG=(t,r,n,o)=>{let a=t.selection.getRng(),l=lL.fromRangeStart(a),i=t.getBody();return!r&&CV(o,l)?(CY(t,r,eS(l.getClientRects()).bind(t=>CH(n,t.left,t.top)).bind(t=>yc(dS(t).map(r=>yu(t,r).positions.concat(r)).getOr([]),l)).orThunk(()=>eS(l.getClientRects()).bind(t=>yd(yf(i,lL.before(n)),t.left))).getOr(lL.before(n))),!0):!!(r&&CW(o,l))&&(CY(t,r,eN(l.getClientRects()).bind(t=>C$(n,t.left,t.top)).bind(t=>yc(dk(t).map(r=>[r].concat(ym(t,r).positions)).getOr([]),l)).orThunk(()=>eS(l.getClientRects()).bind(t=>yd(yg(i,lL.after(n)),t.left))).getOr(lL.after(n))),!0)},CX=(t,r,n)=>et.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>et.from(t.dom.getParent(o,"table")).map(a=>n(t,r,a,o))).getOr(!1),CQ=(t,r)=>CX(t,r,CK),CJ=(t,r)=>CX(t,r,CG),CZ=(t,r,n)=>n.fold(et.none,et.none,(t,r)=>rK(r,u5).map(t=>c5(c0.exact(t,0,t,0))),n=>(t.execCommand("mceTableInsertRowAfter"),C0(t,r,n))),C0=(t,r,n)=>CZ(t,r,Cz(n,void 0).fold(()=>CM.none(n),t=>CU(t.all,n,t.index,1,rQ))),C1=(t,r,n)=>CZ(t,r,Cz(n,void 0).fold(()=>CM.none(),t=>CU(t.all,n,t.index,-1,rQ))),C2=(t,r)=>{let n=["table","li","dl"],o=rc(t.getBody()),a=t=>{let r=tY(t);return rv(t,o)||el(n,r)},l=t.selection.getRng();return((t,r,n=Z)=>n(r)?et.none():el(t,tY(r))?et.some(r):rY(r,t.join(","),t=>rh(t,"table")||n(t)))(["td","th"],rc(r?l.endContainer:l.startContainer),a).map(n=>(CI(n,a).each(r=>{t.model.table.clearSelectedCells(r.dom)}),t.selection.collapse(!r),(r?C0:C1)(t,a,n).each(r=>{t.selection.setRng(r)}),!0)).getOr(!1)},C3=(t,r)=>({container:t,offset:r}),C8=aV.DOM,C5=t=>r=>t===r?-1:0,C6=(t,r,n)=>{if(nM(t)&&r>=0)return et.some(C3(t,r));{let o=lu(C8);return et.from(o.backwards(t,r,C5(t),n)).map(t=>C3(t.container,t.container.data.length))}},C9=(t,r,n)=>{if(!nM(t))return et.none();let o=t.data;if(r>=0&&r<=o.length)return et.some(C3(t,r));{let o=lu(C8);return et.from(o.backwards(t,r,C5(t),n)).bind(t=>{let o=t.container.data;return C9(t.container,r+o.length,n)})}},C4=(t,r,n)=>{if(!nM(t))return et.none();let o=t.data;if(r<=o.length)return et.some(C3(t,r));{let a=lu(C8);return et.from(a.forwards(t,r,C5(t),n)).bind(t=>C4(t.container,r-o.length,n))}},C7=(t,r,n,o,a)=>{let l=lu(t,r=>t.isBlock(r)||el(["BR","IMG","HR","INPUT"],r.nodeName)||"false"===t.getContentEditable(r));return et.from(l.backwards(r,n,o,a))},Ee=t=>or(t.toString().replace(/\u00A0/g," ")),Et=t=>""!==t&&-1!==" \xa0\f\n\r	\v".indexOf(t),Er=(t,r)=>t.substring(r.length),En=(t,r,n,o=0)=>rX(rc(r.startContainer),u6).fold(()=>((t,r,n,o=0)=>{if(!r.collapsed||!nM(r.startContainer))return et.none();let a={text:"",offset:0},l=t.getParent(r.startContainer,t.isBlock)||t.getRoot();return C7(t,r.startContainer,r.startOffset,(t,r,o)=>(a.text=o+a.text,a.offset+=r,((t,r,n)=>{let o;let a=n.charAt(0);for(o=r-1;o>=0;o--){let l=t.charAt(o);if(Et(l))return et.none();if(a===l&&e5(t,n,o,r))break}return et.some(o)})(a.text,a.offset,n).getOr(r)),l).bind(t=>{let a=r.cloneRange();if(a.setStart(t.container,t.offset),a.setEnd(r.endContainer,r.endOffset),a.collapsed)return et.none();let l=Ee(a);return 0!==l.lastIndexOf(n)||Er(l,n).length<o?et.none():et.some({text:Er(l,n),range:a,trigger:n})})})(t,r,n,o),r=>{let o=t.createRng();o.selectNode(r.dom);let a=Ee(o);return et.some({range:o,text:Er(a,n),trigger:n})}),Eo=t=>{if(3===t.nodeType)return C3(t,t.data.length);{let r=t.childNodes;return r.length>0?Eo(r[r.length-1]):C3(t,r.length)}},Ea=(t,r)=>{let n=t.childNodes;return n.length>0&&r<n.length?Ea(n[r],0):n.length>0&&1===t.nodeType&&n.length===r?Eo(n[n.length-1]):C3(t,r)},El=(t,r,n,o={})=>{var a;let l=r(),i=null!==(a=t.selection.getRng().startContainer.nodeValue)&&void 0!==a?a:"",s=em(l.lookupByTrigger(n.trigger),r=>n.text.length>=r.minChars&&r.matches.getOrThunk(()=>{var r;return r=t.dom,t=>!((t,r)=>{var n;let o=null!==(n=t.getParent(r.container,t.isBlock))&&void 0!==n?n:t.getRoot();return C7(t,r.container,r.offset,(t,r)=>0===r?-1:r,o).filter(t=>!Et(t.container.data.charAt(t.offset-1))).isSome()})(r,Ea(t.startContainer,t.startOffset))})(n.range,i,n.text));if(0===s.length)return et.none();let d=Promise.all(es(s,t=>t.fetch(n.text,t.maxResults,o).then(r=>({matchText:n.text,items:r,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}))));return et.some({lookupData:d,context:n})};(s=h||(h={}))[s.Error=0]="Error",s[s.Value=1]="Value";let Ei=(t,r,n)=>t.stype===h.Error?r(t.serror):n(t.svalue),Es=t=>({stype:h.Value,svalue:t}),Ed=t=>({stype:h.Error,serror:t}),Ec=t=>O(t)&&eT(t).length>100?" removed due to size":JSON.stringify(t,null,2),Eu=(t,r)=>Ed([{path:t,getErrorInfo:r}]),Em=(t,r)=>({extract:(n,o)=>ez(o,t).fold(()=>Eu(n,()=>'Choice schema did not contain choice key: "'+t+'"'),t=>ez(r,t).fold(()=>Eu(n,()=>'The chosen schema: "'+t+'" did not exist in branches: '+Ec(r)),r=>r.extract(n.concat(["branch: "+t]),o))),toString:()=>"chooseOn("+t+"). Possible values: "+eT(r)}),Ef=t=>(...r)=>{if(0===r.length)throw Error("Can't merge zero objects");let n={};for(let o=0;o<r.length;o++){let a=r[o];for(let r in a)ej(a,r)&&(n[r]=t(n[r],a[r]))}return n},Eg=Ef((t,r)=>B(t)&&B(r)?Eg(t,r):r),Ep=(Ef((t,r)=>r),t=>({tag:"defaultedThunk",process:V(t)})),Eh=t=>{var r;let n=(t=>{let r=[],n=[];return ed(t,t=>{Ei(t,t=>n.push(t),t=>r.push(t))}),{values:r,errors:n}})(t);return n.errors.length>0?(r=n.errors,$(Ed,ev)(r)):Es(n.values)},Eb=(t,r,n)=>{switch(t.tag){case"field":return r(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},Ev=t=>({extract:(r,n)=>{var o;return(o=t(n)).stype===h.Error?Eu(r,V(o.serror)):o},toString:V("val")}),Ey=Ev(Es),EC=(t,r,n,o)=>o(ez(t,r).getOrThunk(()=>n(t))),EE=(t,r,n,o,a)=>{var l;let i=t=>a.extract(r.concat([o]),t),s=t=>t.fold(()=>Es(et.none()),t=>{var n;let l=a.extract(r.concat([o]),t);return n=et.some,l.stype===h.Value?{stype:h.Value,svalue:n(l.svalue)}:l});switch(t.tag){case"required":return ez(n,o).fold(()=>Eu(r,()=>'Could not find valid *required* value for "'+o+'" in '+Ec(n)),i);case"defaultedThunk":return EC(n,o,t.process,i);case"option":return s(ez(n,o));case"defaultedOptionThunk":return l=t.process,s(ez(n,o).map(t=>!0===t?l(n):t));case"mergeWithThunk":return EC(n,o,V({}),r=>i(Eg(t.process(n),r)))}},Ew=t=>({extract:(r,n)=>((t,r,n)=>{let o={},a=[];for(let l of n)Eb(l,(n,l,i,s)=>{Ei(EE(i,t,r,n,s),t=>{a.push(...t)},t=>{o[l]=t})},(t,n)=>{o[t]=n(r)});return a.length>0?Ed(a):Es(o)})(r,n,t),toString:()=>"obj{\n"+es(t,t=>Eb(t,(t,r,n,o)=>t+" -> "+o.toString(),(t,r)=>"state("+t+")")).join("\n")+"}"}),Ex=t=>({extract:(r,n)=>Eh(es(n,(n,o)=>t.extract(r.concat(["["+o+"]"]),n))),toString:()=>"array("+t.toString()+")"}),E_=(t,r,n)=>{var o;return Ei((o=r.extract([t],n)).stype===h.Error?{stype:h.Error,serror:{input:n,errors:o.serror}}:o,l2.error,l2.value)},Ek=(t,r)=>Em(t,eP(r,Ew)),ES=V(Ey),EN=(t,r)=>Ev(n=>{let o=typeof n;return t(n)?Es(n):Ed(`Expected type: ${r} but got: ${o}`)}),ER=EN(z,"number"),EA=EN(T,"string"),ET=EN(L,"boolean"),EO=EN(U,"function"),EB=(t,r,n,o)=>({tag:"field",key:t,newKey:r,presence:n,prop:o}),EP=(t,r)=>({tag:"custom",newKey:t,instantiator:r}),ED=(t,r)=>EB(t,t,{tag:"required",process:{}},r),EL=t=>ED(t,EA),EM=t=>ED(t,EO),EF=(t,r)=>EB(t,t,{tag:"option",process:{}},r),EI=t=>EF(t,EA),EU=(t,r,n)=>EB(t,t,Ep(r),n),Ez=(t,r)=>EU(t,r,ER),Ej=(t,r,n)=>{var o;return EU(t,r,(o=t=>el(n,t)?l2.value(t):l2.error(`Unsupported value: "${t}", choose one of "${n.join(", ")}".`),Ev(t=>o(t).fold(Ed,Es))))},EH=(t,r)=>EU(t,r,ET),E$=(t,r)=>EU(t,r,EO),Eq=EL("type"),EV=EM("fetch"),EW=EM("onAction"),EK=E$("onSetup",()=>H),EY=EI("text"),EG=EI("icon"),EX=EI("tooltip"),EQ=EI("label"),EJ=EH("active",!1),EZ=EH("enabled",!0),E0=EH("primary",!1),E1=t=>EU("type",t,EA),E2=Ew([Eq,EL("trigger"),Ez("minChars",1),EB(d="columns",d,Ep(1),ES()),Ez("maxResults",10),EF("matches",EO),EV,EW,EU("highlightOn",[],Ex(EA))]),E3=[EZ,EX,EG,EY,EK],E8=[EJ].concat(E3),E5=[E$("predicate",Z),Ej("scope","node",["node","editor"]),Ej("position","selection",["node","selection","line"])],E6=E3.concat([E1("contextformbutton"),E0,EW,EP("original",W)]),E9=E8.concat([E1("contextformbutton"),E0,EW,EP("original",W)]),E4=E3.concat([E1("contextformbutton")]),E7=E8.concat([E1("contextformtogglebutton")]),we=Ek("type",{contextformbutton:E6,contextformtogglebutton:E9});Ew([E1("contextform"),E$("initValue",V("")),EQ,EB(c="commands",c,{tag:"required",process:{}},Ex(we)),EF("launch",Ek("type",{contextformbutton:E4,contextformtogglebutton:E7}))].concat(E5));let wt=t=>{let r=eP(t.ui.registry.getAll().popups,t=>E_("Autocompleter",E2,{trigger:t.ch,...t}).fold(t=>{var r;throw Error("Errors: \n"+es((r=t.errors).length>10?r.slice(0,10).concat([{path:[],getErrorInfo:V("... (only showing first ten failures)")}]):r,t=>"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()).join("\n")+"\n\nInput object: "+Ec(t.input))},W)),n=e$(eI(r,t=>t.trigger)),o=eU(r);return{dataset:r,triggers:n,lookupByTrigger:t=>em(o,r=>r.trigger===t)}},wr=t=>{let r=a1(),n=aY(!1),o=r.isSet,a=()=>{o()&&((t=>{bs(t).autocompleter.removeDecoration()})(t),(t=>{t.dispatch("AutocompleterEnd")})(t),n.set(!1),r.clear())},l=eJ(()=>wt(t)),i=i=>{r.get().map(r=>En(t.dom,t.selection.getRng(),r.trigger).bind(r=>El(t,l,r,i))).getOrThunk(()=>((t,r)=>{var n;let o=r(),a=t.selection.getRng();return(n=t.dom,eA(o.triggers,t=>En(n,a,t))).bind(n=>El(t,r,n))})(t,l)).fold(a,l=>{var i;i=l.context,o()||(((t,r)=>{bs(t).autocompleter.addDecoration(r)})(t,i.range),r.set({trigger:i.trigger,matchLength:i.text.length})),l.lookupData.then(o=>{r.get().map(i=>{let s=l.context;i.trigger===s.trigger&&(s.text.length-i.matchLength>=10?a():(r.set({...i,matchLength:s.text.length}),n.get()?((t,r)=>{t.dispatch("AutocompleterUpdate",r)})(t,{lookupData:o}):(n.set(!0),((t,r)=>{t.dispatch("AutocompleterStart",r)})(t,{lookupData:o}))))})})})};t.addCommand("mceAutocompleterReload",(t,r)=>{i(O(r)?r.fetchOptions:{})}),t.addCommand("mceAutocompleterClose",a),((t,r)=>{let n=a3(r.load,50);t.on("keypress compositionend",t=>{27!==t.which&&n.throttle()}),t.on("keydown",t=>{let o=t.which;8===o?n.throttle():27===o&&r.cancelIfNecessary()}),t.on("remove",n.cancel)})(t,{cancelIfNecessary:a,load:i})},wn=tR().browser.isSafari(),wo=t=>ot(rc(t)),wa=(t,r)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=r.textContent)||void 0===n?void 0:n.length)},wl=(t,r)=>et.from(t.getParent(r.container(),"details")),wi=(t,r)=>wl(t,r).isSome(),ws=(t,r)=>{let n=r.getNode();M(n)||t.selection.setCursorLocation(n,r.offset())},wd=(t,r,n)=>{let o=t.dom.getParent(r.container(),"details");if(o&&!o.open){let r=t.dom.select("summary",o)[0];r&&(n?dk(r):dS(r)).each(r=>ws(t,r))}else ws(t,r)},wc=(t,r,n)=>{let{dom:o,selection:a}=t,l=t.getBody();if("character"===n){let n=lL.fromRangeStart(a.getRng()),i=o.getParent(n.container(),o.isBlock),s=wl(o,n),d=i&&o.isEmpty(i),c=D(null==i?void 0:i.previousSibling),u=D(null==i?void 0:i.nextSibling);return!!(d&&(r?u:c)&&dC(!r,l,n).exists(t=>wi(o,t)&&!tj(s,wl(o,t))))||dC(r,l,n).fold(Z,n=>{let a=wl(o,n);if(wi(o,n)&&!tj(s,a)){if(r||wd(t,n,!1),i&&d){if(r&&c||!r&&u)return!0;wd(t,n,r),t.dom.remove(i)}return!0}return!1})}return!1},wu=(t,r,n,o)=>{let a=t.selection.getRng(),l=lL.fromRangeStart(a),i=t.getBody();return"selection"===o?((t,r)=>{let n=r.startSummary.exists(r=>r.contains(t.startContainer)),o=r.startSummary.exists(r=>r.contains(t.endContainer)),a=r.startDetails.forall(t=>r.endDetails.forall(r=>t!==r));return(n||o)&&!(n&&o)||a})(a,r):n?r.startSummary.exists(t=>dS(t).exists(r=>nH(r.getNode())&&d_(t,r).exists(t=>t.isEqual(l))||r.isEqual(l)))||r.startDetails.exists(t=>dx(i,l).forall(r=>!t.contains(r.container()))):r.startSummary.exists(t=>dk(t).exists(t=>t.isEqual(l)))||r.startDetails.exists(t=>d_(t,l).forall(t=>r.startSummary.exists(r=>!r.contains(l.container())&&r.contains(t.container()))))},wm=(t,r,n)=>((t,r)=>{let n=et.from(t.getParent(r.startContainer,"details")),o=et.from(t.getParent(r.endContainer,"details"));if(n.isSome()||o.isSome()){let r=n.bind(r=>et.from(t.select("summary",r)[0]));return et.some({startSummary:r,startDetails:n,endDetails:o})}return et.none()})(t.dom,t.selection.getRng()).fold(()=>wc(t,r,n),o=>wu(t,o,r,n)||wc(t,r,n))||wn&&((t,r,n)=>{let o=t.selection,a=o.getNode(),l=o.getRng(),i=lL.fromRangeStart(l);return!!nQ(a)&&("selection"===n&&wa(l,a)||fB(r,i,a)?wo(a):t.undoManager.transact(()=>{let l=o.getSel(),{anchorNode:i,anchorOffset:s,focusNode:d,focusOffset:c}=null!=l?l:{},u=()=>{I(i)&&I(s)&&I(d)&&I(c)&&(null==l||l.setBaseAndExtent(i,s,d,c))},m=(t,r)=>{ed(t.childNodes,t=>{d2(t)&&r.appendChild(t)})},f=t.dom.create("span",{"data-mce-bogus":"1"});m(a,f),a.appendChild(f),u(),"word"!==n&&"line"!==n||null==l||l.modify("extend",r?"right":"left",n),!o.isCollapsed()&&wa(o.getRng(),f)?wo(a):(t.execCommand(r?"ForwardDelete":"Delete"),i=null==l?void 0:l.anchorNode,s=null==l?void 0:l.anchorOffset,d=null==l?void 0:l.focusNode,c=null==l?void 0:l.focusOffset,m(f,a),u()),t.dom.remove(f)}),!0)})(t,r,n)?et.some(H):et.none(),wf=t=>(r,n,o={})=>{let a=r.getBody(),l={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:H,inputType:n},i=aR(new InputEvent(t));return r.dispatch(t,{...i,...l,...o})},wg=wf("input"),wp=wf("beforeinput"),wh=tR(),wb=wh.os,wv=wb.isMacOS()||wb.isiOS(),wy=wh.browser.isFirefox(),wC=(t,r)=>{let n=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(!r)return;if(/^(LI|DT|DD)$/.test(r.nodeName)){let t=(t=>{for(;t;){if(nS(t)||nM(t)&&t.data&&/[\r\n\s]/.test(t.data))return t;t=t.nextSibling}return null})(r.firstChild);t&&/^(UL|OL|DL)$/.test(t.nodeName)&&r.insertBefore(n.doc.createTextNode("\xa0"),r.firstChild)}let a=n.createRng();if(r.normalize(),r.hasChildNodes()){let t=new nx(r,r),n,l=r;for(;n=t.current();){if(nM(n)){a.setStart(n,0),a.setEnd(n,0);break}if(o[n.nodeName.toLowerCase()]){a.setStartBefore(n),a.setEndBefore(n);break}l=n,n=t.next()}n||(a.setStart(l,0),a.setEnd(l,0))}else nH(r)?r.nextSibling&&n.isBlock(r.nextSibling)?(a.setStartBefore(r),a.setEndBefore(r)):(a.setStartAfter(r),a.setEndAfter(r)):(a.setStart(r,0),a.setEnd(r,0));t.selection.setRng(a),uN(t,a)},wE=(t,r)=>{let n=t.getRoot(),o,a=r;for(;a!==n&&a&&"false"!==t.getContentEditable(a);){if("true"===t.getContentEditable(a)){o=a;break}a=a.parentNode}return a!==n?o:n},ww=t=>et.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),wx=t=>{t.innerHTML='<br data-mce-bogus="1">'},w_=(t,r)=>{ih(t).toLowerCase()===r.tagName.toLowerCase()&&((t,r,n)=>{let o=t.dom;et.from(n.style).map(o.parseStyle).each(t=>{let n={...r6(rc(r)),...t};o.setStyles(r,n)}),tH(et.from(n.class).map(t=>t.split(/\s+/)),et.from(r.className).map(t=>em(t.split(/\s+/),t=>""!==t)),(t,n)=>{let a=em(n,r=>!el(t,r)),l=[...t,...a];o.setAttrib(r,"class",l.join(" "))});let a=["style","class"],l=eF(n,(t,r)=>!el(a,r));o.setAttribs(r,l)})(t,r,ib(t))},wk=(t,r,n,o,a=!0,l,i)=>{let s;let d=t.dom,c=t.schema,u=ih(t),m=n?n.nodeName.toUpperCase():"",f=r,g=c.getTextInlineElements(),p=s=l||"TABLE"===m||"HR"===m?d.create(l||u,i||{}):n.cloneNode(!1);if(a)do if(g[f.nodeName]){if(dR(f)||dj(f))continue;let t=f.cloneNode(!1);d.setAttrib(t,"id",""),s.hasChildNodes()?t.appendChild(s.firstChild):p=t,s.appendChild(t)}while((f=f.parentNode)&&f!==o);else d.setAttrib(s,"style",null),d.setAttrib(s,"class",null);return w_(t,s),wx(p),s},wS=(t,r)=>{let n=null==t?void 0:t.parentNode;return I(n)&&n.nodeName===r},wN=t=>I(t)&&/^(OL|UL|LI)$/.test(t.nodeName),wR=t=>I(t)&&/^(LI|DT|DD)$/.test(t.nodeName),wA=t=>{let r=t.parentNode;return wR(r)?r:t},wT=(t,r,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!nS(o);)o=o[n?"nextSibling":"previousSibling"];return o===r},wO=t=>eg(eI(r6(rc(t)),(t,r)=>`${r}: ${t};`),(t,r)=>t+r,""),wB=(t,r)=>r&&"A"===r.nodeName&&t.isEmpty(r),wP=(t,r)=>t.nodeName===r||t.previousSibling&&t.previousSibling.nodeName===r,wD=(t,r)=>I(r)&&t.isBlock(r)&&!/^(TD|TH|CAPTION|FORM)$/.test(r.nodeName)&&!/^(fixed|absolute)/i.test(r.style.position)&&t.isEditable(r.parentNode)&&"false"!==t.getContentEditable(r),wL=(t,r,n)=>nM(r)?t?1===n&&"\uFEFF"===r.data.charAt(n-1)?0:n:n===r.data.length-1&&"\uFEFF"===r.data.charAt(n)?r.data.length:n:n,wM={insert:(t,r)=>{var n;let o,a,l,i,s,d=!1,c=t.dom,u=t.schema.getNonEmptyElements(),m=t.selection.getRng(),f=ih(t),g=rc(m.startContainer),p=rO(g,m.startOffset),h=p.exists(t=>tQ(t)&&!rQ(t)),b=m.collapsed&&h,v=(r,n)=>wk(t,a,_,x,iE(t),r,n),y=t=>{let r;let n=wL(t,a,l);if(nM(a)&&(t?n>0:n<a.data.length))return!1;if(a.parentNode===_&&d&&!t||t&&nS(a)&&a===_.firstChild)return!0;if(wP(a,"TABLE")||wP(a,"HR"))return d&&!t||!d&&t;let o=new nx(a,_);for(nM(a)&&(t&&0===n?o.prev():t||n!==a.data.length||o.next());r=o.current();){if(nS(r)){if(!r.getAttribute("data-mce-bogus")){let t=r.nodeName.toLowerCase();if(u[t]&&"br"!==t)return!1}}else if(nM(r)&&!oC(r.data))return!1;t?o.prev():o.next()}return!0},C=()=>{let r;return r=/^(H[1-6]|PRE|FIGURE)$/.test(i)&&"HGROUP"!==k?v(f):v(),((t,r)=>{let n=iw(t);return!F(r)&&(T(n)?el(tU.explode(n),r.nodeName.toLowerCase()):n)})(t,s)&&wD(c,s)&&c.isEmpty(_,void 0,{includeZwsp:!0})?r=c.split(s,_):c.insertAfter(r,_),wC(t,r),r};uo(c,m).each(t=>{m.setStart(t.startContainer,t.startOffset),m.setEnd(t.endContainer,t.endOffset)}),a=m.startContainer,l=m.startOffset;let E=!(!r||!r.shiftKey),w=!(!r||!r.ctrlKey);nS(a)&&a.hasChildNodes()&&!b&&(d=l>a.childNodes.length-1,a=a.childNodes[Math.min(l,a.childNodes.length-1)]||a,l=d&&nM(a)?a.data.length:0);let x=wE(c,a);if(!x||((t,r)=>{let n=t.dom.getParent(r,"ol,ul,dl");return null!==n&&"false"===t.dom.getContentEditableParent(n)})(t,a))return;E||(a=((t,r,n,o,a)=>{var l,i;let s=t.dom,d=null!==(l=wE(s,o))&&void 0!==l?l:s.getRoot(),c=s.getParent(o,s.isBlock);if(!c||!wD(s,c)){if(!(c=c||d).hasChildNodes()){let o=s.create(r);return w_(t,o),c.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o}let l,u=o;for(;u&&u.parentNode!==c;)u=u.parentNode;for(;u&&!s.isBlock(u);)l=u,u=u.previousSibling;let m=null===(i=null==l?void 0:l.parentElement)||void 0===i?void 0:i.nodeName;if(l&&m&&t.schema.isValidChild(m,r.toLowerCase())){let i=l.parentNode,d=s.create(r);for(w_(t,d),i.insertBefore(d,l),u=l;u&&!s.isBlock(u);){let t=u.nextSibling;d.appendChild(u),u=t}n.setStart(o,a),n.setEnd(o,a)}}return o})(t,f,m,a,l));let _=c.getParent(a,c.isBlock)||c.getRoot();s=I(null==_?void 0:_.parentNode)?c.getParent(_.parentNode,c.isBlock):null,i=_?_.nodeName.toUpperCase():"";let k=s?s.nodeName.toUpperCase():"";if("LI"!==k||w||(_=s,s=s.parentNode,i=k),nS(s)&&(n=_,!E&&n.nodeName.toLowerCase()===ih(t)&&t.dom.isEmpty(n)&&((r,n,o)=>{let a=n;for(;a&&a!==r&&D(a.nextSibling);){let r=a.parentElement;if(!r||!ej(t.schema.getTextBlockElements(),r.nodeName.toLowerCase()))return nX(r);a=r}return!1})(t.getBody(),n)))return((t,r,n)=>{var o,a,l;let i=r(ih(t)),s=t.dom.getParent(n,nX);s&&(t.dom.insertAfter(i,s),wC(t,i),(null!==(l=null===(a=null===(o=n.parentElement)||void 0===o?void 0:o.childNodes)||void 0===a?void 0:a.length)&&void 0!==l?l:0)>1&&t.dom.remove(n))})(t,v,_);if(/^(LI|DT|DD)$/.test(i)&&nS(s)&&c.isEmpty(_))return void((t,r,n,o,a)=>{var l,i,s,d;let c=t.dom,u=t.selection.getRng(),m=n.parentNode;if(n===t.getBody()||!m)return;wN(l=n)&&wN(l.parentNode)&&(a="LI");let f=wR(o)?wO(o):void 0,g=wR(o)&&f?r(a,{style:wO(o)}):r(a);if(wT(n,o,!0)&&wT(n,o,!1)){if(wS(n,"LI")){let t=wA(n);c.insertAfter(g,t),(null===(s=(i=n).parentNode)||void 0===s?void 0:s.firstChild)===i?c.remove(t):c.remove(n)}else c.replace(g,n)}else if(wT(n,o,!0))wS(n,"LI")?(c.insertAfter(g,wA(n)),g.appendChild(c.doc.createTextNode(" ")),g.appendChild(n)):m.insertBefore(g,n),c.remove(o);else if(wT(n,o,!1))c.insertAfter(g,wA(n)),c.remove(o);else{n=wA(n);let t=u.cloneRange();t.setStartAfter(o),t.setEndAfter(n);let r=t.extractContents();if("LI"===a&&(d=r).firstChild&&"LI"===d.firstChild.nodeName){let t=em(es(g.children,rc),G(t2("br")));g=r.firstChild,c.insertAfter(r,n),ed(t,t=>ne(rc(g),t)),f&&g.setAttribute("style",f)}else c.insertAfter(r,n),c.insertAfter(g,n);c.remove(o)}wC(t,g)})(t,v,s,_,f);if(!(b||_!==t.getBody()&&wD(c,_)))return;let S=_.parentNode;if(b)o=v(f),p.fold(()=>{nt(g,rc(o))},t=>{r4(t,rc(o))}),t.selection.setCursorLocation(o,0);else if(on(_))o=ou(_),c.isEmpty(_)&&wx(_),w_(t,o),wC(t,o);else if(y(!1))o=C();else if(y(!0)&&S){o=S.insertBefore(v(),_);let r=rc(m.startContainer).dom.hasChildNodes()&&m.collapsed;wC(t,wP(_,"HR")||r?o:_)}else{let r=(t=>{let r=t.cloneRange();return r.setStart(t.startContainer,wL(!0,t.startContainer,t.startOffset)),r.setEnd(t.endContainer,wL(!1,t.endContainer,t.endOffset)),r})(m).cloneRange();r.setEndAfter(_);let n=r.extractContents();ed(nC(rc(n),tZ),t=>{let r=t.dom;r.nodeValue=or(r.data)}),(t=>{let r=t;do nM(r)&&(r.data=r.data.replace(/^[\r\n]+/,"")),r=r.firstChild;while(r)})(n),o=n.firstChild,c.insertAfter(n,_),((t,r,n)=>{var o;let a=[];if(!n)return;let l=n;for(;l=l.firstChild;){if(t.isBlock(l))return;nS(l)&&!r[l.nodeName.toLowerCase()]&&a.push(l)}let i=a.length;for(;i--;)(!(l=a[i]).hasChildNodes()||l.firstChild===l.lastChild&&""===(null===(o=l.firstChild)||void 0===o?void 0:o.nodeValue)||wB(t,l))&&t.remove(l)})(c,u,o),((t,r)=>{r.normalize();let n=r.lastChild;(!n||nS(n)&&/^(left|right)$/gi.test(t.getStyle(n,"float",!0)))&&t.add(r,"br")})(c,_),c.isEmpty(_)&&wx(_),o.normalize(),c.isEmpty(o)?(c.remove(o),C()):(w_(t,o),wC(t,o))}c.setAttrib(o,"id",""),t.dispatch("NewBlock",{newBlock:o})},fakeEventName:"insertParagraph"},wF=(t,r,n)=>{let o=t.dom.createRng();n?(o.setStartBefore(r),o.setEndBefore(r)):(o.setStartAfter(r),o.setEndAfter(r)),t.selection.setRng(o),uN(t,o)},wI=(t,r)=>{let n=rm("br");r4(rc(r),n),t.undoManager.add()},wU=(t,r)=>{wz(t.getBody(),r)||r7(rc(r),rm("br"));let n=rm("br");r7(rc(r),n),wF(t,n.dom,!1),t.undoManager.add()},wz=(t,r)=>!!nH(lL.after(r).getNode())||dx(t,lL.after(r)).map(t=>nH(t.getNode())).getOr(!1),wj=t=>t&&"A"===t.nodeName&&"href"in t,wH=t=>t.fold(Z,wj,wj,Z),w$=(t,r)=>{r.fold(H,Y(wI,t),Y(wU,t),H)},wq={insert:(t,r)=>{let n=(t=>{let r=Y(fE,t),n=lL.fromRangeStart(t.selection.getRng());return v5(r,t.getBody(),n).filter(wH)})(t);n.isSome()?n.each(Y(w$,t)):((t,r)=>{let n=t.selection,o=t.dom,a=n.getRng(),l,i=!1;uo(o,a).each(t=>{a.setStart(t.startContainer,t.startOffset),a.setEnd(t.endContainer,t.endOffset)});let s=a.startOffset,d=a.startContainer;if(nS(d)&&d.hasChildNodes()){let t=s>d.childNodes.length-1;d=d.childNodes[Math.min(s,d.childNodes.length-1)]||d,s=t&&nM(d)?d.data.length:0}let c=o.getParent(d,o.isBlock),u=c&&c.parentNode?o.getParent(c.parentNode,o.isBlock):null,m=u?u.nodeName.toUpperCase():"",f=!(!r||!r.ctrlKey);"LI"!==m||f||(c=u),nM(d)&&s>=d.data.length&&(((t,r,n)=>{let o;let a=new nx(r,n),l=t.getNonEmptyElements();for(;o=a.next();)if(l[o.nodeName.toLowerCase()]||nM(o)&&o.length>0)return!0;return!1})(t.schema,d,c||o.getRoot())||(l=o.create("br"),a.insertNode(l),a.setStartAfter(l),a.setEndAfter(l),i=!0)),l=o.create("br"),lF(o,a,l),wF(t,l,i),t.undoManager.add()})(t,r)},fakeEventName:"insertLineBreak"},wV=(t,r)=>ww(t).filter(t=>r.length>0&&rh(rc(t),r)).isSome(),wW=l3([{br:[]},{block:[]},{none:[]}]),wK=(t,r)=>wV(t,iC(t)),wY=t=>(r,n)=>ww(r).filter(t=>n6(rc(t))).isSome()===t,wG=(t,r)=>(n,o)=>ww(n).fold(V(""),t=>t.nodeName.toUpperCase())===t.toUpperCase()===r,wX=t=>F(wE(t.dom,t.selection.getStart())),wQ=t=>wG("pre",t),wJ=t=>(r,n)=>ip(r)===t,wZ=(t,r)=>wV(t,iy(t)),w0=(t,r)=>r,w1=t=>{let r=ih(t),n=wE(t.dom,t.selection.getStart());return I(n)&&t.schema.isValidChild(n.nodeName,r)},w2=t=>{let r=t.selection.getRng(),n=rO(rc(r.startContainer),r.startOffset).map(t=>tQ(t)&&!rQ(t));return r.collapsed&&n.getOr(!0)},w3=(t,r)=>(n,o)=>eg(t,(t,r)=>t&&r(n,o),!0)?et.some(r):et.none(),w8=(t,r,n)=>{r.selection.isCollapsed()||(t=>{t.execCommand("delete")})(r),I(n)&&wp(r,t.fakeEventName).isDefaultPrevented()||(t.insert(r,n),I(n)&&wg(r,t.fakeEventName))},w5=(t,r)=>{let n=()=>w8(wq,t,r),o=()=>w8(wM,t,r),a=vG([w3([wK],wW.none()),w3([wQ(!0),wX],wW.none()),w3([wG("summary",!0)],wW.br()),w3([wQ(!0),wJ(!1),w0],wW.br()),w3([wQ(!0),wJ(!1)],wW.block()),w3([wQ(!0),wJ(!0),w0],wW.block()),w3([wQ(!0),wJ(!0)],wW.br()),w3([wY(!0),w0],wW.br()),w3([wY(!0)],wW.block()),w3([wZ],wW.br()),w3([w0],wW.br()),w3([w1],wW.block()),w3([w2],wW.block())],[t,!(!r||!r.shiftKey)]).getOr(wW.none());switch(iv(t)){case"linebreak":a.fold(n,n,H);break;case"block":a.fold(o,o,H);break;case"invert":a.fold(o,n,H);break;default:a.fold(n,o,H)}},w6=tR(),w9=w6.os.isiOS()&&w6.browser.isSafari(),w4=(t,r)=>{var n;r.isDefaultPrevented()||(r.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{w5(t,r)}))},w7=tR(),xe=t=>t.stopImmediatePropagation(),xt=t=>t.keyCode===cU.PAGE_UP||t.keyCode===cU.PAGE_DOWN,xr=(t,r,n)=>{n&&!t.get()?r.on("NodeChange",xe,!0):!n&&t.get()&&r.off("NodeChange",xe),t.set(n)},xn=(t,r)=>{let n=r.container(),o=r.offset();return nM(n)?(n.insertData(o,t),et.some(lL(n,o+t.length))):ds(r).map(n=>{let o=rf(t);return r.isAtEnd()?r7(n,o):r4(n,o),lL(o.dom,t.length)})},xo=Y(xn,"\xa0"),xa=Y(xn," "),xl=t=>r=>{t.selection.setRng(r.toRange()),t.nodeChanged()},xi=t=>{let r=lL.fromRangeStart(t.selection.getRng()),n=rc(t.getBody());if(t.selection.isCollapsed()){let o=Y(fE,t),a=lL.fromRangeStart(t.selection.getRng());return v5(o,t.getBody(),a).bind(t=>t.fold(t=>d_(n.dom,lL.before(t)),t=>dk(t),t=>dS(t),t=>dx(n.dom,lL.after(t)))).map(o=>()=>{var a;return(a=t.schema,t=>fe(n,t,a)?xo(r):xa(r))(o).each(xl(t))})}return et.none()},xs=t=>{var r,n;return t$(tL.browser.isFirefox()&&t.selection.isEditable()&&(r=t.dom,n=t.selection.getRng().startContainer,r.isEditable(r.getParent(n,"summary"))),()=>{var r;let n=rc(t.getBody());t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(fe(n,r=lL.fromRangeStart(t.selection.getRng()),t.schema)?xo(r):xa(r)).each(xl(t))})},xd=t=>sU(t)?[{keyCode:cU.TAB,action:CA(C2,t,!0)},{keyCode:cU.TAB,shiftKey:!0,action:CA(C2,t,!1)}]:[],xc=t=>{if(t.addShortcut("Meta+P","","mcePrint"),wr(t),bl(t))return aY(null);{let r,n;let o=yH(t);return(t=>{t.on("beforeinput",r=>{t.selection.isEditable()&&!ei(r.getTargetRanges(),r=>!uJ(t.dom,r))||r.preventDefault()})})(t),(t=>{t.on("keyup compositionstart",Y(Cv,t))})(t),((t,r)=>{t.on("keydown",n=>{n.isDefaultPrevented()||((t,r,n)=>{let o=tL.os.isMacOS()||tL.os.isiOS();CT([{keyCode:cU.RIGHT,action:CA(CC,t,!0)},{keyCode:cU.LEFT,action:CA(CC,t,!1)},{keyCode:cU.UP,action:CA(CE,t,!1)},{keyCode:cU.DOWN,action:CA(CE,t,!0)},...o?[{keyCode:cU.UP,action:CA(Cx,t,!1),metaKey:!0,shiftKey:!0},{keyCode:cU.DOWN,action:CA(Cx,t,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:cU.RIGHT,action:CA(CQ,t,!0)},{keyCode:cU.LEFT,action:CA(CQ,t,!1)},{keyCode:cU.UP,action:CA(CJ,t,!1)},{keyCode:cU.DOWN,action:CA(CJ,t,!0)},{keyCode:cU.UP,action:CA(CJ,t,!1)},{keyCode:cU.UP,action:CA(CS,t,!1)},{keyCode:cU.DOWN,action:CA(CS,t,!0)},{keyCode:cU.RIGHT,action:CA(CB,t,!0)},{keyCode:cU.LEFT,action:CA(CB,t,!1)},{keyCode:cU.UP,action:CA(CP,t,!1)},{keyCode:cU.DOWN,action:CA(CP,t,!0)},{keyCode:cU.RIGHT,action:CA(yz,t,r,!0)},{keyCode:cU.LEFT,action:CA(yz,t,r,!1)},{keyCode:cU.RIGHT,ctrlKey:!o,altKey:o,action:CA(y$,t,r)},{keyCode:cU.LEFT,ctrlKey:!o,altKey:o,action:CA(yq,t,r)},{keyCode:cU.UP,action:CA(Ck,t,!1)},{keyCode:cU.DOWN,action:CA(Ck,t,!0)}],n).each(t=>{n.preventDefault()})})(t,r,n)})})(t,o),r=!1,t.on("keydown",n=>{r=n.keyCode===cU.BACKSPACE,n.isDefaultPrevented()||((t,r,n)=>{let o=n.keyCode===cU.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=t.selection.isCollapsed(),l=a?"character":"selection",i=t=>a?t?"word":"line":"selection";CO([{keyCode:cU.BACKSPACE,action:CA(Ca,t)},{keyCode:cU.BACKSPACE,action:CA(vI,t,!1)},{keyCode:cU.DELETE,action:CA(vI,t,!0)},{keyCode:cU.BACKSPACE,action:CA(vT,t,!1)},{keyCode:cU.DELETE,action:CA(vT,t,!0)},{keyCode:cU.BACKSPACE,action:CA(yY,t,r,!1)},{keyCode:cU.DELETE,action:CA(yY,t,r,!0)},{keyCode:cU.BACKSPACE,action:CA(f4,t,!1)},{keyCode:cU.DELETE,action:CA(f4,t,!0)},{keyCode:cU.BACKSPACE,action:CA(wm,t,!1,l)},{keyCode:cU.DELETE,action:CA(wm,t,!0,l)},...wv?[{keyCode:cU.BACKSPACE,altKey:!0,action:CA(wm,t,!1,i(!0))},{keyCode:cU.DELETE,altKey:!0,action:CA(wm,t,!0,i(!0))},{keyCode:cU.BACKSPACE,metaKey:!0,action:CA(wm,t,!1,i(!1))}]:[{keyCode:cU.BACKSPACE,ctrlKey:!0,action:CA(wm,t,!1,i(!0))},{keyCode:cU.DELETE,ctrlKey:!0,action:CA(wm,t,!0,i(!0))}],{keyCode:cU.BACKSPACE,action:CA(vU,t,!1)},{keyCode:cU.DELETE,action:CA(vU,t,!0)},{keyCode:cU.BACKSPACE,action:CA(y9,t,!1)},{keyCode:cU.DELETE,action:CA(y9,t,!0)},{keyCode:cU.BACKSPACE,action:CA(vx,t,!1)},{keyCode:cU.DELETE,action:CA(vx,t,!0)},{keyCode:cU.BACKSPACE,action:CA(vC,t,!1)},{keyCode:cU.DELETE,action:CA(vC,t,!0)},{keyCode:cU.BACKSPACE,action:CA(y3,t,!1)},{keyCode:cU.DELETE,action:CA(y3,t,!0)}],n).filter(r=>t.selection.isEditable()).each(r=>{n.preventDefault(),wp(t,o).isDefaultPrevented()||(r(),wg(t,o))})})(t,o,n)}),t.on("keyup",n=>{var o;n.isDefaultPrevented()||(o=r,CT([{keyCode:cU.BACKSPACE,action:CA(vF,t)},{keyCode:cU.DELETE,action:CA(vF,t)},...wv?[{keyCode:cU.BACKSPACE,altKey:!0,action:CA(y5,t)},{keyCode:cU.DELETE,altKey:!0,action:CA(y5,t)},...o?[{keyCode:wy?224:91,action:CA(y5,t)}]:[]]:[{keyCode:cU.BACKSPACE,ctrlKey:!0,action:CA(y5,t)},{keyCode:cU.DELETE,ctrlKey:!0,action:CA(y5,t)}]],n)),r=!1}),n=et.none(),t.on("keydown",r=>{r.keyCode===cU.ENTER&&(w9&&(t=>{if(!t.collapsed)return!1;let r=t.startContainer;if(nM(r)){let n=r.data.charAt(t.startOffset-1);return/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/.test(n)}return!1})(t.selection.getRng())?(n=et.some(t.selection.getBookmark()),t.undoManager.add()):w4(t,r))}),t.on("keyup",r=>{r.keyCode===cU.ENTER&&n.each(()=>{t.undoManager.undo(),n.fold(H,r=>t.selection.moveToBookmark(r)),w4(t,r),n=et.none()})}),(t=>{t.on("keydown",r=>{r.isDefaultPrevented()||((t,r)=>{CO([{keyCode:cU.SPACEBAR,action:CA(xi,t)},{keyCode:cU.SPACEBAR,action:CA(xs,t)}],r).each(n=>{r.preventDefault(),wp(t,"insertText",{data:" "}).isDefaultPrevented()||(n(),wg(t,"insertText",{data:" "}))})})(t,r)})})(t),(t=>{t.on("input",r=>{r.isComposing||(t=>{let r=rc(t.getBody());t.selection.isCollapsed()&&fs(r,lL.fromRangeStart(t.selection.getRng()),t.schema).each(r=>{t.selection.setRng(r.toRange())})})(t)})})(t),(t=>{t.on("keydown",r=>{r.isDefaultPrevented()||((t,r)=>{CT([...xd(t)],r).each(t=>{r.preventDefault()})})(t,r)})})(t),((t,r)=>{t.on("keydown",n=>{n.isDefaultPrevented()||((t,r,n)=>{let o=tL.os.isMacOS()||tL.os.isiOS();CT([{keyCode:cU.END,action:CA(Cw,t,!0)},{keyCode:cU.HOME,action:CA(Cw,t,!1)},...o?[]:[{keyCode:cU.HOME,action:CA(Cx,t,!1),ctrlKey:!0,shiftKey:!0},{keyCode:cU.END,action:CA(Cx,t,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:cU.END,action:CA(CD,t,!0)},{keyCode:cU.HOME,action:CA(CD,t,!1)},{keyCode:cU.END,action:CA(yV,t,!0,r)},{keyCode:cU.HOME,action:CA(yV,t,!1,r)}],n).each(t=>{n.preventDefault()})})(t,r,n)})})(t,o),((t,r)=>{if(w7.os.isMacOS())return;let n=aY(!1);t.on("keydown",r=>{xt(r)&&xr(n,t,!0)}),t.on("keyup",o=>{o.isDefaultPrevented()||CT([{keyCode:cU.PAGE_UP,action:CA(yV,t,!1,r)},{keyCode:cU.PAGE_DOWN,action:CA(yV,t,!0,r)}],o),xt(o)&&n.get()&&(xr(n,t,!1),t.nodeChanged())})})(t,o),o}};class xu{constructor(t){let r;this.lastPath=[],this.editor=t;let n=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",n=>{let o=t.selection.getRng(),a={startContainer:o.startContainer,startOffset:o.startOffset,endContainer:o.endContainer,endOffset:o.endOffset};"nodechange"!==n.type&&c9(a,r)||t.dispatch("SelectionChange"),r=a}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{let r=t.selection.getStart(!0);r&&dZ(t)&&!n.isSameElementPath(r)&&t.dom.isChildOf(r,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",r=>{!r.isDefaultPrevented()&&dZ(t)&&("IMG"===t.selection.getNode().nodeName?uz.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){let r;let n=this.editor.selection;if(this.editor.initialized&&n&&!se(this.editor)&&!this.editor.mode.isReadOnly()){let o=this.editor.getBody();(r=n.getStart(!0)||o).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);let a=[];this.editor.dom.getParent(r,t=>t===o||(a.push(t),!1)),this.editor.dispatch("NodeChange",{...t,element:r,parents:a})}}isSameElementPath(t){let r;let n=this.editor,o=eE(n.dom.getParents(t,ee,n.getBody()));if(o.length===this.lastPath.length){for(r=o.length;r>=0&&o[r]===this.lastPath[r];r--);if(-1===r)return this.lastPath=o,!0}return this.lastPath=o,!1}}let xm=ll("image"),xf=ll("event"),xg=t=>r=>{r[xf]=t},xp=xg(0),xh=xg(2),xb=xg(1),xv=t=>et.from(t[xf]).exists(t=>0===t),xy=ll("mode"),xC=t=>r=>{r[xy]=t},xE=(t,r)=>xC(r)(t),xw=xC(0),xx=xC(2),x_=xC(1),xk=t=>r=>et.from(r[xy]).exists(r=>r===t),xS=xk(0),xN=xk(1),xR=["none","copy","link","move"],xA=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],xT=()=>{let t=new window.DataTransfer,r="move",n="all",o={get dropEffect(){return r},set dropEffect(e){el(xR,e)&&(r=e)},get effectAllowed(){return n},set effectAllowed(e){xv(o)&&el(xA,e)&&(n=e)},get items(){var a;return{...a=t.items,get length(){return a.length},add:(t,r)=>{if(xS(o)){if(!T(t))return a.add(t);if(!M(r))return a.add(t,r)}return null},remove:t=>{xS(o)&&a.remove(t)},clear:()=>{xS(o)&&a.clear()}}},get files(){return xN(o)?Object.freeze({length:0,item:t=>null}):t.files},get types(){return t.types},setDragImage:(r,n,a)=>{xS(o)&&(o[xm]={image:r,x:n,y:a},t.setDragImage(r,n,a))},getData:r=>xN(o)?"":t.getData(r),setData:(r,n)=>{xS(o)&&t.setData(r,n)},clearData:r=>{xS(o)&&t.clearData(r)}};return xw(o),o},xO=(t,r)=>t.setData("text/html",r),xB="x-tinymce/html",xP=V(xB),xD="<!-- "+xB+" -->",xL=t=>xD+t,xM=t=>-1!==t.indexOf(xD),xF="%MCEPASTEBIN%",xI=t=>t.dom.get("mcepastebin"),xU=t=>I(t)&&"mcepastebin"===t.id,xz=t=>t===xF,xj=(t,r)=>(tU.each(r,r=>{t=A(r,RegExp)?t.replace(r,""):t.replace(r[0],r[1])}),t),xH=t=>xj(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,r,n)=>r||n?"\xa0":" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),x$=(t,r)=>({content:t,cancelled:r}),xq=(t,r)=>(t.insertContent(r,{merge:s_(t),paste:!0}),!0),xV=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),xW=(t,r,n)=>!(t.selection.isCollapsed()||!xV(r))&&(t.undoManager.extra(()=>{n(t,r)},()=>{t.execCommand("mceInsertLink",!1,r)}),!0),xK=(t,r,n)=>!!(xV(r)&&ei(sI(t),t=>e9(r.toLowerCase(),`.${t.toLowerCase()}`)))&&(t.undoManager.extra(()=>{n(t,r)},()=>{t.insertContent('<img src="'+r+'">')}),!0),xY=(o=0,()=>"mceclip"+o++),xG=t=>{let r=xT();return xO(r,t),xx(r),r},xX=(t,r,n,o,a)=>{let l=((t,r,n)=>{let o=t.dispatch("PastePreProcess",{content:r,internal:n}),a=((t,r)=>{let n=hF({sanitize:sM(t),sandbox_iframes:s$(t)},t.schema);n.addNodeFilter("meta",t=>{tU.each(t,t=>{t.remove()})});let o=n.parse(r,{forced_root_block:!1,isRootContent:!0});return mw({validate:!0},t.schema).serialize(o)})(t,o.content);return t.hasEventListeners("PastePostProcess")&&!o.isDefaultPrevented()?((t,r,n)=>{let o=t.dom.create("div",{style:"display:none"},r),a=t.dispatch("PastePostProcess",{node:o,internal:n});return x$(a.node.innerHTML,a.isDefaultPrevented())})(t,a,n):x$(a,o.isDefaultPrevented())})(t,r,n);if(!l.cancelled){let r=l.content,n=()=>{o||!sk(t)?xq(t,r):tU.each([xW,xK,xq],n=>!n(t,r,xq))};a?wp(t,"insertFromPaste",{dataTransfer:xG(r)}).isDefaultPrevented()||(n(),wg(t,"insertFromPaste")):n()}},xQ=(t,r,n,o)=>{let a=n||xM(r);xX(t,r.replace(xD,""),a,!1,o)},xJ=(t,r,n)=>{let o=((t,r,n)=>{let o=t.split(/\n\n/),a=((t,r)=>{let n="<"+t,o=eI(r,(t,r)=>r+'="'+aa.encodeAllRaw(t)+'"');return o.length&&(n+=" "+o.join(" ")),n+">"})(r,n),l="</"+r+">",i=es(o,t=>t.split(/\n/).join("<br />"));return 1===i.length?i[0]:es(i,t=>a+t+l).join("")})(ox(t.dom.encode(r).replace(/\r\n/g,"\n"),sN(t)),ih(t),ib(t));xX(t,o,!1,!0,n)},xZ=t=>{let r={};if(t&&t.types)for(let n=0;n<t.types.length;n++){let o=t.types[n];try{r[o]=t.getData(o)}catch(t){r[o]=""}}return r},x0=(t,r)=>r in t&&t[r].length>0,x1=t=>x0(t,"text/html")||x0(t,"text/plain"),x2=(t,r,n)=>{let o="paste"===r.type?r.clipboardData:r.dataTransfer;if(sv(t)&&o){let a=((t,r)=>{let n=r.items?ey(eR(r.items),t=>"file"===t.kind?[t.getAsFile()]:[]):[],o=r.files?eR(r.files):[];return em(n.length>0?n:o,(t=>{let r=sI(t);return t=>e6(t.type,"image/")&&ei(r,r=>(t=>{let r=t.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return tU.hasOwn(n,r)?"image/"+n[r]:"image/"+r})(r)===t.type)})(t))})(t,o);if(a.length>0)return r.preventDefault(),Promise.all(es(a,t=>pS(t).then(r=>({file:t,uri:r})))).then(r=>{n&&t.selection.setRng(n),ed(r,r=>{((t,r)=>{p_(r.uri).each(({data:n,type:o,base64Encoded:a})=>{let l=a?n:btoa(n),i=r.file,s=t.editorUpload.blobCache,d=s.getByData(l,o),c=null!=d?d:((t,r,n,o)=>{let a=xY(),l=i_(t)&&I(n.name),i=l?((t,r)=>{let n=r.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return I(n)?t.dom.encode(n[1]):void 0})(t,n.name):a,s=l?n.name:void 0,d=r.create(a,n,o,i,s);return r.add(d),d})(t,s,i,l);xQ(t,`<img src="${c.blobUri()}">`,!1,!0)})})(t,r)})}),!0}return!1},x3=(t,r,n,o,a)=>{var l;let i=xH(n),s=x0(r,xP())||xM(n),d=!s&&(l=i,!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(l)),c=xV(i);(xz(i)||!i.length||d&&!c)&&(o=!0),(o||c)&&(i=x0(r,"text/plain")&&d?r["text/plain"]:(t=>{let r=ah(),n=hF({},r),o="",a=r.getVoidElements(),l=tU.makeMap("script noscript style textarea video audio iframe object"," "),i=r.getBlockElements(),s=t=>{let n=t.name;if("br"!==n){if("wbr"!==n){if(a[n]&&(o+=" "),l[n])o+=" ";else{if(3===t.type&&(o+=t.value),!(t.name in r.getVoidElements())){let r=t.firstChild;if(r)do s(r);while(r=r.next)}i[n]&&t.next&&(o+="\n","p"===n&&(o+="\n"))}}}else o+="\n"};return t=xj(t,[/<!\[[^\]]+\]>/g]),s(n.parse(t)),o})(i)),xz(i)||(o?xJ(t,i,a):xQ(t,i,s,a))},x8=(t,r,n)=>{let o;t.on("keydown",t=>{(cU.metaKeyPressed(t)&&86===t.keyCode||t.shiftKey&&45===t.keyCode)&&!t.isDefaultPrevented()&&(o=t.shiftKey&&86===t.keyCode)}),t.on("paste",a=>{var l,i;if(a.isDefaultPrevented()||tL.os.isAndroid()&&0===(null===(i=null===(l=a.clipboardData)||void 0===l?void 0:l.items)||void 0===i?void 0:i.length))return;let s="text"===n.get()||o;o=!1;let d=xZ(a.clipboardData);!x1(d)&&x2(t,a,r.getLastRng()||t.selection.getRng())||(x0(d,"text/html")?(a.preventDefault(),x3(t,d,d["text/html"],s,!0)):x0(d,"text/plain")&&x0(d,"text/uri-list")?(a.preventDefault(),x3(t,d,d["text/plain"],s,!0)):(r.create(),uz.setEditorTimeout(t,()=>{let n=r.getHtml();r.remove(),x3(t,d,n,s,!1)},0)))}),(t=>{let r=t=>e6(t,"webkit-fake-url"),n=t=>e6(t,"data:");t.parser.addNodeFilter("img",(o,a,l)=>{var i;if(!sv(t)&&!0===(null===(i=l.data)||void 0===i?void 0:i.paste))for(let a of o){let o=a.attr("src");T(o)&&!a.attr("data-mce-object")&&o!==tL.transparentSrc&&(r(o)||!sR(t)&&n(o))&&a.remove()}})})(t)},x5=(t,r,n,o)=>{((t,r,n)=>{if(!t)return!1;try{return t.clearData(),t.setData("text/html",r),t.setData("text/plain",n),t.setData(xP(),r),!0}catch(t){return!1}})(t.clipboardData,r.html,r.text)?(t.preventDefault(),o()):n(r.html,o)},x6=t=>(r,n)=>{let{dom:o,selection:a}=t,l=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=o.create("div",{contenteditable:"true"},r);o.setStyles(l,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),l.appendChild(i),o.add(t.getBody(),l);let s=a.getRng();i.focus();let d=o.createRng();d.selectNodeContents(i),a.setRng(d),uz.setEditorTimeout(t,()=>{a.setRng(s),o.remove(l),n()},0)},x9=t=>({html:xL(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),x4=t=>!t.selection.isCollapsed()||!!t.dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody()),x7=(t,r)=>{var n,o;return ui.getCaretRangeFromPoint(null!==(n=r.clientX)&&void 0!==n?n:0,null!==(o=r.clientY)&&void 0!==o?o:0,t.getDoc())},_e=(t,r)=>{t.focus(),r&&t.selection.setRng(r)},_t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,_r=t=>tU.trim(t).replace(_t,ak).toLowerCase(),_n=(t,r,n)=>{let o=sw(t);if(n||"all"===o||!sx(t))return r;let a=o?o.split(/[, ]/):[];if(a&&"none"!==o){let n=t.dom,o=t.selection.getNode();r=r.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(t,r,l,i)=>{let s=n.parseStyle(n.decode(l)),d={};for(let t=0;t<a.length;t++){let r=s[a[t]],l=r,i=n.getStyle(o,a[t],!0);/color/.test(a[t])&&(l=_r(l),i=_r(i)),i!==l&&(d[a[t]]=r)}let c=n.serializeStyle(d,"span");return c?r+' style="'+c+'"'+i:r+i})}else r=r.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return r=r.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(t,r,n,o)=>r+' style="'+n+'"'+o)},_o=t=>{let r=aY(!1),n=aY(sS(t)?"text":"html"),o=(t=>{let r=aY(null);return{create:()=>((t,r)=>{let{dom:n,selection:o}=t,a=t.getBody();r.set(o.getRng());let l=n.add(t.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},xF);tL.browser.isFirefox()&&n.setStyle(l,"left","rtl"===n.getStyle(a,"direction",!0)?65535:-65535),n.bind(l,"beforedeactivate focusin focusout",t=>{t.stopPropagation()}),l.focus(),o.select(l,!0)})(t,r),remove:()=>((t,r)=>{let n=t.dom;if(xI(t)){let o;let a=r.get();for(;o=xI(t);)n.remove(o),n.unbind(o);a&&t.selection.setRng(a)}r.set(null)})(t,r),getEl:()=>xI(t),getHtml:()=>(t=>{let r=t.dom,n=(t,n)=>{t.appendChild(n),r.remove(n,!0)},[o,...a]=em(t.getBody().childNodes,xU);ed(a,t=>{n(o,t)});let l=r.select("div[id=mcepastebin]",o);for(let t=l.length-1;t>=0;t--){let a=r.create("div");o.insertBefore(a,l[t]),n(a,l[t])}return o?o.innerHTML:""})(t),getLastRng:r.get}})(t);(tL.browser.isChromium()||tL.browser.isSafari())&&((t,r)=>{t.on("PastePreProcess",n=>{n.content=r(t,n.content,n.internal)})})(t,_n),t.addCommand("mceTogglePlainTextPaste",()=>{"text"===n.get()?(n.set("html"),cI(t,!1)):(n.set("text"),cI(t,!0)),t.focus()}),t.addCommand("mceInsertClipboardContent",(r,n)=>{n.html&&xQ(t,n.html,n.internal,!1),n.text&&xJ(t,n.text,!1)}),(t=>{let r=r=>n=>{r(t,n)},n=sy(t);U(n)&&t.on("PastePreProcess",r(n));let o=sC(t);U(o)&&t.on("PastePostProcess",r(o))})(t),t.on("PreInit",()=>{t.on("cut",r=>{!r.isDefaultPrevented()&&x4(t)&&t.selection.isEditable()&&x5(r,x9(t),x6(t),()=>{if(tL.browser.isChromium()||tL.browser.isFirefox()){let r=t.selection.getRng();uz.setEditorTimeout(t,()=>{t.selection.setRng(r),t.execCommand("Delete")},0)}else t.execCommand("Delete")})}),t.on("copy",r=>{!r.isDefaultPrevented()&&x4(t)&&x5(r,x9(t),x6(t),H)}),sb(t)&&t.on("dragend dragover draggesture dragdrop drop drag",t=>{t.preventDefault(),t.stopPropagation()}),sv(t)||t.on("drop",t=>{let r=t.dataTransfer;r&&ei(r.files,t=>/^image\//.test(t.type))&&t.preventDefault()}),t.on("drop",n=>{if(n.isDefaultPrevented())return;let o=x7(t,n);if(F(o))return;let a=xZ(n.dataTransfer),l=x0(a,xP());if((!x1(a)||(t=>{let r=t["text/plain"];return!!r&&0===r.indexOf("file://")})(a))&&x2(t,n,o))return;let i=a[xP()],s=i||a["text/html"]||a["text/plain"],d=((t,r,n,o)=>{let a=t.getParent(n,t=>oV(r,t));return!D(t.getParent(n,"summary"))||!!(a&&ej(o,"text/html"))&&!D((new DOMParser).parseFromString(o["text/html"],"text/html").body.querySelector(a.nodeName.toLowerCase()))})(t.dom,t.schema,o.startContainer,a),c=r.get();c&&!d||s&&(n.preventDefault(),uz.setEditorTimeout(t,()=>{t.undoManager.transact(()=>{(i||c&&d)&&t.execCommand("Delete"),_e(t,o);let r=xH(s);a["text/html"]?xQ(t,r,l,!0):xJ(t,r,!0)})}))}),t.on("dragstart",t=>{r.set(!0)}),t.on("dragover dragend",n=>{sv(t)&&!r.get()&&(n.preventDefault(),_e(t,x7(t,n))),"dragend"===n.type&&r.set(!1)}),(t=>{t.on("input",r=>{"deleteByDrag"===r.inputType&&ed(em(t.dom.select("details"),t=>D(t.querySelector("summary"))),r=>{nH(r.firstChild)&&r.firstChild.remove();let n=t.dom.create("summary");n.appendChild(oe().dom),r.prepend(n)})})})(t),x8(t,o,n)})},_a=t=>nV(t.dom),_l=t=>r=>rv(rc(t),r),_i=(t,r)=>rW(rc(t),_a,_l(r)),_s=(t,r,n)=>{let o=new nx(t,r),a=n?o.next.bind(o):o.prev.bind(o),l=t;for(let r=n?t:a();r&&!nH(r);r=a())oh(r)&&(l=r);return l},_d=t=>{let r=((t,r,n)=>{let o=lL.fromRangeStart(t).getNode(),a=rW(rc(o),t=>nq(t.dom)||n.isBlock(tY(t)),_l(r)).getOr(rc(r)).dom,l=_s(o,a,!1),i=_s(o,a,!0),s=document.createRange();return _i(l,a).fold(()=>{nM(l)?s.setStart(l,0):s.setStartBefore(l)},t=>s.setStartBefore(t.dom)),_i(i,a).fold(()=>{nM(i)?s.setEnd(i,i.data.length):s.setEndAfter(i)},t=>s.setEndAfter(t.dom)),s})(t.selection.getRng(),t.getBody(),t.schema);t.selection.setRng(gg(r))};(u=b||(b={})).Before="before",u.After="after";let _c=(t,r)=>Math.abs(t.left-r),_u=(t,r)=>Math.abs(t.right-r),_m=(t,r)=>eg(em(t,t=>r>=t.top&&r<=t.bottom),(t,r)=>t.fold(()=>et.some(r),t=>{let n=Math.min(r.left,t.left),o=Math.min(r.top,t.top),a=Math.max(r.right,t.right),l=Math.max(r.bottom,t.bottom);return et.some({top:o,right:a,bottom:l,left:n,width:a-n,height:l-o})}),et.none()).fold(()=>[[],t],r=>{let{pass:n,fail:o}=eu(t,t=>((t,r)=>{let n=Math.max(0,Math.min(t.bottom,r.bottom)-Math.max(t.top,r.top))/Math.min(t.height,r.height);return t.top<r.bottom&&t.bottom>r.top&&n>.5})(t,r));return[n,o]}),_f=(t,r,n)=>r>t.left&&r<t.right?0:Math.min(Math.abs(t.left-r),Math.abs(t.right-r)),_g=(t,r,n,o)=>{let a=t=>oh(t.node)?et.some(t):nS(t.node)?_g(eR(t.node.childNodes),r,n,!1):et.none(),l=(t,l)=>{let i=e_(t,(t,o)=>l(t,r,n)-l(o,r,n));return eA(i,a).map(t=>o&&!nM(t.node)&&i.length>1?a(i[1]).filter(o=>2>Math.abs(l(t,r,n)-l(o,r,n))&&nM(o.node)).getOr(t):t)},[i,s]=_m(yx(t),n),{pass:d,fail:c}=eu(s,t=>t.top<n);return l(i,_f).orThunk(()=>l(c,lv)).orThunk(()=>l(d,lv))},_p=(t,r,n)=>((t,r,n)=>{let o=rc(t),a=rg(rE(o),r,n).filter(t=>ry(o,t)).getOr(o);return((t,r,n,o)=>{let a=(r,l)=>{let i=em(r.dom.childNodes,G(t=>nS(t)&&t.classList.contains("mce-drag-container")));return l.fold(()=>_g(i,n,o,!0),t=>_g(em(i,r=>r!==t.dom),n,o,!0)).orThunk(()=>(rv(r,t)?et.none():r_(r)).bind(t=>a(t,et.some(r))))};return a(r,et.none())})(o,a,r,n)})(t,r,n).filter(t=>s0(t.node)).map(t=>({node:t.node,position:_c(t,r)<_u(t,r)?b.Before:b.After})),_h=t=>{var r,n;let o=t.getBoundingClientRect(),a=t.ownerDocument,l=a.documentElement,i=a.defaultView;return{top:o.top+(null!==(r=null==i?void 0:i.scrollY)&&void 0!==r?r:0)-l.clientTop,left:o.left+(null!==(n=null==i?void 0:i.scrollX)&&void 0!==n?n:0)-l.clientLeft}},_b=t=>({target:t,srcElement:t}),_v=(t,r,n,o)=>{let a=((t,r)=>{let n=(t=>{let r=xT(),n=et.from(t[xy]);return xx(t),xp(r),r.dropEffect=t.dropEffect,r.effectAllowed=t.effectAllowed,et.from(t[xm]).each(t=>r.setDragImage(t.image,t.x,t.y)),ed(t.types,n=>{"Files"!==n&&r.setData(n,t.getData(n))}),ed(t.files,t=>r.items.add(t)),et.from(t[xf]).each(t=>{((t,r)=>{xg(r)(t)})(r,t)}),n.each(n=>{xE(t,n),xE(r,n)}),r})(t);return"dragstart"===r?(xp(n),xw(n)):"drop"===r?(xh(n),xx(n)):(xb(n),x_(n)),n})(n,t);return M(o)?((t,r,n)=>{let o=X("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:t,composedPath:o,initEvent:o,preventDefault:H,stopImmediatePropagation:H,stopPropagation:H,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:o,initMouseEvent:o,getModifierState:o,dataTransfer:n,..._b(r)}})(t,r,a):{...o,dataTransfer:a,type:t,..._b(r)}},_y=((...t)=>r=>{for(let n=0;n<t.length;n++)if(t[n](r))return!0;return!1})(nV,nq),_C=(t,r,n,o)=>{let a=t.dom,l=r.cloneNode(!0);a.setStyles(l,{width:n,height:o}),a.setAttrib(l,"data-mce-selected",null);let i=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),a.setStyles(l,{margin:0,boxSizing:"border-box"}),i.appendChild(l),i},_E=(t,r)=>n=>()=>{let o="left"===t?n.scrollX:n.scrollY;n.scroll({[t]:o+r,behavior:"smooth"})},_w=_E("left",-32),_x=_E("left",32),__=_E("top",-32),_k=_E("top",32),_S=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},_N=(t,r,n,o,a)=>{"dragstart"===r&&xO(o,t.dom.getOuterHTML(n));let l=_v(r,n,o,a);return t.dispatch(r,l)},_R=(t,r)=>{let n=a2((t,n)=>{r._selectionOverrides.hideFakeCaret(),_p(r.getBody(),t,n).fold(()=>r.selection.placeCaretAt(t,n),o=>{let a=r._selectionOverrides.showCaret(1,o.node,o.position===b.Before,!1);a?r.selection.setRng(a):r.selection.placeCaretAt(t,n)})},0);return r.on("remove",n.cancel),o=>t.on(a=>{var l,i,s,d,c,u;let m=Math.max(Math.abs(o.screenX-a.screenX),Math.abs(o.screenY-a.screenY));if(!a.dragging&&m>10){let t=_N(r,"dragstart",a.element,a.dataTransfer,o);if(I(t.dataTransfer)&&(a.dataTransfer=t.dataTransfer),t.isDefaultPrevented())return;a.dragging=!0,r.focus()}if(a.dragging){let m=o.currentTarget===r.getDoc().documentElement,f=(s=r.inline?_h(r.getBody()):{left:0,top:0},d=(t=>{let r=t.getBody();return t.inline?{left:r.scrollLeft,top:r.scrollTop}:{left:0,top:0}})(r),{pageX:(u={pageX:(c=((t,r)=>{if(r.target.ownerDocument!==t.getDoc()){let n=_h(t.getContentAreaContainer()),o=(t=>{let r=t.getBody(),n=t.getDoc().documentElement,o={left:r.scrollLeft,top:r.scrollTop},a={left:r.scrollLeft||n.scrollLeft,top:r.scrollTop||n.scrollTop};return t.inline?o:a})(t);return{left:r.pageX-n.left+o.left,top:r.pageY-n.top+o.top}}return{left:r.pageX,top:r.pageY}})(r,o)).left-s.left+d.left,pageY:c.top-s.top+d.top}).pageX-a.relX,pageY:u.pageY+5});l=a.ghost,i=r.getBody(),l.parentNode!==i&&i.appendChild(l),((t,r,n,o,a,l,i,s,d,c,u,m)=>{let f=0,g=0;t.style.left=r.pageX+"px",t.style.top=r.pageY+"px",r.pageX+n>a&&(f=r.pageX+n-a),r.pageY+o>l&&(g=r.pageY+o-l),t.style.width=n-f+"px",t.style.height=o-g+"px";let p=d.clientHeight,h=d.clientWidth,b=i+d.getBoundingClientRect().top,v=s+d.getBoundingClientRect().left;u.on(t=>{t.intervalId.clear(),t.dragging&&m&&(i+8>=p?t.intervalId.set(_k(c)):i-8<=0?t.intervalId.set(__(c)):s+8>=h?t.intervalId.set(_x(c)):s-8<=0?t.intervalId.set(_w(c)):b+16>=window.innerHeight?t.intervalId.set(_k(window)):b-16<=0?t.intervalId.set(__(window)):v+16>=window.innerWidth?t.intervalId.set(_x(window)):v-16<=0&&t.intervalId.set(_w(window)))})})(a.ghost,f,a.width,a.height,a.maxX,a.maxY,o.clientY,o.clientX,r.getContentAreaContainer(),r.getWin(),t,m),n.throttle(o.clientX,o.clientY)}})},_A=(t,r,n)=>{t.on(t=>{t.intervalId.clear(),t.dragging&&n.fold(()=>_N(r,"dragend",t.element,t.dataTransfer),n=>_N(r,"dragend",t.element,t.dataTransfer,n))}),_T(t)},_T=t=>{t.on(t=>{t.intervalId.clear(),_S(t.ghost)}),t.clear()},_O=t=>{let r=a1(),n=aV.DOM,o=document,a=_R(r,t),l=n=>_A(r,t,et.some(n));t.on("mousedown",n=>{if(0===n.button){var o,a;let l=eh(t.dom.getParents(n.target),_y).getOr(null);if(I(l)&&(o=t.dom,a=t.getBody(),nV(l)&&l!==a&&o.isEditable(l.parentElement))){let o=t.dom.getPos(l),a=t.getBody(),i=t.getDoc().documentElement;r.set({element:l,dataTransfer:xT(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?a.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?a.scrollHeight:i.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:l.offsetWidth,height:l.offsetHeight,ghost:_C(t,l,l.offsetWidth,l.offsetHeight),intervalId:a0(100)})}}}),t.on("mousemove",a),t.on("mouseup",n=>{r.on(r=>{var o,a,l;if(r.intervalId.clear(),r.dragging){if(a=(t=>{let r=t.getSel();if(I(r)){let t=r.getRangeAt(0).startContainer;return nM(t)?t.parentNode:t}return null})(t.selection),l=r.element,!F(a)&&a!==l&&!t.dom.isChildOf(a,l)&&t.dom.isEditable(a)){let a=null!==(o=t.getDoc().elementFromPoint(n.clientX,n.clientY))&&void 0!==o?o:t.getBody();_N(t,"drop",a,r.dataTransfer,n).isDefaultPrevented()||t.undoManager.transact(()=>{((t,r)=>{let n=t.getParent(r.parentNode,t.isBlock);_S(r),n&&n!==t.getRoot()&&t.isEmpty(n)&&ot(rc(n))})(t.dom,r.element),(t=>{let r=t.getData("text/html");return""===r?et.none():et.some(r)})(r.dataTransfer).each(r=>t.insertContent(r)),t._selectionOverrides.hideFakeCaret()})}_N(t,"dragend",t.getBody(),r.dataTransfer,n)}}),_T(r)}),n.bind(o,"mousemove",a),n.bind(o,"mouseup",l),t.on("remove",()=>{n.unbind(o,"mousemove",a),n.unbind(o,"mouseup",l)}),t.on("keydown",n=>{n.keyCode===cU.ESC&&_A(r,t,et.none())})},_B=(t,r)=>f7(t.getBody(),r),_P=t=>{let r;let n=t.selection,o=t.dom,a=t.getBody(),l=sQ(t,a,o.isBlock,()=>uG(t)),i="sel-"+o.uniqueId(),s="data-mce-selected",d=t=>t!==a&&(nV(t)||nY(t))&&o.isChildOf(t,a)&&o.isEditable(t.parentNode),c=(r,o,a,i=!0)=>t.dispatch("ShowCaret",{target:o,direction:r,before:a}).isDefaultPrevented()?null:(i&&n.scrollIntoView(o,-1===r),l.show(a,o)),u=t=>oa(t)||od(t)||oc(t),m=t=>u(t.startContainer)||u(t.endContainer),f=r=>{let n=t.schema.getVoidElements(),a=o.createRng(),l=r.startContainer,i=r.startOffset,s=r.endContainer,d=r.endOffset;return ej(n,l.nodeName.toLowerCase())?0===i?a.setStartBefore(l):a.setStartAfter(l):a.setStart(l,i),ej(n,s.nodeName.toLowerCase())?0===d?a.setEndBefore(s):a.setEndAfter(s):a.setEnd(s,d),a},g=(l,u)=>{if(!l)return null;if(l.collapsed){if(!m(l)){let t=u?1:-1,r=di(t,a,l),n=r.getNode(!u);if(I(n)){if(s0(n))return c(t,n,!!u&&!r.isAtEnd(),!1);if(oo(n)&&nV(n.nextSibling)){let t=o.createRng();return t.setStart(n,0),t.setEnd(n,0),t}}let i=r.getNode(u);if(I(i)){if(s0(i))return c(t,i,!u&&!r.isAtEnd(),!1);if(oo(i)&&nV(i.previousSibling)){let t=o.createRng();return t.setStart(i,1),t.setEnd(i,1),t}}}return null}let f=l.startContainer,g=l.startOffset,p=l.endOffset;if(nM(f)&&0===g&&nV(f.parentNode)&&(f=f.parentNode,g=o.nodeIndex(f),f=f.parentNode),!nS(f))return null;if(p===g+1&&f===l.endContainer){let a=f.childNodes[g];if(d(a))return(a=>{let l=a.cloneNode(!0),d=t.dispatch("ObjectSelected",{target:a,targetClone:l});if(d.isDefaultPrevented())return null;let c=((r,a)=>{let l=rc(t.getBody()),s=t.getDoc(),d=rG(l,"#"+i).getOrThunk(()=>{let t=ru('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',s);return t8(t,"id",i),nt(l,t),t}),c=o.createRng();no(d),nn(d,[rf("\xa0",s),rc(a),rf("\xa0",s)]),c.setStart(d.dom.firstChild,1),c.setEnd(d.dom.lastChild,0),r2(d,{top:o.getPos(r,t.getBody()).y+"px"}),uR(d);let u=n.getSel();return u&&(u.removeAllRanges(),u.addRange(c)),c})(a,d.targetClone),u=rc(a);return ed(nE(rc(t.getBody()),`*[${s}]`),t=>{rv(u,t)||t7(t,s)}),o.getAttrib(a,s)||a.setAttribute(s,"1"),r=a,h(),c})(a)}return null},p=()=>{r&&r.removeAttribute(s),rG(rc(t.getBody()),"#"+i).each(na),r=null},h=()=>{l.hide()};return bl(t)||(t.on("click",r=>{o.isEditable(r.target)||(r.preventDefault(),t.focus())}),t.on("blur NewBlock",p),t.on("ResizeWindow FullscreenStateChanged",l.reposition),t.on("tap",r=>{let n=r.target,o=_B(t,n);nV(o)?(r.preventDefault(),vk(t,o).each(g)):d(n)&&vk(t,n).each(g)},!0),t.on("mousedown",r=>{let l=r.target;if(l!==a&&"HTML"!==l.nodeName&&!o.isChildOf(l,a)||!((t,r,n)=>{let o=rc(t.getBody()),a=t.inline?o:rc(rE(o).dom.documentElement),l=((t,r,n,o)=>{let a=r.dom.getBoundingClientRect();return{x:n-(t?a.left+r.dom.clientLeft+bU(r):0),y:o-(t?a.top+r.dom.clientTop+bI(r):0)}})(t.inline,a,r,n);return((t,r,n)=>{let o=bM(t),a=bF(t);return r>=0&&n>=0&&r<=o&&n<=a})(a,l.x,l.y)})(t,r.clientX,r.clientY))return;p(),h();let i=_B(t,l);nV(i)?(r.preventDefault(),vk(t,i).each(g)):_p(a,r.clientX,r.clientY).each(o=>{var a;r.preventDefault(),(a=c(1,o.node,o.position===b.Before,!1))&&n.setRng(a),nN(i)?i.focus():t.getBody().focus()})}),t.on("keypress",t=>{cU.modifierPressed(t)||nV(n.getNode())&&t.preventDefault()}),t.on("GetSelectionRange",t=>{let n=t.range;if(r){if(!r.parentNode)return void(r=null);(n=n.cloneRange()).selectNode(r),t.range=n}}),t.on("SetSelectionRange",t=>{t.range=f(t.range);let r=g(t.range,t.forward);r&&(t.range=r)}),t.on("AfterSetSelectionRange",t=>{let r=t.range,n=r.startContainer.parentElement;m(r)||nS(n)&&"mcepastebin"===n.id||h(),I(n)&&o.hasClass(n,"mce-offscreen-selection")||p()}),_O(t),sl(t)&&(t=>{let r=r=>{if(!r.isDefaultPrevented()){let n=r.dataTransfer;n&&(el(n.types,"Files")||n.files.length>0)&&(r.preventDefault(),"drop"===r.type&&bV(t,"Dropped file type is not supported"))}},n=n=>{u$(t,n.target)&&r(n)},o=()=>{let o=aV.DOM,a=t.dom,l=document,i=t.inline?t.getBody():t.getDoc(),s=["drop","dragover"];ed(s,t=>{o.bind(l,t,n),a.bind(i,t,r)}),t.on("remove",()=>{ed(s,t=>{o.unbind(l,t,n),a.unbind(i,t,r)})})};t.on("init",()=>{uz.setEditorTimeout(t,o,0)})})(t),(t=>{let r=a2(()=>{if(!t.removed&&t.getBody().contains(document.activeElement)){let r=t.selection.getRng();if(r.collapsed){let n=vS(t,r,!1);t.selection.setRng(n)}}},0);t.on("focus",()=>{r.throttle()}),t.on("blur",()=>{r.cancel()})})(t),(t=>{t.on("init",()=>{t.on("focusin",r=>{let n=r.target;if(nY(n)){let r=f7(t.getBody(),n),o=nV(r)?r:n;t.selection.getNode()!==o&&vk(t,o).each(r=>t.selection.setRng(r))}})})})(t)),{showCaret:c,showBlockCaretContainer:t=>{t.hasAttribute("data-mce-caret")&&(ou(t),n.scrollIntoView(t))},hideFakeCaret:h,destroy:()=>{l.destroy(),r=null}}},_D=(t,r)=>{let n=r;for(let r=t.previousSibling;nM(r);r=r.previousSibling)n+=r.data.length;return n},_L=(t,r,n,o,a)=>{if(nM(n)&&(o<0||o>n.data.length))return[];let l=a&&nM(n)?[_D(n,o)]:[o],i=n;for(;i!==r&&i.parentNode;)l.push(t.nodeIndex(i,a)),i=i.parentNode;return i===r?l.reverse():[]},_M=(t,r,n,o,a,l,i=!1)=>({start:_L(t,r,n,o,i),end:_L(t,r,a,l,i)}),_F=(t,r)=>{let n=r.slice(),o=n.pop();return z(o)?eg(n,(t,r)=>t.bind(t=>et.from(t.childNodes[r])),et.some(t)).bind(t=>nM(t)&&(o<0||o>t.data.length)?et.none():et.some({node:t,offset:o})):et.none()},_I=(t,r)=>_F(t,r.start).bind(({node:n,offset:o})=>_F(t,r.end).map(({node:t,offset:r})=>{let a=document.createRange();return a.setStart(n,o),a.setEnd(t,r),a})),_U=(t,r,n)=>{if(r&&t.isEmpty(r)&&!n(r)){let o=r.parentNode;t.remove(r,nM(r.firstChild)&&oC(r.firstChild.data)),_U(t,o,n)}},_z=(t,r,n,o=!0)=>{let a=r.startContainer.parentNode,l=r.endContainer.parentNode;r.deleteContents(),o&&!n(r.startContainer)&&(nM(r.startContainer)&&0===r.startContainer.data.length&&t.remove(r.startContainer),nM(r.endContainer)&&0===r.endContainer.data.length&&t.remove(r.endContainer),_U(t,a,n),a!==l&&_U(t,l,n))},_j=(t,r)=>et.from(t.dom.getParent(r.startContainer,t.dom.isBlock)),_H=(t,r,n)=>{let o=t.dynamicPatternsLookup({text:n,block:r});return{...t,blockPatterns:l9(o).concat(t.blockPatterns),inlinePatterns:l4(o).concat(t.inlinePatterns)}},_$=(t,r,n,o)=>{let a=t.createRng();return a.setStart(r,0),a.setEnd(n,o),a.toString()},_q=(t,r,n)=>{((t,r,n)=>{if(nM(t)&&0>=t.length)return et.some(C3(t,0));{let r=lu(C8);return et.from(r.forwards(t,0,C5(t),n)).map(t=>C3(t.container,0))}})(r,0,r).each(o=>{var a;let l=o.container;C4(l,n.start.length,r).each(n=>{let o=t.createRng();o.setStart(l,0),o.setEnd(n.container,n.offset),_z(t,o,t=>t===r)});let i=rc(l),s=n0(i);/^\s[^\s]/.test(s)&&(a=s.slice(1),nZ.set(i,a))})},_V=(t,r)=>t.create("span",{"data-mce-type":"bookmark",id:r}),_W=(t,r)=>{let n=t.createRng();return n.setStartAfter(r.start),n.setEndBefore(r.end),n},_K=(t,r,n)=>{let o=_I(t.getRoot(),n).getOrDie("Unable to resolve path range"),a=o.startContainer,l=o.endContainer,i=0===o.endOffset?l:l.splitText(o.endOffset),s=0===o.startOffset?a:a.splitText(o.startOffset),d=s.parentNode;return{prefix:r,end:i.parentNode.insertBefore(_V(t,r+"-end"),i),start:d.insertBefore(_V(t,r+"-start"),s)}},_Y=(t,r,n)=>{_U(t,t.get(r.prefix+"-end"),n),_U(t,t.get(r.prefix+"-start"),n)},_G=t=>0===t.start.length,_X=(t,r,n,o)=>{let a=r.start;return C7(t,o.container,o.offset,(t,r)=>{let n=t.data.substring(0,r),o=n.lastIndexOf(a.charAt(a.length-1)),l=n.lastIndexOf(a);return -1!==l?l+a.length:-1!==o?o+1:-1},n).bind(o=>{var l,i;let s=null!==(i=null===(l=n.textContent)||void 0===l?void 0:l.indexOf(a))&&void 0!==i?i:-1;if(-1!==s&&o.offset>=s+a.length){let r=t.createRng();return r.setStart(o.container,o.offset-a.length),r.setEnd(o.container,o.offset),et.some(r)}{let l=o.offset-a.length;return C9(o.container,l,n).map(r=>{let n=t.createRng();return n.setStart(r.container,r.offset),n.setEnd(o.container,o.offset),n}).filter(t=>t.toString()===a).orThunk(()=>_X(t,r,n,C3(o.container,0)))}})},_Q=(t,r,n,o)=>{let a=t.dom,l=a.getRoot(),i=n.pattern,s=n.position.container,d=n.position.offset;return C9(s,d-n.pattern.end.length,r).bind(c=>{let u=_M(a,l,c.container,c.offset,s,d,o);if(_G(i))return et.some({matches:[{pattern:i,startRng:u,endRng:u}],position:c});{let s=_J(t,n.remainingPatterns,c.container,c.offset,r,o),d=s.getOr({matches:[],position:c}),m=d.position;return((t,r,n,o,a,l=!1)=>{if(0===r.start.length&&!l){let r=t.createRng();return r.setStart(n,o),r.setEnd(n,o),et.some(r)}return C6(n,o,a).bind(n=>_X(t,r,a,n).bind(t=>{var r;return l&&(t.endContainer===n.container&&t.endOffset===n.offset||0===n.offset&&(null===(r=t.endContainer.textContent)||void 0===r?void 0:r.length)===t.endOffset)?et.none():et.some(t)}))})(a,i,m.container,m.offset,r,s.isNone()).map(t=>{let r=((t,r,n,o=!1)=>_M(t,r,n.startContainer,n.startOffset,n.endContainer,n.endOffset,o))(a,l,t,o);return{matches:d.matches.concat([{pattern:i,startRng:r,endRng:u}]),position:C3(t.startContainer,t.startOffset)}})}})},_J=(t,r,n,o,a,l)=>{let i=t.dom;return C6(n,o,i.getRoot()).bind(s=>{let d=_$(i,a,n,o);for(let i=0;i<r.length;i++){let c=r[i];if(!e9(d,c.end))continue;let u=r.slice();u.splice(i,1);let m=_Q(t,a,{pattern:c,remainingPatterns:u,position:s},l);if(m.isNone()&&o>0)return _J(t,r,n,o-1,a,l);if(m.isSome())return m}return et.none()})},_Z=(t,r,n)=>{t.selection.setRng(n),"inline-format"===r.type?ed(r.format,r=>{t.formatter.apply(r)}):t.execCommand(r.cmd,!1,r.value)},_0=(t,r,n,o,a,l)=>((t,r)=>{let n=eC(t,t=>ei(r,r=>t.pattern.start===r.pattern.start&&t.pattern.end===r.pattern.end));return t.length===r.length?n?t:r:t.length>r.length?t:r})(_J(t,a.inlinePatterns,n,o,r,l).fold(()=>[],t=>t.matches),_J(t,e_(a.inlinePatterns,(t,r)=>r.end.length-t.end.length),n,o,r,l).fold(()=>[],t=>t.matches)),_1=(t,r)=>{if(0===r.length)return;let n=t.dom,o=t.selection.getBookmark();ed(((t,r)=>{let n=ll("mce_textpattern"),o=ef(r,(r,o)=>{let a=_K(t,n+`_end${r.length}`,o.endRng);return r.concat([{...o,endMarker:a}])},[]);return ef(o,(r,a)=>{let l=o.length-r.length-1,i=_G(a.pattern)?a.endMarker:_K(t,n+`_start${l}`,a.startRng);return r.concat([{...a,startMarker:i}])},[])})(n,r),r=>{let o=n.getParent(r.startMarker.start,n.isBlock),a=t=>t===o;_G(r.pattern)?((t,r,n,o)=>{let a=_W(t.dom,n);_z(t.dom,a,o),_Z(t,r,a)})(t,r.pattern,r.endMarker,a):((t,r,n,o,a)=>{let l=t.dom,i=_W(l,o),s=_W(l,n);_z(l,s,a),_z(l,i,a),_Z(t,r,_W(l,{prefix:n.prefix,start:n.end,end:o.start}))})(t,r.pattern,r.startMarker,r.endMarker,a),_Y(n,r.endMarker,a),_Y(n,r.startMarker,a)}),t.selection.moveToBookmark(o)},_2=(t,r)=>{let n=t.selection.getRng();return _j(t,n).map(o=>{var a;let l=Math.max(0,n.startOffset),i=_H(r,o,null!==(a=o.textContent)&&void 0!==a?a:""),s=_0(t,o,n.startContainer,l,i,!0),d=((t,r,n,o)=>{var a;let l=t.dom,i=ih(t);if(!l.is(r,i))return[];let s=null!==(a=r.textContent)&&void 0!==a?a:"";return((t,r)=>{let n=e_(t,(t,r)=>r.start.length-t.start.length),o=r.replace("\xa0"," ");return eh(n,t=>0===r.indexOf(t.start)||0===o.indexOf(t.start))})(n.blockPatterns,s).map(t=>tU.trim(s).length===t.start.length?[]:[{pattern:t,range:_M(l,l.getRoot(),r,0,r,0,!0)}]).getOr([])})(t,o,i);return(d.length>0||s.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{(t=>{t.insertContent("\uFEFF",{preserve_zwsp:!0})})(t),_1(t,s),((t,r)=>{if(0===r.length)return;let n=t.selection.getBookmark();ed(r,r=>((t,r)=>{let n=t.dom,o=r.pattern;return _j(t,_I(n.getRoot(),r.range).getOrDie("Unable to resolve path range")).each(r=>{"block-format"===o.type?((t,r)=>{let n=r.get(t);return P(n)&&eS(n).exists(t=>ej(t,"block"))})(o.format,t.formatter)&&t.undoManager.transact(()=>{_q(t.dom,r,o),t.formatter.apply(o.format)}):"block-command"===o.type&&t.undoManager.transact(()=>{_q(t.dom,r,o),t.execCommand(o.cmd,!1,o.value)})}),!0})(t,r)),t.selection.moveToBookmark(n)})(t,d);let r=t.selection.getRng(),n=C6(r.startContainer,r.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),n.each(r=>{let n=r.container;"\uFEFF"===n.data.charAt(r.offset-1)&&(n.deleteData(r.offset-1,1),_U(t.dom,n.parentNode,r=>r===t.dom.getRoot()))})}),!0)}).getOr(!1)},_3=(t,r,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],r))return!0;return!1},_8=t=>{let r=tU.each,n=cU.BACKSPACE,o=cU.DELETE,a=t.dom,l=t.selection,i=t.parser,s=tL.browser,d=s.isFirefox(),c=s.isChromium()||s.isSafari(),u=tL.deviceType.isiPhone()||tL.deviceType.isiPad(),m=tL.os.isMacOS()||tL.os.isiOS(),f=(r,n)=>{try{t.getDoc().execCommand(r,!1,String(n))}catch(t){}},g=t=>t.isDefaultPrevented(),p=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{t.inline||a.bind(t.getDoc(),"mousedown mouseup",r=>{let n;if(r.target===t.getDoc().documentElement){if(n=l.getRng(),t.getBody().focus(),"mousedown"===r.type){if(oa(n.startContainer))return;l.placeCaretAt(r.clientX,r.clientY)}else l.setRng(n)}})},b=()=>{Range.prototype.getClientRects||t.on("mousedown",r=>{if(!g(r)&&"HTML"===r.target.nodeName){let r=t.getBody();r.blur(),uz.setEditorTimeout(t,()=>{r.focus()})}})},v=()=>{let r=sd(t);t.on("click",n=>{let o=n.target;/^(IMG|HR)$/.test(o.nodeName)&&a.isEditable(o)&&(n.preventDefault(),t.selection.select(o),t.nodeChanged()),"A"===o.nodeName&&a.hasClass(o,r)&&0===o.childNodes.length&&a.isEditable(o.parentNode)&&(n.preventDefault(),l.select(o))})},y=()=>{t.on("keydown",t=>{if(!g(t)&&t.keyCode===n&&l.isCollapsed()&&0===l.getRng().startOffset){let r=l.getNode().previousSibling;if(r&&r.nodeName&&"table"===r.nodeName.toLowerCase())return t.preventDefault(),!1}return!0})},C=()=>{st(t)||t.on("BeforeExecCommand mousedown",()=>{f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),i$(t)||f("enableObjectResizing",!1)})},E=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},x=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",r=>{let n;"HTML"===r.target.nodeName&&(n=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(n),t.selection.normalize(),t.nodeChanged())}))},_=()=>{m&&t.on("keydown",r=>{!cU.metaKeyPressed(r)||r.shiftKey||37!==r.keyCode&&39!==r.keyCode||(r.preventDefault(),t.selection.getSel().modify("move",37===r.keyCode?"backward":"forward","lineboundary"))})},k=()=>{t.on("click",t=>{let r=t.target;do if("A"===r.tagName)return void t.preventDefault();while(r=r.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},S=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",t=>{t.preventDefault()})})};return bl(t)?(c&&(h(),v(),S(),p(),u&&(w(),x(),k())),d&&(b(),C(),E(),_())):(t.on("keydown",r=>{if(g(r)||r.keyCode!==cU.BACKSPACE)return;let n=l.getRng(),o=n.startContainer,i=n.startOffset,s=a.getRoot(),d=o;if(n.collapsed&&0===i){for(;d.parentNode&&d.parentNode.firstChild===d&&d.parentNode!==s;)d=d.parentNode;"BLOCKQUOTE"===d.nodeName&&(t.formatter.toggle("blockquote",void 0,d),(n=a.createRng()).setStart(o,0),n.setEnd(o,0),l.setRng(n))}}),(()=>{let r=t=>{let r=a.create("body"),n=t.cloneContents();return r.appendChild(n),l.serializer.serialize(r,{format:"html"})};t.on("keydown",l=>{let i=l.keyCode;if(!g(l)&&(i===o||i===n)&&t.selection.isEditable()){let n=t.selection.isCollapsed(),o=t.getBody();if(n&&!oA(rc(o))||!n&&!(n=>{let o=r(n),l=a.createRng();return l.selectNode(t.getBody()),o===r(l)})(t.selection.getRng()))return;l.preventDefault(),t.setContent(""),o.firstChild&&a.isBlock(o.firstChild)?t.selection.setCursorLocation(o.firstChild,0):t.selection.setCursorLocation(o,0),t.nodeChanged()}})})(),tL.windowsPhone||t.on("keyup focusin mouseup",r=>{cU.modifierPressed(r)||(t=>{let r=t.getBody(),n=t.selection.getRng();return n.startContainer===n.endContainer&&n.startContainer===r&&0===n.startOffset&&n.endOffset===r.childNodes.length})(t)||l.normalize()},!0),c&&(h(),v(),t.on("init",()=>{f("DefaultParagraphSeparator",ih(t))}),S(),y(),i.addNodeFilter("br",t=>{let r=t.length;for(;r--;)"Apple-interchange-newline"===t[r].attr("class")&&t[r].remove()}),u?(w(),x(),k()):p()),d&&(t.on("keydown",r=>{if(!g(r)&&r.keyCode===n&&t.getBody().getElementsByTagName("hr").length&&l.isCollapsed()&&0===l.getRng().startOffset){let t=l.getNode(),n=t.previousSibling;if("HR"===t.nodeName)return a.remove(t),void r.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(a.remove(n),r.preventDefault())}}),b(),(()=>{let n=()=>{let n=a.getAttribs(l.getStart().cloneNode(!1));return()=>{let o=l.getStart();o!==t.getBody()&&(a.setAttrib(o,"style",null),r(n,t=>{o.setAttributeNode(t.cloneNode(!0))}))}},o=()=>!l.isCollapsed()&&a.getParent(l.getStart(),a.isBlock)!==a.getParent(l.getEnd(),a.isBlock);t.on("keypress",r=>{let a;return!(!(g(r)||8!==r.keyCode&&46!==r.keyCode)&&o()&&(a=n(),t.getDoc().execCommand("delete",!1),a(),r.preventDefault(),1))}),a.bind(t.getDoc(),"cut",r=>{if(!g(r)&&o()){let r=n();uz.setEditorTimeout(t,()=>{r()})}})})(),C(),t.on("SetContent ExecCommand",t=>{"setcontent"!==t.type&&"mceInsertLink"!==t.command||r(a.select("a:not([data-mce-block])"),t=>{var r;let n=t.parentNode,o=a.getRoot();if((null==n?void 0:n.lastChild)===t){for(;n&&!a.isBlock(n);){if((null===(r=n.parentNode)||void 0===r?void 0:r.lastChild)!==n||n===o)return;n=n.parentNode}a.add(n,"br",{"data-mce-bogus":1})}})}),E(),_(),y(),t.on("drop",r=>{var n;let o=null===(n=r.dataTransfer)||void 0===n?void 0:n.getData("text/html");T(o)&&/^<img[^>]*>$/.test(o)&&t.dispatch("dragend",new window.DragEvent("dragend",r))}))),{refreshContentEditable:H,isHidden:()=>{if(!d||t.removed)return!1;let r=t.selection.getSel();return!r||!r.rangeCount||0===r.rangeCount}}},_5=aV.DOM,_6=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,_9=t=>eF(t,t=>!1===M(t)),_4=t=>{let r=t.options.get,n=t.editorUpload.blobCache;return _9({allow_conditional_comments:r("allow_conditional_comments"),allow_html_data_urls:r("allow_html_data_urls"),allow_svg_data_urls:r("allow_svg_data_urls"),allow_html_in_named_anchor:r("allow_html_in_named_anchor"),allow_script_urls:r("allow_script_urls"),allow_unsafe_link_target:r("allow_unsafe_link_target"),convert_unsafe_embeds:r("convert_unsafe_embeds"),convert_fonts_to_spans:r("convert_fonts_to_spans"),fix_list_elements:r("fix_list_elements"),font_size_legacy_values:r("font_size_legacy_values"),forced_root_block:r("forced_root_block"),forced_root_block_attrs:r("forced_root_block_attrs"),preserve_cdata:r("preserve_cdata"),inline_styles:r("inline_styles"),root_name:_6(t),sandbox_iframes:r("sandbox_iframes"),sanitize:r("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},_7=t=>{let r=t.options.get;return _9({custom_elements:r("custom_elements"),extended_valid_elements:r("extended_valid_elements"),invalid_elements:r("invalid_elements"),invalid_styles:r("invalid_styles"),schema:r("schema"),valid_children:r("valid_children"),valid_classes:r("valid_classes"),valid_elements:r("valid_elements"),valid_styles:r("valid_styles"),verify_html:r("verify_html"),padd_empty_block_inline_children:r("format_empty_lines")})},ke=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,kt=t=>{let r=ke(t),n=iz(t),o=t.contentCSS,a=()=>{r.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},l=()=>{t.removed?a():t.on("remove",a)};if(t.contentStyles.length>0){let r="";tU.each(t.contentStyles,t=>{r+=t+"\r\n"}),t.dom.addStyle(r)}let i=Promise.all(((t,r,n)=>{let{pass:o,fail:a}=eu(r,t=>tinymce.Resource.has(bG(t))),l=[...o.map(r=>{let n=tinymce.Resource.get(bG(r));return T(n)?Promise.resolve(ke(t).loadRawCss(r,n)):Promise.resolve()}),ke(t).loadAll(a)];return t.inline?l:l.concat([t.ui.styleSheetLoader.loadAll(n)])})(t,o,n)).then(l).catch(l),s=iU(t);return s&&((t,r)=>{let n=rU(rI(rc(t.getBody()))),o=rm("style");t8(o,"type","text/css"),nt(o,rf(r)),nt(n,o),t.on("remove",()=>{na(o)})})(t,s),i},kr=t=>{!0!==t.removed&&(bl(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,(t=>{t.dispatch("Init")})(t),t.focus(!0),(t=>{let r=t.dom.getRoot();t.inline||dZ(t)&&t.selection.getStart(!0)!==r||dk(r).each(r=>{let n=r.getNode(),o=nP(n)?dk(n).getOr(r):r;t.selection.setRng(o.toRange())})})(t),t.nodeChanged({initial:!0});let r=sm(t);U(r)&&r.call(t,t),(t=>{let r=sg(t);r&&uz.setEditorTimeout(t,()=>{let n;(n=!0===r?t:t.editorManager.get(r))&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)})(t)})(t))},kn=t=>{let r=t.getElement(),n=t.getDoc();t.inline&&(_5.addClass(r,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=r,t.contentAreaContainer=r);let o=t.getBody();o.disabled=!0,t.readonly=st(t),t._editableRoot=sr(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===_5.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=b3(t),t.schema=ah(_7(t)),t.dom=aV(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:iB(t),referrerPolicy:iP(t),onSetAttrib:r=>{t.dispatch("SetAttrib",r)},force_hex_color:sH(t)}),t.parser=(t=>{let r=hF(_4(t),t.schema);return r.addAttributeFilter("src,href,style,tabindex",(r,n)=>{let o=t.dom,a="data-mce-"+n,l=r.length;for(;l--;){let i=r[l],s=i.attr(n);if(s&&!i.attr(a)){if(0===s.indexOf("data:")||0===s.indexOf("blob:"))continue;"style"===n?((s=o.serializeStyle(o.parseStyle(s),i.name)).length||(s=null),i.attr(a,s),i.attr(n,s)):"tabindex"===n?(i.attr(a,s),i.attr(n,null)):i.attr(a,t.convertURL(s,n,i.name))}}}),r.addNodeFilter("script",t=>{let r=t.length;for(;r--;){let n=t[r],o=n.attr("type")||"no/type";0!==o.indexOf("mce-")&&n.attr("type","mce-"+o)}}),sD(t)&&r.addNodeFilter("#cdata",r=>{var n;let o=r.length;for(;o--;){let a=r[o];a.type=8,a.name="#comment",a.value="[CDATA["+t.dom.encode(null!==(n=a.value)&&void 0!==n?n:"")+"]]"}}),r.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",r=>{let n=r.length,o=t.schema.getNonEmptyElements();for(;n--;){let t=r[n];t.isEmpty(o)&&0===t.getAll("br").length&&t.append(new mn("br",1))}}),r})(t),t.serializer=bb((t=>{let r=t.options.get;return{..._4(t),..._7(t),..._9({remove_trailing_brs:r("remove_trailing_brs"),pad_empty_with_br:r("pad_empty_with_br"),url_converter:r("url_converter"),url_converter_scope:r("url_converter_scope"),element_format:r("element_format"),entities:r("entities"),entity_encoding:r("entity_encoding"),indent:r("indent"),indent_after:r("indent_after"),indent_before:r("indent_before")})}})(t),t),t.selection=bg(t.dom,t.getWin(),t.serializer,t),t.annotator=cT(t),t.formatter=vn(t),t.undoManager=va(t),t._nodeChangeDispatcher=new xu(t),t._selectionOverrides=_P(t),(t=>{let r=a1(),n=aY(!1),o=a3(r=>{t.dispatch("longpress",{...r,type:"longpress"}),n.set(!0)},400);t.on("touchstart",t=>{Cs(t).each(a=>{o.cancel();let l={x:a.clientX,y:a.clientY,target:t.target};o.throttle(t),n.set(!1),r.set(l)})},!0),t.on("touchmove",a=>{o.cancel(),Cs(a).each(o=>{r.on(a=>{((t,r)=>{let n=Math.abs(t.clientX-r.x),o=Math.abs(t.clientY-r.y);return n>5||o>5})(o,a)&&(r.clear(),n.set(!1),t.dispatch("longpresscancel"))})})},!0),t.on("touchend touchcancel",a=>{o.cancel(),"touchcancel"!==a.type&&r.get().filter(t=>t.target.isEqualNode(a.target)).each(()=>{n.get()?a.preventDefault():t.dispatch("tap",{...a,type:"tap"})})},!0)})(t),(t=>{t.on("click",r=>{t.dom.getParent(r.target,"details")&&r.preventDefault()})})(t),t.parser.addNodeFilter("details",r=>{let n=sz(t);ed(r,t=>{"expanded"===n?t.attr("open","open"):"collapsed"===n&&t.attr("open",null)})}),t.serializer.addNodeFilter("details",r=>{let n=sj(t);ed(r,t=>{"expanded"===n?t.attr("open","open"):"collapsed"===n&&t.attr("open",null)})}),(t=>{let r="contenteditable",n=" "+tU.trim(sB(t))+" ",o=" "+tU.trim(sO(t))+" ",a=Cp(n),l=Cp(o),i=sP(t);i.length>0&&t.on("BeforeSetContent",r=>{((t,r,n)=>{let o=r.length,a=n.content;if("raw"!==n.format){for(;o--;)a=a.replace(r[o],Ch(t,a,sO(t)));n.content=a}})(t,i,r)}),t.parser.addAttributeFilter("class",t=>{let n=t.length;for(;n--;){let o=t[n];a(o)?o.attr(r,"true"):l(o)&&o.attr(r,"false")}}),t.serializer.addAttributeFilter(r,t=>{let n=t.length;for(;n--;){let o=t[n];(a(o)||l(o))&&(i.length>0&&o.attr("data-mce-content")?(o.name="#text",o.type=3,o.raw=!0,o.value=o.attr("data-mce-content")):o.attr(r,null))}})})(t),bl(t)||((t=>{t.on("mousedown",r=>{r.detail>=3&&(r.preventDefault(),_d(t))})})(t),(t=>{let r=[",",".",";",":","!","?"],n=[32],o=()=>{var r,n;return r=sA(t),n=sT(t),{inlinePatterns:l4(r),blockPatterns:l9(r),dynamicPatternsLookup:n}},a=()=>t.options.isSet("text_patterns_lookup");t.on("keydown",r=>{if(13===r.keyCode&&!cU.modifierPressed(r)&&t.selection.isCollapsed()){let n=o();(n.inlinePatterns.length>0||n.blockPatterns.length>0||a())&&_2(t,n)&&r.preventDefault()}},!0);let l=()=>{if(t.selection.isCollapsed()){let r=o();(r.inlinePatterns.length>0||a())&&((t,r)=>{let n=t.selection.getRng();_j(t,n).map(o=>{let a=Math.max(0,n.startOffset-1),l=_$(t.dom,o,n.startContainer,a),i=_H(r,o,l),s=_0(t,o,n.startContainer,a,i,!1);s.length>0&&t.undoManager.transact(()=>{_1(t,s)})})})(t,r)}};t.on("keyup",t=>{_3(n,t,(t,r)=>t===r.keyCode&&!cU.modifierPressed(r))&&l()}),t.on("keypress",n=>{_3(r,n,(t,r)=>t.charCodeAt(0)===r.charCode)&&uz.setEditorTimeout(t,l)})})(t));let a=xc(t);Ci(t,a),(t=>{t.on("NodeChange",Y(Cf,t))})(t),(t=>{var r;let n=t.dom,o=ih(t),a=null!==(r=iV(t))&&void 0!==r?r:"",l=(r,i)=>{if((t=>{if(vs(t)){let r=t.keyCode;return!vd(t)&&(cU.metaKeyPressed(t)||t.altKey||r>=112&&r<=123||el(vl,r))}return!1})(r))return;let s=t.getBody(),d=!(vs(r)&&!(vd(r)||"keyup"===r.type&&229===r.keyCode))&&((t,r,n)=>{if(oA(rc(r),!1)){let o=r.firstElementChild;return!o||!t.getStyle(r.firstElementChild,"padding-left")&&!t.getStyle(r.firstElementChild,"padding-right")&&n===o.nodeName.toLowerCase()}return!1})(n,s,o);(""!==n.getAttrib(s,vi)!==d||i)&&(n.setAttrib(s,vi,d?a:null),n.setAttrib(s,"aria-placeholder",d?a:null),((t,r)=>{t.dispatch("PlaceholderToggle",{state:r})})(t,d),t.on(d?"keydown":"keyup",l),t.off(d?"keyup":"keydown",l))};tr(a)&&t.on("init",r=>{l(r,!0),t.on("change SetContent ExecCommand",l),t.on("paste",r=>uz.setEditorTimeout(t,()=>l(r)))})})(t),_o(t);let l=ez(t.plugins,"rtc").bind(t=>et.from(t.setup)).fold(()=>(t.rtcInstance=ba(t),et.none()),r=>(t.rtcInstance=(()=>{let t=V(null),r=V("");return{init:{bindEvents:H},undoManager:{beforeChange:H,add:t,undo:t,redo:t,clear:H,reset:H,hasUndo:Z,hasRedo:Z,transact:t,ignore:H,extra:H},formatter:{match:Z,matchAll:V([]),matchNode:V(void 0),canApply:Z,closest:r,apply:H,remove:H,toggle:H,formatChanged:V({unbind:H})},editor:{getContent:r,setContent:V({content:"",html:""}),insertContent:V(""),addVisual:H},selection:{getContent:r},autocompleter:{addDecoration:H,removeDecoration:H},raw:{getModel:V(et.none())}}})(),et.some(()=>r().then(r=>(t.rtcInstance=(t=>{let r=t=>O(t)?t:{},{init:n,undoManager:o,formatter:a,editor:l,selection:i,autocompleter:s,raw:d}=t;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:o.beforeChange,add:o.add,undo:o.undo,redo:o.redo,clear:o.clear,reset:o.reset,hasUndo:o.hasUndo,hasRedo:o.hasRedo,transact:(t,r,n)=>o.transact(n),ignore:(t,r)=>o.ignore(r),extra:(t,r,n,a)=>o.extra(n,a)},formatter:{match:(t,n,o,l)=>a.match(t,r(n),l),matchAll:a.matchAll,matchNode:a.matchNode,canApply:t=>a.canApply(t),closest:t=>a.closest(t),apply:(t,n,o)=>a.apply(t,r(n)),remove:(t,n,o,l)=>a.remove(t,r(n)),toggle:(t,n,o)=>a.toggle(t,r(n)),formatChanged:(t,r,n,o,l)=>a.formatChanged(r,n,o,l)},editor:{getContent:t=>l.getContent(t),setContent:(t,r)=>({content:l.setContent(t,r),html:""}),insertContent:(t,r)=>(l.insertContent(t),""),addVisual:l.addVisual},selection:{getContent:(t,r)=>i.getContent(r)},autocompleter:{addDecoration:s.addDecoration,removeDecoration:s.removeDecoration},raw:{getModel:()=>et.some(d.getRawModel())}}})(r),r.rtc.isRemote)))));(t=>{let r=t.getDoc(),n=t.getBody();(t=>{t.dispatch("PreInit")})(t),sp(t)||(r.body.spellcheck=!1,_5.setAttrib(n,"spellcheck","false")),t.quirks=_8(t),(t=>{t.dispatch("PostRender")})(t);let o=ij(t);void 0!==o&&(n.dir=o);let a=sh(t);a&&t.on("BeforeSetContent",t=>{tU.each(a,r=>{t.content=t.content.replace(r,t=>"<!--mce:protected "+escape(t)+"-->")})}),t.on("SetContent",()=>{t.addVisual(t.getBody())}),t.on("compositionstart compositionend",r=>{t.composing="compositionstart"===r.type})})(t),l.fold(()=>{let r=(t=>{let r=!1,n=setTimeout(()=>{r||t.setProgressState(!0)},500);return()=>{clearTimeout(n),r=!0,t.setProgressState(!1)}})(t);kt(t).then(()=>{kr(t),r()})},r=>{t.setProgressState(!0),kt(t).then(()=>{r().then(r=>{t.setProgressState(!1),kr(t),bd(t)},r=>{t.notificationManager.open({type:"error",text:String(r)}),kr(t),bd(t)})})})},ko=aV.DOM,ka=aV.DOM,kl=(t,r)=>({editorContainer:t,iframeContainer:r,api:{}}),ki=t=>{let r=t.getElement();return t.inline?kl(null):(t=>{let r=ka.create("div");return ka.insertAfter(r,t),kl(r,r)})(r)},ks=async t=>{var r;t.dispatch("ScriptsLoaded"),(t=>{let r=tU.trim(iS(t)),n=t.ui.registry.getAll().icons;eB({...bB.get("default").icons,...bB.get(r).icons},(r,o)=>{ej(n,o)||t.ui.registry.addIcon(o,r)})})(t),(t=>{let r=iY(t);if(T(r)){let n=bH.get(r);t.theme=n(t,bH.urls[r])||{},U(t.theme.init)&&t.theme.init(t,bH.urls[r]||t.documentBaseUrl.replace(/\/$/,""))}else t.theme={}})(t),(t=>{let r=iX(t),n=bP.get(r);t.model=n(t,bP.urls[r])})(t),(t=>{let r=[];ed(so(t),n=>{((t,r,n)=>{let o=bj.get(n),a=bj.urls[n]||t.documentBaseUrl.replace(/\/$/,"");if(n=tU.trim(n),o&&-1===tU.inArray(r,n)){if(t.plugins[n])return;try{let l=o(t,a)||{};t.plugins[n]=l,U(l.init)&&(l.init(t,a),r.push(n))}catch(r){((t,r,n)=>{let o=aJ.translate(["Failed to initialize plugin: {0}",r]);cP(t,"PluginLoadError",{message:o}),bY(o,n),bV(t,o)})(t,n,r)}}})(t,r,n.replace(/^\-/,""))})})(t);let n=await (t=>{let r=t.getElement();return t.orgDisplay=r.style.display,T(iY(t))?(t=>{let r=t.theme.renderUI;return r?r():ki(t)})(t):U(iY(t))?(t=>{let r=t.getElement(),n=iY(t)(t,r);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||t.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||t.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:r.offsetHeight,n})(t):ki(t)})(t);((t,r)=>{let n={show:et.from(r.show).getOr(H),hide:et.from(r.hide).getOr(H),isEnabled:et.from(r.isEnabled).getOr(ee),setEnabled:n=>{t.mode.isReadOnly()||et.from(r.setEnabled).each(t=>t(n))}};t.ui={...t.ui,...n}})(t,et.from(n.api).getOr({})),t.editorContainer=n.editorContainer,t.contentCSS=t.contentCSS.concat(bX(t,iI(t)),bX(t,iz(t))),t.inline?kn(t):(((t,r)=>{let n=t.translate("Rich Text Area"),o=t9(rc(t.getElement()),"tabindex").bind(to),a=((t,r,n,o)=>{let a=rm("iframe");return o.each(t=>t8(a,"tabindex",t)),t5(a,n),t5(a,{id:t+"_ifr",frameBorder:"0",allowTransparency:"true",title:r}),rl(a,"tox-edit-area__iframe"),a})(t.id,n,is(t),o).dom;a.onload=()=>{a.onload=null,t.dispatch("load")},t.contentAreaContainer=r.iframeContainer,t.iframeElement=a,t.iframeHTML=(t=>{let r=id(t)+"<html><head>";ic(t)!==t.documentBaseUrl&&(r+='<base href="'+t.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';let n=iu(t),o=im(t),a=t.translate(sc(t));return ig(t)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+ig(t)+'" />'),r+=`</head><body id="${n}" class="mce-content-body ${o}" data-id="${t.id}" aria-label="${a}"><br></body></html>`})(t),ko.add(r.iframeContainer,a)})(t,r={editorContainer:n.editorContainer,iframeContainer:n.iframeContainer}),r.editorContainer&&(r.editorContainer.style.display=t.orgDisplay,t.hidden=ko.isHidden(r.editorContainer)),t.getElement().style.display="none",ko.setAttrib(t.id,"aria-hidden","true"),t.getElement().style.visibility=t.orgVisibility,(t=>{let r=t.iframeElement,n=()=>{t.contentDocument=r.contentDocument,kn(t)};if(sF(t)||tL.browser.isFirefox()){let r=t.getDoc();r.open(),r.write(t.iframeHTML),r.close(),n()}else{let o=nc(rc(r),"load",ee,()=>{o.unbind(),n()});r.srcdoc=t.iframeHTML}})(t))},kd=aV.DOM,kc=t=>"-"===t.charAt(0),ku=(t,r,n)=>et.from(r).filter(t=>tr(t)&&!bB.has(t)).map(r=>({url:`${t.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:et.some(r)})),km=(t,r)=>{var n,o;let a=aK.ScriptLoader,l=()=>{!t.removed&&(t=>{let r=iY(t);return!T(r)||I(bH.get(r))})(t)&&(t=>{let r=iX(t);return I(bP.get(r))})(t)&&ks(t)};((t,r)=>{let n=iY(t);if(T(n)&&!kc(n)&&!ej(bH.urls,n)){let o=iG(t),a=o?t.documentBaseURI.toAbsolute(o):`themes/${n}/theme${r}.js`;bH.load(n,a).catch(()=>{bW(t,"ThemeLoadError",bK("theme",a,n))})}})(t,r),((t,r)=>{let n=iX(t);if("plugin"!==n&&!ej(bP.urls,n)){let o=iQ(t),a=T(o)?t.documentBaseURI.toAbsolute(o):`models/${n}/model${r}.js`;bP.load(n,a).catch(()=>{bW(t,"ModelLoadError",bK("model",a,n))})}})(t,r),((t,r)=>{let n=iD(r),o=iL(r);if(!aJ.hasCode(n)&&"en"!==n){let a=tr(o)?o:`${r.editorManager.baseURL}/langs/${n}.js`;t.add(a).catch(()=>{bW(r,"LanguageLoadError",bK("language",a,n))})}})(a,t),n=a,ed((t=>{let r=[],n=t=>{r.push(t)};for(let r=0;r<t.length;r++)t[r].each(n);return r})([ku(o=t,"default",r),et.from(iN(o)).filter(tr).map(t=>({url:t,name:et.none()})).orThunk(()=>ku(o,iS(o),""))]),t=>{n.add(t.url).catch(()=>{bW(o,"IconsLoadError",bK("icons",t.url,t.name.getOrUndefined()))})}),((t,r)=>{let n=(r,n)=>{bj.load(r,n).catch(()=>{bW(t,"PluginLoadError",bK("plugin",n,r))})};eB(sa(t),(r,o)=>{n(o,r),t.options.set("plugins",so(t).concat(o))}),ed(so(t),t=>{!(t=tU.trim(t))||bj.urls[t]||kc(t)||n(t,`plugins/${t}/plugin${r}.js`)})})(t,r),a.loadQueue().then(l,l)},kf=tR().deviceType,kg=kf.isPhone(),kp=kf.isTablet(),kh=t=>F(t)?[]:em(es(P(t)?t:t.split(/[ ,]/),e7),tr),kb=(t,r)=>{var n,o;let a=((r,n)=>{let o={},a={};return eM(r,(r,n)=>el(t,n),eL(o),eL(a)),{t:o,f:a}})(r);return n=a.t,o=a.f,{sections:V(n),options:V(o)}},kv=(t,r)=>ej(t.sections(),r),ky=(t,r)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:ez(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...r?{menubar:!1}:{}}),kC=(t,r)=>{var n;let o=null!==(n=r.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?tU.extend({},t.external_plugins,o):o},kE=(t,r,n,o,a)=>{var l;let i=kb(["mobile"],Eg(t?{mobile:ky(null!==(l=a.mobile)&&void 0!==l?l:{},r)}:{},a)),s=tU.extend(n,o,i.options(),t&&kv(i,"mobile")?((t,r,n={})=>{let o=ez(t.sections(),r).getOr({});return tU.extend({},n,o)})(i,"mobile"):{},{external_plugins:kC(o,i.options())});return((t,r,n,o)=>{var a,l;let i=kh(n.forced_plugins),s=kh(o.plugins),d=kv(r,a="mobile")?r.sections()[a]:{},c=(l=d.plugins?kh(d.plugins):s,t&&kv(r,"mobile")?l:s),u=[...kh(i),...kh(c)];return tU.extend(o,{forced_plugins:i,plugins:u})})(t,i,o,s)},kw=t=>{(t=>{let r=r=>()=>{ed("left,center,right,justify".split(","),n=>{r!==n&&t.formatter.remove("align"+n)}),"none"!==r&&(t.formatter.toggle("align"+r,void 0),t.nodeChanged())};t.editorCommands.addCommands({JustifyLeft:r("left"),JustifyCenter:r("center"),JustifyRight:r("right"),JustifyFull:r("justify"),JustifyNone:r("none")})})(t),(t=>{let r=r=>()=>{let n=t.selection;return ei(n.isCollapsed()?[t.dom.getParent(n.getNode(),t.dom.isBlock)]:n.getSelectedBlocks(),n=>I(t.formatter.matchNode(n,r)))};t.editorCommands.addCommands({JustifyLeft:r("alignleft"),JustifyCenter:r("aligncenter"),JustifyRight:r("alignright"),JustifyFull:r("alignjustify")},"state")})(t)},kx=(t,r)=>{let n=t.selection,o=t.dom;return/^ | $/.test(r)?((t,r,n,o)=>{let a=rc(t.getRoot());return n=ft(a,lL.fromRangeStart(r),o)?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),fr(a,lL.fromRangeEnd(r),o)?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),r,t.schema):r},k_=(t,r)=>{if(t.selection.isEditable()){let{content:n,details:o}=(t=>{if("string"!=typeof t){let r=tU.extend({paste:t.paste,data:{paste:t.paste}},t);return{content:t.content,details:r}}return{content:t,details:{}}})(r);hj(t,{...o,content:kx(t,n),format:"html",set:!1,selection:!0}).each(r=>{var n;let a=(n=r.content,bi(t).editor.insertContent(n,o));hH(t,a,r),t.addVisual()})}},kk={"font-size":"size","font-family":"face"},kS=t2("font"),kN=t=>(r,n)=>et.from(n).map(rc).filter(tJ).bind(n=>{var o;return gk(rc(n.dom),r=>r5(r,t).orThunk(()=>kS(r)?ez(kk,t).bind(t=>t9(r,t)):et.none()),t=>rv(rc(r),t)).or((o=n.dom,et.from(aV.DOM.getStyle(o,t,!0))))}).getOr(""),kR=kN("font-size"),kA=$(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),kN("font-family")),kT=t=>dk(t.getBody()).bind(t=>{let r=t.container();return et.from(nM(r)?r.parentNode:r)}),kO=(t,r)=>{var n;return n=q(et.some,r),et.from(t.selection.getRng()).bind(r=>{let n=t.getBody();return r.startContainer===n&&0===r.startOffset?et.none():et.from(t.selection.getStart(!0))}).orThunk(Y(kT,t)).map(rc).filter(tJ).bind(n)},kB=(t,r)=>{if(/^[0-9.]+$/.test(r)){let n=parseInt(r,10);if(n>=1&&n<=7){let o=tU.explode(t.options.get("font_size_style_values")),a=tU.explode(t.options.get("font_size_classes"));return a.length>0?a[n-1]||r:o[n-1]||r}}return r},kP=t=>es(t.split(/\s*,\s*/),t=>-1===t.indexOf(" ")||e6(t,'"')||e6(t,"'")?t:`'${t}'`).join(","),kD=(t,r)=>{let n=t.dom,o=t.selection.getRng(),a=r?t.selection.getStart():t.selection.getEnd(),l=r?o.startContainer:o.endContainer,i=wE(n,l);if(!i||!i.isContentEditable)return;let s=r?r4:r7,d=ih(t);((t,r,n,o)=>{let a=t.dom,l=t=>a.isBlock(t)&&t.parentElement===n,i=l(r)?r:a.getParent(o,l,n);return et.from(i).map(rc)})(t,a,i,l).each(r=>{let n=wk(t,l,r.dom,i,!1,d);s(r,rc(n)),t.selection.setCursorLocation(n,0),t.dispatch("NewBlock",{newBlock:n}),wg(t,"insertParagraph")})},kL=t=>{kw(t),(t=>{t.editorCommands.addCommands({"Cut,Copy,Paste":r=>{let n;let o=t.getDoc();try{o.execCommand(r)}catch(t){n=!0}if("paste"!==r||o.queryCommandEnabled(r)||(n=!0),n||!o.queryCommandSupported(r)){let r=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(tL.os.isMacOS()||tL.os.isiOS())&&(r=r.replace(/Ctrl\+/g,"⌘+")),t.notificationManager.open({text:r,type:"error"})}}})})(t),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(t),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(r,n,o)=>{let a=0;t.dom.getParent(t.selection.getNode(),r=>!nS(r)||a++!==o||(t.selection.select(r),!1),t.getBody())},mceSelectNode:(r,n,o)=>{t.selection.select(o)},selectAll:()=>{let r=t.dom.getParent(t.selection.getStart(),nq);if(r){let n=t.dom.createRng();n.selectNodeContents(r),t.selection.setRng(n)}}})})(t),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{let r=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(r)},insertImage:(r,n,o)=>{k_(t,t.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(r,n,o)=>{k_(t,t.dom.encode(o))},insertHTML:(r,n,o)=>{k_(t,o)},mceInsertContent:(r,n,o)=>{k_(t,o)},mceSetContent:(r,n,o)=>{t.setContent(o)},mceReplaceContent:(r,n,o)=>{t.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(sE(t))}})})(t),(t=>{let r=(r,n,o)=>{let a=T(o)?{href:o}:o,l=t.dom.getParent(t.selection.getNode(),"a");O(a)&&T(a.href)&&(a.href=a.href.replace(/ /g,"%20"),l&&a.href||t.formatter.remove("link"),a.href&&t.formatter.apply("link",a,l))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){let r=t.dom.getParent(t.selection.getStart(),"a");return void(r&&t.dom.remove(r,!0))}t.formatter.remove("link")}},mceInsertLink:r,createLink:r})})(t),t.editorCommands.addCommands({Indent:()=>{Cn(t,"indent")},Outdent:()=>{Co(t)}}),t.editorCommands.addCommands({Outdent:()=>Ce(t)},"state"),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{kD(t,!0)},InsertNewBlockAfter:()=>{kD(t,!1)}})})(t),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{w8(wM,t)},mceInsertNewLine:(r,n,o)=>{w5(t,o)},InsertLineBreak:(r,n,o)=>{w8(wq,t)}})})(t),(t=>{t.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{t.getDoc().execCommand(r);let n=t.dom.getParent(t.selection.getNode(),"ol,ul");if(n){let r=n.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){let o=t.selection.getBookmark();t.dom.split(r,n),t.selection.moveToBookmark(o)}}}})})(t),(t=>{t.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{let n=t.dom.getParent(t.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===r&&"UL"===n.tagName||"insertorderedlist"===r&&"OL"===n.tagName)}},"state")})(t),(t=>{let r=(r,n)=>{t.formatter.toggle(r,n),t.nodeChanged()};t.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":t=>{r(t)},"ForeColor,HiliteColor":(t,n,o)=>{r(t,{value:o})},BackColor:(t,n,o)=>{r("hilitecolor",{value:o})},FontName:(r,n,o)=>{((t,r)=>{let n=kB(t,r);t.formatter.toggle("fontname",{value:kP(n)}),t.nodeChanged()})(t,o)},FontSize:(r,n,o)=>{t.formatter.toggle("fontsize",{value:kB(t,o)}),t.nodeChanged()},LineHeight:(r,n,o)=>{t.formatter.toggle("lineheight",{value:String(o)}),t.nodeChanged()},Lang:(t,n,o)=>{var a;r(t,{value:o.code,customValue:null!==(a=o.customCode)&&void 0!==a?a:null})},RemoveFormat:r=>{t.formatter.remove(r)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(t,n,o)=>{r(T(o)?o:"p")},mceToggleFormat:(t,n,o)=>{r(o)}})})(t),(t=>{let r=r=>t.formatter.match(r);t.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":t=>r(t),mceBlockQuote:()=>r("blockquote")},"state"),t.editorCommands.addQueryValueHandler("FontName",()=>kO(t,r=>kA(t.getBody(),r.dom)).getOr("")),t.editorCommands.addQueryValueHandler("FontSize",()=>kO(t,r=>kR(t.getBody(),r.dom)).getOr("")),t.editorCommands.addQueryValueHandler("LineHeight",()=>kO(t,r=>gk(r,t=>r5(t,"line-height"),Y(rv,rc(t.getBody()))).getOrThunk(()=>String(parseFloat(r3(r,"line-height"))/parseFloat(r3(r,"font-size"))))).getOr(""))})(t),(t=>{t.editorCommands.addCommands({mceRemoveNode:(r,n,o)=>{let a=null!=o?o:t.selection.getNode();if(a!==t.getBody()){let r=t.selection.getBookmark();t.dom.remove(a,!0),t.selection.moveToBookmark(r)}},mcePrint:()=>{t.getWin().print()},mceFocus:(r,n,o)=>{t.removed||(!0===o?uQ(t):(t=>{var r;let n=t.selection,o=t.getBody(),a=n.getRng();t.quirks.refreshContentEditable(),I(t.bookmark)&&!uG(t)&&uI(t).each(r=>{t.selection.setRng(r),a=r});let l=(r=n.getNode(),t.dom.getParent(r,r=>"true"===t.dom.getContentEditable(r)));if(l&&t.dom.isChildOf(l,o))return uY(l),uK(t,a),void uQ(t);t.inline||(tL.browser.isOpera()||uY(o),t.getWin().focus()),(tL.browser.isFirefox()||t.inline)&&(uY(o),uK(t,a)),uQ(t)})(t))},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(t)},kM=["toggleview"],kF=t=>el(kM,t.toLowerCase());class kI{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,r=!1,n,o){let a=this.editor,l=t.toLowerCase(),i=null==o?void 0:o.skip_focus;if(a.removed||("mcefocus"!==l&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(l)||i?(t=>{uI(t).each(r=>t.selection.setRng(r))})(a):a.focus()),a.dispatch("BeforeExecCommand",{command:t,ui:r,value:n}).isDefaultPrevented()))return!1;let s=this.commands.exec[l];return!!U(s)&&(s(l,r,n),a.dispatch("ExecCommand",{command:t,ui:r,value:n}),!0)}queryCommandState(t){if(!kF(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;let r=t.toLowerCase(),n=this.commands.state[r];return!!U(n)&&n(r)}queryCommandValue(t){if(!kF(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";let r=t.toLowerCase(),n=this.commands.value[r];return U(n)?n(r):""}addCommands(t,r="exec"){let n=this.commands;eB(t,(t,o)=>{ed(o.toLowerCase().split(","),o=>{n[r][o]=t})})}addCommand(t,r,n){let o=t.toLowerCase();this.commands.exec[o]=(t,o,a)=>r.call(null!=n?n:this.editor,o,a)}queryCommandSupported(t){let r=t.toLowerCase();return!!this.commands.exec[r]}addQueryStateHandler(t,r,n){this.commands.state[t.toLowerCase()]=()=>r.call(null!=n?n:this.editor)}addQueryValueHandler(t,r,n){this.commands.value[t.toLowerCase()]=()=>r.call(null!=n?n:this.editor)}}let kU="data-mce-contenteditable",kz=(t,r,n)=>{try{t.getDoc().execCommand(r,!1,String(n))}catch(t){}},kj=(t,r)=>{t.dom.contentEditable=r?"true":"false"},kH=t=>t.readonly,k$=t=>{t.parser.addAttributeFilter("contenteditable",r=>{kH(t)&&ed(r,t=>{t.attr(kU,t.attr("contenteditable")),t.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(kU,r=>{kH(t)&&ed(r,t=>{t.attr("contenteditable",t.attr(kU))})}),t.serializer.addTempAttr(kU)},kq=["copy"],kV=tU.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class kW{static isNative(t){return!!kV[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Z}fire(t,r){return this.dispatch(t,r)}dispatch(t,r){let n=t.toLowerCase(),o=aA(n,null!=r?r:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);let a=this.bindings[n];if(a)for(let t=0,r=a.length;t<r;t++){let r=a[t];if(!r.removed){if(r.once&&this.off(n,r.func),o.isImmediatePropagationStopped())return o;if(!1===r.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(t,r,n,o){if(!1===r&&(r=Z),r){let a={func:r,removed:!1};o&&tU.extend(a,o);let l=t.toLowerCase().split(" "),i=l.length;for(;i--;){let t=l[i],r=this.bindings[t];r||(r=[],this.toggleEvent(t,!0)),r=n?[a,...r]:[...r,a],this.bindings[t]=r}}return this}off(t,r){if(t){let n=t.toLowerCase().split(" "),o=n.length;for(;o--;){let a=n[o],l=this.bindings[a];if(!a)return eB(this.bindings,(t,r)=>{this.toggleEvent(r,!1),delete this.bindings[r]}),this;if(l){if(r){let t=eu(l,t=>t.func===r);l=t.fail,this.bindings[a]=l,ed(t.pass,t=>{t.removed=!0})}else l.length=0;l.length||(this.toggleEvent(t,!1),delete this.bindings[a])}}}else eB(this.bindings,(t,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(t,r,n){return this.on(t,r,n,{once:!0})}has(t){t=t.toLowerCase();let r=this.bindings[t];return!(!r||0===r.length)}}let kK=t=>(t._eventDispatcher||(t._eventDispatcher=new kW({scope:t,toggleEvent:(r,n)=>{kW.isNative(r)&&t.toggleNativeEvent&&t.toggleNativeEvent(r,n)}})),t._eventDispatcher),kY={fire(t,r,n){return this.dispatch(t,r,n)},dispatch(t,r,n){if(this.removed&&"remove"!==t&&"detach"!==t)return aA(t.toLowerCase(),null!=r?r:{},this);let o=kK(this).dispatch(t,r);if(!1!==n&&this.parent){let r=this.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(t,o,!1),r=r.parent?r.parent():void 0}return o},on(t,r,n){return kK(this).on(t,r,n)},off(t,r){return kK(this).off(t,r)},once(t,r){return kK(this).once(t,r)},hasEventListeners(t){return kK(this).has(t)}},kG=aV.DOM,kX=(t,r)=>{if("selectionchange"===r)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(r))return t.getDoc().documentElement;let n=iW(t);return n?(t.eventRoot||(t.eventRoot=kG.select(n)[0]),t.eventRoot):t.getBody()},kQ=(t,r,n)=>{var o,a;t.hidden||kH(t)?kH(t)&&(o=t,"click"!==(a=n).type||cU.metaKeyPressed(a)?el(kq,a.type)&&o.dispatch(a.type,a):rX(rc(a.target),"a",t=>rv(t,rc(o.getBody()))).bind(t=>t9(t,"href")).each(t=>{if(a.preventDefault(),/^#/.test(t)){let r=o.dom.select(`${t},[name="${e8(t,"#")}"]`);r.length&&o.selection.scrollIntoView(r[0],!0)}else window.open(t,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})):t.dispatch(r,n)},kJ=(t,n)=>{if(t.delegates||(t.delegates={}),t.delegates[n]||t.removed)return;let o=kX(t,n);if(iW(t)){if(r||(r={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||r&&(eB(r,(r,n)=>{t.dom.unbind(kX(t,n))}),r=null)})),r[n])return;let a=r=>{let o=r.target,a=t.editorManager.get(),l=a.length;for(;l--;){let t=a[l].getBody();(t===o||kG.isChildOf(o,t))&&kQ(a[l],n,r)}};r[n]=a,kG.bind(o,n,a)}else{let r=r=>{kQ(t,n,r)};kG.bind(o,n,r),t.delegates[n]=r}},kZ={...kY,bindPendingEventDelegates(){let t=this;tU.each(t._pendingNativeEvents,r=>{kJ(t,r)})},toggleNativeEvent(t,r){"focus"!==t&&"blur"!==t&&(this.removed||(r?this.initialized?kJ(this,t):this._pendingNativeEvents?this._pendingNativeEvents.push(t):this._pendingNativeEvents=[t]:this.initialized&&this.delegates&&(this.dom.unbind(kX(this,t),t,this.delegates[t]),delete this.delegates[t])))},unbindAllNativeEvents(){let t=this,r=t.getBody(),n=t.dom;t.delegates&&(eB(t.delegates,(r,n)=>{t.dom.unbind(kX(t,n),n,r)}),delete t.delegates),!t.inline&&r&&n&&(r.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(r),n.unbind(t.getContainer()))}},k0=t=>T(t)?{value:t.split(/[ ,]/),valid:!0}:j(t,T)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},k1=(t,r)=>t+(tn(r.message)?"":`. ${r.message}`),k2=t=>t.valid,k3=(t,r,n="")=>{let o=r(t);return L(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},k8=["design","readonly"],k5=(t,r,n,o)=>{let a=n[r.get()],l=n[o];try{l.activate()}catch(t){return void console.error(`problem while activating editor mode ${o}:`,t)}a.deactivate(),a.editorReadOnly!==l.editorReadOnly&&((t,r)=>{var n;let o=rc(t.getBody());rd(o,n="mce-content-readonly")&&!r?rs(o,n):r&&rl(o,n),r?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(t=>{et.from(t.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,kj(o,!1),ed(nE(o,'*[contenteditable="true"]'),t=>{t8(t,kU,"true"),kj(t,!1)})):(t.readonly=!1,t.hasEditableRoot()&&kj(o,!0),ed(nE(o,`*[${kU}="true"]`),t=>{t7(t,kU),kj(t,!0)}),kz(t,"StyleWithCSS",!1),kz(t,"enableInlineTableEditing",!1),kz(t,"enableObjectResizing",!1),uX(t)&&t.focus(),(t=>{t.selection.setRng(t.selection.getRng())})(t),t.nodeChanged())})(t,l.editorReadOnly),r.set(o),((t,r)=>{t.dispatch("SwitchMode",{mode:r})})(t,o)},k6=tU.each,k9=tU.explode,k4={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},k7=tU.makeMap("alt,ctrl,shift,meta,access"),Se=t=>{let r;let n={},o=tL.os.isMacOS()||tL.os.isiOS();k6(k9(t.toLowerCase(),"+"),t=>{t in k7?n[t]=!0:/^[0-9]{2,}$/.test(t)?n.keyCode=parseInt(t,10):(n.charCode=t.charCodeAt(0),n.keyCode=k4[t]||t.toUpperCase().charCodeAt(0))});let a=[n.keyCode];for(r in k7)n[r]?a.push(r):n[r]=!1;return n.id=a.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class St{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;let r=this;t.on("keyup keypress keydown",t=>{!r.hasModifier(t)&&!r.isFunctionKey(t)||t.isDefaultPrevented()||(k6(r.shortcuts,n=>{r.matchShortcut(t,n)&&(r.pendingPatterns=n.subpatterns.slice(0),"keydown"===t.type&&r.executeShortcutAction(n))}),r.matchShortcut(t,r.pendingPatterns[0])&&(1===r.pendingPatterns.length&&"keydown"===t.type&&r.executeShortcutAction(r.pendingPatterns[0]),r.pendingPatterns.shift()))})}add(t,r,n,o){let a=this,l=a.normalizeCommandFunc(n);return k6(k9(tU.trim(t)),t=>{let n=a.createShortcut(t,r,l,o);a.shortcuts[n.id]=n}),!0}remove(t){let r=this.createShortcut(t);return!!this.shortcuts[r.id]&&(delete this.shortcuts[r.id],!0)}normalizeCommandFunc(t){let r=this;return"string"==typeof t?()=>{r.editor.execCommand(t,!1,null)}:tU.isArray(t)?()=>{r.editor.execCommand(t[0],t[1],t[2])}:t}createShortcut(t,r,n,o){let a=tU.map(k9(t,">"),Se);return a[a.length-1]=tU.extend(a[a.length-1],{func:n,scope:o||this.editor}),tU.extend(a[0],{desc:this.editor.translate(r),subpatterns:a.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,r){return!!r&&r.ctrl===t.ctrlKey&&r.meta===t.metaKey&&r.alt===t.altKey&&r.shift===t.shiftKey&&!!(t.keyCode===r.keyCode||t.charCode&&t.charCode===r.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}let Sr=()=>{let t=(()=>{let t={},r={},n={},o={},a={},l={},i={},s={},d=(t,r)=>(n,o)=>{t[n.toLowerCase()]={...o,type:r}};return{addButton:d(t,"button"),addGroupToolbarButton:d(t,"grouptoolbarbutton"),addToggleButton:d(t,"togglebutton"),addMenuButton:d(t,"menubutton"),addSplitButton:d(t,"splitbutton"),addMenuItem:d(r,"menuitem"),addNestedMenuItem:d(r,"nestedmenuitem"),addToggleMenuItem:d(r,"togglemenuitem"),addAutocompleter:d(n,"autocompleter"),addContextMenu:d(a,"contextmenu"),addContextToolbar:d(l,"contexttoolbar"),addContextForm:d(l,"contextform"),addSidebar:d(i,"sidebar"),addView:d(s,"views"),addIcon:(t,r)=>o[t.toLowerCase()]=r,getAll:()=>({buttons:t,menuItems:r,icons:o,popups:n,contextMenus:a,contextToolbars:l,sidebars:i,views:s})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},Sn=aV.DOM,So=tU.extend,Sa=tU.each;class Sl{constructor(t,r,n){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,So(this,kZ),this.id=t,this.hidden=!1;let o=kE(kg||kp,kg,r,n.defaultOptions,r);this.options=((t,r)=>{let n={},o={},a=(t,r,n)=>{let a=k3(r,n);return k2(a)?(o[t]=a.value,!0):(console.warn(k1(`Invalid value passed for the ${t} option`,a)),!1)},l=t=>ej(n,t);return{register:(t,l)=>{let i=T(l.processor)?(t=>{let r=(()=>{switch(t){case"array":return P;case"boolean":return L;case"function":return U;case"number":return z;case"object":return O;case"string":return T;case"string[]":return k0;case"object[]":return t=>j(t,O);case"regexp":return t=>A(t,RegExp);default:return ee}})();return n=>k3(n,r,`The value must be a ${t}.`)})(l.processor):l.processor,s=((t,r,n)=>{if(!M(r)){let o=k3(r,n);if(k2(o))return o.value;console.error(k1(`Invalid default value passed for the "${t}" option`,o))}})(t,l.default,i);n[t]={...l,default:s,processor:i},ez(o,t).orThunk(()=>ez(r,t)).each(r=>a(t,r,i))},isRegistered:l,get:t=>ez(o,t).orThunk(()=>ez(n,t).map(t=>t.default)).getOrUndefined(),set:(t,r)=>{if(l(t)){let o=n[t];return o.immutable?(console.error(`"${t}" is an immutable option and cannot be updated`),!1):a(t,r,o.processor)}return console.warn(`"${t}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:t=>{let r=l(t);return r&&delete o[t],r},isSet:t=>ej(o,t)}})(0,o),(t=>{let r=t.options.register;r("id",{processor:"string",default:t.id}),r("selector",{processor:"string"}),r("target",{processor:"object"}),r("suffix",{processor:"string"}),r("cache_suffix",{processor:"string"}),r("base_url",{processor:"string"}),r("referrer_policy",{processor:"string",default:""}),r("language_load",{processor:"boolean",default:!0}),r("inline",{processor:"boolean",default:!1}),r("iframe_attrs",{processor:"object",default:{}}),r("doctype",{processor:"string",default:"<!DOCTYPE html>"}),r("document_base_url",{processor:"string",default:t.documentBaseUrl}),r("body_id",{processor:ii(t,"tinymce"),default:"tinymce"}),r("body_class",{processor:ii(t),default:""}),r("content_security_policy",{processor:"string",default:""}),r("br_in_pre",{processor:"boolean",default:!0}),r("forced_root_block",{processor:t=>{let r=T(t)&&tr(t);return r?{value:t,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),r("forced_root_block_attrs",{processor:"object",default:{}}),r("newline_behavior",{processor:t=>{let r=el(["block","linebreak","invert","default"],t);return r?{value:t,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),r("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),r("no_newline_selector",{processor:"string",default:""}),r("keep_styles",{processor:"boolean",default:!0}),r("end_container_on_empty_block",{processor:t=>L(t)||T(t)?{valid:!0,value:t}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),r("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),r("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),r("font_size_classes",{processor:"string",default:""}),r("automatic_uploads",{processor:"boolean",default:!0}),r("images_reuse_filename",{processor:"boolean",default:!1}),r("images_replace_blob_uris",{processor:"boolean",default:!0}),r("icons",{processor:"string",default:""}),r("icons_url",{processor:"string",default:""}),r("images_upload_url",{processor:"string",default:""}),r("images_upload_base_path",{processor:"string",default:""}),r("images_upload_credentials",{processor:"boolean",default:!1}),r("images_upload_handler",{processor:"function"}),r("language",{processor:"string",default:"en"}),r("language_url",{processor:"string",default:""}),r("entity_encoding",{processor:"string",default:"named"}),r("indent",{processor:"boolean",default:!0}),r("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),r("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),r("indent_use_margin",{processor:"boolean",default:!1}),r("indentation",{processor:"string",default:"40px"}),r("content_css",{processor:t=>{let r=!1===t||T(t)||j(t,T);return r?T(t)?{value:es(t.split(","),e7),valid:r}:P(t)?{value:t,valid:r}:!1===t?{value:[],valid:r}:{value:t,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:i8(t)?[]:["default"]}),r("content_style",{processor:"string"}),r("content_css_cors",{processor:"boolean",default:!1}),r("font_css",{processor:t=>{let r=T(t)||j(t,T);return r?{value:P(t)?t:es(t.split(","),e7),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),r("inline_boundaries",{processor:"boolean",default:!0}),r("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),r("object_resizing",{processor:t=>{let r=L(t)||T(t);return r?!1===t||ie.isiPhone()||ie.isiPad()?{value:"",valid:r}:{value:!0===t?"table,img,figure.image,div,video,iframe":t,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!it}),r("resize_img_proportional",{processor:"boolean",default:!0}),r("event_root",{processor:"object"}),r("service_message",{processor:"string"}),r("theme",{processor:t=>!1===t||T(t)||U(t),default:"silver"}),r("theme_url",{processor:"string"}),r("formats",{processor:"object"}),r("format_empty_lines",{processor:"boolean",default:!1}),r("format_noneditable_selector",{processor:"string",default:""}),r("preview_styles",{processor:t=>{let r=!1===t||T(t);return r?{value:!1===t?"":t,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),r("custom_ui_selector",{processor:"string",default:""}),r("hidden_input",{processor:"boolean",default:!0}),r("submit_patch",{processor:"boolean",default:!0}),r("encoding",{processor:"string"}),r("add_form_submit_trigger",{processor:"boolean",default:!0}),r("add_unload_trigger",{processor:"boolean",default:!0}),r("custom_undo_redo_levels",{processor:"number",default:0}),r("disable_nodechange",{processor:"boolean",default:!1}),r("readonly",{processor:"boolean",default:!1}),r("editable_root",{processor:"boolean",default:!0}),r("plugins",{processor:"string[]",default:[]}),r("external_plugins",{processor:"object"}),r("forced_plugins",{processor:"string[]"}),r("model",{processor:"string",default:t.hasPlugin("rtc")?"plugin":"dom"}),r("model_url",{processor:"string"}),r("block_unsupported_drop",{processor:"boolean",default:!0}),r("visual",{processor:"boolean",default:!0}),r("visual_table_class",{processor:"string",default:"mce-item-table"}),r("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),r("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),r("setup",{processor:"function"}),r("init_instance_callback",{processor:"function"}),r("url_converter",{processor:"function",default:t.convertURL}),r("url_converter_scope",{processor:"object",default:t}),r("urlconverter_callback",{processor:"function"}),r("allow_conditional_comments",{processor:"boolean",default:!1}),r("allow_html_data_urls",{processor:"boolean",default:!1}),r("allow_svg_data_urls",{processor:"boolean"}),r("allow_html_in_named_anchor",{processor:"boolean",default:!1}),r("allow_script_urls",{processor:"boolean",default:!1}),r("allow_unsafe_link_target",{processor:"boolean",default:!1}),r("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),r("fix_list_elements",{processor:"boolean",default:!1}),r("preserve_cdata",{processor:"boolean",default:!1}),r("remove_trailing_brs",{processor:"boolean",default:!0}),r("pad_empty_with_br",{processor:"boolean",default:!1}),r("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),r("element_format",{processor:"string",default:"html"}),r("entities",{processor:"string"}),r("schema",{processor:"string",default:"html5"}),r("convert_urls",{processor:"boolean",default:!0}),r("relative_urls",{processor:"boolean",default:!0}),r("remove_script_host",{processor:"boolean",default:!0}),r("custom_elements",{processor:"string"}),r("extended_valid_elements",{processor:"string"}),r("invalid_elements",{processor:"string"}),r("invalid_styles",{processor:il}),r("valid_children",{processor:"string"}),r("valid_classes",{processor:il}),r("valid_elements",{processor:"string"}),r("valid_styles",{processor:il}),r("verify_html",{processor:"boolean",default:!0}),r("auto_focus",{processor:t=>T(t)||!0===t}),r("browser_spellcheck",{processor:"boolean",default:!1}),r("protect",{processor:"array"}),r("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),r("deprecation_warnings",{processor:"boolean",default:!0}),r("a11y_advanced_options",{processor:"boolean",default:!1}),r("api_key",{processor:"string"}),r("paste_block_drop",{processor:"boolean",default:!1}),r("paste_data_images",{processor:"boolean",default:!0}),r("paste_preprocess",{processor:"function"}),r("paste_postprocess",{processor:"function"}),r("paste_webkit_styles",{processor:"string",default:"none"}),r("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),r("paste_merge_formats",{processor:"boolean",default:!0}),r("smart_paste",{processor:"boolean",default:!0}),r("paste_as_text",{processor:"boolean",default:!1}),r("paste_tab_spaces",{processor:"number",default:4}),r("text_patterns",{processor:t=>j(t,O)||!1===t?{value:l7(!1===t?[]:t),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),r("text_patterns_lookup",{processor:t=>U(t)?{value:r=>l7(t(r)),valid:!0}:{valid:!1,message:"Must be a single function"},default:t=>[]}),r("noneditable_class",{processor:"string",default:"mceNonEditable"}),r("editable_class",{processor:"string",default:"mceEditable"}),r("noneditable_regexp",{processor:t=>j(t,io)?{value:t,valid:!0}:io(t)?{value:[t],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),r("table_tab_navigation",{processor:"boolean",default:!0}),r("highlight_on_focus",{processor:"boolean",default:!1}),r("xss_sanitization",{processor:"boolean",default:!0}),r("details_initial_state",{processor:t=>{let r=el(["inherited","collapsed","expanded"],t);return r?{value:t,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),r("details_serialized_state",{processor:t=>{let r=el(["inherited","collapsed","expanded"],t);return r?{value:t,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),r("init_content_sync",{processor:"boolean",default:!1}),r("newdocument_content",{processor:"string",default:""}),r("force_hex_color",{processor:t=>{let r=["always","rgb_only","off"],n=el(r,t);return n?{value:t,valid:n}:{valid:!1,message:`Must be one of: ${r.join(", ")}.`}},default:"off"}),r("sandbox_iframes",{processor:"boolean",default:!1}),r("convert_unsafe_embeds",{processor:"boolean",default:!1}),t.on("ScriptsLoaded",()=>{r("directionality",{processor:"string",default:aJ.isRtl()?"rtl":void 0}),r("placeholder",{processor:"string",default:ir.getAttrib(t.getElement(),"placeholder")})})})(this);let a=this.options.get;a("deprecation_warnings")&&(((t,r)=>{let n=b_(t),o=bN(r),a=o.length>0,l=n.length>0,i="mobile"===r.theme;(a||l||i)&&console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+(i?`

Themes:
- mobile`:"")+(a?`

Plugins:
- ${o.join("\n- ")}`:"")+(l?`

Options:
- ${n.join("\n- ")}`:""))})(r,o),((t,r)=>{let n=bk(t),o=bR(r),a=o.length>0,l=n.length>0;(a||l)&&console.warn("The following deprecated features are currently enabled but will be removed soon."+(a?`

Plugins:
- ${o.map(bA).join("\n- ")}`:"")+(l?`

Options:
- ${n.join("\n- ")}`:""))})(r,o));let l=a("suffix");l&&(n.suffix=l),this.suffix=n.suffix;let i=a("base_url");i&&n._setBaseUrl(i),this.baseUri=n.baseURI;let s=iP(this);s&&(aK.ScriptLoader._setReferrerPolicy(s),aV.DOM.styleSheetLoader._setReferrerPolicy(s));let d=sn(this);I(d)&&aV.DOM.styleSheetLoader._setContentCssCors(d),aZ.languageLoad=a("language_load"),aZ.baseURL=n.baseURL,this.setDirty(!1),this.documentBaseURI=new hx(ic(this),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=i8(this),this.hasVisual=si(this),this.shortcuts=new St(this),this.editorCommands=new kI(this),kL(this);let c=a("cache_suffix");c&&(tL.cacheSuffix=c.replace(/^[\?\&]+/,"")),this.ui={registry:Sr(),styleSheetLoader:void 0,show:H,hide:H,setEnabled:H,isEnabled:ee},this.mode=(t=>{let r=aY("design"),n=aY({design:{activate:H,deactivate:H,editorReadOnly:!1},readonly:{activate:H,deactivate:H,editorReadOnly:!0}});return t.serializer?k$(t):t.on("PreInit",()=>{k$(t)}),t.on("ShowCaret",r=>{kH(t)&&r.preventDefault()}),t.on("ObjectSelected",r=>{kH(t)&&r.preventDefault()}),{isReadOnly:()=>kH(t),set:o=>((t,r,n,o)=>{if(o!==n.get()){if(!ej(r,o))throw Error(`Editor mode '${o}' is invalid`);t.initialized?k5(t,n,r,o):t.on("init",()=>k5(t,n,r,o))}})(t,n.get(),r,o),get:()=>r.get(),register:(t,r)=>{n.set(((t,r,n)=>{if(el(k8,r))throw Error(`Cannot override default mode ${r}`);return{...t,[r]:{...n,deactivate:()=>{try{n.deactivate()}catch(t){console.error(`problem while deactivating editor mode ${r}:`,t)}}}}})(n.get(),t,r))}}})(this),n.dispatch("SetupEditor",{editor:this});let u=su(this);U(u)&&u.call(this,this)}render(){(t=>{let r=t.id;aJ.setCode(iD(t));let n=()=>{kd.unbind(window,"ready",n),t.render()};if(!aL.Event.domLoaded)return void kd.bind(window,"ready",n);if(!t.getElement())return;let o=rc(t.getElement()),a=re(o);t.on("remove",()=>{ec(o.dom.attributes,t=>t7(o,t.name)),t5(o,a)}),t.ui.styleSheetLoader=oJ.forElement(o,{contentCssCors:sn(t),referrerPolicy:iP(t)}),i8(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");let l=t.getElement().form||kd.getParent(r,"form");l&&(t.formElement=l,i5(t)&&!nL(t.getElement())&&(kd.insertAfter(kd.create("input",{type:"hidden",name:r}),r),t.hasHiddenInput=!0),t.formEventDelegate=r=>{t.dispatch(r.type,r)},kd.bind(l,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!i6(t)||l.submit.nodeType||l.submit.length||l._mceOldSubmit||(l._mceOldSubmit=l.submit,l.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),l._mceOldSubmit(l)))),t.windowManager=b$(t),t.notificationManager=bz(t),"xml"===t.options.get("encoding")&&t.on("GetContent",t=>{t.save&&(t.content=kd.encode(t.content))}),i9(t)&&t.on("submit",()=>{t.initialized&&t.save()}),i4(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),km(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return uG(this)}translate(t){return aJ.translate(t)}getParam(t,r,n){let o=this.options;return o.isRegistered(t)||(I(n)?o.register(t,{processor:n,default:r}):o.register(t,{processor:ee,default:r})),o.isSet(t)||M(r)?o.get(t):r}hasPlugin(t,r){return!(!el(so(this),t)||r&&void 0===bj.get(t))}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,r,n){this.editorCommands.addCommand(t,r,n)}addQueryStateHandler(t,r,n){this.editorCommands.addQueryStateHandler(t,r,n)}addQueryValueHandler(t,r,n){this.editorCommands.addQueryValueHandler(t,r,n)}addShortcut(t,r,n,o){this.shortcuts.add(t,r,n,o)}execCommand(t,r,n,o){return this.editorCommands.execCommand(t,r,n,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(Sn.show(this.getContainer()),Sn.hide(this.id)),this.load(),this.dispatch("show"))}hide(){this.hidden||(this.save(),this.inline?(this.getBody().contentEditable="false",this===this.editorManager.focusedEditor&&(this.editorManager.focusedEditor=null)):(Sn.hide(this.getContainer()),Sn.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,r){this.dispatch("ProgressState",{state:t,time:r})}load(t={}){let r=this.getElement();if(this.removed)return"";if(r){let n={...t,load:!0},o=nL(r)?r.value:r.innerHTML,a=this.setContent(o,n);return n.no_events||this.dispatch("LoadContent",{...n,element:r}),a}return""}save(t={}){let r=this,n=r.getElement();if(!n||!r.initialized||r.removed)return"";let o={...t,save:!0,element:n},a=r.getContent(o),l={...o,content:a};if(l.no_events||r.dispatch("SaveContent",l),"raw"===l.format&&r.dispatch("RawSaveContent",l),a=l.content,nL(n))n.value=a;else{!t.is_removing&&r.inline||(n.innerHTML=a);let o=Sn.getParent(r.id,"form");o&&Sa(o.elements,t=>t.name!==r.id||(t.value=a,!1))}return l.element=o.element=n=null,!1!==l.set_dirty&&r.setDirty(!1),a}setContent(t,r){return bv(this,t,r)}getContent(t){return((t,r={})=>{var n;return hU(t,(n=r.format?r.format:"html",{...r,format:n,get:!0,getInner:!0})).fold(W,r=>{let n=bi(t).editor.getContent(r);return hz(t,n,r)})})(this,t)}insertContent(t,r){r&&(t=So({content:t},r)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){void 0===t?bv(this,this.startContent,{format:"raw"}):bv(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){let r=!this.isNotDirty;this.isNotDirty=!t,t&&t!==r&&this.dispatch("dirty")}getContainer(){return this.container||(this.container=this.editorContainer||Sn.get(this.id+"_parent")),this.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Sn.get(this.id)),this.targetElm}getWin(){if(!this.contentWindow){let t=this.iframeElement;t&&(this.contentWindow=t.contentWindow)}return this.contentWindow}getDoc(){if(!this.contentDocument){let t=this.getWin();t&&(this.contentDocument=t.document)}return this.contentDocument}getBody(){var t,r;let n=this.getDoc();return null!==(r=null!==(t=this.bodyElement)&&void 0!==t?t:null==n?void 0:n.body)&&void 0!==r?r:null}convertURL(t,r,n){let o=this.options.get,a=sf(this);if(U(a))return a.call(this,t,n,!0,r);if(!o("convert_urls")||"link"===n||O(n)&&"LINK"===n.nodeName||0===t.indexOf("file:")||0===t.length)return t;let l=new hx(t);return"http"!==l.protocol&&"https"!==l.protocol&&""!==l.protocol?t:o("relative_urls")?this.documentBaseURI.toRelative(t):t=this.documentBaseURI.toAbsolute(t,o("remove_script_host"))}addVisual(t){((t,r)=>{bs(t).editor.addVisual(r)})(this,t)}setEditableRoot(t){this._editableRoot!==t&&(this._editableRoot=t,this.readonly||(this.getBody().contentEditable=String(this.hasEditableRoot()),this.nodeChanged()),((t,r)=>{t.dispatch("EditableRootStateChange",{state:r})})(this,t))}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){let{_selectionOverrides:r,editorUpload:n}=t,o=t.getBody(),a=t.getElement();o&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&I(null==a?void 0:a.nextSibling)&&bT.remove(a.nextSibling),(t=>{t.dispatch("remove")})(t),t.editorManager.remove(t),!t.inline&&o&&bT.setStyle(t.id,"display",t.orgDisplay),(t=>{t.dispatch("detach")})(t),bT.remove(t.getContainer()),bO(r),bO(n),t.destroy()}})(this)}destroy(t){((t,r)=>{let{selection:n,dom:o}=t;t.destroyed||(r||t.removed?(r||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),bO(n),bO(o)),(t=>{let r=t.formElement;r&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,delete r._mceOldSubmit),bT.unbind(r,"submit reset",t.formEventDelegate))})(t),(t=>{t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;let r=t.selection;if(r){let n=r.dom;t.selection=r.win=r.dom=n.doc=null}})(t),t.destroyed=!0):t.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}let Si=aV.DOM,Ss=tU.each,Sd,Sc=!1,Su=[],Sm=t=>{let r=t.type;Ss(Sh.get(),n=>{switch(r){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},Sf=t=>{if(t!==Sc){let r=aV.DOM;t?(r.bind(window,"resize",Sm),r.bind(window,"scroll",Sm)):(r.unbind(window,"resize",Sm),r.unbind(window,"scroll",Sm)),Sc=t}},Sg=t=>{let r=Su;return Su=em(Su,r=>t!==r),Sh.activeEditor===t&&(Sh.activeEditor=Su.length>0?Su[0]:null),Sh.focusedEditor===t&&(Sh.focusedEditor=null),r.length!==Su.length},Sp="CSS1Compat"!==document.compatMode,Sh={...kY,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.2",releaseDate:"2023-12-11",i18n:aJ,activeEditor:null,focusedEditor:null,setup(){let t="",r="",n=hx.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));let o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,r=o.suffix;else{let n=document.getElementsByTagName("script");for(let o=0;o<n.length;o++){let a=n[o].src||"";if(""===a)continue;let l=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){-1!==l.indexOf(".min")&&(r=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}if(!t&&document.currentScript){let n=document.currentScript.src;-1!==n.indexOf(".min")&&(r=".min"),t=n.substring(0,n.lastIndexOf("/"))}}this.baseURL=new hx(n).toAbsolute(t),this.documentBaseURL=n,this.baseURI=new hx(this.baseURL),this.suffix=r,this.on("AddEditor",Y(uV,this)),this.on("RemoveEditor",Y(uW,this))},overrideDefaults(t){let r=t.base_url;r&&this._setBaseUrl(r);let n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;let o=t.plugin_base_urls;void 0!==o&&eB(o,(t,r)=>{aZ.PluginManager.urls[r]=t})},init(t){let r;let n=this,o=tU.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=t=>{r=t},l=()=>{let r,i=0,s=[];Si.unbind(window,"ready",l),(r=>{let o=t.onpageload;o&&o.apply(n,[])})(),r=((t,r)=>{let n=[],o=U(r)?t=>ei(n,n=>r(n,t)):t=>el(n,t);for(let r=0,a=t.length;r<a;r++){let a=t[r];o(a)||n.push(a)}return n})(tL.browser.isIE()||tL.browser.isEdge()?(bY("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):Sp?(bY("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):T(t.selector)?Si.select(t.selector):I(t.target)?[t.target]:[]),tU.each(r,t=>{var r;(r=n.get(t.id))&&r.initialized&&!(r.getContainer()||r.getBody()).parentNode&&(Sg(r),r.unbindAllNativeEvents(),r.destroy(!0),r.removed=!0)}),0===(r=tU.grep(r,t=>!n.get(t.id))).length?a([]):Ss(r,l=>{let d;t.inline&&l.tagName.toLowerCase() in o?bY("Could not initialize inline editor on invalid inline target element",l):((t,o,l)=>{let d=new Sl(t,o,n);s.push(d),d.on("init",()=>{++i===r.length&&a(s)}),d.targetElm=d.targetElm||l,d.render()})(((d=l.id)||(d=ez(l,"name").filter(t=>!Si.get(t)).getOrThunk(Si.uniqueId),l.setAttribute("id",d)),d),t,l)})};return Si.bind(window,"ready",l),new Promise(t=>{r?t(r):a=r=>{t(r)}})},get(t){return 0==arguments.length?Su.slice(0):T(t)?eh(Su,r=>r.id===t).getOr(null):z(t)&&Su[t]?Su[t]:null},add(t){let r=this,n=r.get(t.id);return n===t||(null===n&&Su.push(t),Sf(!0),r.activeEditor=t,r.dispatch("AddEditor",{editor:t}),Sd||(Sd=t=>{let n=r.dispatch("BeforeUnload");if(n.returnValue)return t.preventDefault(),t.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",Sd))),t},createEditor(t,r){return this.add(new Sl(t,r,this))},remove(t){let r;let n=this;if(t){if(!T(t))return r=t,D(n.get(r.id))?null:(Sg(r)&&n.dispatch("RemoveEditor",{editor:r}),0===Su.length&&window.removeEventListener("beforeunload",Sd),r.remove(),Sf(Su.length>0),r);Ss(Si.select(t),t=>{(r=n.get(t.id))&&n.remove(r)})}else for(let t=Su.length-1;t>=0;t--)n.remove(Su[t])},execCommand(t,r,n){var o;let a=O(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(t){case"mceAddEditor":return this.get(a)||new Sl(a,n.options,this).render(),!0;case"mceRemoveEditor":{let t=this.get(a);return t&&t.remove(),!0}case"mceToggleEditor":{let t=this.get(a);return t?t.isHidden()?t.show():t.hide():this.execCommand("mceAddEditor",!1,n),!0}}return!!this.activeEditor&&this.activeEditor.execCommand(t,r,n)},triggerSave:()=>{Ss(Su,t=>{t.save()})},addI18n:(t,r)=>{aJ.add(t,r)},translate:t=>aJ.translate(t),setActive(t){let r=this.activeEditor;this.activeEditor!==t&&(r&&r.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:r})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new hx(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new hx(this.baseURL)}};Sh.setup();let Sb=(()=>{let t=a1();return{FakeClipboardItem:t=>({items:t,types:eT(t),getType:r=>ez(t,r).getOrUndefined()}),write:r=>{t.set(r)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),Sv=Math.min,Sy=Math.max,SC=Math.round,SE=(t,r,n)=>{let o=r.x,a=r.y,l=t.w,i=t.h,s=r.w,d=r.h,c=(n||"").split("");return"b"===c[0]&&(a+=d),"r"===c[1]&&(o+=s),"c"===c[0]&&(a+=SC(d/2)),"c"===c[1]&&(o+=SC(s/2)),"b"===c[3]&&(a-=i),"r"===c[4]&&(o-=l),"c"===c[3]&&(a-=SC(i/2)),"c"===c[4]&&(o-=SC(l/2)),Sw(o,a,l,i)},Sw=(t,r,n,o)=>({x:t,y:r,w:n,h:o}),Sx=(()=>{let t={},r={},n={};return{load:(n,o)=>{let a=`Script at URL "${o}" failed to load`,l=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{let i=new Promise((t,i)=>{let s=((t,r,n=1e3)=>{let o=!1,a=null,l=t=>(...r)=>{o||(o=!0,null!==a&&(clearTimeout(a),a=null),t.apply(null,r))},i=l(t),s=l(r);return{start:(...t)=>{o||null!==a||(a=setTimeout(()=>s.apply(null,t),n))},resolve:i,reject:s}})(t,i);r[n]=s.resolve,aK.ScriptLoader.loadScript(o).then(()=>s.start(l),()=>s.reject(a))});return t[n]=i,i}},add:(o,a)=>{void 0!==r[o]&&(r[o](a),delete r[o]),t[o]=Promise.resolve(a),n[o]=a},has:t=>t in n,get:t=>n[t],unload:r=>{delete t[r]}}})();try{let t="__storage_test__";(n=window.localStorage).setItem(t,t),n.removeItem(t)}catch(t){n=(()=>{let t={},r=[],n={getItem:r=>t[r]||null,setItem:(n,o)=>{r.push(n),t[n]=String(o)},key:t=>r[t],removeItem:n=>{r=r.filter(t=>t===n),delete t[n]},clear:()=>{r=[],t={}},length:0};return Object.defineProperty(n,"length",{get:()=>r.length,configurable:!1,enumerable:!1}),n})()}let S_={geom:{Rect:{inflate:(t,r,n)=>Sw(t.x-r,t.y-n,t.w+2*r,t.h+2*n),relativePosition:SE,findBestRelativePosition:(t,r,n,o)=>{for(let a=0;a<o.length;a++){let l=SE(t,r,o[a]);if(l.x>=n.x&&l.x+l.w<=n.w+n.x&&l.y>=n.y&&l.y+l.h<=n.h+n.y)return o[a]}return null},intersect:(t,r)=>{let n=Sy(t.x,r.x),o=Sy(t.y,r.y),a=Sv(t.x+t.w,r.x+r.w),l=Sv(t.y+t.h,r.y+r.h);return a-n<0||l-o<0?null:Sw(n,o,a-n,l-o)},clamp:(t,r,n)=>{let o=t.x,a=t.y,l=t.x+t.w,i=t.y+t.h,s=r.x+r.w,d=r.y+r.h,c=Sy(0,r.x-o),u=Sy(0,r.y-a),m=Sy(0,l-s),f=Sy(0,i-d);return o+=c,a+=u,n&&(l+=c,i+=u,o-=m,a-=f),Sw(o,a,(l-=m)-o,(i-=f)-a)},create:Sw,fromClientRect:t=>Sw(t.left,t.top,t.width,t.height)}},util:{Delay:uz,Tools:tU,VK:cU,URI:hx,EventDispatcher:kW,Observable:kY,I18n:aJ,LocalStorage:n,ImageUploader:t=>{let r=b2(t,bJ());return{upload:(n,o=!0)=>r.upload(n,o?b1(t):void 0)}}},dom:{EventUtils:aL,TreeWalker:nx,TextSeeker:lu,DOMUtils:aV,ScriptLoader:aK,RangeUtils:ui,Serializer:bb,StyleSheetLoader:oQ,ControlSelection:cq,BookmarkManager:cO,Selection:bg,Event:aL.Event},html:{Styles:aS,Entities:aa,Node:mn,Schema:ah,DomParser:hF,Writer:mE,Serializer:mw},Env:tL,AddOnManager:aZ,Annotator:cT,Formatter:vn,UndoManager:va,EditorCommands:kI,WindowManager:b$,NotificationManager:bz,EditorObservable:kZ,Shortcuts:St,Editor:Sl,FocusManager:uU,EditorManager:Sh,DOM:aV.DOM,ScriptLoader:aK.ScriptLoader,PluginManager:bj,ThemeManager:bH,ModelManager:bP,IconManager:bB,Resource:Sx,FakeClipboard:Sb,trim:tU.trim,isArray:tU.isArray,is:tU.is,toArray:tU.toArray,makeMap:tU.makeMap,each:tU.each,map:tU.map,grep:tU.grep,inArray:tU.inArray,extend:tU.extend,walk:tU.walk,resolve:tU.resolve,explode:tU.explode,_addCacheSuffix:tU._addCacheSuffix},Sk=tU.extend(Sh,S_);window.tinymce=Sk,window.tinyMCE=Sk,(t=>{if("object"==typeof module)try{module.exports=t}catch(t){}})(Sk)}();